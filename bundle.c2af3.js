!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s="mdyV")}({"+bXj":function(e,t,n){"use strict";(function(e){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=n("Uvu/"),a=n("yTKo"),s=n("hosL"),c=n("UQAG"),u=n("8Jek"),l=n.n(u),p=n("0odJ"),f=n("D9g8"),d=n("S07r"),h=n("h2tO"),v=n("hQme"),_=function(t){function n(e){var n;return(n=t.call(this,e)||this).onAddConvo=n.onAddConvo.bind(r(n)),n.onEditConvo=n.onEditConvo.bind(r(n)),n.onConvoEditKeyPress=n.onConvoEditKeyPress.bind(r(n)),n.onConvoEditBlur=n.onConvoEditBlur.bind(r(n)),n.editedConvoRef=Object(s.createRef)(),n}var c,u;u=t,(c=n).prototype=Object.create(u.prototype),c.prototype.constructor=c,o(c,u);var p=n.prototype;return p.onAddConvo=function(){this.props.createConvo(),this.props.setEditedConvo()},p.onClickConvo=function(e){this.props.setCurrentConvoIndex(e)},p.onEditConvo=function(e,t){t.stopPropagation(),this.props.setEditedConvo(e)},p.onDeleteConvo=function(e,t){t.stopPropagation(),this.props.deleteConvo(e)},p.onConvoEditKeyPress=function(e){"Enter"===e.code&&this.props.setEditedConvo(null)},p.onConvoEditBlur=function(){this.props.setEditedConvo(null)},p.updateConvoName=function(e,t){this.props.setConvoName(e,t.target.value)},p.componentDidUpdate=function(e){this.props.editedConvoID&&e.editedConvoID!==this.props.editedConvoID&&this.editedConvoRef.current&&(this.editedConvoRef.current.focus(),this.editedConvoRef.current.select())},p.render=function(){var t=this,n=this.props,r=n.currentConvoIndex;return e("div",{className:i.a["convo-list"]},e("div",{className:i.a.convos},n.convos.map((function(n,o){var s;return e("div",{className:l()(i.a.convo,(s={},s[i.a.active]=r===o,s)),key:n.id,onClick:t.onClickConvo.bind(t,o)},e("div",{className:i.a["convo-name"]},t.props.editedConvoID===n.id?e("input",{type:"text",value:n.name,onInput:t.updateConvoName.bind(t,n.id),onKeyPress:t.onConvoEditKeyPress,onBlur:t.onConvoEditBlur,ref:t.editedConvoRef}):n.name),e("div",{className:l()(i.a.edit,a.a.icon,a.a["icon-button"],a.a.edit),onClick:t.onEditConvo.bind(t,n.id)}),e("div",{className:l()(i.a.delete,a.a.icon,a.a["icon-button"],a.a.delete),onClick:t.onDeleteConvo.bind(t,o)}))}))),e("div",{className:i.a["add-convo-wrapper"]},e("button",{onClick:this.onAddConvo},"Add Convo")))},n}(s.Component);t.a=Object(c.connect)(["convos","currentConvoIndex","editedConvoID"],{createConvo:p.a,setCurrentConvoIndex:h.a,setEditedConvo:v.a,setConvoName:d.a,deleteConvo:f.a})(_)}).call(this,n("hosL").h)},"/f2m":function(e,t){"use strict";t.a=function(e,t){return{convos:t.convos,chars:t.chars,currentConvoIndex:-1,currentCharID:null,editedMessageID:null,editedConvoID:null,editedCharID:null,toBeReplacedCharID:null}}},"04Fd":function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("5x3I"),s=n("0odJ"),c=n("2hU4");t.a=function(e,t,n){return-1===e.currentConvoIndex&&(e=o(o({},e),Object(s.a)(e))),null===e.currentCharID&&(e=o(o({},e),Object(c.a)(e))),o(o({},e),{},{convos:e.convos.map((function(r,i){if(i!==e.currentConvoIndex)return r;var s=r.messages.slice(0),c={authorID:e.currentCharID,contents:t,id:Object(a.a)()};return"number"==typeof n?s.splice(n,0,c):s.push(c),o(o({},r),{},{messages:s})}))})}},"0odJ":function(e,t,n){"use strict";var r=n("5x3I");t.a=function(e){return{convos:[].concat(e.convos,[{messages:[],id:Object(r.a)(),name:"New Convo"}]),currentConvoIndex:e.convos.length}}},"2hU4":function(e,t,n){"use strict";var r=n("5x3I");t.a=function(e,t){void 0===t&&(t="New Character");var n=Object(r.a)();return{chars:[].concat(e.chars,[{id:n,name:t,color:16777215}]),currentCharID:n}}},"3Ov2":function(){},"3Ufl":function(e,t){"use strict";t.a={row:"row__JJVPS",label:"label__1esP_"}},"4HEG":function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e,t){return{convos:e.convos.map((function(n,o){return o!==e.currentConvoIndex?n:r(r({},n),{},{messages:n.messages.filter((function(e,n){return n!==t}))})}))}}},"4omB":function(e,t,n){"use strict";(function(e){var r=n("ZQP2"),o=n("yTKo"),i=n("UQAG"),a=n("8Jek"),s=n.n(a),c=n("omBr"),u=n("s3hk"),l=n("ZKFM");t.a=Object(i.connect)(["insertAboveMessageID"],{setInsertAboveMessageID:l.a})((function(t){var n=t.messages,i=t.insertAboveMessageID,a=t.setInsertAboveMessageID,l=[];if(n)for(var p=0;p<n.length;p++){var f=n[p];i===f.id&&l.push(e("div",{className:r.a["insert-box"]},e("div",{className:r.a["close-wrapper"]},e("div",{className:r.a["close-positioner"]},e("div",{className:s()(o.a.icon,o.a["icon-button"],o.a.delete),title:"Close",onClick:function(){return a(null)}}))),e("div",{className:r.a["command-box-wrapper"]},e(c.a,{beforeMessage:p})))),l.push(e(u.a,{message:f,key:f.id,index:p}))}return e("div",{className:r.a.messages},e("div",{className:r.a["messages-inner"]},l))}))}).call(this,n("hosL").h)},"5/DW":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(\.\d+)?([zZ]|((\+|-)(\d{2}):(\d{2})))$/;t.default=function(e){var t=e.match(n);if(null===t)return!1;var o=parseInt(t[1],10),i=parseInt(t[2],10),a=parseInt(t[3],10),s=parseInt(t[4],10),c=parseInt(t[5],10),u=parseInt(t[6],10);return!(i>12)&&(!(a>function(e,t){if(2===t)return(n=e)%4!=0||n%100==0&&n%400!=0?28:29;var n;return r[t]}(o,i))&&(!(s>23)&&(!(c>59)&&!(u>60))))};var r=[0,31,0,31,30,31,30,31,31,30,31,30,31]},"5x3I":function(e,t){"use strict";var n=new Uint32Array(2);t.a=function(){return crypto.getRandomValues(n),("0000000"+n[0].toString(32)).slice(-7)+("0000000"+n[1].toString(32)).slice(-7)}},"7Pee":function(e,t){"use strict";t.a=function(e,t){return{editedCharID:t}}},"7sUR":function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e,t,n){for(var o=0;o<e.convos.length;o++)for(var i=e.convos[o],a=0;a<i.messages.length;a++){var s=i.messages[a];if(s.id===t){var c=e.convos.slice(0),u=i.messages.slice(0);return u[a]=r(r({},s),{},{contents:n}),c[o]=r(r({},i),{},{messages:u}),{convos:c}}}}},"8Jek":function(e,t){var n;!function(){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var a=r.apply(null,n);a&&e.push(a)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var s in n)o.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}var o={}.hasOwnProperty;e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},"8pl+":function(e,t){"use strict";t.a=function(e,t){return{currentCharID:t}}},"9KuC":function(e,t,n){"use strict";var r=n("fdQA"),o={properties:{version:{type:"uint32"},projectName:{type:"string"},convos:{elements:{properties:{messages:{elements:{properties:{authorID:{type:"string"},contents:{type:"string"},id:{type:"string"}}}},id:{type:"string"},name:{type:"string"}}}},chars:{elements:{properties:{id:{type:"string"},name:{type:"string"},color:{type:"uint32"}}}}}};t.a=function(e){return Object(r.validate)(o,e)}},BuAb:function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return"ref"in e}function i(e){return"enum"in e}function a(e){return"elements"in e}function s(e){return"properties"in e||"optionalProperties"in e}function c(e){return"values"in e}function u(e){return"discriminator"in e}var l=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.isSchema=t.isValidSchema=t.isDiscriminatorForm=t.isValuesForm=t.isPropertiesForm=t.isElementsForm=t.isEnumForm=t.isTypeForm=t.isRefForm=t.isEmptyForm=void 0,t.isEmptyForm=function(e){var t=l(e,["definitions","nullable","metadata"]);return 0===Object.keys(t).length},t.isRefForm=o,t.isTypeForm=function(e){return"type"in e},t.isEnumForm=i,t.isElementsForm=a,t.isPropertiesForm=s,t.isValuesForm=c,t.isDiscriminatorForm=u,t.isValidSchema=function e(t,n){if(void 0===n&&(n=t),void 0!==t.definitions){if(n!==t)return!1;for(var r=0,l=Object.values(t.definitions);r<l.length;r++){if(!e(l[r],n))return!1}}if(o(t)&&!(t.ref in(n.definitions||{})))return!1;if(i(t)){if(0===t.enum.length)return!1;if(t.enum.length!==new Set(t.enum).size)return!1}if(a(t))return e(t.elements,n);if(s(t)){for(var p=0,f=Object.values(t.properties||{});p<f.length;p++){if(!e(f[p],n))return!1}for(var d=0,h=Object.values(t.optionalProperties||{});d<h.length;d++){if(!e(h[d],n))return!1}for(var v=0,_=Object.keys(t.properties||{});v<_.length;v++){if(_[v]in(t.optionalProperties||{}))return!1}}if(c(t))return e(t.values,n);if(u(t))for(var m=0,b=Object.values(t.mapping);m<b.length;m++){var y=b[m];if(!e(y,n)||!s(y))return!1;if(y.nullable)return!1;if(t.discriminator in(y.properties||{}))return!1;if(t.discriminator in(y.optionalProperties||{}))return!1}return!0};var p=[[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!0,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!0,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!0,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!0,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!1,!0,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!0,!1,!1,!1],[!1,!1,!1,!1,!0,!0,!0,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!0,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!0,!0]],f=["boolean","float32","float64","int8","uint8","int16","uint16","int32","uint32","string","timestamp"];t.isSchema=function e(t){if("object"!=typeof t||Array.isArray(t)||null===t)return!1;for(var r,o=t.definitions,i=void 0===o?void 0:o,a=t.nullable,s=void 0===a?void 0:a,c=t.metadata,u=void 0===c?void 0:c,d=t.ref,h=void 0===d?void 0:d,v=t.type,_=void 0===v?void 0:v,m=t.enum,b=void 0===m?void 0:m,y=t.elements,g=void 0===y?void 0:y,C=t.properties,O=void 0===C?void 0:C,j=t.optionalProperties,D=void 0===j?void 0:j,P=t.additionalProperties,I=void 0===P?void 0:P,w=t.values,k=void 0===w?void 0:w,x=t.discriminator,E=void 0===x?void 0:x,N=t.mapping,S=void 0===N?void 0:N,A=l(t,["definitions","nullable","metadata","ref","type","enum","elements","properties","optionalProperties","additionalProperties","values","discriminator","mapping"]),M=[void 0!==h,void 0!==_,void 0!==b,void 0!==g,void 0!==O,void 0!==D,void 0!==I,void 0!==k,void 0!==E,void 0!==S],R=!1,L=n(p);!(r=L()).done;){R=R||r.value.every((function(e,t){return e===M[t]}))}if(!R)return!1;if(void 0!==i){if("object"!=typeof i||Array.isArray(i)||null===i)return!1;for(var T=0,U=Object.values(i);T<U.length;T++){if(!e(U[T]))return!1}}if(void 0!==s&&"boolean"!=typeof s)return!1;if(void 0!==u&&("object"!=typeof u||Array.isArray(u)||null===u))return!1;if(void 0!==h&&"string"!=typeof h)return!1;if(void 0!==_&&("string"!=typeof _||!f.includes(_)))return!1;if(void 0!==b){if(!Array.isArray(b))return!1;if(!b.every((function(e){return"string"==typeof e})))return!1}if(void 0!==g&&!e(g))return!1;if(void 0!==O){if("object"!=typeof O||Array.isArray(O)||null===O)return!1;for(var F=0,B=Object.values(O);F<B.length;F++){if(!e(B[F]))return!1}}if(void 0!==D){if("object"!=typeof D||Array.isArray(D)||null===D)return!1;for(var K=0,W=Object.values(D);K<W.length;K++){if(!e(W[K]))return!1}}if(void 0!==I&&"boolean"!=typeof I)return!1;if(void 0!==k&&!e(k))return!1;if(void 0!==E&&"string"!=typeof E)return!1;if(void 0!==S){if("object"!=typeof S||Array.isArray(S)||null===S)return!1;for(var Q=0,G=Object.values(S);Q<G.length;Q++){if(!e(G[Q]))return!1}}return 0===Object.keys(A).length}},CPM1:function(e,t){"use strict";function n(e,t){for(var n in t)e[n]=t[n];return e}t.a=function(e){function t(e){for(var t=[],n=0;n<o.length;n++)o[n]===e?e=null:t.push(o[n]);o=t}function r(t,r,i){e=r?t:n(n({},e),t);for(var a=o,s=0;s<a.length;s++)a[s](e,i)}var o=[];return e=e||{},{action:function(t){function n(e){r(e,!1,t)}return function(){for(var r=arguments,o=[e],i=0;i<arguments.length;i++)o.push(r[i]);var a=t.apply(this,o);if(null!=a)return a.then?a.then(n):n(a)}},setState:r,subscribe:function(e){return o.push(e),function(){t(e)}},unsubscribe:t,getState:function(){return e}}}},"CR+S":function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e,t,n){return{chars:e.chars.map((function(e){return e.id!==t?e:r(r({},e),n)}))}}},D9g8:function(e,t){"use strict";t.a=function(e,t){return{convos:e.convos.filter((function(e,n){return n!==t})),currentConvoIndex:1===e.convos.length?-1:e.currentConvoIndex===e.convos.length-1?e.currentConvoIndex-1:e.currentConvoIndex}}},"FNu+":function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,u(e,t)}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){function n(){return s(e,arguments,l(this).constructor)}if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)})(e)}function s(){return(s=c()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&u(o,n.prototype),o}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n,o){if(!t.nullable||null!==n)if(g.isRefForm(t)){if(e.schemaTokens.length===e.config.maxDepth)throw new C;e.schemaTokens.push(["definitions",t.ref]),p(e,e.root.definitions[t.ref],n),e.schemaTokens.pop()}else if(g.isTypeForm(t)){switch(v(e,"type"),t.type){case"boolean":"boolean"!=typeof n&&m(e);break;case"float32":case"float64":"number"!=typeof n&&m(e);break;case"int8":f(e,n,-128,127);break;case"uint8":f(e,n,0,255);break;case"int16":f(e,n,-32768,32767);break;case"uint16":f(e,n,0,65535);break;case"int32":f(e,n,-2147483648,2147483647);break;case"uint32":f(e,n,0,4294967295);break;case"string":"string"!=typeof n&&m(e);break;case"timestamp":"string"!=typeof n?m(e):y.default(n)||m(e)}_(e)}else if(g.isEnumForm(t))v(e,"enum"),"string"==typeof n&&t.enum.includes(n)||m(e),_(e);else if(g.isElementsForm(t)){if(v(e,"elements"),Array.isArray(n))for(var i,a=r(n.entries());!(i=a()).done;){var s=i.value,c=s[1];d(e,s[0].toString()),p(e,t.elements,c),h(e)}else m(e);_(e)}else if(g.isPropertiesForm(t))if("object"!=typeof n||null===n||Array.isArray(n))v(e,void 0!==t.properties?"properties":"optionalProperties"),m(e),_(e);else{if(void 0!==t.properties){v(e,"properties");for(var u=0,l=Object.entries(t.properties);u<l.length;u++){var b=l[u],O=b[0],j=b[1];v(e,O),n.hasOwnProperty(O)?(d(e,O),p(e,j,n[O]),h(e)):m(e),_(e)}_(e)}if(void 0!==t.optionalProperties){v(e,"optionalProperties");for(var D=0,P=Object.entries(t.optionalProperties);D<P.length;D++){var I=P[D],w=I[0],k=I[1];v(e,w),n.hasOwnProperty(w)&&(d(e,w),p(e,k,n[w]),h(e)),_(e)}_(e)}if(!0!==t.additionalProperties)for(var x=0,E=Object.keys(n);x<E.length;x++){var N=E[x];t.properties&&N in t.properties||t.optionalProperties&&N in t.optionalProperties||N===o||(d(e,N),m(e),h(e))}}else if(g.isValuesForm(t)){if(v(e,"values"),"object"!=typeof n||null===n||Array.isArray(n))m(e);else for(var S=0,A=Object.entries(n);S<A.length;S++){var M=A[S],R=M[1];d(e,M[0]),p(e,t.values,R),h(e)}_(e)}else if(g.isDiscriminatorForm(t))if("object"!=typeof n||null===n||Array.isArray(n))v(e,"discriminator"),m(e),_(e);else if(n.hasOwnProperty(t.discriminator)){var L=n[t.discriminator];"string"==typeof L?L in t.mapping?(v(e,"mapping"),v(e,L),p(e,t.mapping[L],n,t.discriminator),_(e),_(e)):(v(e,"mapping"),d(e,t.discriminator),m(e),h(e),_(e)):(v(e,"discriminator"),d(e,t.discriminator),m(e),h(e),_(e))}else v(e,"discriminator"),m(e),_(e)}function f(e,t,n,r){("number"!=typeof t||!Number.isInteger(t)||t<n||t>r)&&m(e)}function d(e,t){e.instanceTokens.push(t)}function h(e){e.instanceTokens.pop()}function v(e,t){e.schemaTokens[e.schemaTokens.length-1].push(t)}function _(e){e.schemaTokens[e.schemaTokens.length-1].pop()}function m(e){if(e.errors.push({instancePath:[].concat(e.instanceTokens),schemaPath:[].concat(e.schemaTokens[e.schemaTokens.length-1])}),e.errors.length===e.config.maxErrors)throw new O}var b=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=t.MaxDepthExceededError=void 0;var y=b(n("5/DW")),g=n("BuAb"),C=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t}(a(Error));t.MaxDepthExceededError=C;var O=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t}(a(Error));t.validate=function(e,t,n){var r={errors:[],instanceTokens:[],schemaTokens:[[]],root:e,config:n||{maxDepth:0,maxErrors:0}};try{p(r,e,t)}catch(e){if(!(e instanceof O))throw e}return r.errors}},"GDN+":function(e,t,n){"use strict";(function(e){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=n("MECP"),a=n("hosL"),s=n("UQAG"),c=n("omBr"),u=n("cuUh"),l=n("KSen"),p=n("+bXj"),f=n("4omB"),d=n("VqH4"),h=n("dnxQ"),v=n("nVVG"),_=n("7Pee"),m=n("b0Ln"),b=function(t){function n(e){var n;return(n=t.call(this,e)||this).closeCharacterSettings=n.closeCharacterSettings.bind(r(n)),n.closeCharacterReplaceDialog=n.closeCharacterReplaceDialog.bind(r(n)),n}var a,s;s=t,(a=n).prototype=Object.create(s.prototype),a.prototype.constructor=a,o(a,s);var _=n.prototype;return _.closeCharacterSettings=function(){this.props.setEditedCharacterID(null)},_.closeCharacterReplaceDialog=function(){this.props.setToBeReplacedCharacterID(null)},_.render=function(){var t=this.props,n=t.convos,r=t.currentConvoIndex,o=t.editedCharID,a=t.toBeReplacedCharID;return e("div",{className:i.a.app},e("div",{className:i.a["project-bar-pane"]},e(h.a,null)),e("div",{className:i.a["app-pane"]},e("div",{className:i.a["convos-pane"]},e(p.a,null)),e("div",{className:i.a["messages-pane"]},e(f.a,{messages:-1!==r?n[r].messages:null}),e("div",{className:i.a["command-box-pane"]},e(c.a,null))),e("div",{className:i.a["characters-pane"]},e(u.a,null))),null!==o?e(d.a,{onClose:this.closeCharacterSettings},e(l.a,null)):null,null!==a?e(d.a,{onClose:this.closeCharacterReplaceDialog},e(v.a,null)):null)},n}(a.Component);t.a=Object(s.connect)(["convos","currentConvoIndex","editedCharID","toBeReplacedCharID"],{setEditedCharacterID:_.a,setToBeReplacedCharacterID:m.a})(b)}).call(this,n("hosL").h)},GZ11:function(e,t){"use strict";t.a={"searchable-menu":"searchable-menu__2ejBr","search-bar":"search-bar___gyq1",items:"items__3X6Q4",item:"item__1G1Qx"}},ILzg:function(e,t){"use strict";t.a=function(e){return JSON.stringify({projectName:e.projectName,version:e.version,convos:e.convos,chars:e.chars})}},JNjM:function(e,t){"use strict";t.a={"command-box":"command-box__1-HCN"}},KSen:function(e,t,n){"use strict";(function(e){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=n("Rb1n"),a=n("hosL"),s=n("UQAG"),c=n("CR+S"),u=n("UCOg"),l=function(t){function n(e){var n;return(n=t.call(this,e)||this).onCharacterNameChange=n.onCharacterNameChange.bind(r(n)),n.onCharacterColorChange=n.onCharacterColorChange.bind(r(n)),n}var a,s;s=t,(a=n).prototype=Object.create(s.prototype),a.prototype.constructor=a,o(a,s);var c=n.prototype;return c.onCharacterNameChange=function(e){this.props.updateCharacter(this.props.editedCharID,{name:e.target.value})},c.onCharacterColorChange=function(e){this.props.updateCharacter(this.props.editedCharID,{color:parseInt(e.target.value.slice(1),16)})},c.render=function(){var t=this.props,n=t.editedCharID,r=t.chars.find((function(e){return e.id===n}));return e("div",{className:i.a["character-settings"]},e("div",{className:i.a.row},e("div",{className:i.a.label},"Character name"),e("input",{type:"text",className:i.a.control,value:r.name,onChange:this.onCharacterNameChange})),e("div",{className:i.a.row},e("div",{className:i.a.label},"Character color"),e("input",{type:"color",className:i.a.control,value:Object(u.a)(r.color),onChange:this.onCharacterColorChange})))},n}(a.Component);t.a=Object(s.connect)(["chars","editedCharID"],{updateCharacter:c.a})(l)}).call(this,n("hosL").h)},MECP:function(e,t){"use strict";t.a={app:"app__3v5cP","app-pane":"app-pane__3z7Kq","convos-pane":"convos-pane__3jigy","messages-pane":"messages-pane__2RWKi","command-box-pane":"command-box-pane__2Jtnd","characters-pane":"characters-pane__2IW0B"}},PMWH:function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e,t,n){return{convos:e.convos.map((function(e){return r(r({},e),{},{messages:e.messages.map((function(e){return e.authorID!==t?e:r(r({},e),{},{authorID:n})}))})}))}}},QfWi:function(e,t,n){"use strict";n.r(t),function(e){n("3Ov2");var r=n("CPM1"),o=n("UQAG"),i=n("GDN+"),a=Object(r.a)(function(){var e=localStorage.getItem("store");if(!e)return null;var t=JSON.parse(e);return 1!==t.version?null:t}()||{version:1,projectName:"New Project",convos:[],chars:[],currentConvoIndex:-1,currentCharID:null,editedMessageID:null,editedConvoID:null,editedCharID:null,toBeReplacedCharID:null,insertAboveMessageID:null});a.subscribe((function(e){localStorage.setItem("store",JSON.stringify(e))}));t.default=function(){return e(o.Provider,{store:a},e(i.a,null))}}.call(this,n("hosL").h)},Rb1n:function(e,t){"use strict";t.a={"character-settings":"character-settings__uP29I",row:"row__1cd3k",label:"label__7PH9z",control:"control__3kM2c"}},RtvN:function(e,t){"use strict";t.a=function(e,t,n){var r=e.chars.findIndex((function(e){return e.id===t}));return{chars:e.chars.filter((function(e){return e.id!==t})),currentCharID:n||(1===e.chars.length?null:r===e.chars.length-1?e.chars[e.chars.length-2].id:e.chars[r+1].id)}}},S07r:function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e,t,n){return{convos:e.convos.map((function(e){return e.id!==t?e:r(r({},e),{},{name:n})}))}}},SQ3b:function(e,t){"use strict";t.a={message:"message__1Gv6N",buttons:"buttons__2O_FT",contents:"contents__2Y7XI",author:"author__2YOzN","message-edit-wrapper":"message-edit-wrapper__2wEXY","message-edit-area":"message-edit-area__1C4xo"}},UCOg:function(e,t){"use strict";t.a=function(e){return"#"+("000000"+e.toString(16)).slice(-6)}},UQAG:function(e,t,n){function r(e,t){for(var n in t)e[n]=t[n];return e}function o(e){this.getChildContext=function(){return{store:e.store}}}var i=n("hosL");o.prototype.render=function(e){return e.children&&e.children[0]||e.children},t.connect=function(e,t){var n;return"function"!=typeof e&&("string"==typeof(n=e||{})&&(n=n.split(/\s*,\s*/)),e=function(e){for(var t={},r=0;r<n.length;r++)t[n[r]]=e[n[r]];return t}),function(n){function o(o,a){var s=this,c=a.store,u=e(c?c.getState():{},o),l=t?function(e,t){"function"==typeof e&&(e=e(t));var n={};for(var r in e)n[r]=t.action(e[r]);return n}(t,c):{store:c},p=function(){var t=e(c?c.getState():{},o);for(var n in t)if(t[n]!==u[n])return u=t,s.setState({});for(var r in u)if(!(r in t))return u=t,s.setState({})};this.componentWillReceiveProps=function(e){o=e,p()},this.componentDidMount=function(){c.subscribe(p)},this.componentWillUnmount=function(){c.unsubscribe(p)},this.render=function(e){return i.h(n,r(r(r({},l),e),u))}}return(o.prototype=new i.Component).constructor=o}},t.Provider=o},"Uvu/":function(e,t){"use strict";t.a={"convo-list":"convo-list__2Fe7s",convos:"convos__2WWx_",convo:"convo__I4Lqx",active:"active__1seF6","convo-name":"convo-name__2gZc2","add-convo-wrapper":"add-convo-wrapper__3-zDP"}},VWK7:function(e,t){"use strict";t.a={divider:"divider__24wuz",character:"character__xFcjl",active:"active__cphkj","character-name":"character-name__1D7tD"}},VqH4:function(e,t,n){"use strict";(function(e,r){var o=n("q6Rg");t.a=function(t){var n=t.children;return e(r,null,e("div",{className:o.a["modal-bg"],onClick:t.onClose}),e("div",{className:o.a["modal-positioner"]},e("div",{className:o.a.modal},n)))}}).call(this,n("hosL").h,n("hosL").Fragment)},ZKFM:function(e,t){"use strict";t.a=function(e,t){return{insertAboveMessageID:t}}},ZQP2:function(e,t){"use strict";t.a={messages:"messages__TwUxC","messages-inner":"messages-inner__2L45y","insert-box":"insert-box__2EmIz","close-wrapper":"close-wrapper__1AM-W","close-positioner":"close-positioner__1_7T5","command-box-wrapper":"command-box-wrapper__5ml5b"}},b0Ln:function(e,t){"use strict";t.a=function(e,t){return{toBeReplacedCharID:t}}},cuUh:function(e,t,n){"use strict";(function(e,r){function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=n("VWK7"),u=n("yTKo"),l=n("hosL"),p=n("UQAG"),f=n("8Jek"),d=n.n(f),h=n("RtvN"),v=n("8pl+"),_=n("7Pee"),m=n("b0Ln"),b=n("UCOg"),y=function(t){var n,r,o=t.char,i=t.active,a=t.onClick,s=t.onEdit,l=t.onDelete;return e("div",{className:d()(c.a.character,(n={},n[c.a.active]=i,n)),onClick:a&&function(){return a(o)}},e("div",{className:c.a["character-name"],style:"color: "+Object(b.a)(o.color)},o.name),e("div",{className:d()(c.a.edit,u.a.icon,u.a["icon-button"],u.a.edit),onClick:s&&function(){return s(o)}}),e("div",{className:d()(c.a.delete,u.a.icon,u.a["icon-button"],u.a.delete,(r={},r[u.a.disabled]=!l,r)),onClick:l?function(){return l(o)}:null}))},g=function(t){function n(e){var n;return(n=t.call(this,e)||this).onClickCharacter=n.onClickCharacter.bind(a(n)),n.onEditCharacter=n.onEditCharacter.bind(a(n)),n.onDeleteCharacter=n.onDeleteCharacter.bind(a(n)),n}var i,u;u=t,(i=n).prototype=Object.create(u.prototype),i.prototype.constructor=i,s(i,u);var l=n.prototype;return l.onClickCharacter=function(e){this.props.setCurrentCharacterID(e.id)},l.onEditCharacter=function(e){this.props.setEditedCharacterID(e.id)},l.onDeleteCharacter=function(e){for(var t,n=o(this.props.convos);!(t=n()).done;)for(var r,i=o(t.value.messages);!(r=i()).done;){if(r.value.authorID===e.id)return void this.props.setToBeReplacedCharacterID(e.id)}this.props.deleteCharacter(e.id)},l.render=function(){var t=this,n=this.props,i=n.chars,a=n.currentCharID,s=n.convos,u=n.currentConvoIndex,l=new Set;if(-1!==u)for(var p,f=o(s[u].messages);!(p=f()).done;){var d=p.value;l.has(d.authorID)||l.add(d.authorID)}for(var h,v=[],_=[],m=o(i);!(h=m()).done;){var b=h.value;l.has(b.id)?v.push(b):_.push(b)}return e("div",{className:c.a["character-list"]},v.length>0&&e(r,null,e("div",{className:c.a.divider},"Characters in current convo:"),e("div",{className:c.a["character-sublist"]},v.map((function(n){return e(y,{key:n.id,char:n,active:n.id===a,onClick:t.onClickCharacter,onEdit:t.onEditCharacter,onDelete:t.props.chars.length>1&&t.onDeleteCharacter})})))),_.length>0&&e(r,null,e("div",{className:c.a.divider},"Other characters:"),e("div",{className:c.a["character-sublist"]},_.map((function(n){return e(y,{key:n.id,char:n,active:n.id===a,onClick:t.onClickCharacter,onEdit:t.onEditCharacter,onDelete:t.props.chars.length>1&&t.onDeleteCharacter})})))))},n}(l.Component);t.a=Object(p.connect)(["chars","currentCharID","convos","currentConvoIndex"],{deleteCharacter:h.a,setCurrentCharacterID:v.a,setEditedCharacterID:_.a,setToBeReplacedCharacterID:m.a})(g)}).call(this,n("hosL").h,n("hosL").Fragment)},"dB+w":function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e,t,n){for(var o=0;o<e.convos.length;o++)for(var i=e.convos[o],a=0;a<i.messages.length;a++){var s=i.messages[a];if(s.id===t){var c=e.convos.slice(0),u=i.messages.slice(0);return u[a]=r(r({},s),{},{authorID:n}),c[o]=r(r({},i),{},{messages:u}),{convos:c}}}}},dnxQ:function(e,t,n){"use strict";(function(e){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=n("u6aR"),a=n("yTKo"),s=n("hosL"),c=n("UQAG"),u=n("8Jek"),l=n.n(u),p=n("/f2m"),f=n("iEaH"),d=n("ILzg"),h=n("9KuC"),v=function(t){function n(e){var n;return(n=t.call(this,e)||this).state={error:null},n.onInput=n.onInput.bind(r(n)),n.onSave=n.onSave.bind(r(n)),n.onLoad=n.onLoad.bind(r(n)),n.closeError=n.closeError.bind(r(n)),n}var s,c;c=t,(s=n).prototype=Object.create(c.prototype),s.prototype.constructor=s,o(s,c);var u=n.prototype;return u.onInput=function(e){this.props.setProjectName(e.target.value)},u.onLoad=function(){var e=this,t=document.createElement("input");t.type="file",t.addEventListener("change",(function(t){var n=t.target.files;if(n.length>0){var r=new FileReader;r.addEventListener("load",(function(){try{var t=JSON.parse(r.result);if(Object(h.a)(t).length>0)throw new Error("Invalid JSON");e.props.loadState(t)}catch(t){e.setState({error:t})}})),r.readAsText(n[0])}})),t.click()},u.onSave=function(){var e=this.props,t=e.version,n=e.projectName,r=e.convos,o=e.chars,i=document.createElement("a"),a=URL.createObjectURL(new Blob([Object(d.a)({version:t,projectName:n,convos:r,chars:o})]));i.href=a,i.download=n+".json",i.click(),setTimeout((function(){window.URL.revokeObjectURL(a)}),0)},u.closeError=function(){this.setState({error:null})},u.render=function(){return e("div",{className:i.a["project-bar"]},e("input",{className:i.a["project-name"],type:"text",value:this.props.projectName,onInput:this.onInput}),e("div",{className:l()(i.a.button,a.a.icon,a.a["icon-button"],a.a.save),title:"Save",onClick:this.onSave}),e("div",{className:l()(i.a.button,a.a.icon,a.a["icon-button"],a.a.load),title:"Load",onClick:this.onLoad}),this.state.error?e("div",{className:i.a.error},e("span",{className:i.a["error-message"]},this.state.error.message),e("div",{className:l()(a.a.icon,a.a["icon-button"],a.a.delete),onClick:this.closeError})):null)},n}(s.Component);t.a=Object(c.connect)(["version","projectName","convos","chars"],{loadState:p.a,setProjectName:f.a})(v)}).call(this,n("hosL").h)},fdQA:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("BuAb"),t),o(n("FNu+"),t)},h2tO:function(e,t){"use strict";t.a=function(e,t){return{currentConvoIndex:t}}},hQme:function(e,t){"use strict";t.a=function(e,t){return{editedConvoID:void 0===t?e.convos[e.currentConvoIndex].id:t}}},hosL:function(e,t,n){"use strict";function r(e,t){for(var n in t)e[n]=t[n];return e}function o(e){var t=e.parentNode;t&&t.removeChild(e)}function i(e,t,n){var r,o,i,s={};for(i in t)"key"==i?r=t[i]:"ref"==i?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?S.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===s[i]&&(s[i]=e.defaultProps[i]);return a(e,s,r,o,null)}function a(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++M:o};return null!=A.vnode&&A.vnode(i),i}function s(){return{current:null}}function c(e){return e.children}function u(e,t){this.props=e,this.context=t}function l(e,t){if(null==t)return e.__?l(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?l(e):null}function p(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return p(e)}}function f(e){(!e.__d&&(e.__d=!0)&&L.push(e)&&!d.__r++||U!==A.debounceRendering)&&((U=A.debounceRendering)||T)(d)}function d(){for(var e;d.__r=L.length;)e=L.sort((function(e,t){return e.__v.__b-t.__v.__b})),L=[],e.some((function(e){var t,n,o,i,a,s;e.__d&&(a=(i=(t=e).__v).__e,(s=t.__P)&&(n=[],(o=r({},i)).__v=i.__v+1,O(s,i,o,t.__n,void 0!==s.ownerSVGElement,null!=i.__h?[a]:null,n,null==a?l(i):a,i.__h),j(n,i),i.__e!=a&&p(i)))}))}function h(e,t,n,r,o,i,s,u,p,f){var d,h,_,b,y,g,C,j=r&&r.__k||K,D=j.length;for(n.__k=[],d=0;d<t.length;d++)if(null!=(b=n.__k[d]=null==(b=t[d])||"boolean"==typeof b?null:"string"==typeof b||"number"==typeof b||"bigint"==typeof b?a(null,b,null,null,b):Array.isArray(b)?a(c,{children:b},null,null,null):b.__b>0?a(b.type,b.props,b.key,null,b.__v):b)){if(b.__=n,b.__b=n.__b+1,null===(_=j[d])||_&&b.key==_.key&&b.type===_.type)j[d]=void 0;else for(h=0;h<D;h++){if((_=j[h])&&b.key==_.key&&b.type===_.type){j[h]=void 0;break}_=null}O(e,b,_=_||B,o,i,s,u,p,f),y=b.__e,(h=b.ref)&&_.ref!=h&&(C||(C=[]),_.ref&&C.push(_.ref,null,b),C.push(h,b.__c||y,b)),null!=y?(null==g&&(g=y),"function"==typeof b.type&&null!=b.__k&&b.__k===_.__k?b.__d=p=v(b,p,e):p=m(e,b,_,j,y,p),f||"option"!==n.type?"function"==typeof n.type&&(n.__d=p):e.value=""):p&&_.__e==p&&p.parentNode!=e&&(p=l(_))}for(n.__e=g,d=D;d--;)null!=j[d]&&("function"==typeof n.type&&null!=j[d].__e&&j[d].__e==n.__d&&(n.__d=l(r,d+1)),I(j[d],j[d]));if(C)for(d=0;d<C.length;d++)P(C[d],C[++d],C[++d])}function v(e,t,n){var r,o;for(r=0;r<e.__k.length;r++)(o=e.__k[r])&&(o.__=e,t="function"==typeof o.type?v(o,t,n):m(n,o,o,e.__k,o.__e,t));return t}function _(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){_(e,t)})):t.push(e)),t}function m(e,t,n,r,o,i){var a,s,c;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==n||o!=i||null==o.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(o),a=null;else{for(s=i,c=0;(s=s.nextSibling)&&c<r.length;c+=2)if(s==o)break e;e.insertBefore(o,i),a=i}return void 0!==a?a:o.nextSibling}function b(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||W.test(t)?n:n+"px"}function y(e,t,n,r,o){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||b(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||b(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r||e.addEventListener(t,i?C:g,i):e.removeEventListener(t,i?C:g,i);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function g(e){this.l[e.type+!1](A.event?A.event(e):e)}function C(e){this.l[e.type+!0](A.event?A.event(e):e)}function O(e,t,n,o,i,a,s,l,p){var f,d,v,_,m,b,y,g,C,O,j,P=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(p=n.__h,l=t.__e=n.__e,t.__h=null,a=[l]),(f=A.__b)&&f(t);try{e:if("function"==typeof P){if(g=t.props,C=(f=P.contextType)&&o[f.__c],O=f?C?C.props.value:f.__:o,n.__c?y=(d=t.__c=n.__c).__=d.__E:("prototype"in P&&P.prototype.render?t.__c=d=new P(g,O):(t.__c=d=new u(g,O),d.constructor=P,d.render=w),C&&C.sub(d),d.props=g,d.state||(d.state={}),d.context=O,d.__n=o,v=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=P.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=r({},d.__s)),r(d.__s,P.getDerivedStateFromProps(g,d.__s))),_=d.props,m=d.state,v)null==P.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==P.getDerivedStateFromProps&&g!==_&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(g,O),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(g,d.__s,O)||t.__v===n.__v){d.props=g,d.state=d.__s,t.__v!==n.__v&&(d.__d=!1),d.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(g,d.__s,O),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(_,m,b)}))}d.context=O,d.props=g,d.state=d.__s,(f=A.__r)&&f(t),d.__d=!1,d.__v=t,d.__P=e,f=d.render(d.props,d.state,d.context),d.state=d.__s,null!=d.getChildContext&&(o=r(r({},o),d.getChildContext())),v||null==d.getSnapshotBeforeUpdate||(b=d.getSnapshotBeforeUpdate(_,m)),j=null!=f&&f.type===c&&null==f.key?f.props.children:f,h(e,Array.isArray(j)?j:[j],t,n,o,i,a,s,l,p),d.base=t.__e,t.__h=null,d.__h.length&&s.push(d),y&&(d.__E=d.__=null),d.__e=!1}else null==a&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=D(n.__e,t,n,o,i,a,s,p);(f=A.diffed)&&f(t)}catch(e){t.__v=null,(p||null!=a)&&(t.__e=l,t.__h=!!p,a[a.indexOf(l)]=null),A.__e(e,t,n)}}function j(e,t){A.__c&&A.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){A.__e(e,t.__v)}}))}function D(e,t,n,r,i,a,s,c){var u,p,f,d=n.props,v=t.props,_=t.type,m=0;if("svg"===_&&(i=!0),null!=a)for(;m<a.length;m++)if((u=a[m])&&(u===e||(_?u.localName==_:3==u.nodeType))){e=u,a[m]=null;break}if(null==e){if(null===_)return document.createTextNode(v);e=i?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,v.is&&v),a=null,c=!1}if(null===_)d===v||c&&e.data===v||(e.data=v);else{if(a=a&&S.call(e.childNodes),p=(d=n.props||B).dangerouslySetInnerHTML,f=v.dangerouslySetInnerHTML,!c){if(null!=a)for(d={},m=0;m<e.attributes.length;m++)d[e.attributes[m].name]=e.attributes[m].value;(f||p)&&(f&&(p&&f.__html==p.__html||f.__html===e.innerHTML)||(e.innerHTML=f&&f.__html||""))}if(function(e,t,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in t||y(e,i,null,n[i],r);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||y(e,i,t[i],n[i],r)}(e,v,d,i,c),f)t.__k=[];else if(m=t.props.children,h(e,Array.isArray(m)?m:[m],t,n,r,i&&"foreignObject"!==_,a,s,a?a[0]:n.__k&&l(n,0),c),null!=a)for(m=a.length;m--;)null!=a[m]&&o(a[m]);c||("value"in v&&void 0!==(m=v.value)&&(m!==e.value||"progress"===_&&!m)&&y(e,"value",m,d.value,!1),"checked"in v&&void 0!==(m=v.checked)&&m!==e.checked&&y(e,"checked",m,d.checked,!1))}return e}function P(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){A.__e(e,n)}}function I(e,t,n){var r,i;if(A.unmount&&A.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||P(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){A.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&I(r[i],t,"function"!=typeof e.type);n||null==e.__e||o(e.__e),e.__e=e.__d=void 0}function w(e,t,n){return this.constructor(e,n)}function k(e,t,n){var r,o,a;A.__&&A.__(e,t),o=(r="function"==typeof n)?null:n&&n.__k||t.__k,a=[],O(t,e=(!r&&n||t).__k=i(c,null,[e]),o||B,B,void 0!==t.ownerSVGElement,!r&&n?[n]:o?null:t.firstChild?S.call(t.childNodes):null,a,!r&&n?n:o?o.__e:t.firstChild,r),j(a,e)}function x(e,t){k(e,t,x)}function E(e,t,n){var o,i,s,c=r({},e.props);for(s in t)"key"==s?o=t[s]:"ref"==s?i=t[s]:c[s]=t[s];return arguments.length>2&&(c.children=arguments.length>3?S.call(arguments,2):n),a(e.type,c,o||e.key,i||e.ref,null)}function N(e,t){var n={__c:t="__cC"+F++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(f)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}n.r(t),n.d(t,"render",(function(){return k})),n.d(t,"hydrate",(function(){return x})),n.d(t,"createElement",(function(){return i})),n.d(t,"h",(function(){return i})),n.d(t,"Fragment",(function(){return c})),n.d(t,"createRef",(function(){return s})),n.d(t,"isValidElement",(function(){return R})),n.d(t,"Component",(function(){return u})),n.d(t,"cloneElement",(function(){return E})),n.d(t,"createContext",(function(){return N})),n.d(t,"toChildArray",(function(){return _})),n.d(t,"options",(function(){return A}));var S,A,M,R,L,T,U,F,B={},K=[],W=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;S=K.slice,A={__e:function(e,t){for(var n,r,o;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),o=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),o=n.__d),o)return n.__E=n}catch(t){e=t}throw e}},M=0,R=function(e){return null!=e&&void 0===e.constructor},u.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=r({},this.state),"function"==typeof e&&(e=e(r({},n),this.props)),e&&r(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),f(this))},u.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),f(this))},u.prototype.render=c,L=[],T="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,d.__r=0,F=0},iEaH:function(e,t){"use strict";t.a=function(e,t){return{projectName:t}}},"l/KG":function(e,t){"use strict";t.a=function(e,t){return{editedMessageID:t}}},mdyV:function(e,t,n){"use strict";n.r(t);var r=n("hosL"),o=r.h,i=r.render,a=function(e){return e&&e.default?e.default:e};if("serviceWorker"in navigator&&navigator.serviceWorker.register(n.p+"sw.js"),"function"==typeof a(n("QfWi"))){var s=document.getElementById("preact_root")||document.body.firstElementChild;0,function(){var e=a(n("QfWi")),t={},r=document.querySelector('[type="__PREACT_CLI_DATA__"]');r&&(t=JSON.parse(decodeURI(r.innerHTML)).preRenderData||t);var c;t.url&&(c=t.url);s=i(o(e,{CLI_DATA:{preRenderData:t}}),document.body,s)}()}},nVVG:function(e,t,n){"use strict";(function(e){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=n("3Ufl"),a=n("hosL"),s=n("UQAG"),c=n("RtvN"),u=n("PMWH"),l=n("b0Ln"),p=function(t){function n(e){var n;return(n=t.call(this,e)||this).state={selectedCharacterID:null},n.selectBox=Object(a.createRef)(),n.selectCharacter=n.selectCharacter.bind(r(n)),n.replaceCharacter=n.replaceCharacter.bind(r(n)),n}var s,c;c=t,(s=n).prototype=Object.create(c.prototype),s.prototype.constructor=s,o(s,c);var u=n.prototype;return u.selectCharacter=function(e){this.setState({selectedCharacterID:e.target.value})},u.replaceCharacter=function(){this.props.replaceCharacter(this.props.toBeReplacedCharID,this.state.selectedCharacterID),this.props.deleteCharacter(this.props.toBeReplacedCharID,this.state.selectedCharacterID),this.props.setToBeReplacedCharacterID(null)},u.render=function(){var t=this.props,n=t.chars,r=t.toBeReplacedCharID;return e("div",{className:i.a["replace-character"]},e("div",{className:i.a.row},e("div",{className:i.a.label},"Replace character ",e("span",{className:i.a["old-character-name"]}," with:")),e("select",{onChange:this.selectCharacter,value:this.state.selectedCharacterID,ref:this.selectBox},n.map((function(t){return t.id===r?null:e("option",{value:t.id},t.name)})))),e("div",null,e("button",{onClick:this.replaceCharacter,disabled:null===this.state.selectedCharacterID},"Replace")))},n}(a.Component);t.a=Object(s.connect)(["chars","toBeReplacedCharID"],{replaceCharacter:u.a,setToBeReplacedCharacterID:l.a,deleteCharacter:c.a})(p)}).call(this,n("hosL").h)},nvQP:function(e,t,n){"use strict";(function(e){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=n("GZ11"),a=n("hosL");t.a=function(t){function n(e){var n;return(n=t.call(this,e)||this).state={query:"",maxHeight:null,y:null},n.onInput=n.onInput.bind(r(n)),n.onFocusOut=n.onFocusOut.bind(r(n)),n.searchRef=Object(a.createRef)(),n}var s,c;c=t,(s=n).prototype=Object.create(c.prototype),s.prototype.constructor=s,o(s,c);var u=n.prototype;return u.onInput=function(e){this.setState({query:e.target.value})},u.onFocusOut=function(e){!e.currentTarget.contains(e.relatedTarget)&&this.props.onDismiss&&this.props.onDismiss()},u.componentDidMount=function(){this.searchRef.current&&this.searchRef.current.focus()},u.render=function(){var t=this;return e("div",{className:i.a["searchable-menu"],style:{top:this.props.y+"px",left:this.props.x+"px",maxHeight:"calc(100vh - "+this.props.y+"px)"},onfocusout:this.onFocusOut,tabIndex:"0"},e("div",{className:i.a["search-bar"]},e("input",{type:"text",onInput:this.onInput,ref:this.searchRef})),e("div",{className:i.a.items},this.props.items.map((function(n){return-1===n.value.toLowerCase().indexOf(t.state.query)?null:e("div",{className:i.a.item,key:n.id,onClick:t.props.onClickItem?t.props.onClickItem.bind(t,n.id):null},n.value)}))))},n}(a.Component)}).call(this,n("hosL").h)},omBr:function(e,t,n){"use strict";(function(e){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=n("JNjM"),a=n("hosL"),s=n("UQAG"),c=n("2hU4"),u=n("04Fd"),l=n("7sUR"),p=n("8pl+"),f=function(t){function n(e){var n;return(n=t.call(this,e)||this).onKeyPress=n.onKeyPress.bind(r(n)),n.onKeyDown=n.onKeyDown.bind(r(n)),n}var a,s;s=t,(a=n).prototype=Object.create(s.prototype),a.prototype.constructor=a,o(a,s);var c=n.prototype;return c.onKeyDown=function(e){if("Tab"===e.code){e.preventDefault();var t=e.target.value.toLowerCase();if(-1===t.indexOf(":")){var n=this.props.chars.find((function(e){return e.name.toLowerCase().startsWith(t)}));if(!n)return;e.target.value=n.name+": "}}},c.onKeyPress=function(e){if("Enter"===e.code&&!e.shiftKey){e.preventDefault();var t=e.target.value,n=/([^:]+):(?:\s+)(.+)/g.exec(t);if(n){var r=n[1].toLowerCase(),o=r.toLowerCase(),i=this.props.chars.find((function(e){return e.name.toLowerCase()===o}));i?this.props.setCurrentCharacterID(i.id):this.props.createCharacter(r),t=n[2]}var a=/^s\/([^/]+)\/([^/]+)\/?$/.exec(t);if(a)for(var s=this.context.store.getState(),c=s.currentCharID,u=s.currentConvoIndex,l=s.convos,p=s.chars.find((function(e){return e.id===c})),f=l[u].messages,d=this.props.beforeMessage||f.length-1;d>=0;d--)if(f[d].authorID===p.id)return this.props.editMessage(f[d].id,f[d].contents.split(a[1]).join(a[2])),void(e.target.value="");e.target.value="",this.props.createMessage(t,this.props.beforeMessage)}},c.render=function(){return e("textarea",{className:i.a["command-box"],onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown})},n}(a.Component);t.a=Object(s.connect)(["chars"],{createMessage:u.a,editMessage:l.a,createCharacter:c.a,setCurrentCharacterID:p.a})(f)}).call(this,n("hosL").h)},q6Rg:function(e,t){"use strict";t.a={"modal-bg":"modal-bg__2cJDI",fade:"fade__1w0KX","modal-positioner":"modal-positioner__F8P48",modal:"modal__LYvZS",popup:"popup__1XomI"}},s3hk:function(e,t,n){"use strict";(function(e){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=n("SQ3b"),a=n("yTKo"),s=n("hosL"),c=n("UQAG"),u=n("8Jek"),l=n.n(u),p=n("nvQP"),f=n("4HEG"),d=n("7sUR"),h=n("dB+w"),v=n("l/KG"),_=n("ZKFM"),m=n("UCOg"),b=function(t){function n(e){var n;return(n=t.call(this,e)||this).state={authorMenuOpen:!1,authorMenuX:0,authorMenuY:0},n.contentsRef=Object(s.createRef)(),n.onInsertAbove=n.onInsertAbove.bind(r(n)),n.onMessageEdit=n.onMessageEdit.bind(r(n)),n.onMessageDelete=n.onMessageDelete.bind(r(n)),n.onKeyPress=n.onKeyPress.bind(r(n)),n.onBlur=n.onBlur.bind(r(n)),n.onClickAuthor=n.onClickAuthor.bind(r(n)),n.onDismissAuthorMenu=n.onDismissAuthorMenu.bind(r(n)),n.onReplaceAuthor=n.onReplaceAuthor.bind(r(n)),n}var c,u;u=t,(c=n).prototype=Object.create(u.prototype),c.prototype.constructor=c,o(c,u);var f=n.prototype;return f.onInsertAbove=function(){this.props.setInsertAboveMessageID(this.props.insertAboveMessageID===this.props.message.id?null:this.props.message.id)},f.onMessageEdit=function(){this.props.setEditedMessage(this.props.editedMessageID===this.props.message.id?null:this.props.message.id)},f.onMessageDelete=function(){this.props.deleteMessage(this.props.index)},f.onKeyPress=function(e){"Enter"!==e.code||e.shiftKey||(this.props.editMessage(this.props.message.id,this.contentsRef.current.value),this.props.setEditedMessage(null))},f.onBlur=function(){this.props.editMessage(this.props.message.id,this.contentsRef.current.value),this.props.setEditedMessage(null)},f.onClickAuthor=function(e){var t=e.target.getBoundingClientRect(),n=t.x,r=t.y,o=t.height;this.setState((function(e){return{authorMenuOpen:!e.authorMenuOpen,authorMenuX:n,authorMenuY:r+o}}))},f.onReplaceAuthor=function(e){this.props.replaceMessageAuthor(this.props.message.id,e),this.setState({authorMenuOpen:!1})},f.onDismissAuthorMenu=function(){this.setState({authorMenuOpen:!1})},f.componentDidUpdate=function(e){e.editedMessageID!==e.message.id&&this.props.editedMessageID===this.props.message.id&&this.contentsRef.current&&this.contentsRef.current.focus()},f.render=function(){var t,n=this.props,r=n.message,o=n.chars,s=r.authorID,c=r.contents,u=r.id===n.editedMessageID,f=o.find((function(e){return e.id===r.authorID}));return e("div",{className:i.a.message},e("div",{className:i.a.author,style:"color: "+Object(m.a)(f.color),onClick:this.onClickAuthor},o.find((function(e){return e.id===s})).name),e("div",{className:l()(i.a.contents,(t={},t[i.a.editable]=u,t))},u?e("div",{className:i.a["message-edit-wrapper"]},e("textarea",{className:i.a["message-edit-area"],onKeyPress:this.onKeyPress,onBlur:this.onBlur,tabIndex:"0",ref:this.contentsRef,value:c})):c),e("div",{className:i.a.buttons},e("div",{className:l()(a.a.icon,a.a["icon-button"],a.a["insert-above"]),title:"Insert above",onClick:this.onInsertAbove}),e("div",{className:l()(a.a.icon,a.a["icon-button"],a.a.edit),title:"Edit",onClick:this.onMessageEdit}),e("div",{className:l()(a.a.icon,a.a["icon-button"],a.a.delete),title:"Delete",onClick:this.onMessageDelete})),this.state.authorMenuOpen?e(p.a,{items:this.props.chars.map((function(e){return{id:e.id,value:e.name}})),x:this.state.authorMenuX,y:this.state.authorMenuY,onDismiss:this.onDismissAuthorMenu,onClickItem:this.onReplaceAuthor}):null)},n}(s.Component);t.a=Object(c.connect)(["chars","editedMessageID","insertAboveMessageID"],{deleteMessage:f.a,editMessage:d.a,replaceMessageAuthor:h.a,setEditedMessage:v.a,setInsertAboveMessageID:_.a})(b)}).call(this,n("hosL").h)},u6aR:function(e,t){"use strict";t.a={"project-bar":"project-bar__1grAi","project-name":"project-name__11aJs",button:"button__3v3wp",error:"error__3QnLA"}},yTKo:function(e,t){"use strict";t.a={icon:"icon__1RDVl","icon-button":"icon-button__3dJs1",active:"active__X9UHb",disabled:"disabled___Rdup",delete:"delete__5sT5d",edit:"edit__hkaq1","insert-above":"insert-above__2e7WT",load:"load__14cpF",save:"save__3lssl"}}});
//# sourceMappingURL=bundle.c2af3.js.map