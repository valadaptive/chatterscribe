!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s="mdyV")}({"+bXj":function(e,t,n){"use strict";(function(e){var r=n("Uvu/"),o=n("yTKo"),s=n("hosL"),i=n("UQAG"),a=n("8Jek"),c=n.n(a),u=n("0odJ"),l=n("D9g8"),p=n("S07r"),h=n("h2tO"),f=n("hQme"),d=n("TYNd");t.a=Object(i.connect)(["convos","currentConvoIndex","editedConvoID"],{createConvo:u.a,setCurrentConvoIndex:h.a,setEditedConvo:f.a,setConvoName:p.a,deleteConvo:l.a,setExportedConvoID:d.a})(class extends s.Component{constructor(e){super(e),this.onAddConvo=this.onAddConvo.bind(this),this.onEditConvo=this.onEditConvo.bind(this),this.onExportConvo=this.onExportConvo.bind(this),this.onConvoEditKeyPress=this.onConvoEditKeyPress.bind(this),this.onConvoEditBlur=this.onConvoEditBlur.bind(this),this.editedConvoRef=Object(s.createRef)()}onAddConvo(){this.props.createConvo(),this.props.setEditedConvo()}onClickConvo(e){this.props.setCurrentConvoIndex(e)}onExportConvo(e,t){t.stopPropagation(),this.props.setExportedConvoID(e)}onEditConvo(e,t){t.stopPropagation(),this.props.setEditedConvo(e)}onDeleteConvo(e,t){t.stopPropagation(),this.props.deleteConvo(e)}onConvoEditKeyPress(e){"Enter"===e.code&&this.props.setEditedConvo(null)}onConvoEditBlur(){this.props.setEditedConvo(null)}updateConvoName(e,t){this.props.setConvoName(e,t.target.value)}componentDidUpdate(e){this.props.editedConvoID&&e.editedConvoID!==this.props.editedConvoID&&this.editedConvoRef.current&&(this.editedConvoRef.current.focus(),this.editedConvoRef.current.select())}render(){const{convos:t,currentConvoIndex:n}=this.props;return e("div",{className:r.a["convo-list"]},e("div",{className:r.a.convos},t.map(((t,s)=>e("div",{className:c()(r.a.convo,{[r.a.active]:n===s}),key:t.id,onClick:this.onClickConvo.bind(this,s)},e("div",{className:r.a["convo-name"]},this.props.editedConvoID===t.id?e("input",{type:"text",value:t.name,onInput:this.updateConvoName.bind(this,t.id),onKeyPress:this.onConvoEditKeyPress,onBlur:this.onConvoEditBlur,ref:this.editedConvoRef}):t.name),e("div",{className:c()(o.a.icon,o.a["icon-button"],o.a.export),onClick:this.onExportConvo.bind(this,t.id)}),e("div",{className:c()(o.a.icon,o.a["icon-button"],o.a.edit),onClick:this.onEditConvo.bind(this,t.id)}),e("div",{className:c()(o.a.icon,o.a["icon-button"],o.a.delete),onClick:this.onDeleteConvo.bind(this,s)}))))),e("div",{className:r.a["add-convo-wrapper"]},e("button",{onClick:this.onAddConvo},"Add Convo")))}})}).call(this,n("hosL").h)},"/f2m":function(e,t){"use strict";t.a=(e,t)=>({projectName:t.projectName,convos:t.convos,chars:t.chars})},"04Fd":function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n("5x3I"),a=n("0odJ"),c=n("2hU4");t.a=(e,t,n)=>(-1===e.currentConvoIndex&&(e=o(o({},e),Object(a.a)(e))),null===e.currentCharID&&(e=o(o({},e),Object(c.a)(e))),o(o({},e),{},{convos:e.convos.map(((r,s)=>{if(s!==e.currentConvoIndex)return r;const a=r.messages.slice(0),c={authorID:e.currentCharID,contents:t,id:Object(i.a)()};return"number"==typeof n?a.splice(n,0,c):a.push(c),o(o({},r),{},{messages:a})}))}))},"0odJ":function(e,t,n){"use strict";var r=n("5x3I");t.a=e=>({convos:[...e.convos,{messages:[],id:Object(r.a)(),name:"New Convo"}],currentConvoIndex:e.convos.length})},"23og":function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t)=>({exportConvoSettings:r(r({},e.exportConvoSettings),{},{wrapTextEnabled:t})})},"2hU4":function(e,t,n){"use strict";var r=n("5x3I");t.a=(e,t="New Character")=>{const n=Object(r.a)();return{chars:[...e.chars,{id:n,name:t,color:16777215}],currentCharID:n}}},"3Ov2":function(){},"3Ufl":function(e,t){"use strict";t.a={row:"row__JJVPS",label:"label__1esP_"}},"4HEG":function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t)=>({convos:e.convos.map(((n,o)=>o!==e.currentConvoIndex?n:r(r({},n),{},{messages:n.messages.filter(((e,n)=>n!==t))})))})},"4omB":function(e,t,n){"use strict";(function(e){var r=n("ZQP2"),o=n("yTKo"),s=n("hosL"),i=n("UQAG"),a=n("8Jek"),c=n.n(a),u=n("omBr"),l=n("s3hk"),p=n("ZKFM");t.a=Object(i.connect)(["insertAboveMessageID"],{setInsertAboveMessageID:p.a})(class extends s.Component{constructor(e){super(e),this.lastMessageElem=Object(s.createRef)()}componentDidUpdate(e){e&&e.messages.length+1===this.props.messages.length&&e.messages[e.messages.length-1]!==this.props.messages[this.props.messages.length-1]&&this.lastMessageElem.current.scrollIntoView()}render(){const{messages:t,insertAboveMessageID:n,setInsertAboveMessageID:s}=this.props,i=[];if(t)for(let a=0;a<t.length;a++){const p=t[a];n===p.id&&i.push(e("div",{className:r.a["insert-box"]},e("div",{className:r.a["close-wrapper"]},e("div",{className:r.a["close-positioner"]},e("div",{className:c()(o.a.icon,o.a["icon-button"],o.a.delete),title:"Close",onClick:()=>s(null)}))),e("div",{className:r.a["command-box-wrapper"]},e(u.a,{beforeMessage:a})))),i.push(e(l.a,{message:p,key:p.id,index:a,elemRef:a===t.length-1?this.lastMessageElem:null}))}return e("div",{className:r.a.messages},e("div",{className:r.a["messages-inner"]},i))}})}).call(this,n("hosL").h)},"5/DW":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(\.\d+)?([zZ]|((\+|-)(\d{2}):(\d{2})))$/;t.default=function(e){const t=e.match(n);if(null===t)return!1;const o=parseInt(t[1],10),s=parseInt(t[2],10),i=parseInt(t[3],10),a=parseInt(t[4],10),c=parseInt(t[5],10),u=parseInt(t[6],10);return!(s>12)&&(!(i>function(e,t){if(2===t)return(n=e)%4!=0||n%100==0&&n%400!=0?28:29;var n;return r[t]}(o,s))&&(!(a>23)&&(!(c>59)&&!(u>60))))};const r=[0,31,0,31,30,31,30,31,31,30,31,30,31]},"5x3I":function(e,t){"use strict";const n=new Uint32Array(2);t.a=()=>(crypto.getRandomValues(n),("0000000"+n[0].toString(32)).slice(-7)+("0000000"+n[1].toString(32)).slice(-7))},"7Pee":function(e,t){"use strict";t.a=(e,t)=>({editedCharID:t})},"7sUR":function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t,n)=>{for(let o=0;o<e.convos.length;o++){const s=e.convos[o];for(let i=0;i<s.messages.length;i++){const a=s.messages[i];if(a.id===t){const t=e.convos.slice(0),c=s.messages.slice(0);return c[i]=r(r({},a),{},{contents:n}),t[o]=r(r({},s),{},{messages:c}),{convos:t}}}}}},"8Jek":function(e,t){var n;!function(){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var i=r.apply(null,n);i&&e.push(i)}}else if("object"===s)if(n.toString===Object.prototype.toString)for(var a in n)o.call(n,a)&&n[a]&&e.push(a);else e.push(n.toString())}}return e.join(" ")}var o={}.hasOwnProperty;e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},"8pl+":function(e,t){"use strict";t.a=(e,t)=>({currentCharID:t})},"9KuC":function(e,t,n){"use strict";var r=n("fdQA");const o={properties:{version:{type:"uint32"},projectName:{type:"string"},convos:{elements:{properties:{messages:{elements:{properties:{authorID:{type:"string"},contents:{type:"string"},id:{type:"string"}}}},id:{type:"string"},name:{type:"string"}}}},chars:{elements:{properties:{id:{type:"string"},name:{type:"string"},color:{type:"uint32"}}}}}};t.a=e=>Object(r.validate)(o,e)},BuAb:function(e,t){"use strict";function n(e){return"ref"in e}function r(e){return"enum"in e}function o(e){return"elements"in e}function s(e){return"properties"in e||"optionalProperties"in e}function i(e){return"values"in e}function a(e){return"discriminator"in e}var c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.isSchema=t.isValidSchema=t.isDiscriminatorForm=t.isValuesForm=t.isPropertiesForm=t.isElementsForm=t.isEnumForm=t.isTypeForm=t.isRefForm=t.isEmptyForm=void 0,t.isEmptyForm=function(e){const t=c(e,["definitions","nullable","metadata"]);return 0===Object.keys(t).length},t.isRefForm=n,t.isTypeForm=function(e){return"type"in e},t.isEnumForm=r,t.isElementsForm=o,t.isPropertiesForm=s,t.isValuesForm=i,t.isDiscriminatorForm=a,t.isValidSchema=function e(t,c){if(void 0===c&&(c=t),void 0!==t.definitions){if(c!==t)return!1;for(const n of Object.values(t.definitions))if(!e(n,c))return!1}if(n(t)&&!(t.ref in(c.definitions||{})))return!1;if(r(t)){if(0===t.enum.length)return!1;if(t.enum.length!==new Set(t.enum).size)return!1}if(o(t))return e(t.elements,c);if(s(t)){for(const n of Object.values(t.properties||{}))if(!e(n,c))return!1;for(const n of Object.values(t.optionalProperties||{}))if(!e(n,c))return!1;for(const e of Object.keys(t.properties||{}))if(e in(t.optionalProperties||{}))return!1}if(i(t))return e(t.values,c);if(a(t))for(const n of Object.values(t.mapping)){if(!e(n,c)||!s(n))return!1;if(n.nullable)return!1;if(t.discriminator in(n.properties||{}))return!1;if(t.discriminator in(n.optionalProperties||{}))return!1}return!0};const u=[[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!0,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!0,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!0,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!0,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!1,!0,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!0,!1,!1,!1],[!1,!1,!1,!1,!0,!0,!0,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!0,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!0,!0]],l=["boolean","float32","float64","int8","uint8","int16","uint16","int32","uint32","string","timestamp"];t.isSchema=function e(t){if("object"!=typeof t||Array.isArray(t)||null===t)return!1;const n=t,{definitions:r,nullable:o,metadata:s,ref:i,type:a,enum:p,elements:h,properties:f,optionalProperties:d,additionalProperties:v,values:_,discriminator:b,mapping:m}=n,g=c(n,["definitions","nullable","metadata","ref","type","enum","elements","properties","optionalProperties","additionalProperties","values","discriminator","mapping"]),y=[void 0!==i,void 0!==a,void 0!==p,void 0!==h,void 0!==f,void 0!==d,void 0!==v,void 0!==_,void 0!==b,void 0!==m];let C=!1;for(const e of u)C=C||e.every(((e,t)=>e===y[t]));if(!C)return!1;if(void 0!==r){if("object"!=typeof r||Array.isArray(r)||null===r)return!1;for(const t of Object.values(r))if(!e(t))return!1}if(void 0!==o&&"boolean"!=typeof o)return!1;if(void 0!==s&&("object"!=typeof s||Array.isArray(s)||null===s))return!1;if(void 0!==i&&"string"!=typeof i)return!1;if(void 0!==a&&("string"!=typeof a||!l.includes(a)))return!1;if(void 0!==p){if(!Array.isArray(p))return!1;if(!p.every((e=>"string"==typeof e)))return!1}if(void 0!==h&&!e(h))return!1;if(void 0!==f){if("object"!=typeof f||Array.isArray(f)||null===f)return!1;for(const t of Object.values(f))if(!e(t))return!1}if(void 0!==d){if("object"!=typeof d||Array.isArray(d)||null===d)return!1;for(const t of Object.values(d))if(!e(t))return!1}if(void 0!==v&&"boolean"!=typeof v)return!1;if(void 0!==_&&!e(_))return!1;if(void 0!==b&&"string"!=typeof b)return!1;if(void 0!==m){if("object"!=typeof m||Array.isArray(m)||null===m)return!1;for(const t of Object.values(m))if(!e(t))return!1}return 0===Object.keys(g).length}},CPM1:function(e,t){"use strict";function n(e,t){for(var n in t)e[n]=t[n];return e}t.a=function(e){function t(e){for(var t=[],n=0;n<o.length;n++)o[n]===e?e=null:t.push(o[n]);o=t}function r(t,r,s){e=r?t:n(n({},e),t);for(var i=o,a=0;a<i.length;a++)i[a](e,s)}var o=[];return e=e||{},{action:function(t){function n(e){r(e,!1,t)}return function(){for(var r=arguments,o=[e],s=0;s<arguments.length;s++)o.push(r[s]);var i=t.apply(this,o);if(null!=i)return i.then?i.then(n):n(i)}},setState:r,subscribe:function(e){return o.push(e),function(){t(e)}},unsubscribe:t,getState:function(){return e}}}},"CR+S":function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t,n)=>({chars:e.chars.map((e=>e.id!==t?e:r(r({},e),n)))})},D9g8:function(e,t){"use strict";t.a=(e,t)=>({convos:e.convos.filter(((e,n)=>n!==t)),currentConvoIndex:1===e.convos.length?-1:e.currentConvoIndex===e.convos.length-1?e.currentConvoIndex-1:e.currentConvoIndex})},Egv2:function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t)=>({exportConvoSettings:r(r({},e.exportConvoSettings),{},{justifySide:t})})},"FNu+":function(e,t,n){"use strict";function r(e,t,n,l){if(!t.nullable||null!==n)if(h.isRefForm(t)){if(e.schemaTokens.length===e.config.maxDepth)throw new f;e.schemaTokens.push(["definitions",t.ref]),r(e,e.root.definitions[t.ref],n),e.schemaTokens.pop()}else if(h.isTypeForm(t)){switch(a(e,"type"),t.type){case"boolean":"boolean"!=typeof n&&u(e);break;case"float32":case"float64":"number"!=typeof n&&u(e);break;case"int8":o(e,n,-128,127);break;case"uint8":o(e,n,0,255);break;case"int16":o(e,n,-32768,32767);break;case"uint16":o(e,n,0,65535);break;case"int32":o(e,n,-2147483648,2147483647);break;case"uint32":o(e,n,0,4294967295);break;case"string":"string"!=typeof n&&u(e);break;case"timestamp":"string"!=typeof n?u(e):p.default(n)||u(e)}c(e)}else if(h.isEnumForm(t))a(e,"enum"),"string"==typeof n&&t.enum.includes(n)||u(e),c(e);else if(h.isElementsForm(t)){if(a(e,"elements"),Array.isArray(n))for(const[o,a]of n.entries())s(e,o.toString()),r(e,t.elements,a),i(e);else u(e);c(e)}else if(h.isPropertiesForm(t))if("object"!=typeof n||null===n||Array.isArray(n))a(e,void 0!==t.properties?"properties":"optionalProperties"),u(e),c(e);else{if(void 0!==t.properties){a(e,"properties");for(const[o,l]of Object.entries(t.properties))a(e,o),n.hasOwnProperty(o)?(s(e,o),r(e,l,n[o]),i(e)):u(e),c(e);c(e)}if(void 0!==t.optionalProperties){a(e,"optionalProperties");for(const[o,u]of Object.entries(t.optionalProperties))a(e,o),n.hasOwnProperty(o)&&(s(e,o),r(e,u,n[o]),i(e)),c(e);c(e)}if(!0!==t.additionalProperties)for(const r of Object.keys(n)){const n=t.optionalProperties&&r in t.optionalProperties;t.properties&&r in t.properties||n||r===l||(s(e,r),u(e),i(e))}}else if(h.isValuesForm(t)){if(a(e,"values"),"object"!=typeof n||null===n||Array.isArray(n))u(e);else for(const[o,a]of Object.entries(n))s(e,o),r(e,t.values,a),i(e);c(e)}else if(h.isDiscriminatorForm(t))if("object"!=typeof n||null===n||Array.isArray(n))a(e,"discriminator"),u(e),c(e);else if(n.hasOwnProperty(t.discriminator)){const o=n[t.discriminator];"string"==typeof o?o in t.mapping?(a(e,"mapping"),a(e,o),r(e,t.mapping[o],n,t.discriminator),c(e),c(e)):(a(e,"mapping"),s(e,t.discriminator),u(e),i(e),c(e)):(a(e,"discriminator"),s(e,t.discriminator),u(e),i(e),c(e))}else a(e,"discriminator"),u(e),c(e)}function o(e,t,n,r){("number"!=typeof t||!Number.isInteger(t)||t<n||t>r)&&u(e)}function s(e,t){e.instanceTokens.push(t)}function i(e){e.instanceTokens.pop()}function a(e,t){e.schemaTokens[e.schemaTokens.length-1].push(t)}function c(e){e.schemaTokens[e.schemaTokens.length-1].pop()}function u(e){if(e.errors.push({instancePath:[...e.instanceTokens],schemaPath:[...e.schemaTokens[e.schemaTokens.length-1]]}),e.errors.length===e.config.maxErrors)throw new d}var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=t.MaxDepthExceededError=void 0;const p=l(n("5/DW")),h=n("BuAb");class f extends Error{}t.MaxDepthExceededError=f;class d extends Error{}t.validate=function(e,t,n){const o={errors:[],instanceTokens:[],schemaTokens:[[]],root:e,config:n||{maxDepth:0,maxErrors:0}};try{r(o,e,t)}catch(e){if(!(e instanceof d))throw e}return o.errors}},"GDN+":function(e,t,n){"use strict";(function(e){var r=n("MECP"),o=n("hosL"),s=n("UQAG"),i=n("omBr"),a=n("cuUh"),c=n("KSen"),u=n("+bXj"),l=n("SNmg"),p=n("4omB"),h=n("VqH4"),f=n("dnxQ"),d=n("nVVG"),v=n("7Pee"),_=n("b0Ln"),b=n("TYNd");t.a=Object(s.connect)(["convos","currentConvoIndex","editedCharID","toBeReplacedCharID","exportedConvoID"],{setEditedCharacterID:v.a,setToBeReplacedCharacterID:_.a,setExportedConvoID:b.a})(class extends o.Component{constructor(e){super(e),this.closeCharacterSettings=this.closeCharacterSettings.bind(this),this.closeCharacterReplaceDialog=this.closeCharacterReplaceDialog.bind(this),this.closeExportConvoDialog=this.closeExportConvoDialog.bind(this)}closeCharacterSettings(){this.props.setEditedCharacterID(null)}closeCharacterReplaceDialog(){this.props.setToBeReplacedCharacterID(null)}closeExportConvoDialog(){this.props.setExportedConvoID(null)}render(){const{convos:t,currentConvoIndex:n,editedCharID:o,toBeReplacedCharID:s,exportedConvoID:v}=this.props;return e("div",{className:r.a.app},e("div",{className:r.a["project-bar-pane"]},e(f.a,null)),e("div",{className:r.a["app-pane"]},e("div",{className:r.a["convos-pane"]},e(u.a,null)),e("div",{className:r.a["messages-pane"]},e(p.a,{messages:-1!==n?t[n].messages:null}),e("div",{className:r.a["command-box-pane"]},e(i.a,null))),e("div",{className:r.a["characters-pane"]},e(a.a,null))),null!==o?e(h.a,{onClose:this.closeCharacterSettings},e(c.a,null)):null,null!==s?e(h.a,{onClose:this.closeCharacterReplaceDialog},e(d.a,null)):null,null!==v?e(h.a,{onClose:this.closeExportConvoDialog},e(l.a,null)):null)}})}).call(this,n("hosL").h)},"GX0+":function(e,t,n){(function(e,n){function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function o(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function a(e){var t=this.__data__=new s(e);this.size=t.size}function c(e,t){var n=Ie(e),r=!n&&we(e),o=!n&&!r&&Ee(e),s=!n&&!r&&!o&&ke(e),i=n||r||o||s,a=i?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=a.length;for(var u in e)!t&&!ne.call(e,u)||i&&("length"==u||o&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||C(u,c))||a.push(u);return a}function u(e,t,n){(void 0!==n&&!D(e[t],n)||void 0===n&&!(t in e))&&h(e,t,n)}function l(e,t,n){var r=e[t];ne.call(e,t)&&D(r,n)&&(void 0!==n||t in e)||h(e,t,n)}function p(e,t){for(var n=e.length;n--;)if(D(e[n][0],t))return n;return-1}function h(e,t,n){"__proto__"==t&&_e?_e(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function f(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ve&&ve in Object(e)?function(e){var t=ne.call(e,ve),n=e[ve];try{e[ve]=void 0;var r=!0}catch(e){}var o=oe.call(e);r&&(t?e[ve]=n:delete e[ve]);return o}(e):function(e){return oe.call(e)}(e)}function d(e){return E(e)&&f(e)==M}function v(e){return!(!I(e)||(t=e,re&&re in t))&&(P(e)?ie:L).test(function(e){if(null!=e){try{return te.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function _(e){if(!I(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=O(e),n=[];for(var r in e)("constructor"!=r||!t&&ne.call(e,r))&&n.push(r);return n}function b(e,t,n,r,o){e!==t&&xe(t,(function(s,i){if(o||(o=new a),I(s))!function(e,t,n,r,o,s,i){var a=j(e,n),c=j(t,n),p=i.get(c);if(p)return void u(e,n,p);var d=s?s(a,c,n+"",e,t,i):void 0,v=void 0===d;if(v){var _=Ie(c),b=!_&&Ee(c),m=!_&&!b&&ke(c);d=c,_||b||m?Ie(a)?d=a:E(w=a)&&x(w)?d=function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(a):b?(v=!1,d=function(e,t){if(t)return e.slice();var n=e.length,r=le?le(n):new e.constructor(n);return e.copy(r),r}(c,!0)):m?(v=!1,g=c,y=!0?(D=new(C=g.buffer).constructor(C.byteLength),new ue(D).set(new ue(C)),D):g.buffer,d=new g.constructor(y,g.byteOffset,g.length)):d=[]:function(e){if(!E(e)||f(e)!=T)return!1;var t=pe(e);if(null===t)return!0;var n=ne.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&te.call(n)==se}(c)||we(c)?(d=a,we(a)?d=function(e){return function(e,t,n,r){var o=!n;n||(n={});var s=-1,i=t.length;for(;++s<i;){var a=t[s],c=r?r(n[a],e[a],a,n,e):void 0;void 0===c&&(c=e[a]),o?h(n,a,c):l(n,a,c)}return n}(e,k(e))}(a):I(a)&&!P(a)||(d=function(e){return"function"!=typeof e.constructor||O(e)?{}:Oe(pe(e))}(c))):v=!1}var g,y,C,D;var w;v&&(i.set(c,d),o(d,c,r,s,i),i.delete(c));u(e,n,d)}(e,t,i,n,b,r,o);else{var c=r?r(j(e,i),s,i+"",e,t,o):void 0;void 0===c&&(c=s),u(e,i,c)}}),k)}function m(e,t){return Pe(function(e,t,n){return t=me(void 0===t?e.length-1:t,0),function(){for(var o=arguments,s=-1,i=me(o.length-t,0),a=Array(i);++s<i;)a[s]=o[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=o[s];return c[t]=n(a),r(e,this,c)}}(e,t,S),e+"")}function g(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function y(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return v(n)?n:void 0}function C(e,t){var n=typeof e;return!!(t=null==t?A:t)&&("number"==n||"symbol"!=n&&U.test(e))&&e>-1&&e%1==0&&e<t}function O(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Z)}function j(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function D(e,t){return e===t||e!=e&&t!=t}function x(e){return null!=e&&w(e.length)&&!P(e)}function P(e){if(!I(e))return!1;var t=f(e);return t==R||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function w(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=A}function I(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function E(e){return null!=e&&"object"==typeof e}function k(e){return x(e)?c(e,!0):_(e)}function S(e){return e}var N="__lodash_hash_undefined__",A=9007199254740991,M="[object Arguments]",R="[object Function]",T="[object Object]",L=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,F={};F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F[M]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object Boolean]"]=F["[object DataView]"]=F["[object Date]"]=F["[object Error]"]=F[R]=F["[object Map]"]=F["[object Number]"]=F[T]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object WeakMap]"]=!1;var B,W,K,J="object"==typeof e&&e&&e.Object===Object&&e,z="object"==typeof self&&self&&self.Object===Object&&self,G=J||z||Function("return this")(),Q=t&&!t.nodeType&&t,V=Q&&"object"==typeof n&&n&&!n.nodeType&&n,$=V&&V.exports===Q,H=$&&J.process,X=function(){try{var e=V&&V.require&&V.require("util").types;return e||H&&H.binding&&H.binding("util")}catch(e){}}(),q=X&&X.isTypedArray,Y=Array.prototype,Z=Object.prototype,ee=G["__core-js_shared__"],te=Function.prototype.toString,ne=Z.hasOwnProperty,re=(B=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",oe=Z.toString,se=te.call(Object),ie=RegExp("^"+te.call(ne).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ae=$?G.Buffer:void 0,ce=G.Symbol,ue=G.Uint8Array,le=ae?ae.allocUnsafe:void 0,pe=(W=Object.getPrototypeOf,K=Object,function(e){return W(K(e))}),he=Object.create,fe=Z.propertyIsEnumerable,de=Y.splice,ve=ce?ce.toStringTag:void 0,_e=function(){try{var e=y(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),be=ae?ae.isBuffer:void 0,me=Math.max,ge=Date.now,ye=y(G,"Map"),Ce=y(Object,"create"),Oe=function(){function e(){}return function(t){if(!I(t))return{};if(he)return he(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();o.prototype.clear=function(){this.__data__=Ce?Ce(null):{},this.size=0},o.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},o.prototype.get=function(e){var t=this.__data__;if(Ce){var n=t[e];return n===N?void 0:n}return ne.call(t,e)?t[e]:void 0},o.prototype.has=function(e){var t=this.__data__;return Ce?void 0!==t[e]:ne.call(t,e)},o.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ce&&void 0===t?N:t,this},s.prototype.clear=function(){this.__data__=[],this.size=0},s.prototype.delete=function(e){var t=this.__data__,n=p(t,e);return!(n<0)&&(n==t.length-1?t.pop():de.call(t,n,1),--this.size,!0)},s.prototype.get=function(e){var t=this.__data__,n=p(t,e);return n<0?void 0:t[n][1]},s.prototype.has=function(e){return p(this.__data__,e)>-1},s.prototype.set=function(e,t){var n=this.__data__,r=p(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},i.prototype.clear=function(){this.size=0,this.__data__={hash:new o,map:new(ye||s),string:new o}},i.prototype.delete=function(e){var t=g(this,e).delete(e);return this.size-=t?1:0,t},i.prototype.get=function(e){return g(this,e).get(e)},i.prototype.has=function(e){return g(this,e).has(e)},i.prototype.set=function(e,t){var n=g(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},a.prototype.clear=function(){this.__data__=new s,this.size=0},a.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},a.prototype.get=function(e){return this.__data__.get(e)},a.prototype.has=function(e){return this.__data__.has(e)},a.prototype.set=function(e,t){var n=this.__data__;if(n instanceof s){var r=n.__data__;if(!ye||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(r)}return n.set(e,t),this.size=n.size,this};var je,De,xe=function(e,t,n){for(var r=-1,o=Object(e),s=n(e),i=s.length;i--;){var a=s[je?i:++r];if(!1===t(o[a],a,o))break}return e},Pe=function(e){var t=0,n=0;return function(){var r=ge(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(_e?function(e,t){return _e(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:S),we=d(function(){return arguments}())?d:function(e){return E(e)&&ne.call(e,"callee")&&!fe.call(e,"callee")},Ie=Array.isArray,Ee=be||function(){return!1},ke=q?function(e){return function(t){return e(t)}}(q):function(e){return E(e)&&w(e.length)&&!!F[f(e)]},Se=(De=function(e,t,n){b(e,t,n)},m((function(e,t){var n=-1,r=t.length,o=r>1?t[r-1]:void 0,s=r>2?t[2]:void 0;for(o=De.length>3&&"function"==typeof o?(r--,o):void 0,s&&function(e,t,n){if(!I(n))return!1;var r=typeof t;return!!("number"==r?x(n)&&C(t,n.length):"string"==r&&t in n)&&D(n[t],e)}(t[0],t[1],s)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var i=t[n];i&&De(e,i,n,o)}return e})));n.exports=Se}).call(this,n("pCvA"),n("RoC8")(e))},GZ11:function(e,t){"use strict";t.a={"searchable-menu":"searchable-menu__2ejBr","search-bar":"search-bar___gyq1",items:"items__3X6Q4",item:"item__1G1Qx"}},ILzg:function(e,t){"use strict";t.a=({projectName:e,version:t,convos:n,chars:r})=>JSON.stringify({projectName:e,version:t,convos:n,chars:r})},JNjM:function(e,t){"use strict";t.a={"command-box":"command-box__1-HCN"}},KSen:function(e,t,n){"use strict";(function(e){var r=n("Rb1n"),o=n("hosL"),s=n("UQAG"),i=n("CR+S"),a=n("UCOg");t.a=Object(s.connect)(["chars","editedCharID"],{updateCharacter:i.a})(class extends o.Component{constructor(e){super(e),this.onCharacterNameChange=this.onCharacterNameChange.bind(this),this.onCharacterColorChange=this.onCharacterColorChange.bind(this)}onCharacterNameChange(e){this.props.updateCharacter(this.props.editedCharID,{name:e.target.value})}onCharacterColorChange(e){this.props.updateCharacter(this.props.editedCharID,{color:parseInt(e.target.value.slice(1),16)})}render(){const{editedCharID:t,chars:n}=this.props,o=n.find((e=>e.id===t));return e("div",{className:r.a["character-settings"]},e("div",{className:r.a.row},e("div",{className:r.a.label},"Character name"),e("input",{type:"text",className:r.a.control,value:o.name,onChange:this.onCharacterNameChange})),e("div",{className:r.a.row},e("div",{className:r.a.label},"Character color"),e("input",{type:"color",className:r.a.control,value:Object(a.a)(o.color),onChange:this.onCharacterColorChange})))}})}).call(this,n("hosL").h)},MECP:function(e,t){"use strict";t.a={app:"app__3v5cP","app-pane":"app-pane__3z7Kq","convos-pane":"convos-pane__3jigy","messages-pane":"messages-pane__2RWKi","command-box-pane":"command-box-pane__2Jtnd","characters-pane":"characters-pane__2IW0B"}},Oein:function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t)=>({exportConvoSettings:r(r({},e.exportConvoSettings),{},{justifyEnabled:t})})},PMWH:function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t,n)=>({convos:e.convos.map((e=>r(r({},e),{},{messages:e.messages.map((e=>e.authorID!==t?e:r(r({},e),{},{authorID:n})))})))})},QfWi:function(e,t,n){"use strict";n.r(t),function(e){n("3Ov2");var r=n("CPM1"),o=n("UQAG"),s=n("GX0+"),i=n.n(s),a=n("GDN+");const c=Object(r.a)((()=>{const e={version:1,projectName:"New Project",convos:[],chars:[],currentConvoIndex:-1,currentCharID:null,editedMessageID:null,editedConvoID:null,editedCharID:null,exportedConvoID:null,toBeReplacedCharID:null,insertAboveMessageID:null,exportConvoSettings:{wrapTextEnabled:!1,wrapTextLength:80,justifyEnabled:!0,justifySide:"left"}},t=localStorage.getItem("store");if(!t)return e;const n=JSON.parse(t);return 1!==n.version||i()(e,n),e})());c.subscribe((e=>{localStorage.setItem("store",JSON.stringify(e))}));t.default=()=>e(o.Provider,{store:c},e(a.a,null))}.call(this,n("hosL").h)},Rb1n:function(e,t){"use strict";t.a={"character-settings":"character-settings__uP29I",row:"row__1cd3k",label:"label__7PH9z",control:"control__3kM2c"}},RoC8:function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},RtvN:function(e,t){"use strict";t.a=(e,t,n)=>{const r=e.chars.findIndex((e=>e.id===t));return{chars:e.chars.filter((e=>e.id!==t)),currentCharID:n||(1===e.chars.length?null:r===e.chars.length-1?e.chars[e.chars.length-2].id:e.chars[r+1].id)}}},S07r:function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t,n)=>({convos:e.convos.map((e=>e.id!==t?e:r(r({},e),{},{name:n})))})},SNmg:function(e,t,n){"use strict";(function(e){var r=n("vNcm"),o=n("hosL"),s=n("UQAG"),i=n("23og"),a=n("XF95"),c=n("Oein"),u=n("Egv2"),l=n("ki8L");t.a=Object(s.connect)((e=>{const{convos:t,exportedConvoID:n,chars:r}=e,{wrapTextEnabled:o,wrapTextLength:s,justifyEnabled:i,justifySide:a}=e.exportConvoSettings;return{convos:t,exportedConvoID:n,chars:r,wrapTextEnabled:o,wrapTextLength:s,justifyEnabled:i,justifySide:a}}),{setWrapTextEnabled:i.a,setWrapTextLength:a.a,setJustifyEnabled:c.a,setJustifySide:u.a})(class extends o.Component{constructor(e){super(e),this.onChangeWrapTextEnabled=this.onChangeWrapTextEnabled.bind(this),this.onChangeWrapTextLength=this.onChangeWrapTextLength.bind(this),this.onChangeJustifyEnabled=this.onChangeJustifyEnabled.bind(this),this.onChangeJustifySide=this.onChangeJustifySide.bind(this),this.onExport=this.onExport.bind(this)}onChangeWrapTextEnabled(e){this.props.setWrapTextEnabled(e.target.checked)}onChangeWrapTextLength(e){const t=parseInt(e.target.value);Number.isFinite(t)&&this.props.setWrapTextLength(t)}onChangeJustifyEnabled(e){this.props.setJustifyEnabled(e.target.checked)}onChangeJustifySide(e){this.props.setJustifySide(e.target.value)}onExport(){const{convos:e,exportedConvoID:t,chars:n,wrapTextEnabled:r,wrapTextLength:o,justifyEnabled:s,justifySide:i}=this.props,a=e.find((e=>e.id===t));if(!a)return;const c=new Set;for(const e of a.messages)c.add(e.authorID);const u=Array.from(c).reduce(((e,t)=>Math.max(e,n.find((e=>e.id===t)).name.length)),0),p=[];for(const e of a.messages){const t=n.find((t=>t.id===e.authorID)).name;let a=`<${t}> `;if(s){const e=" ".repeat(u-t.length);"left"===i?a+=e:a=e+a}let c=a;if(r){const t=/([^\s]+)(\s|$)/g;let n;for(t.lastIndex=0;null!==(n=t.exec(e.contents));)c.length+n[1].length<=o?c+=n[0]:(p.push(c.trimEnd()),c=" ".repeat(a.length)+n[0]);c.trimEnd().length>0&&p.push(c.trimEnd())}else p.push(c+e.contents)}const h=p.join("\n");Object(l.a)(`${a.name}.txt`,h)}render(){const{convos:t,exportedConvoID:n,wrapTextEnabled:o,wrapTextLength:s,justifyEnabled:i,justifySide:a}=this.props,c=t.find((e=>e.id===n));return c?e("div",{className:r.a["export-modal"]},e("div",{className:r.a["export-title"]},"Export ",`"${c.name}"`),e("div",{className:r.a.row},e("label",null,e("input",{type:"checkbox",checked:o,onChange:this.onChangeWrapTextEnabled}),"Wrap text at "),e("input",{type:"number",min:0,onChange:this.onChangeWrapTextLength,disabled:!o,value:s})," chars"),e("div",{className:r.a.row},e("label",null,e("input",{type:"checkbox",checked:i,onChange:this.onChangeJustifyEnabled}),"Justify usernames "),e("label",null,e("input",{type:"radio",onClick:this.onChangeJustifySide,checked:"left"===a,disabled:!i,value:"left"})," Left"),e("label",null,e("input",{type:"radio",onClick:this.onChangeJustifySide,checked:"right"===a,disabled:!i,value:"right"})," Right")),e("div",{className:r.a.row},e("button",{onClick:this.onExport},"Export"))):null}})}).call(this,n("hosL").h)},SQ3b:function(e,t){"use strict";t.a={message:"message__1Gv6N",buttons:"buttons__2O_FT",contents:"contents__2Y7XI",author:"author__2YOzN","message-edit-wrapper":"message-edit-wrapper__2wEXY","message-edit-area":"message-edit-area__1C4xo"}},TYNd:function(e,t){"use strict";t.a=(e,t)=>({exportedConvoID:t})},UCOg:function(e,t){"use strict";t.a=e=>"#"+("000000"+e.toString(16)).slice(-6)},UQAG:function(e,t,n){function r(e,t){for(var n in t)e[n]=t[n];return e}function o(e){this.getChildContext=function(){return{store:e.store}}}var s=n("hosL");o.prototype.render=function(e){return e.children&&e.children[0]||e.children},t.connect=function(e,t){var n;return"function"!=typeof e&&("string"==typeof(n=e||{})&&(n=n.split(/\s*,\s*/)),e=function(e){for(var t={},r=0;r<n.length;r++)t[n[r]]=e[n[r]];return t}),function(n){function o(o,i){var a=this,c=i.store,u=e(c?c.getState():{},o),l=t?function(e,t){"function"==typeof e&&(e=e(t));var n={};for(var r in e)n[r]=t.action(e[r]);return n}(t,c):{store:c},p=function(){var t=e(c?c.getState():{},o);for(var n in t)if(t[n]!==u[n])return u=t,a.setState({});for(var r in u)if(!(r in t))return u=t,a.setState({})};this.componentWillReceiveProps=function(e){o=e,p()},this.componentDidMount=function(){c.subscribe(p)},this.componentWillUnmount=function(){c.unsubscribe(p)},this.render=function(e){return s.h(n,r(r(r({},l),e),u))}}return(o.prototype=new s.Component).constructor=o}},t.Provider=o},"Uvu/":function(e,t){"use strict";t.a={"convo-list":"convo-list__2Fe7s",convos:"convos__2WWx_",convo:"convo__I4Lqx",active:"active__1seF6","convo-name":"convo-name__2gZc2","add-convo-wrapper":"add-convo-wrapper__3-zDP"}},VWK7:function(e,t){"use strict";t.a={divider:"divider__24wuz",character:"character__xFcjl",active:"active__cphkj","character-name":"character-name__1D7tD"}},VqH4:function(e,t,n){"use strict";(function(e,r){var o=n("q6Rg");t.a=({onClose:t,children:n})=>e(r,null,e("div",{className:o.a["modal-bg"],onClick:t}),e("div",{className:o.a["modal-positioner"]},e("div",{className:o.a.modal},n)))}).call(this,n("hosL").h,n("hosL").Fragment)},XF95:function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t)=>({exportConvoSettings:r(r({},e.exportConvoSettings),{},{wrapTextLength:t})})},ZKFM:function(e,t){"use strict";t.a=(e,t)=>({insertAboveMessageID:t})},ZQP2:function(e,t){"use strict";t.a={messages:"messages__TwUxC","messages-inner":"messages-inner__2L45y","insert-box":"insert-box__2EmIz","close-wrapper":"close-wrapper__1AM-W","close-positioner":"close-positioner__1_7T5","command-box-wrapper":"command-box-wrapper__5ml5b"}},b0Ln:function(e,t){"use strict";t.a=(e,t)=>({toBeReplacedCharID:t})},cuUh:function(e,t,n){"use strict";(function(e,r){var o=n("VWK7"),s=n("yTKo"),i=n("hosL"),a=n("UQAG"),c=n("8Jek"),u=n.n(c),l=n("RtvN"),p=n("8pl+"),h=n("7Pee"),f=n("b0Ln"),d=n("UCOg");const v=({char:t,active:n,onClick:r,onEdit:i,onDelete:a})=>e("div",{className:u()(o.a.character,{[o.a.active]:n}),onClick:r&&(()=>r(t))},e("div",{className:o.a["character-name"],style:`color: ${Object(d.a)(t.color)}`},t.name),e("div",{className:u()(o.a.edit,s.a.icon,s.a["icon-button"],s.a.edit),onClick:i&&(()=>i(t))}),e("div",{className:u()(o.a.delete,s.a.icon,s.a["icon-button"],s.a.delete,{[s.a.disabled]:!a}),onClick:a?()=>a(t):null}));t.a=Object(a.connect)(["chars","currentCharID","convos","currentConvoIndex"],{deleteCharacter:l.a,setCurrentCharacterID:p.a,setEditedCharacterID:h.a,setToBeReplacedCharacterID:f.a})(class extends i.Component{constructor(e){super(e),this.onClickCharacter=this.onClickCharacter.bind(this),this.onEditCharacter=this.onEditCharacter.bind(this),this.onDeleteCharacter=this.onDeleteCharacter.bind(this)}onClickCharacter(e){this.props.setCurrentCharacterID(e.id)}onEditCharacter(e){this.props.setEditedCharacterID(e.id)}onDeleteCharacter(e){for(const t of this.props.convos)for(const n of t.messages)if(n.authorID===e.id)return void this.props.setToBeReplacedCharacterID(e.id);this.props.deleteCharacter(e.id)}render(){const{chars:t,currentCharID:n,convos:s,currentConvoIndex:i}=this.props,a=new Set;if(-1!==i){const e=s[i];for(const t of e.messages)a.has(t.authorID)||a.add(t.authorID)}const c=[],u=[];for(const e of t)a.has(e.id)?c.push(e):u.push(e);return e("div",{className:o.a["character-list"]},c.length>0&&e(r,null,e("div",{className:o.a.divider},"Characters in current convo:"),e("div",{className:o.a["character-sublist"]},c.map((t=>e(v,{key:t.id,char:t,active:t.id===n,onClick:this.onClickCharacter,onEdit:this.onEditCharacter,onDelete:this.props.chars.length>1&&this.onDeleteCharacter}))))),u.length>0&&e(r,null,e("div",{className:o.a.divider},"Other characters:"),e("div",{className:o.a["character-sublist"]},u.map((t=>e(v,{key:t.id,char:t,active:t.id===n,onClick:this.onClickCharacter,onEdit:this.onEditCharacter,onDelete:this.props.chars.length>1&&this.onDeleteCharacter}))))))}})}).call(this,n("hosL").h,n("hosL").Fragment)},"dB+w":function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t,n)=>{for(let o=0;o<e.convos.length;o++){const s=e.convos[o];for(let i=0;i<s.messages.length;i++){const a=s.messages[i];if(a.id===t){const t=e.convos.slice(0),c=s.messages.slice(0);return c[i]=r(r({},a),{},{authorID:n}),t[o]=r(r({},s),{},{messages:c}),{convos:t}}}}}},dnxQ:function(e,t,n){"use strict";(function(e){var r=n("u6aR"),o=n("yTKo"),s=n("hosL"),i=n("UQAG"),a=n("8Jek"),c=n.n(a),u=n("/f2m"),l=n("iEaH"),p=n("ILzg"),h=n("9KuC"),f=n("ki8L");t.a=Object(i.connect)(["version","projectName","convos","chars"],{loadState:u.a,setProjectName:l.a})(class extends s.Component{constructor(e){super(e),this.state={error:null},this.onInput=this.onInput.bind(this),this.onSave=this.onSave.bind(this),this.onLoad=this.onLoad.bind(this),this.closeError=this.closeError.bind(this)}onInput(e){this.props.setProjectName(e.target.value)}onLoad(){const e=document.createElement("input");e.type="file",e.addEventListener("change",(e=>{const t=e.target.files;if(t.length>0){const e=new FileReader;e.addEventListener("load",(()=>{try{const t=JSON.parse(e.result);if(Object(h.a)(t).length>0)throw new Error("Invalid JSON");this.props.loadState(t)}catch(e){this.setState({error:e})}})),e.readAsText(t[0])}})),e.click()}onSave(){const{version:e,projectName:t,convos:n,chars:r}=this.props;Object(f.a)(`${t}.json`,Object(p.a)({version:e,projectName:t,convos:n,chars:r}))}closeError(){this.setState({error:null})}render(){return e("div",{className:r.a["project-bar"]},e("input",{className:r.a["project-name"],type:"text",value:this.props.projectName,onInput:this.onInput}),e("div",{className:c()(r.a.button,o.a.icon,o.a["icon-button"],o.a.save),title:"Save",onClick:this.onSave}),e("div",{className:c()(r.a.button,o.a.icon,o.a["icon-button"],o.a.load),title:"Load",onClick:this.onLoad}),this.state.error?e("div",{className:r.a.error},e("span",{className:r.a["error-message"]},this.state.error.message),e("div",{className:c()(o.a.icon,o.a["icon-button"],o.a.delete),onClick:this.closeError})):null)}})}).call(this,n("hosL").h)},fdQA:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("BuAb"),t),o(n("FNu+"),t)},h2tO:function(e,t){"use strict";t.a=(e,t)=>({currentConvoIndex:t})},hQme:function(e,t){"use strict";t.a=(e,t)=>({editedConvoID:void 0===t?e.convos[e.currentConvoIndex].id:t})},hosL:function(e,t,n){"use strict";function r(e,t){for(var n in t)e[n]=t[n];return e}function o(e){var t=e.parentNode;t&&t.removeChild(e)}function s(e,t,n){var r,o,s,a={};for(s in t)"key"==s?r=t[s]:"ref"==s?o=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?N.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===a[s]&&(a[s]=e.defaultProps[s]);return i(e,a,r,o,null)}function i(e,t,n,r,o){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++M:o};return null!=A.vnode&&A.vnode(s),s}function a(){return{current:null}}function c(e){return e.children}function u(e,t){this.props=e,this.context=t}function l(e,t){if(null==t)return e.__?l(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?l(e):null}function p(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return p(e)}}function h(e){(!e.__d&&(e.__d=!0)&&T.push(e)&&!f.__r++||U!==A.debounceRendering)&&((U=A.debounceRendering)||L)(f)}function f(){for(var e;f.__r=T.length;)e=T.sort((function(e,t){return e.__v.__b-t.__v.__b})),T=[],e.some((function(e){var t,n,o,s,i,a;e.__d&&(i=(s=(t=e).__v).__e,(a=t.__P)&&(n=[],(o=r({},s)).__v=s.__v+1,O(a,s,o,t.__n,void 0!==a.ownerSVGElement,null!=s.__h?[i]:null,n,null==i?l(s):i,s.__h),j(n,s),s.__e!=i&&p(s)))}))}function d(e,t,n,r,o,s,a,u,p,h){var f,d,_,m,g,y,C,j=r&&r.__k||W,D=j.length;for(n.__k=[],f=0;f<t.length;f++)if(null!=(m=n.__k[f]=null==(m=t[f])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m||"bigint"==typeof m?i(null,m,null,null,m):Array.isArray(m)?i(c,{children:m},null,null,null):m.__b>0?i(m.type,m.props,m.key,null,m.__v):m)){if(m.__=n,m.__b=n.__b+1,null===(_=j[f])||_&&m.key==_.key&&m.type===_.type)j[f]=void 0;else for(d=0;d<D;d++){if((_=j[d])&&m.key==_.key&&m.type===_.type){j[d]=void 0;break}_=null}O(e,m,_=_||B,o,s,a,u,p,h),g=m.__e,(d=m.ref)&&_.ref!=d&&(C||(C=[]),_.ref&&C.push(_.ref,null,m),C.push(d,m.__c||g,m)),null!=g?(null==y&&(y=g),"function"==typeof m.type&&null!=m.__k&&m.__k===_.__k?m.__d=p=v(m,p,e):p=b(e,m,_,j,g,p),h||"option"!==n.type?"function"==typeof n.type&&(n.__d=p):e.value=""):p&&_.__e==p&&p.parentNode!=e&&(p=l(_))}for(n.__e=y,f=D;f--;)null!=j[f]&&("function"==typeof n.type&&null!=j[f].__e&&j[f].__e==n.__d&&(n.__d=l(r,f+1)),P(j[f],j[f]));if(C)for(f=0;f<C.length;f++)x(C[f],C[++f],C[++f])}function v(e,t,n){var r,o;for(r=0;r<e.__k.length;r++)(o=e.__k[r])&&(o.__=e,t="function"==typeof o.type?v(o,t,n):b(n,o,o,e.__k,o.__e,t));return t}function _(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){_(e,t)})):t.push(e)),t}function b(e,t,n,r,o,s){var i,a,c;if(void 0!==t.__d)i=t.__d,t.__d=void 0;else if(null==n||o!=s||null==o.parentNode)e:if(null==s||s.parentNode!==e)e.appendChild(o),i=null;else{for(a=s,c=0;(a=a.nextSibling)&&c<r.length;c+=2)if(a==o)break e;e.insertBefore(o,s),i=s}return void 0!==i?i:o.nextSibling}function m(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||K.test(t)?n:n+"px"}function g(e,t,n,r,o){var s;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||m(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||m(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r||e.addEventListener(t,s?C:y,s):e.removeEventListener(t,s?C:y,s);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function y(e){this.l[e.type+!1](A.event?A.event(e):e)}function C(e){this.l[e.type+!0](A.event?A.event(e):e)}function O(e,t,n,o,s,i,a,l,p){var h,f,v,_,b,m,g,y,C,O,j,x=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(p=n.__h,l=t.__e=n.__e,t.__h=null,i=[l]),(h=A.__b)&&h(t);try{e:if("function"==typeof x){if(y=t.props,C=(h=x.contextType)&&o[h.__c],O=h?C?C.props.value:h.__:o,n.__c?g=(f=t.__c=n.__c).__=f.__E:("prototype"in x&&x.prototype.render?t.__c=f=new x(y,O):(t.__c=f=new u(y,O),f.constructor=x,f.render=w),C&&C.sub(f),f.props=y,f.state||(f.state={}),f.context=O,f.__n=o,v=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=x.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=r({},f.__s)),r(f.__s,x.getDerivedStateFromProps(y,f.__s))),_=f.props,b=f.state,v)null==x.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==x.getDerivedStateFromProps&&y!==_&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(y,O),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(y,f.__s,O)||t.__v===n.__v){f.props=y,f.state=f.__s,t.__v!==n.__v&&(f.__d=!1),f.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),f.__h.length&&a.push(f);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(y,f.__s,O),null!=f.componentDidUpdate&&f.__h.push((function(){f.componentDidUpdate(_,b,m)}))}f.context=O,f.props=y,f.state=f.__s,(h=A.__r)&&h(t),f.__d=!1,f.__v=t,f.__P=e,h=f.render(f.props,f.state,f.context),f.state=f.__s,null!=f.getChildContext&&(o=r(r({},o),f.getChildContext())),v||null==f.getSnapshotBeforeUpdate||(m=f.getSnapshotBeforeUpdate(_,b)),j=null!=h&&h.type===c&&null==h.key?h.props.children:h,d(e,Array.isArray(j)?j:[j],t,n,o,s,i,a,l,p),f.base=t.__e,t.__h=null,f.__h.length&&a.push(f),g&&(f.__E=f.__=null),f.__e=!1}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=D(n.__e,t,n,o,s,i,a,p);(h=A.diffed)&&h(t)}catch(e){t.__v=null,(p||null!=i)&&(t.__e=l,t.__h=!!p,i[i.indexOf(l)]=null),A.__e(e,t,n)}}function j(e,t){A.__c&&A.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){A.__e(e,t.__v)}}))}function D(e,t,n,r,s,i,a,c){var u,p,h,f=n.props,v=t.props,_=t.type,b=0;if("svg"===_&&(s=!0),null!=i)for(;b<i.length;b++)if((u=i[b])&&(u===e||(_?u.localName==_:3==u.nodeType))){e=u,i[b]=null;break}if(null==e){if(null===_)return document.createTextNode(v);e=s?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,v.is&&v),i=null,c=!1}if(null===_)f===v||c&&e.data===v||(e.data=v);else{if(i=i&&N.call(e.childNodes),p=(f=n.props||B).dangerouslySetInnerHTML,h=v.dangerouslySetInnerHTML,!c){if(null!=i)for(f={},b=0;b<e.attributes.length;b++)f[e.attributes[b].name]=e.attributes[b].value;(h||p)&&(h&&(p&&h.__html==p.__html||h.__html===e.innerHTML)||(e.innerHTML=h&&h.__html||""))}if(function(e,t,n,r,o){var s;for(s in n)"children"===s||"key"===s||s in t||g(e,s,null,n[s],r);for(s in t)o&&"function"!=typeof t[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===t[s]||g(e,s,t[s],n[s],r)}(e,v,f,s,c),h)t.__k=[];else if(b=t.props.children,d(e,Array.isArray(b)?b:[b],t,n,r,s&&"foreignObject"!==_,i,a,i?i[0]:n.__k&&l(n,0),c),null!=i)for(b=i.length;b--;)null!=i[b]&&o(i[b]);c||("value"in v&&void 0!==(b=v.value)&&(b!==e.value||"progress"===_&&!b)&&g(e,"value",b,f.value,!1),"checked"in v&&void 0!==(b=v.checked)&&b!==e.checked&&g(e,"checked",b,f.checked,!1))}return e}function x(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){A.__e(e,n)}}function P(e,t,n){var r,s;if(A.unmount&&A.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||x(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){A.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&P(r[s],t,"function"!=typeof e.type);n||null==e.__e||o(e.__e),e.__e=e.__d=void 0}function w(e,t,n){return this.constructor(e,n)}function I(e,t,n){var r,o,i;A.__&&A.__(e,t),o=(r="function"==typeof n)?null:n&&n.__k||t.__k,i=[],O(t,e=(!r&&n||t).__k=s(c,null,[e]),o||B,B,void 0!==t.ownerSVGElement,!r&&n?[n]:o?null:t.firstChild?N.call(t.childNodes):null,i,!r&&n?n:o?o.__e:t.firstChild,r),j(i,e)}function E(e,t){I(e,t,E)}function k(e,t,n){var o,s,a,c=r({},e.props);for(a in t)"key"==a?o=t[a]:"ref"==a?s=t[a]:c[a]=t[a];return arguments.length>2&&(c.children=arguments.length>3?N.call(arguments,2):n),i(e.type,c,o||e.key,s||e.ref,null)}function S(e,t){var n={__c:t="__cC"+F++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(h)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}n.r(t),n.d(t,"render",(function(){return I})),n.d(t,"hydrate",(function(){return E})),n.d(t,"createElement",(function(){return s})),n.d(t,"h",(function(){return s})),n.d(t,"Fragment",(function(){return c})),n.d(t,"createRef",(function(){return a})),n.d(t,"isValidElement",(function(){return R})),n.d(t,"Component",(function(){return u})),n.d(t,"cloneElement",(function(){return k})),n.d(t,"createContext",(function(){return S})),n.d(t,"toChildArray",(function(){return _})),n.d(t,"options",(function(){return A}));var N,A,M,R,T,L,U,F,B={},W=[],K=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;N=W.slice,A={__e:function(e,t){for(var n,r,o;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),o=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),o=n.__d),o)return n.__E=n}catch(t){e=t}throw e}},M=0,R=function(e){return null!=e&&void 0===e.constructor},u.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=r({},this.state),"function"==typeof e&&(e=e(r({},n),this.props)),e&&r(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),h(this))},u.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),h(this))},u.prototype.render=c,T=[],L="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,f.__r=0,F=0},iEaH:function(e,t){"use strict";t.a=(e,t)=>({projectName:t})},ki8L:function(e,t){"use strict";t.a=(e,t)=>{const n=document.createElement("a"),r=URL.createObjectURL(new Blob([t]));n.href=r,n.download=e,n.click(),setTimeout((()=>{window.URL.revokeObjectURL(r)}),0)}},"l/KG":function(e,t){"use strict";t.a=(e,t)=>({editedMessageID:t})},mdyV:function(e,t,n){"use strict";n.r(t);var r=n("hosL");const{h:o,render:s,hydrate:i}=r,a=e=>e&&e.default?e.default:e;if("serviceWorker"in navigator&&navigator.serviceWorker.register(n.p+"sw-esm.js"),"function"==typeof a(n("QfWi"))){let e=document.getElementById("preact_root")||document.body.firstElementChild;0,(()=>{let t=a(n("QfWi")),r={};const i=document.querySelector('[type="__PREACT_CLI_DATA__"]');i&&(r=JSON.parse(decodeURI(i.innerHTML)).preRenderData||r);r.url&&(c=r.url);var c;e=s(o(t,{CLI_DATA:{preRenderData:r}}),document.body,e)})()}},nVVG:function(e,t,n){"use strict";(function(e){var r=n("3Ufl"),o=n("hosL"),s=n("UQAG"),i=n("RtvN"),a=n("PMWH"),c=n("b0Ln");t.a=Object(s.connect)(["chars","toBeReplacedCharID"],{replaceCharacter:a.a,setToBeReplacedCharacterID:c.a,deleteCharacter:i.a})(class extends o.Component{constructor(e){super(e),this.state={selectedCharacterID:null},this.selectBox=Object(o.createRef)(),this.selectCharacter=this.selectCharacter.bind(this),this.replaceCharacter=this.replaceCharacter.bind(this)}selectCharacter(e){this.setState({selectedCharacterID:e.target.value})}replaceCharacter(){this.props.replaceCharacter(this.props.toBeReplacedCharID,this.state.selectedCharacterID),this.props.deleteCharacter(this.props.toBeReplacedCharID,this.state.selectedCharacterID),this.props.setToBeReplacedCharacterID(null)}render(){const{chars:t,toBeReplacedCharID:n}=this.props;return e("div",{className:r.a["replace-character"]},e("div",{className:r.a.row},e("div",{className:r.a.label},"Replace character ",e("span",{className:r.a["old-character-name"]}," with:")),e("select",{onChange:this.selectCharacter,value:this.state.selectedCharacterID,ref:this.selectBox},t.map((t=>t.id===n?null:e("option",{value:t.id},t.name))))),e("div",null,e("button",{onClick:this.replaceCharacter,disabled:null===this.state.selectedCharacterID},"Replace")))}})}).call(this,n("hosL").h)},nvQP:function(e,t,n){"use strict";(function(e){var r=n("GZ11"),o=n("hosL");t.a=class extends o.Component{constructor(e){super(e),this.state={query:"",maxHeight:null,y:null},this.onInput=this.onInput.bind(this),this.onFocusOut=this.onFocusOut.bind(this),this.searchRef=Object(o.createRef)()}onInput(e){this.setState({query:e.target.value})}onFocusOut(e){!e.currentTarget.contains(e.relatedTarget)&&this.props.onDismiss&&this.props.onDismiss()}componentDidMount(){this.searchRef.current&&this.searchRef.current.focus()}render(){return e("div",{className:r.a["searchable-menu"],style:{top:`${this.props.y}px`,left:`${this.props.x}px`,maxHeight:`calc(100vh - ${this.props.y}px)`},onfocusout:this.onFocusOut,tabIndex:"0"},e("div",{className:r.a["search-bar"]},e("input",{type:"text",onInput:this.onInput,ref:this.searchRef})),e("div",{className:r.a.items},this.props.items.map((t=>-1===t.value.toLowerCase().indexOf(this.state.query)?null:e("div",{className:r.a.item,key:t.id,onClick:this.props.onClickItem?this.props.onClickItem.bind(this,t.id):null},t.value)))))}}}).call(this,n("hosL").h)},omBr:function(e,t,n){"use strict";(function(e){var r=n("JNjM"),o=n("hosL"),s=n("UQAG"),i=n("2hU4"),a=n("04Fd"),c=n("7sUR"),u=n("8pl+");t.a=Object(s.connect)(["chars"],{createMessage:a.a,editMessage:c.a,createCharacter:i.a,setCurrentCharacterID:u.a})(class extends o.Component{constructor(e){super(e),this.tabResults=null,this.tabIndex=-1,this.onKeyPress=this.onKeyPress.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}onKeyDown(e){if("Tab"===e.code){e.preventDefault();const t=e.target.value.toLowerCase();if(-1===t.indexOf(":")&&null===this.tabResults&&(this.tabResults=this.props.chars.filter((e=>e.name.toLowerCase().startsWith(t))),this.tabIndex=0),0===this.tabResults.length)return;const n=this.tabResults[this.tabIndex];this.tabIndex=(this.tabIndex+1)%this.tabResults.length,e.target.value=`${n.name}: `}else this.tabResults=null}onKeyPress(e){if("Enter"===e.code&&!e.shiftKey){e.preventDefault();let t=e.target.value;const n=/([^:]+):(?:\s+)(.+)/g.exec(t);if(n){const e=n[1],r=e.toLowerCase(),o=this.props.chars.find((e=>e.name.toLowerCase()===r));o?this.props.setCurrentCharacterID(o.id):this.props.createCharacter(e),t=n[2]}const r=/^s\/([^/]+)\/([^/]+)\/?$/.exec(t);if(r){const{currentCharID:t,chars:n,currentConvoIndex:o,convos:s}=this.context.store.getState(),i=n.find((e=>e.id===t)),{messages:a}=s[o];for(let t=this.props.beforeMessage||a.length-1;t>=0;t--)if(a[t].authorID===i.id)return this.props.editMessage(a[t].id,a[t].contents.split(r[1]).join(r[2])),void(e.target.value="")}e.target.value="",this.props.createMessage(t,this.props.beforeMessage)}}render(){return e("textarea",{className:r.a["command-box"],onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown})}})}).call(this,n("hosL").h)},pCvA:function(e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},q6Rg:function(e,t){"use strict";t.a={"modal-bg":"modal-bg__2cJDI",fade:"fade__1w0KX","modal-positioner":"modal-positioner__F8P48",modal:"modal__LYvZS",popup:"popup__1XomI"}},s3hk:function(e,t,n){"use strict";(function(e){var r=n("SQ3b"),o=n("yTKo"),s=n("hosL"),i=n("UQAG"),a=n("8Jek"),c=n.n(a),u=n("nvQP"),l=n("4HEG"),p=n("7sUR"),h=n("dB+w"),f=n("l/KG"),d=n("ZKFM"),v=n("UCOg");t.a=Object(i.connect)(["chars","editedMessageID","insertAboveMessageID"],{deleteMessage:l.a,editMessage:p.a,replaceMessageAuthor:h.a,setEditedMessage:f.a,setInsertAboveMessageID:d.a})(class extends s.Component{constructor(e){super(e),this.state={authorMenuOpen:!1,authorMenuX:0,authorMenuY:0},this.contentsRef=Object(s.createRef)(),this.onInsertAbove=this.onInsertAbove.bind(this),this.onMessageEdit=this.onMessageEdit.bind(this),this.onMessageDelete=this.onMessageDelete.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.onBlur=this.onBlur.bind(this),this.onClickAuthor=this.onClickAuthor.bind(this),this.onDismissAuthorMenu=this.onDismissAuthorMenu.bind(this),this.onReplaceAuthor=this.onReplaceAuthor.bind(this)}onInsertAbove(){this.props.setInsertAboveMessageID(this.props.insertAboveMessageID===this.props.message.id?null:this.props.message.id)}onMessageEdit(){this.props.setEditedMessage(this.props.editedMessageID===this.props.message.id?null:this.props.message.id)}onMessageDelete(){this.props.deleteMessage(this.props.index)}onKeyPress(e){"Enter"!==e.code||e.shiftKey||(this.props.editMessage(this.props.message.id,this.contentsRef.current.value),this.props.setEditedMessage(null))}onBlur(){this.props.editMessage(this.props.message.id,this.contentsRef.current.value),this.props.setEditedMessage(null)}onClickAuthor(e){const{x:t,y:n,height:r}=e.target.getBoundingClientRect();this.setState((e=>({authorMenuOpen:!e.authorMenuOpen,authorMenuX:t,authorMenuY:n+r})))}onReplaceAuthor(e){this.props.replaceMessageAuthor(this.props.message.id,e),this.setState({authorMenuOpen:!1})}onDismissAuthorMenu(){this.setState({authorMenuOpen:!1})}componentDidUpdate(e){e.editedMessageID!==e.message.id&&this.props.editedMessageID===this.props.message.id&&this.contentsRef.current&&this.contentsRef.current.focus()}render(){const{message:t,chars:n,editedMessageID:s,elemRef:i}=this.props,{id:a,authorID:l,contents:p}=t,h=a===s,f=n.find((e=>e.id===l))||{color:16777215,name:"Unknown Character"};return e("div",{className:r.a.message,ref:i},e("div",{className:r.a.author,style:`color: ${Object(v.a)(f.color)}`,onClick:this.onClickAuthor},f.name),e("div",{className:c()(r.a.contents,{[r.a.editable]:h})},h?e("div",{className:r.a["message-edit-wrapper"]},e("textarea",{className:r.a["message-edit-area"],onKeyPress:this.onKeyPress,onBlur:this.onBlur,tabIndex:"0",ref:this.contentsRef,value:p})):p),e("div",{className:r.a.buttons},e("div",{className:c()(o.a.icon,o.a["icon-button"],o.a["insert-above"]),title:"Insert above",onClick:this.onInsertAbove}),e("div",{className:c()(o.a.icon,o.a["icon-button"],o.a.edit),title:"Edit",onClick:this.onMessageEdit}),e("div",{className:c()(o.a.icon,o.a["icon-button"],o.a.delete),title:"Delete",onClick:this.onMessageDelete})),this.state.authorMenuOpen?e(u.a,{items:this.props.chars.map((({id:e,name:t})=>({id:e,value:t}))),x:this.state.authorMenuX,y:this.state.authorMenuY,onDismiss:this.onDismissAuthorMenu,onClickItem:this.onReplaceAuthor}):null)}})}).call(this,n("hosL").h)},u6aR:function(e,t){"use strict";t.a={"project-bar":"project-bar__1grAi","project-name":"project-name__11aJs",button:"button__3v3wp",error:"error__3QnLA"}},vNcm:function(e,t){"use strict";t.a={"export-title":"export-title__g07G8",row:"row__29Ue_"}},yTKo:function(e,t){"use strict";t.a={icon:"icon__1RDVl","icon-button":"icon-button__3dJs1",active:"active__X9UHb",disabled:"disabled___Rdup",delete:"delete__5sT5d",edit:"edit__hkaq1","insert-above":"insert-above__2e7WT",load:"load__14cpF",save:"save__3lssl",export:"export__1WXd1"}}});
//# sourceMappingURL=bundle.dffad.esm.js.map