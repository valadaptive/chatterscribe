(()=>{function e(o){var r=n[o];if(void 0!==r)return r.exports;var i=n[o]={exports:{}};return t[o].call(i.exports,i,i.exports,e),i.exports}var t={588:(e,t)=>{var n;!function(){"use strict";function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,r(n)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)s.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}var s={}.hasOwnProperty;e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},454:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(559),t),r(n(433),t)},944:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(\.\d+)?([zZ]|((\+|-)(\d{2}):(\d{2})))$/;t.default=function(e){const t=e.match(n);if(null===t)return!1;const r=parseInt(t[1],10),i=parseInt(t[2],10),s=parseInt(t[3],10),a=parseInt(t[4],10),l=parseInt(t[5],10),u=parseInt(t[6],10);return!(i>12)&&(!(s>function(e,t){if(2===t)return function(e){return e%4==0&&(e%100!=0||e%400==0)}(e)?29:28;return o[t]}(r,i))&&(!(a>23)&&(!(l>59)&&!(u>60))))};const o=[0,31,0,31,30,31,30,31,31,30,31,30,31]},559:function(e,t){"use strict";function n(e){return"ref"in e}function o(e){return"enum"in e}function r(e){return"elements"in e}function i(e){return"properties"in e||"optionalProperties"in e}function s(e){return"values"in e}function a(e){return"discriminator"in e}var l=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.isSchema=t.isValidSchema=t.isDiscriminatorForm=t.isValuesForm=t.isPropertiesForm=t.isElementsForm=t.isEnumForm=t.isTypeForm=t.isRefForm=t.isEmptyForm=void 0,t.isEmptyForm=function(e){const t=l(e,["definitions","nullable","metadata"]);return 0===Object.keys(t).length},t.isRefForm=n,t.isTypeForm=function(e){return"type"in e},t.isEnumForm=o,t.isElementsForm=r,t.isPropertiesForm=i,t.isValuesForm=s,t.isDiscriminatorForm=a,t.isValidSchema=function e(t,l){if(void 0===l&&(l=t),void 0!==t.definitions){if(l!==t)return!1;for(const n of Object.values(t.definitions))if(!e(n,l))return!1}if(n(t)&&!(t.ref in(l.definitions||{})))return!1;if(o(t)){if(0===t.enum.length)return!1;if(t.enum.length!==new Set(t.enum).size)return!1}if(r(t))return e(t.elements,l);if(i(t)){for(const n of Object.values(t.properties||{}))if(!e(n,l))return!1;for(const n of Object.values(t.optionalProperties||{}))if(!e(n,l))return!1;for(const e of Object.keys(t.properties||{}))if(e in(t.optionalProperties||{}))return!1}if(s(t))return e(t.values,l);if(a(t))for(const n of Object.values(t.mapping)){if(!e(n,l)||!i(n))return!1;if(n.nullable)return!1;if(t.discriminator in(n.properties||{}))return!1;if(t.discriminator in(n.optionalProperties||{}))return!1}return!0};const u=[[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!0,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!0,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!0,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!0,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!1,!0,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!0,!1,!1,!1],[!1,!1,!1,!1,!0,!0,!0,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!0,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!0,!0]],c=["boolean","float32","float64","int8","uint8","int16","uint16","int32","uint32","string","timestamp"];t.isSchema=function e(t){if("object"!=typeof t||Array.isArray(t)||null===t)return!1;const n=t,{definitions:o,nullable:r,metadata:i,ref:s,type:a,enum:_,elements:v,properties:f,optionalProperties:p,additionalProperties:d,values:h,discriminator:m,mapping:y}=n,g=l(n,["definitions","nullable","metadata","ref","type","enum","elements","properties","optionalProperties","additionalProperties","values","discriminator","mapping"]),b=[void 0!==s,void 0!==a,void 0!==_,void 0!==v,void 0!==f,void 0!==p,void 0!==d,void 0!==h,void 0!==m,void 0!==y];let C=!1;for(const e of u)C=C||e.every(((e,t)=>e===b[t]));if(!C)return!1;if(void 0!==o){if("object"!=typeof o||Array.isArray(o)||null===o)return!1;for(const t of Object.values(o))if(!e(t))return!1}if(void 0!==r&&"boolean"!=typeof r)return!1;if(void 0!==i&&("object"!=typeof i||Array.isArray(i)||null===i))return!1;if(void 0!==s&&"string"!=typeof s)return!1;if(void 0!==a&&("string"!=typeof a||!c.includes(a)))return!1;if(void 0!==_){if(!Array.isArray(_))return!1;if(!_.every((e=>"string"==typeof e)))return!1}if(void 0!==v&&!e(v))return!1;if(void 0!==f){if("object"!=typeof f||Array.isArray(f)||null===f)return!1;for(const t of Object.values(f))if(!e(t))return!1}if(void 0!==p){if("object"!=typeof p||Array.isArray(p)||null===p)return!1;for(const t of Object.values(p))if(!e(t))return!1}if(void 0!==d&&"boolean"!=typeof d)return!1;if(void 0!==h&&!e(h))return!1;if(void 0!==m&&"string"!=typeof m)return!1;if(void 0!==y){if("object"!=typeof y||Array.isArray(y)||null===y)return!1;for(const t of Object.values(y))if(!e(t))return!1}return 0===Object.keys(g).length}},433:function(e,t,n){"use strict";function o(e,t,n,c){if(!t.nullable||null!==n)if(v.isRefForm(t)){if(e.schemaTokens.length===e.config.maxDepth)throw new f;e.schemaTokens.push(["definitions",t.ref]),o(e,e.root.definitions[t.ref],n),e.schemaTokens.pop()}else if(v.isTypeForm(t)){switch(a(e,"type"),t.type){case"boolean":"boolean"!=typeof n&&u(e);break;case"float32":case"float64":"number"!=typeof n&&u(e);break;case"int8":r(e,n,-128,127);break;case"uint8":r(e,n,0,255);break;case"int16":r(e,n,-32768,32767);break;case"uint16":r(e,n,0,65535);break;case"int32":r(e,n,-2147483648,2147483647);break;case"uint32":r(e,n,0,4294967295);break;case"string":"string"!=typeof n&&u(e);break;case"timestamp":"string"!=typeof n?u(e):_.default(n)||u(e)}l(e)}else if(v.isEnumForm(t))a(e,"enum"),"string"==typeof n&&t.enum.includes(n)||u(e),l(e);else if(v.isElementsForm(t)){if(a(e,"elements"),Array.isArray(n))for(const[r,a]of n.entries())i(e,r.toString()),o(e,t.elements,a),s(e);else u(e);l(e)}else if(v.isPropertiesForm(t))if("object"!=typeof n||null===n||Array.isArray(n))a(e,void 0!==t.properties?"properties":"optionalProperties"),u(e),l(e);else{if(void 0!==t.properties){a(e,"properties");for(const[r,c]of Object.entries(t.properties))a(e,r),n.hasOwnProperty(r)?(i(e,r),o(e,c,n[r]),s(e)):u(e),l(e);l(e)}if(void 0!==t.optionalProperties){a(e,"optionalProperties");for(const[r,u]of Object.entries(t.optionalProperties))a(e,r),n.hasOwnProperty(r)&&(i(e,r),o(e,u,n[r]),s(e)),l(e);l(e)}if(!0!==t.additionalProperties)for(const o of Object.keys(n)){t.properties&&o in t.properties||t.optionalProperties&&o in t.optionalProperties||o===c||(i(e,o),u(e),s(e))}}else if(v.isValuesForm(t)){if(a(e,"values"),"object"!=typeof n||null===n||Array.isArray(n))u(e);else for(const[r,a]of Object.entries(n))i(e,r),o(e,t.values,a),s(e);l(e)}else if(v.isDiscriminatorForm(t))if("object"!=typeof n||null===n||Array.isArray(n))a(e,"discriminator"),u(e),l(e);else if(n.hasOwnProperty(t.discriminator)){const r=n[t.discriminator];"string"==typeof r?r in t.mapping?(a(e,"mapping"),a(e,r),o(e,t.mapping[r],n,t.discriminator),l(e),l(e)):(a(e,"mapping"),i(e,t.discriminator),u(e),s(e),l(e)):(a(e,"discriminator"),i(e,t.discriminator),u(e),s(e),l(e))}else a(e,"discriminator"),u(e),l(e)}function r(e,t,n,o){("number"!=typeof t||!Number.isInteger(t)||t<n||t>o)&&u(e)}function i(e,t){e.instanceTokens.push(t)}function s(e){e.instanceTokens.pop()}function a(e,t){e.schemaTokens[e.schemaTokens.length-1].push(t)}function l(e){e.schemaTokens[e.schemaTokens.length-1].pop()}function u(e){if(e.errors.push({instancePath:[...e.instanceTokens],schemaPath:[...e.schemaTokens[e.schemaTokens.length-1]]}),e.errors.length===e.config.maxErrors)throw new p}var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=t.MaxDepthExceededError=void 0;const _=c(n(944)),v=n(559);class f extends Error{}t.MaxDepthExceededError=f;class p extends Error{}t.validate=function(e,t,n){const r={errors:[],instanceTokens:[],schemaTokens:[[]],root:e,config:n||{maxDepth:0,maxErrors:0}};try{o(r,e,t)}catch(e){if(!(e instanceof p))throw e}return r.errors}},609:(e,t,n)=>{"use strict";function o(e,t){for(var n in t)e[n]=t[n];return e}function r(e){var t=e.parentNode;t&&t.removeChild(e)}function i(e,t,n){var o,r,i,a={};for(i in t)"key"==i?o=t[i]:"ref"==i?r=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?j.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===a[i]&&(a[i]=e.defaultProps[i]);return s(e,a,o,r,null)}function s(e,t,n,o,r){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==r?++E:r,__i:-1,__u:0};return null==r&&null!=P.vnode&&P.vnode(i),i}function a(e){return e.children}function l(e,t){this.props=e,this.context=t}function u(e,t){if(null==t)return e.__?u(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?u(e):null}function c(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return c(e)}}function _(e){(!e.__d&&(e.__d=!0)&&T.push(e)&&!v.__r++||A!==P.debounceRendering)&&((A=P.debounceRendering)||M)(v)}function v(){var e,t,n,r,i,s,a,l,_;for(T.sort(F);e=T.shift();)e.__d&&(t=T.length,r=void 0,s=(i=(n=e).__v).__e,l=[],_=[],(a=n.__P)&&((r=o({},i)).__v=i.__v+1,P.vnode&&P.vnode(r),C(a,r,i,n.__n,void 0!==a.ownerSVGElement,32&i.__u?[s]:null,l,null==s?u(i):s,!!(32&i.__u),_),r.__.__k[r.__i]=r,x(l,r,_),r.__e!=s&&c(r)),T.length>t&&T.sort(F));v.__r=0}function f(e,t,n,o,r,i,s,a,l,u,c){var _,v,f,h,m,y=o&&o.__k||$,g=t.length;for(n.__d=l,p(n,t,y),l=n.__d,_=0;_<g;_++)null!=(f=n.__k[_])&&"boolean"!=typeof f&&"function"!=typeof f&&(v=-1===f.__i?H:y[f.__i]||H,f.__i=_,C(e,f,v,r,i,s,a,l,u,c),h=f.__e,f.ref&&v.ref!=f.ref&&(v.ref&&N(v.ref,null,f),c.push(f.ref,f.__c||h,f)),null==m&&null!=h&&(m=h),65536&f.__u||v.__k===f.__k?l=d(f,l,e):"function"==typeof f.type&&void 0!==f.__d?l=f.__d:h&&(l=h.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=l,n.__e=m}function p(e,t,n){var o,r,i,l,c,_=t.length,v=n.length,f=v,p=0;for(e.__k=[],o=0;o<_;o++)null!=(r=e.__k[o]=null==(r=t[o])||"boolean"==typeof r||"function"==typeof r?null:"string"==typeof r||"number"==typeof r||"bigint"==typeof r||r.constructor==String?s(null,r,null,null,r):Y(r)?s(a,{children:r},null,null,null):void 0===r.constructor&&r.__b>0?s(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)?(r.__=e,r.__b=e.__b+1,c=h(r,n,l=o+p,f),r.__i=c,i=null,-1!==c&&(f--,(i=n[c])&&(i.__u|=131072)),null==i||null===i.__v?(-1==c&&p--,"function"!=typeof r.type&&(r.__u|=65536)):c!==l&&(c===l+1?p++:c>l?f>_-l?p+=c-l:p--:p=c<l&&c==l-1?c-l:0,c!==o+p&&(r.__u|=65536))):(i=n[o])&&null==i.key&&i.__e&&(i.__e==e.__d&&(e.__d=u(i)),D(i,i,!1),n[o]=null,f--);if(f)for(o=0;o<v;o++)null!=(i=n[o])&&0==(131072&i.__u)&&(i.__e==e.__d&&(e.__d=u(i)),D(i,i))}function d(e,t,n){var o,r;if("function"==typeof e.type){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=d(o[r],t,n));return t}return e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e),t&&t.nextSibling}function h(e,t,n,o){var r=e.key,i=e.type,s=n-1,a=n+1,l=t[n];if(null===l||l&&r==l.key&&i===l.type)return n;if(o>(null!=l&&0==(131072&l.__u)?1:0))for(;s>=0||a<t.length;){if(s>=0){if((l=t[s])&&0==(131072&l.__u)&&r==l.key&&i===l.type)return s;s--}if(a<t.length){if((l=t[a])&&0==(131072&l.__u)&&r==l.key&&i===l.type)return a;a++}}return-1}function m(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||L.test(t)?n:n+"px"}function y(e,t,n,o,r){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||m(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||m(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o?n.u=o.u:(n.u=Date.now(),e.addEventListener(t,i?b:g,i)):e.removeEventListener(t,i?b:g,i);else{if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function g(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(P.event?P.event(e):e)}function b(e){return this.l[e.type+!0](P.event?P.event(e):e)}function C(e,t,n,r,i,s,u,c,_,v){var p,d,h,m,y,g,b,C,x,N,D,w,S,j,E,O=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(_=!!(32&n.__u),s=[c=t.__e=n.__e]),(p=P.__b)&&p(t);e:if("function"==typeof O)try{if(C=t.props,x=(p=O.contextType)&&r[p.__c],N=p?x?x.props.value:p.__:r,n.__c?b=(d=t.__c=n.__c).__=d.__E:("prototype"in O&&O.prototype.render?t.__c=d=new O(C,N):(t.__c=d=new l(C,N),d.constructor=O,d.render=I),x&&x.sub(d),d.props=C,d.state||(d.state={}),d.context=N,d.__n=r,h=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=O.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=o({},d.__s)),o(d.__s,O.getDerivedStateFromProps(C,d.__s))),m=d.props,y=d.state,d.__v=t,h)null==O.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==O.getDerivedStateFromProps&&C!==m&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(C,N),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(C,d.__s,N)||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=C,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),D=0;D<d._sb.length;D++)d.__h.push(d._sb[D]);d._sb=[],d.__h.length&&u.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(C,d.__s,N),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(m,y,g)}))}if(d.context=N,d.props=C,d.__P=e,d.__e=!1,w=P.__r,S=0,"prototype"in O&&O.prototype.render){for(d.state=d.__s,d.__d=!1,w&&w(t),p=d.render(d.props,d.state,d.context),j=0;j<d._sb.length;j++)d.__h.push(d._sb[j]);d._sb=[]}else do{d.__d=!1,w&&w(t),p=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++S<25);d.state=d.__s,null!=d.getChildContext&&(r=o(o({},r),d.getChildContext())),h||null==d.getSnapshotBeforeUpdate||(g=d.getSnapshotBeforeUpdate(m,y)),f(e,Y(E=null!=p&&p.type===a&&null==p.key?p.props.children:p)?E:[E],t,n,r,i,s,u,c,_,v),d.base=t.__e,t.__u&=-161,d.__h.length&&u.push(d),b&&(d.__E=d.__=null)}catch(e){t.__v=null,_||null!=s?(t.__e=c,t.__u|=_?160:32,s[s.indexOf(c)]=null):(t.__e=n.__e,t.__k=n.__k),P.__e(e,t,n)}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=k(n.__e,t,n,r,i,s,u,_,v);(p=P.diffed)&&p(t)}function x(e,t,n){t.__d=void 0;for(var o=0;o<n.length;o++)N(n[o],n[++o],n[++o]);P.__c&&P.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){P.__e(e,t.__v)}}))}function k(e,t,n,o,i,s,a,l,c){var _,v,p,d,h,m,g,b=n.props,C=t.props,x=t.type;if("svg"===x&&(i=!0),null!=s)for(_=0;_<s.length;_++)if((h=s[_])&&"setAttribute"in h==!!x&&(x?h.localName===x:3===h.nodeType)){e=h,s[_]=null;break}if(null==e){if(null===x)return document.createTextNode(C);e=i?document.createElementNS("http://www.w3.org/2000/svg",x):document.createElement(x,C.is&&C),s=null,l=!1}if(null===x)b===C||l&&e.data===C||(e.data=C);else{if(s=s&&j.call(e.childNodes),b=n.props||H,!l&&null!=s)for(b={},_=0;_<e.attributes.length;_++)b[(h=e.attributes[_]).name]=h.value;for(_ in b)h=b[_],"children"==_||("dangerouslySetInnerHTML"==_?p=h:"key"===_||_ in C||y(e,_,null,h,i));for(_ in C)h=C[_],"children"==_?d=h:"dangerouslySetInnerHTML"==_?v=h:"value"==_?m=h:"checked"==_?g=h:"key"===_||l&&"function"!=typeof h||b[_]===h||y(e,_,h,b[_],i);if(v)l||p&&(v.__html===p.__html||v.__html===e.innerHTML)||(e.innerHTML=v.__html),t.__k=[];else if(p&&(e.innerHTML=""),f(e,Y(d)?d:[d],t,n,o,i&&"foreignObject"!==x,s,a,s?s[0]:n.__k&&u(n,0),l,c),null!=s)for(_=s.length;_--;)null!=s[_]&&r(s[_]);l||(_="value",void 0!==m&&(m!==e[_]||"progress"===x&&!m||"option"===x&&m!==b[_])&&y(e,_,m,b[_],!1),_="checked",void 0!==g&&g!==e[_]&&y(e,_,g,b[_],!1))}return e}function N(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){P.__e(e,n)}}function D(e,t,n){var o,i;if(P.unmount&&P.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||N(o,null,t)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){P.__e(e,t)}o.base=o.__P=null,e.__c=void 0}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&D(o[i],t,n||"function"!=typeof e.type);n||null==e.__e||r(e.__e),e.__=e.__e=e.__d=void 0}function I(e,t,n){return this.constructor(e,n)}function w(e,t,n){var o,r,s,l;P.__&&P.__(e,t),r=(o="function"==typeof n)?null:n&&n.__k||t.__k,s=[],l=[],C(t,e=(!o&&n||t).__k=i(a,null,[e]),r||H,H,void 0!==t.ownerSVGElement,!o&&n?[n]:r?null:t.firstChild?j.call(t.childNodes):null,s,!o&&n?n:r?r.__e:t.firstChild,o,l),x(s,e,l)}function S(e,t){var n={__c:t="__cC"+U++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,o;return this.getChildContext||(n=[],(o={})[t]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,_(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}n.d(t,{HY:()=>a,YM:()=>P,h:()=>i,kr:()=>S,l$:()=>O,sY:()=>w,wA:()=>l});var j,P,E,O,T,A,M,F,U,H={},$=[],L=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Y=Array.isArray;j=$.slice,P={__e:function(e,t,n,o){for(var r,i,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(e)),s=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,o||{}),s=r.__d),s)return r.__E=r}catch(t){e=t}throw e}},E=0,O=function(e){return null!=e&&null==e.constructor},l.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=o({},this.state),"function"==typeof e&&(e=e(o({},n),this.props)),e&&o(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),_(this))},l.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),_(this))},l.prototype.render=a,T=[],M="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,F=function(e,t){return e.__v.__b-t.__v.__b},v.__r=0,U=0}},n={};e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function t(e,t){M.YM.__h&&M.YM.__h(H,e,Y||t),Y=0;var n=H.__H||(H.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:B}),n.__[e]}function n(e){return Y=1,function(e,n,o){var r=t(U++,2);if(r.t=e,!r.__c&&(r.__=[o?o(n):f(void 0,n),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=H,!H.u)){var i=function(e,t,n){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter((function(e){return e.__c}));if(o.every((function(e){return!e.__N})))return!s||s.call(this,e,t,n);var i=!1;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}})),!(!i&&r.__c.props===e)&&(!s||s.call(this,e,t,n))};H.u=!0;var s=H.shouldComponentUpdate,a=H.componentWillUpdate;H.componentWillUpdate=function(e,t,n){if(this.__e){var o=s;s=void 0,i(e,t,n),s=o}a&&a.call(this,e,t,n)},H.shouldComponentUpdate=i}return r.__N||r.__}(f,e)}function o(e,n){var o=t(U++,3);!M.YM.__s&&v(o.__H,n)&&(o.__=e,o.i=n,H.__H.__h.push(o))}function r(e){return Y=5,i((function(){return{current:e}}),[])}function i(e,n){var o=t(U++,7);return v(o.__H,n)?(o.__V=e(),o.i=n,o.__h=e,o.__V):o.__}function s(e,t){return Y=8,i((function(){return e}),t)}function a(e){var n=H.context[e.__c],o=t(U++,9);return o.c=e,n?(null==o.__&&(o.__=!0,n.sub(H)),n.props.value):e.__}function l(){for(var e;e=R.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(c),e.__H.__h.forEach(_),e.__H.__h=[]}catch(t){e.__H.__h=[],M.YM.__e(t,e.__v)}}function u(e){var t,n=function(){clearTimeout(o),Q&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);Q&&(t=requestAnimationFrame(n))}function c(e){var t=H,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),H=t}function _(e){var t=H;e.__c=e.__(),H=t}function v(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function f(e,t){return"function"==typeof t?t(e):t}function p(){throw new Error("Cycle detected")}function d(){if(te>1)te--;else{for(var e,t=!1;void 0!==ee;){var n=ee;for(ee=void 0,ne++;void 0!==n;){var o=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&b(n))try{n.c()}catch(n){t||(e=n,t=!0)}n=o}}if(ne=0,te--,t)throw e}}function h(e){if(te>0)return e();te++;try{return e()}finally{d()}}function m(e){if(void 0!==Z){var t=e.n;if(void 0===t||t.t!==Z)return t={i:0,S:e,p:Z.s,n:void 0,t:Z,e:void 0,x:void 0,r:t},void 0!==Z.s&&(Z.s.n=t),Z.s=t,e.n=t,32&Z.f&&e.S(t),t;if(-1===t.i)return t.i=0,void 0!==t.n&&(t.n.p=t.p,void 0!==t.p&&(t.p.n=t.n),t.p=Z.s,t.n=void 0,Z.s.n=t,Z.s=t),t}}function y(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}function g(e){return new y(e)}function b(e){for(var t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function C(e){for(var t=e.s;void 0!==t;t=t.n){var n=t.S.n;if(void 0!==n&&(t.r=n),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function x(e){for(var t=e.s,n=void 0;void 0!==t;){var o=t.p;-1===t.i?(t.S.U(t),void 0!==o&&(o.n=t.n),void 0!==t.n&&(t.n.p=o)):n=t,t.S.n=t.r,void 0!==t.r&&(t.r=void 0),t=o}e.s=n}function k(e){y.call(this,void 0),this.x=e,this.s=void 0,this.g=oe-1,this.f=4}function N(e){return new k(e)}function D(e){var t=e.u;if(e.u=void 0,"function"==typeof t){te++;var n=Z;Z=void 0;try{t()}catch(t){throw e.f&=-2,e.f|=8,I(e),t}finally{Z=n,d()}}}function I(e){for(var t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,D(e)}function w(e){if(Z!==this)throw new Error("Out-of-order effect");x(this),Z=e,this.f&=-2,8&this.f&&I(this),d()}function S(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}function j(e){var t=new S(e);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}function P(e,t){M.YM[e]=t.bind(null,M.YM[e]||function(){})}function E(e){X&&X(),X=e&&e.S()}function O(e){var t=this,n=e.data,o=function(e){return i((function(){return g(e)}),[])}(n);o.value=n;var r=i((function(){for(var e=t.__v;e=e.__;)if(e.__c){e.__c.__$f|=4;break}return t.__$u.c=function(){var e;(0,M.l$)(r.peek())||3!==(null==(e=t.base)?void 0:e.nodeType)?(t.__$f|=1,t.setState({})):t.base.data=r.peek()},N((function(){var e=o.value.value;return 0===e?0:!0===e?"":e||""}))}),[]);return r.value}function T(e,t,n,o){var r=t in e&&void 0===e.ownerSVGElement,i=g(n);return{o:function(e,t){i.value=e,o=t},d:j((function(){var n=i.value.value;o[t]!==n&&(o[t]=n,r?e[t]=n:n?e.setAttribute(t,n):e.removeAttribute(t))}))}}function A(e){var t=r(e);return t.current=e,K.__$f|=4,i((function(){return N((function(){return t.current()}))}),[])}var M=e(609);const F={app:"app__JeJHz","app-pane":"app-pane__eVWfW",appPane:"app-pane__eVWfW","convos-pane":"convos-pane__T2pbX",convosPane:"convos-pane__T2pbX","messages-pane":"messages-pane__Qqipz",messagesPane:"messages-pane__Qqipz","command-box-pane":"command-box-pane__dIbHH",commandBoxPane:"command-box-pane__dIbHH","characters-pane":"characters-pane__yTeOJ",charactersPane:"characters-pane__yTeOJ"};var U,H,$,L,Y=0,R=[],B=[],V=M.YM.__b,W=M.YM.__r,J=M.YM.diffed,q=M.YM.__c,z=M.YM.unmount;M.YM.__b=function(e){H=null,V&&V(e)},M.YM.__r=function(e){W&&W(e),U=0;var t=(H=e.__c).__H;t&&($===H?(t.__h=[],H.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=B,e.__N=e.i=void 0}))):(t.__h.forEach(c),t.__h.forEach(_),t.__h=[],U=0)),$=H},M.YM.diffed=function(e){J&&J(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==R.push(t)&&L===M.YM.requestAnimationFrame||((L=M.YM.requestAnimationFrame)||u)(l)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==B&&(e.__=e.__V),e.i=void 0,e.__V=B}))),$=H=null},M.YM.__c=function(e,t){t.some((function(e){try{e.__h.forEach(c),e.__h=e.__h.filter((function(e){return!e.__||_(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],M.YM.__e(n,e.__v)}})),q&&q(e,t)},M.YM.unmount=function(e){z&&z(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{c(e)}catch(e){t=e}})),n.__H=void 0,t&&M.YM.__e(t,n.__v))};var K,X,Q="function"==typeof requestAnimationFrame,G=Symbol.for("preact-signals"),Z=void 0,ee=void 0,te=0,ne=0,oe=0;y.prototype.brand=G,y.prototype.h=function(){return!0},y.prototype.S=function(e){this.t!==e&&void 0===e.e&&(e.x=this.t,void 0!==this.t&&(this.t.e=e),this.t=e)},y.prototype.U=function(e){if(void 0!==this.t){var t=e.e,n=e.x;void 0!==t&&(t.x=n,e.e=void 0),void 0!==n&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}},y.prototype.subscribe=function(e){var t=this;return j((function(){var n=t.value,o=32&this.f;this.f&=-33;try{e(n)}finally{this.f|=o}}))},y.prototype.valueOf=function(){return this.value},y.prototype.toString=function(){return this.value+""},y.prototype.toJSON=function(){return this.value},y.prototype.peek=function(){return this.v},Object.defineProperty(y.prototype,"value",{get:function(){var e=m(this);return void 0!==e&&(e.i=this.i),this.v},set:function(e){if(Z instanceof k&&function(){throw new Error("Computed cannot have side-effects")}(),e!==this.v){ne>100&&p(),this.v=e,this.i++,oe++,te++;try{for(var t=this.t;void 0!==t;t=t.x)t.t.N()}finally{d()}}}}),(k.prototype=new y).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f))return!0;if(this.f&=-5,this.g===oe)return!0;if(this.g=oe,this.f|=1,this.i>0&&!b(this))return this.f&=-2,!0;var e=Z;try{C(this),Z=this;var t=this.x();(16&this.f||this.v!==t||0===this.i)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return Z=e,x(this),this.f&=-2,!0},k.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t)}y.prototype.S.call(this,e)},k.prototype.U=function(e){if(void 0!==this.t&&(y.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t)}},k.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;void 0!==e;e=e.x)e.t.N()}},k.prototype.peek=function(){if(this.h()||p(),16&this.f)throw this.v;return this.v},Object.defineProperty(k.prototype,"value",{get:function(){1&this.f&&p();var e=m(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),S.prototype.c=function(){var e=this.S();try{if(8&this.f)return;if(void 0===this.x)return;var t=this.x();"function"==typeof t&&(this.u=t)}finally{e()}},S.prototype.S=function(){1&this.f&&p(),this.f|=1,this.f&=-9,D(this),C(this),te++;var e=Z;return Z=this,w.bind(this,e)},S.prototype.N=function(){2&this.f||(this.f|=2,this.o=ee,ee=this)},S.prototype.d=function(){this.f|=8,1&this.f||I(this)},O.displayName="_st",Object.defineProperties(y.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:O},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),P("__b",(function(e,t){if("string"==typeof t.type){var n,o=t.props;for(var r in o)if("children"!==r){var i=o[r];i instanceof y&&(n||(t.__np=n={}),n[r]=i,o[r]=i.peek())}}e(t)})),P("__r",(function(e,t){E();var n,o=t.__c;o&&(o.__$f&=-2,void 0===(n=o.__$u)&&(o.__$u=n=function(){var e;return j((function(){e=this})),e.c=function(){o.__$f|=1,o.setState({})},e}())),K=o,E(n),e(t)})),P("__e",(function(e,t,n,o){E(),K=void 0,e(t,n,o)})),P("diffed",(function(e,t){var n;if(E(),K=void 0,"string"==typeof t.type&&(n=t.__e)){var o=t.__np,r=t.props;if(o){var i=n.U;if(i)for(var s in i){var a=i[s];void 0===a||s in o||(a.d(),i[s]=void 0)}else n.U=i={};for(var l in o){var u=i[l],c=o[l];void 0===u?(u=T(n,l,c,r),i[l]=u):u.o(c,r)}}}e(t)})),P("unmount",(function(e,t){if("string"==typeof t.type){var n=t.__e;if(n){var o=n.U;if(o)for(var r in n.U=void 0,o){var i=o[r];i&&i.d()}}}else{var s=t.__c;if(s){var a=s.__$u;a&&(s.__$u=void 0,a.d())}}e(t)})),P("__h",(function(e,t,n,o){(o<3||9===o)&&(t.__$f|=2),e(t,n,o)})),M.wA.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u;if(!(n&&void 0!==n.s||4&this.__$f))return!0;if(3&this.__$f)return!0;for(var o in t)return!0;for(var r in e)if("__source"!==r&&e[r]!==this.props[r])return!0;for(var i in this.props)if(!(i in e))return!0;return!1};const re="command-box__X2C1t",ie=new Uint32Array(2),se=()=>(crypto.getRandomValues(ie),("0000000"+ie[0].toString(32)).slice(-7)+("0000000"+ie[1].toString(32)).slice(-7)),ae=(e,t="New Character")=>{h((()=>{const n=se();e.chars.value=[...e.chars.value,{id:n,name:t,color:16777215}],e.currentCharID.value=n}))},le=e=>{h((()=>{const t={messages:[],id:se(),name:"New Convo"};e.convos.value={...e.convos.value,[t.id]:t},e.convoIDs.value=[...e.convoIDs.value,t.id],e.currentConvoID.value=t.id}))},ue=(e,t,n)=>{h((()=>{null===e.currentConvoID.value&&le(e),null===e.currentCharID.value&&ae(e);const o=e.convos.value[e.currentConvoID.value],r=o.messages.slice(0),i={authorID:e.currentCharID.value,contents:t,id:se()};"number"==typeof n?r.splice(n,0,i):r.push(i),e.convos.value={...e.convos.value,[e.currentConvoID.value]:{...o,messages:r}}}))},ce=(e,t,n,o)=>{const r=e.convos.value[t],i=r.messages.slice(0);i[n]={...i[n],contents:o},e.convos.value={...e.convos.value,[t]:{...r,messages:i}}},_e=(e,t)=>{e.currentCharID.value=t},ve=({projectName:e,version:t,convos:n,chars:o})=>JSON.stringify({projectName:e,version:t,convos:n,chars:o});var fe=e(454);const pe={properties:{version:{type:"uint32"},projectName:{type:"string"},convos:{elements:{properties:{messages:{elements:{properties:{authorID:{type:"string"},contents:{type:"string"},id:{type:"string"}}}},id:{type:"string"},name:{type:"string"}}}},chars:{elements:{properties:{id:{type:"string"},name:{type:"string"},color:{type:"uint32"}}}}}},de=e=>(0,fe.validate)(pe,e),he=(e,t)=>{h((()=>{const n={};for(const e of t.convos)n[e.id]=e;e.projectName.value=t.projectName,e.convos.value=n,e.convoIDs.value=t.convos.map((e=>e.id)),e.chars.value=t.chars,e.currentConvoID.value=null}))},me=(()=>{const e={version:g(2),projectName:g("New Project"),convos:g({}),convoIDs:g([]),chars:g([]),currentConvoID:g(null),currentCharID:g(null),editedMessageID:g(null),editedConvoID:g(null),editedCharID:g(null),exportedConvoID:g(null),toBeReplacedCharID:g(null),insertAboveMessageID:g(null),exportConvoSettings:{wrapTextEnabled:g(!1),wrapTextLength:g(80),justifyEnabled:g(!0),justifySide:g("left")}};(e=>{const t=localStorage.getItem("store");if(!t)return;const n=JSON.parse(t);if(1===n.version){const e=n.convos;n.convos={},n.convoIDs=[];for(const t of e)n.convos[t.id]=t,n.convoIDs.push(t.id);n.version=2}2===n.version&&(h((()=>{e.convos.value=n.convos,e.convoIDs.value=n.convoIDs,e.chars.value=n.chars,e.projectName.value=n.projectName})),localStorage.removeItem("store"))})(e);const t=localStorage.getItem("autosave");if(t){const n=JSON.parse(t);0===de(n).length&&he(e,n)}return e})();j((()=>{const{projectName:e,convos:t,convoIDs:n,chars:o}=me,r=ve({projectName:e.value,version:1,convos:n.value.map((e=>t.value[e])),chars:o.value});localStorage.setItem("autosave",r)}));const ye=(0,M.kr)(me),ge=()=>a(ye),be=e=>{const t=a(ye);return i((()=>e.bind(null,t)),[t])};var Ce=e(609).h;const xe=({beforeMessage:e})=>{const{currentCharID:t,chars:o,currentConvoID:i,convos:s}=ge(),a=be(ae),l=be(ue),u=be(ce),c=be(_e),_=r(null),[v,f]=n("");return Ce("textarea",{className:re,onKeyPress:n=>{if("Enter"===n.code&&!n.shiftKey){n.preventDefault();let r=v;const _=/([^:]+):(?:\s+)(.+)/g.exec(r);if(_){const e=_[1],t=e.toLowerCase(),n=o.value.find((e=>e.name.toLowerCase()===t));n?c(n.id):a(e),r=_[2]}const p=/^s\/([^/]+)\/([^/]+)\/?$/.exec(r);if(p){const{messages:n}=s.value[i.value];for(let o=e||n.length-1;o>=0;o--)if(n[o].authorID===t.value)return u(i.value,o,n[o].contents.split(p[1]).join(p[2])),void f("")}return f(""),void l(r,e)}},onInput:e=>{f(e.target.value)},onKeyDown:e=>{if("Tab"===e.code){e.preventDefault();const t=v.toLowerCase();if(-1===t.indexOf(":")&&null===_.current&&(_.current={characters:o.value.filter((e=>e.name.toLowerCase().startsWith(t))),index:0}),!_.current||0===_.current.characters.length)return;const n=_.current.characters[_.current.index];_.current.index=(_.current.index+1)%_.current.characters.length,f(`${n.name}: `)}else _.current=null},value:v})},ke={divider:"divider__l7yCf",character:"character__atbwd",active:"active__DI5ru","character-name":"character-name__aOTHW",characterName:"character-name__aOTHW"};var Ne=e(588),De=e.n(Ne);const Ie={icon:"icon__fsktX","icon-button":"icon-button__zOyi6",iconButton:"icon-button__zOyi6",active:"active__AHzSP",disabled:"disabled__uqfhE",delete:"delete__hETEF",edit:"edit__lPJQK",export:"export__pXQWP","insert-above":"insert-above__Tz5sf",insertAbove:"insert-above__Tz5sf",load:"load__L2z_n",save:"save__sCfFq"};var we=e(609).h;const Se=({type:e,title:t,onClick:n,disabled:o})=>we("div",{className:De()(Ie.icon,{[Ie["icon-button"]]:n},Ie[e]),title:t,onClick:o?void 0:n}),je=(e,t,n)=>h((()=>{const o=e.chars.value,r=o.findIndex((e=>e.id===t));e.chars.value=o.filter((e=>e.id!==t)),e.currentCharID.value=n||(1===o.length?null:r===o.length-1?o[o.length-2].id:o[r+1].id)})),Pe=(e,t)=>{e.editedCharID.value=t},Ee=(e,t)=>{e.toBeReplacedCharID.value=t},Oe=e=>"#"+("000000"+e.toString(16)).slice(-6);var Te=e(609).h,Ae=e(609).HY;const Me=({char:e,active:t,onClick:n,onEdit:o,onDelete:r})=>i((()=>{const i=s((()=>n&&n(e)),[n,e]),a=s((()=>o&&o(e)),[o,e]),l=s((()=>r&&r(e)),[r,e]);return Te("div",{className:De()(ke.character,{[ke.active]:t}),onClick:i},Te("div",{className:ke.characterName,style:`color: ${Oe(e.color)}`},e.name),Te(Se,{type:"edit",title:"Edit",onClick:a}),Te(Se,{type:"delete",title:"Delete",onClick:l}))}),[e,t,n,o,r]),Fe=()=>{const{chars:e,currentCharID:t,convos:n,currentConvoID:o}=ge(),r=be(je),i=be(_e),a=be(Pe),l=be(Ee),{charsInConvo:u,charsNotInConvo:c}=A((()=>{const t=new Set;if(null!==o.value){const e=n.value[o.value];for(const n of e.messages)t.add(n.authorID)}const r=[],i=[];for(const n of e.value)t.has(n.id)?r.push(n):i.push(n);return{charsInConvo:r,charsNotInConvo:i}})).value,_=s((e=>{i(e.id)}),[i]),v=s((e=>{a(e.id)}),[a]),f=s((e=>{for(const t of Object.values(n.value))for(const n of t.messages)if(n.authorID===e.id)return void l(e.id);r(e.id)}),[l,r,n]);return Te("div",{className:ke.characterList},u.length>0&&Te(Ae,null,Te("div",{className:ke.divider},"Characters in current convo:"),Te("div",{className:ke.characterSublist},u.map((n=>Te(Me,{key:n.id,char:n,active:n.id===t.value,onClick:_,onEdit:v,onDelete:e.value.length>1?f:void 0}))))),c.length>0&&Te(Ae,null,Te("div",{className:ke.divider},"Other characters:"),Te("div",{className:ke.characterSublist},c.map((n=>Te(Me,{key:n.id,char:n,active:n.id===t.value,onClick:_,onEdit:v,onDelete:e.value.length>1?f:void 0}))))))},Ue="character-settings__JgFDc",He="row__zLuUf",$e="label__T8d04",Le="control__C6kFJ",Ye=(e,t,n)=>{e.chars.value=e.chars.value.map((e=>e.id!==t?e:{...e,...n}))};var Re=e(609).h;const Be=()=>{const{editedCharID:e,chars:t}=ge(),n=be(Ye),o=t.value.find((t=>t.id===e.value));return o?Re("div",{className:Ue},Re("div",{className:He},Re("div",{className:$e},"Character name"),Re("input",{type:"text",className:Le,value:o.name,onChange:t=>{e.value&&n(e.value,{name:t.target.value})}})),Re("div",{className:He},Re("div",{className:$e},"Character color"),Re("input",{type:"color",className:Le,value:Oe(o.color),onChange:t=>{e.value&&n(e.value,{color:parseInt(t.target.value.slice(1),16)})}}))):null},Ve="convo-list__j6Sov",We="convos__BRQXe",Je="convo__bZVJO",qe="active__JExB6",ze="convo-name__c8nBG",Ke="add-convo-wrapper__U_hhq",Xe=(e,t)=>{h((()=>{const{[t]:n,...o}=e.convos.value,r=e.convoIDs.value.findIndex((e=>e===t));e.convos.value=o,e.convoIDs.value=e.convoIDs.value.filter((e=>e!==t)),e.currentConvoID.value=0===e.convoIDs.value.length?null:r===e.convoIDs.value.length?e.convoIDs.value[r-1]:e.convoIDs.value[r]}))},Qe=(e,t,n)=>{e.convos.value={...e.convos.value,[t]:{...e.convos.value[t],name:n}}},Ge=(e,t)=>{e.currentConvoID.value=t},Ze=(e,t)=>{e.editedConvoID.value=void 0===t?e.convos.value[e.currentConvoID.value].id:t},et=(e,t)=>{e.exportedConvoID.value=t};var tt=e(609).h;const nt=({convo:{id:e,name:t}})=>{const{currentConvoID:n,editedConvoID:s}=ge(),a=be(Qe),l=be(Ge),u=be(Ze),c=be(et),_=be(Xe),v=n.value===e,f=s.value===e,p=r(f),d=r(null);return o((()=>{!p.current&&f&&null!==d.current&&d.current.focus(),p.current=f})),i((()=>tt("div",{className:De()(Je,{[qe]:v}),onClick:l.bind(null,e)},tt("div",{className:ze},f?tt("input",{type:"text",value:t,onInput:t=>a(e,t.target.value),onKeyPress:e=>{"Enter"===e.code&&u(null)},onBlur:()=>u(null),ref:d}):t),tt(Se,{type:"export",title:"Export",onClick:t=>{t.stopPropagation(),c(e)}}),tt(Se,{type:"edit",title:"Edit",onClick:t=>{t.stopPropagation(),u(e)}}),tt(Se,{type:"delete",title:"Delete",onClick:t=>{t.stopPropagation(),_(e)}}))),[e,t,v,f,d,a,l,u,c,_])},ot=()=>{const{convos:e,convoIDs:t}=ge(),n=be(le),o=A((()=>t.value.map((t=>tt(nt,{key:t,convo:e.value[t]}))))).value,r=i((()=>n.bind(null)),[n]);return i((()=>tt("div",{className:Ve},tt("div",{className:We},o),tt("div",{className:Ke},tt("button",{onClick:r},"Add Convo")))),[o,r])},rt={"export-title":"export-title__Kqtsy",exportTitle:"export-title__Kqtsy",row:"row__cbCwA"},it=(e,t)=>{e.exportConvoSettings.wrapTextEnabled.value=t},st=(e,t)=>{e.exportConvoSettings.wrapTextLength.value=t},at=(e,t)=>{e.exportConvoSettings.justifyEnabled.value=t},lt=(e,t)=>{e.exportConvoSettings.justifySide.value=t},ut=(e,t)=>{const n=document.createElement("a"),o=URL.createObjectURL(new Blob([t]));n.href=o,n.download=e,n.click(),setTimeout((()=>{window.URL.revokeObjectURL(o)}),0)};var ct=e(609).h;const _t=()=>{const{convos:e,exportedConvoID:t,chars:n,exportConvoSettings:o}=ge(),{wrapTextEnabled:r,wrapTextLength:i,justifyEnabled:s,justifySide:a}=o,l=be(it),u=be(st),c=be(at),_=be(lt),v=e=>{_(e.target.value)};if(!t.value)return null;return ct("div",{className:rt.exportModal},ct("div",{className:rt.exportTitle},"Export ",`"${e.value[t.value].name}"`),ct("div",{className:rt.row},ct("label",null,ct("input",{type:"checkbox",checked:r,onChange:e=>{l(e.target.checked)}}),"Wrap text at "),ct("input",{type:"number",min:0,onChange:e=>{const t=parseInt(e.target.value);Number.isFinite(t)&&u(t)},disabled:!r,value:i})," chars"),ct("div",{className:rt.row},ct("label",null,ct("input",{type:"checkbox",checked:s,onChange:e=>{c(e.target.checked)}}),"Justify usernames "),ct("label",null,ct("input",{type:"radio",onClick:v,checked:"left"===a.value,disabled:!s,value:"left"})," Left"),ct("label",null,ct("input",{type:"radio",onClick:v,checked:"right"===a.value,disabled:!s,value:"right"})," Right")),ct("div",{className:rt.row},ct("button",{onClick:()=>{if(!t.value)return;const o=e.value[t.value],l=new Set;for(const e of o.messages)l.add(e.authorID);const u=Array.from(l).reduce(((e,t)=>Math.max(e,n.value.find((e=>e.id===t))?.name.length??0)),0),c=[];for(const e of o.messages){const t=n.value.find((t=>t.id===e.authorID))?.name??"Unknown character";let o=`<${t}> `;if(s.value){const e=" ".repeat(u-t.length);"left"===a.value?o+=e:o=e+o}let l=o;if(r.value){const t=/([^\s]+)(\s|$)/g;let n;for(t.lastIndex=0;null!==(n=t.exec(e.contents));)l.length+n[1].length<=i.value?l+=n[0]:(c.push(l.trimEnd()),l=" ".repeat(o.length)+n[0]);l.trimEnd().length>0&&c.push(l.trimEnd())}else c.push(l+e.contents)}const _=c.join("\n");ut(`${o.name}.txt`,_)}},"Export")))},vt="messages__QvVmW",ft="messages-inner__T5ymp",pt="insert-box__BVqQD",dt="close-wrapper__Lige8",ht="close-positioner__F_Vfd",mt="command-box-wrapper__dWK1s",yt={message:"message__uH2iI",buttons:"buttons__tpv1D",contents:"contents__bXbLz",author:"author__bTxVP","message-edit-wrapper":"message-edit-wrapper__Uq_as",messageEditWrapper:"message-edit-wrapper__Uq_as","message-edit-area":"message-edit-area__UcstZ",messageEditArea:"message-edit-area__UcstZ"},gt="searchable-menu__MRzCU",bt="search-bar__lDaLX",Ct="items__BvMBg",xt="item__YnleD";var kt=e(609).h;const Nt=({items:e,x:t,y:a,onDismiss:l,onClickItem:u})=>{const[c,_]=n(""),v=r(null);o((()=>{v.current&&v.current.focus()}),[]);const f=s((e=>{_(e.target.value)}),[_]),p=s((e=>{!e.currentTarget.contains(e.relatedTarget)&&l&&l()}),[l]);return i((()=>kt("div",{className:gt,style:{top:`${a}px`,left:`${t}px`,maxHeight:`calc(100vh - ${a}px)`},onfocusout:p,tabIndex:0},kt("div",{className:bt},kt("input",{type:"text",onInput:f,ref:v})),kt("div",{className:Ct},e.map((e=>-1===e.value.toLowerCase().indexOf(c)?null:kt("div",{className:xt,key:e.id,onClick:u?u.bind(void 0,e.id):void 0},e.value)))))),[e,t,a,c,f,p])},Dt=(e,t)=>{const n=e.convos.value[e.currentConvoID.value],o=n.messages.slice(0);o.splice(t,1),e.convos.value={...e.convos.value,[n.id]:{...n,messages:o}}},It=(e,t,n,o)=>{const r=e.convos.value[t],i=r.messages.slice(0);i[n]={...i[n],authorID:o},e.convos.value={...e.convos.value,[t]:{...r,messages:i}}},wt=(e,t)=>{e.editedMessageID.value=t},St=(e,t)=>{e.insertAboveMessageID.value=t};var jt=e(609).h;const Pt=({message:e,convoID:t,index:a,elemRef:l})=>{const{chars:u,editedMessageID:c,insertAboveMessageID:_}=ge(),v=be(Dt),f=be(ce),p=be(It),d=be(wt),h=be(St),{id:m,authorID:y,contents:g}=e,b=m===c.value,C=r(b),x=i((()=>u.value.find((e=>e.id===y))||{color:16777215,name:"Unknown Character"}),[u.value,y]),k=r(null),[N,D]=n(null);o((()=>{!C.current&&b&&k.current&&k.current.focus(),C.current=b}));const I=s((e=>{p(t,a,e),D(null)}),[p,D,t,a]),w=s((()=>{D(null)}),[D]),S=i((()=>N?jt(Nt,{items:u.value.map((({id:e,name:t})=>({id:e,value:t}))),x:N.x,y:N.y,onDismiss:w,onClickItem:I}):null),[u.value,N]);return i((()=>jt("div",{className:yt.message,ref:l},jt("div",{className:yt.author,style:`color: ${Oe(x.color)}`,onClick:e=>{const{x:t,y:n,height:o}=e.target.getBoundingClientRect();D((e=>null===e?{x:t,y:n+o}:null))}},x.name),jt("div",{className:De()(yt.contents,{[yt.editable]:b})},b?jt("div",{className:yt.messageEditWrapper},jt("textarea",{className:yt.messageEditArea,onKeyPress:e=>{"Enter"===e.code&&!e.shiftKey&&k.current&&(f(t,a,k.current.value),d(null))},onBlur:()=>{k.current&&(f(t,a,k.current.value),d(null))},tabIndex:0,ref:k,value:g})):g),jt("div",{className:yt.buttons},jt(Se,{type:"insert-above",title:"Insert above",onClick:()=>h(_.value===m?null:m)}),jt(Se,{type:"edit",title:"Edit",onClick:()=>d(c.value===m?null:m)}),jt(Se,{type:"delete",title:"Delete",onClick:()=>v(a)})),S)),[x,I,w,S,b])};var Et=e(609).h;const Ot=({convo:e})=>{const{insertAboveMessageID:t}=ge(),n=be(St),s=r(null),a=e?.messages,l=r(a);o((()=>{const e=l.current;e&&a&&e.length+1===a.length&&e[e.length-1]!==a[a.length-1]&&s.current&&s.current.scrollIntoView(),l.current=a}));const u=i((()=>{const o=[];if(a)for(let r=0;r<a.length;r++){const i=a[r];t.value===i.id&&o.push(Et("div",{className:pt},Et("div",{className:dt},Et("div",{className:ht},Et(Se,{type:"delete",title:"Delete",onClick:()=>n(null)}))),Et("div",{className:mt},Et(xe,{beforeMessage:r})))),o.push(Et(Pt,{convoID:e.id,message:i,key:i.id,index:r,elemRef:r===a.length-1?s:void 0}))}return o}),[a,e?.id,t.value]);return Et("div",{className:vt},Et("div",{className:ft},u))},Tt="modal-bg__m0HV5",At="modal-positioner__JC0aj",Mt="modal__ulBpF";var Ft=e(609).h,Ut=e(609).HY;const Ht=({onClose:e,children:t})=>Ft(Ut,null,Ft("div",{className:Tt,onClick:e}),Ft("div",{className:At},Ft("div",{className:Mt},t))),$t={"project-bar":"project-bar__jqnP4",projectBar:"project-bar__jqnP4","project-name":"project-name__uuERj",projectName:"project-name__uuERj",button:"button__MAT5s",error:"error__vb_Q8"},Lt=(e,t)=>{e.projectName.value=t};var Yt=e(609).h;const Rt=()=>{const{version:e,projectName:t,convos:o,chars:r}=ge(),i=be(he),s=be(Lt),[a,l]=n(null);return Yt("div",{className:$t.projectBar},Yt("input",{className:$t.projectName,type:"text",value:t,onInput:e=>s(e.target.value)}),Yt(Se,{type:"save",title:"Save",onClick:()=>ut(`${t.value}.json`,ve({version:e.value,projectName:t.value,convos:Array.from(Object.values(o.value)),chars:r.value}))}),Yt(Se,{type:"load",title:"Load",onClick:()=>{const e=document.createElement("input");e.type="file",e.addEventListener("change",(e=>{const t=e.target.files;if(t?.length){const e=new FileReader;e.addEventListener("load",(()=>{try{const t=JSON.parse(e.result);if(de(t).length>0)throw new Error("Invalid JSON");i(t)}catch(e){l(e)}})),e.readAsText(t[0])}})),e.click()}}),a?Yt("div",{className:$t.error},Yt("span",{className:$t.errorMessage},a.message),Yt(Se,{type:"delete",title:"Close",onClick:()=>l(null)})):null)},Bt={row:"row__etbb0",label:"label__wCXFO"},Vt=(e,t,n)=>{const o={};for(const r of Object.values(e.convos.value)){let e=!1,{messages:i}=r;for(let o=0;o<i.length;o++){const r=i[o];r.authorID===t&&(e||(e=!0,i=i.slice(0)),i[o]={...r,authorID:n})}o[r.id]=e?{...r,messages:i}:r}e.convos.value=o};var Wt=e(609).h;const Jt=()=>{const{chars:e,toBeReplacedCharID:t}=ge(),o=be(je),r=be(Vt),i=be(Ee),[s,a]=n(void 0);return Wt("div",{className:Bt.replaceCharacter},Wt("div",{className:Bt.row},Wt("div",{className:Bt.label},"Replace character ",Wt("span",{className:Bt.oldCharacterName}," with:")),Wt("select",{onChange:e=>a(e.target.value),value:s??void 0},e.value.map((e=>e.id===t.value?null:Wt("option",{value:e.id},e.name))))),Wt("div",null,Wt("button",{onClick:()=>{t.value&&s&&(r(t.value,s),o(t.value,s),i(null))},disabled:void 0===s},"Replace")))};var qt=e(609).h,zt=e(609).HY;const Kt=()=>{const{convos:e,currentConvoID:t,editedCharID:n,toBeReplacedCharID:o,exportedConvoID:r}=ge(),s=be(Pe),a=be(Ee),l=be(et),u=i((()=>qt("div",{className:F.projectBarPane},qt(Rt,null))),[]),c=i((()=>qt("div",{className:F.convosPane},qt(ot,null))),[]),_=i((()=>qt("div",{className:F.commandBoxPane},qt(xe,null))),[]),v=i((()=>qt("div",{className:F.charactersPane},qt(Fe,null))),[]),f=A((()=>qt(zt,null,null!==n.value?qt(Ht,{onClose:()=>s(null)},qt(Be,null)):null,null!==o.value?qt(Ht,{onClose:()=>a(null)},qt(Jt,null)):null,null!==r.value?qt(Ht,{onClose:()=>l(null)},qt(_t,null)):null))).value;return qt("div",{className:F.app},u,qt("div",{className:F.appPane},c,qt("div",{className:F.messagesPane},qt(Ot,{convo:null!==t.value?e.value[t.value]:void 0}),_),qt("div",{className:F.charactersPane},v)),f)};var Xt=e(609).h;(0,M.sY)(Xt((()=>Xt(ye.Provider,{value:me},Xt(Kt,null))),null),document.body)})()})();
//# sourceMappingURL=main.14079.js.map