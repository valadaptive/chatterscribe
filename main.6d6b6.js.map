{"version":3,"file":"main.6d6b6.js","mappings":"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","sources":["webpack://chatterscribe/webpack/bootstrap","webpack://chatterscribe/./node_modules/classnames/index.js","webpack://chatterscribe/./node_modules/jtd/lib/index.js","webpack://chatterscribe/./node_modules/jtd/lib/rfc3339.js","webpack://chatterscribe/./node_modules/jtd/lib/schema.js","webpack://chatterscribe/./node_modules/jtd/lib/validate.js","webpack://chatterscribe/../src/util.js","webpack://chatterscribe/../src/create-element.js","webpack://chatterscribe/../src/component.js","webpack://chatterscribe/../src/diff/children.js","webpack://chatterscribe/../src/diff/props.js","webpack://chatterscribe/../src/diff/index.js","webpack://chatterscribe/../src/render.js","webpack://chatterscribe/../src/create-context.js","webpack://chatterscribe/../src/options.js","webpack://chatterscribe/../src/constants.js","webpack://chatterscribe/../src/diff/catch-error.js","webpack://chatterscribe/webpack/runtime/compat get default export","webpack://chatterscribe/webpack/runtime/define property getters","webpack://chatterscribe/webpack/runtime/hasOwnProperty shorthand","webpack://chatterscribe/../src/index.js","webpack://chatterscribe/../src/index.ts","webpack://chatterscribe/./src/components/App/style.scss?5c09","webpack://chatterscribe/./src/components/CommandBox/style.scss?3605","webpack://chatterscribe/./src/util/id.ts","webpack://chatterscribe/./src/actions/create-character.ts","webpack://chatterscribe/./src/actions/create-convo.ts","webpack://chatterscribe/./src/util/create-convo.ts","webpack://chatterscribe/./src/actions/create-message.ts","webpack://chatterscribe/./src/actions/edit-message.ts","webpack://chatterscribe/./src/actions/set-current-character-id.ts","webpack://chatterscribe/./src/serialization/save-state.ts","webpack://chatterscribe/./src/serialization/validate.ts","webpack://chatterscribe/./src/actions/load-state.ts","webpack://chatterscribe/./src/util/store.ts","webpack://chatterscribe/./src/components/CommandBox/CommandBox.tsx","webpack://chatterscribe/./src/components/CharacterList/style.scss?f125","webpack://chatterscribe/./src/icons/icons.scss?3fbb","webpack://chatterscribe/./src/actions/delete-character.ts","webpack://chatterscribe/./src/actions/set-edited-character-id.ts","webpack://chatterscribe/./src/actions/set-to-be-replaced-character-id.ts","webpack://chatterscribe/./src/util/color-to-hex.ts","webpack://chatterscribe/./src/components/CharacterList/CharacterList.tsx","webpack://chatterscribe/./src/components/CharacterSettingsModal/style.scss?4254","webpack://chatterscribe/./src/actions/update-character.ts","webpack://chatterscribe/./src/components/CharacterSettingsModal/CharacterSettingsModal.tsx","webpack://chatterscribe/./src/components/ConvoList/style.scss?52e2","webpack://chatterscribe/./src/actions/delete-convo.ts","webpack://chatterscribe/./src/actions/set-convo-name.ts","webpack://chatterscribe/./src/actions/set-current-convo-id.ts","webpack://chatterscribe/./src/actions/set-edited-convo-id.ts","webpack://chatterscribe/./src/actions/set-exported-convo-id.ts","webpack://chatterscribe/./src/components/ConvoList/ConvoList.tsx","webpack://chatterscribe/./src/components/ExportConvoModal/style.scss?ef04","webpack://chatterscribe/./src/actions/export-convo-settings/set-wrap-text-enabled.ts","webpack://chatterscribe/./src/actions/export-convo-settings/set-wrap-text-length.ts","webpack://chatterscribe/./src/actions/export-convo-settings/set-justify-enabled.ts","webpack://chatterscribe/./src/actions/export-convo-settings/set-justify-side.ts","webpack://chatterscribe/./src/util/save-to-file.ts","webpack://chatterscribe/./src/components/ExportConvoModal/ExportConvoModal.tsx","webpack://chatterscribe/./src/components/Messages/style.scss?7655","webpack://chatterscribe/./src/components/Message/style.scss?e398","webpack://chatterscribe/./src/components/SearchableMenu/style.scss?99bd","webpack://chatterscribe/./src/components/SearchableMenu/SearchableMenu.tsx","webpack://chatterscribe/./src/actions/delete-message.ts","webpack://chatterscribe/./src/actions/replace-message-author.ts","webpack://chatterscribe/./src/actions/set-edited-message-id.ts","webpack://chatterscribe/./src/actions/set-insert-above-message-id.ts","webpack://chatterscribe/./src/components/Message/Message.tsx","webpack://chatterscribe/./src/components/Messages/Messages.tsx","webpack://chatterscribe/./src/components/Modal/style.scss?902d","webpack://chatterscribe/./src/components/Modal/Modal.tsx","webpack://chatterscribe/./src/components/ProjectBar/style.scss?337d","webpack://chatterscribe/./src/actions/set-project-name.ts","webpack://chatterscribe/./src/components/ProjectBar/ProjectBar.tsx","webpack://chatterscribe/./src/components/ReplaceCharacterModal/style.scss?8de9","webpack://chatterscribe/./src/actions/replace-character.ts","webpack://chatterscribe/./src/components/ReplaceCharacterModal/ReplaceCharacterModal.tsx","webpack://chatterscribe/./src/components/App/App.tsx","webpack://chatterscribe/./src/index.tsx"],"sourcesContent":["// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","\"use strict\";\n/**\n * Package jtd is an implementation of JSON Typedef.\n *\n * The {@link validate} function is an implementation of JSON Typedef\n * validation. The {@link Schema} interface represents JSON Typedef schemas.\n *\n * See [the README](https://github.com/jsontypedef/json-typedef-js) for examples\n * and links to guides on how to use this package.\n *\n * @packageDocumentation\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./schema\"), exports);\n__exportStar(require(\"./validate\"), exports);\n","\"use strict\";\n/** @ignore */ /** */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst pattern = /^(\\d{4})-(\\d{2})-(\\d{2})[tT](\\d{2}):(\\d{2}):(\\d{2})(\\.\\d+)?([zZ]|((\\+|-)(\\d{2}):(\\d{2})))$/;\nfunction isRFC3339(s) {\n    const matches = s.match(pattern);\n    if (matches === null) {\n        return false;\n    }\n    const year = parseInt(matches[1], 10);\n    const month = parseInt(matches[2], 10);\n    const day = parseInt(matches[3], 10);\n    const hour = parseInt(matches[4], 10);\n    const minute = parseInt(matches[5], 10);\n    const second = parseInt(matches[6], 10);\n    if (month > 12) {\n        return false;\n    }\n    if (day > maxDay(year, month)) {\n        return false;\n    }\n    if (hour > 23) {\n        return false;\n    }\n    if (minute > 59) {\n        return false;\n    }\n    // A value of 60 is permissible as a leap second.\n    if (second > 60) {\n        return false;\n    }\n    return true;\n}\nexports.default = isRFC3339;\nfunction maxDay(year, month) {\n    if (month === 2) {\n        return isLeapYear(year) ? 29 : 28;\n    }\n    return MONTH_LENGTHS[month];\n}\nfunction isLeapYear(n) {\n    return n % 4 === 0 && (n % 100 !== 0 || n % 400 === 0);\n}\nconst MONTH_LENGTHS = [\n    0,\n    31,\n    0,\n    31,\n    30,\n    31,\n    30,\n    31,\n    31,\n    30,\n    31,\n    30,\n    31,\n];\n","\"use strict\";\n/**\n * Module schema provides code to safely handle JSON Typedef schemas.\n *\n * JSON Typedef schemas are represented in this module with {@link Schema}, and\n * you can check if a JSON object is a correct schema by using {@link isSchema}\n * and {@link isValidSchema}.\n *\n * @packageDocumentation\n */\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isSchema = exports.isValidSchema = exports.isDiscriminatorForm = exports.isValuesForm = exports.isPropertiesForm = exports.isElementsForm = exports.isEnumForm = exports.isTypeForm = exports.isRefForm = exports.isEmptyForm = void 0;\n/**\n * isEmptyForm checks whether some Schema is of the empty form.\n *\n * @param schema The schema to validate\n */\nfunction isEmptyForm(schema) {\n    const { definitions, nullable, metadata } = schema, rest = __rest(schema, [\"definitions\", \"nullable\", \"metadata\"]);\n    return Object.keys(rest).length === 0;\n}\nexports.isEmptyForm = isEmptyForm;\n/**\n * isRefForm checks whether some Schema is of the ref form.\n *\n * @param schema The schema to validate\n */\nfunction isRefForm(schema) {\n    return \"ref\" in schema;\n}\nexports.isRefForm = isRefForm;\n/**\n * isTypeForm checks whether some Schema is of the type form.\n *\n * @param schema The schema to validate\n */\nfunction isTypeForm(schema) {\n    return \"type\" in schema;\n}\nexports.isTypeForm = isTypeForm;\n/**\n * isEnumForm checks whether some Schema is of the enum form.\n *\n * @param schema The schema to validate\n */\nfunction isEnumForm(schema) {\n    return \"enum\" in schema;\n}\nexports.isEnumForm = isEnumForm;\n/**\n * isElementsForm checks whether some Schema is of the elements form.\n *\n * @param schema The schema to validate\n */\nfunction isElementsForm(schema) {\n    return \"elements\" in schema;\n}\nexports.isElementsForm = isElementsForm;\n/**\n * isPropertiesForm checks whether some Schema is of the properties form.\n *\n * @param schema The schema to validate\n */\nfunction isPropertiesForm(schema) {\n    return \"properties\" in schema || \"optionalProperties\" in schema;\n}\nexports.isPropertiesForm = isPropertiesForm;\n/**\n * isPropertiesForm checks whether some Schema is of the values form.\n *\n * @param schema The schema to validate\n */\nfunction isValuesForm(schema) {\n    return \"values\" in schema;\n}\nexports.isValuesForm = isValuesForm;\n/**\n * isDiscriminatorForm checks whether some Schema is of the values form.\n *\n * @param schema The schema to validate\n */\nfunction isDiscriminatorForm(schema) {\n    return \"discriminator\" in schema;\n}\nexports.isDiscriminatorForm = isDiscriminatorForm;\n/**\n * isValidSchema checks whether some Schema is correct, according to the syntax\n * rules of JSON Typedef.\n *\n * In particular, isValidSchema verifies that:\n *\n * 1. The schema does not have any non-root definitions,\n * 2. All references point to actually-existing definitions,\n * 3. All enums are non-empty, and do not contain duplicates,\n * 4. The `properties` and `optionalProperties` of a schema never share\n *    properties,\n * 5. All schemas in `mapping` are of the properties form,\n * 6. Schemas in `mapping` never re-specify the `discriminator` property\n *\n * If an object returned from `JSON.parse` passes both {@link isSchema} and\n * {@link isValidSchema}, then it is a correct JSON Typedef schema.\n *\n * @param schema The schema to validate\n * @param root The schema to consider as the \"root\" schema. If undefined,\n * `schema` will be used as the root. This is usually what you want to do.\n */\nfunction isValidSchema(schema, root) {\n    if (root === undefined) {\n        root = schema;\n    }\n    if (schema.definitions !== undefined) {\n        if (root !== schema) {\n            return false;\n        }\n        for (const subSchema of Object.values(schema.definitions)) {\n            if (!isValidSchema(subSchema, root)) {\n                return false;\n            }\n        }\n    }\n    if (isRefForm(schema)) {\n        if (!(schema.ref in (root.definitions || {}))) {\n            return false;\n        }\n    }\n    if (isEnumForm(schema)) {\n        if (schema.enum.length === 0) {\n            return false;\n        }\n        if (schema.enum.length !== new Set(schema.enum).size) {\n            return false;\n        }\n    }\n    if (isElementsForm(schema)) {\n        return isValidSchema(schema.elements, root);\n    }\n    if (isPropertiesForm(schema)) {\n        for (const subSchema of Object.values(schema.properties || {})) {\n            if (!isValidSchema(subSchema, root)) {\n                return false;\n            }\n        }\n        for (const subSchema of Object.values(schema.optionalProperties || {})) {\n            if (!isValidSchema(subSchema, root)) {\n                return false;\n            }\n        }\n        for (const key of Object.keys(schema.properties || {})) {\n            if (key in (schema.optionalProperties || {})) {\n                return false;\n            }\n        }\n    }\n    if (isValuesForm(schema)) {\n        return isValidSchema(schema.values, root);\n    }\n    if (isDiscriminatorForm(schema)) {\n        for (const subSchema of Object.values(schema.mapping)) {\n            if (!isValidSchema(subSchema, root) || !isPropertiesForm(subSchema)) {\n                return false;\n            }\n            if (subSchema.nullable) {\n                return false;\n            }\n            if (schema.discriminator in (subSchema.properties || {})) {\n                return false;\n            }\n            if (schema.discriminator in (subSchema.optionalProperties || {})) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\nexports.isValidSchema = isValidSchema;\n// Index of valid form \"signatures\" -- i.e., combinations of the presence of the\n// keywords (in order):\n//\n// ref type enum elements properties optionalProperties additionalProperties\n// values discriminator mapping\n//\n// The keywords \"definitions\", \"nullable\", and \"metadata\" are not included here,\n// because they would restrict nothing.\nconst VALID_FORMS = [\n    // Empty form\n    [false, false, false, false, false, false, false, false, false, false],\n    // Ref form\n    [true, false, false, false, false, false, false, false, false, false],\n    // Type form\n    [false, true, false, false, false, false, false, false, false, false],\n    // Enum form\n    [false, false, true, false, false, false, false, false, false, false],\n    // Elements form\n    [false, false, false, true, false, false, false, false, false, false],\n    // Properties form -- properties or optional properties or both, and never\n    // additional properties on its own\n    [false, false, false, false, true, false, false, false, false, false],\n    [false, false, false, false, false, true, false, false, false, false],\n    [false, false, false, false, true, true, false, false, false, false],\n    [false, false, false, false, true, false, true, false, false, false],\n    [false, false, false, false, false, true, true, false, false, false],\n    [false, false, false, false, true, true, true, false, false, false],\n    // Values form\n    [false, false, false, false, false, false, false, true, false, false],\n    // Discriminator form\n    [false, false, false, false, false, false, false, false, true, true],\n];\n// List of valid values that the \"type\" keyboard may take on.\nconst VALID_TYPES = [\n    \"boolean\",\n    \"float32\",\n    \"float64\",\n    \"int8\",\n    \"uint8\",\n    \"int16\",\n    \"uint16\",\n    \"int32\",\n    \"uint32\",\n    \"string\",\n    \"timestamp\",\n];\n/**\n * isSchema checks whether some piece of JSON data has the shape of a JSON\n * Typedef Schema.\n *\n * This function only looks at the \"shape\" of data: it just makes sure all\n * property names and types are valid, and that the data takes on one of the\n * eight JSON Typedef forms.\n *\n * If an object returned from `JSON.parse` passes both {@link isSchema} and\n * {@link isValidSchema}, then it is a correct JSON Typedef schema.\n *\n * @param data The data to check\n */\nfunction isSchema(data) {\n    if (typeof data !== \"object\" || Array.isArray(data) || data === null) {\n        return false;\n    }\n    // TypeScript does not let us coerce `{}` into `{ [index: string]: unknown }`.\n    // At the time of writing, it's unclear why this is the case, nor under what\n    // circumstances such an coercion would be wrong.\n    //\n    // So we work around the compiler here.\n    const obj = data;\n    const { definitions = undefined, nullable = undefined, metadata = undefined, ref = undefined, type = undefined, enum: enum_ = undefined, elements = undefined, properties = undefined, optionalProperties = undefined, additionalProperties = undefined, values = undefined, discriminator = undefined, mapping = undefined } = obj, rest = __rest(obj, [\"definitions\", \"nullable\", \"metadata\", \"ref\", \"type\", \"enum\", \"elements\", \"properties\", \"optionalProperties\", \"additionalProperties\", \"values\", \"discriminator\", \"mapping\"]);\n    const formSignature = [\n        ref !== undefined,\n        type !== undefined,\n        enum_ !== undefined,\n        elements !== undefined,\n        properties !== undefined,\n        optionalProperties !== undefined,\n        additionalProperties !== undefined,\n        values !== undefined,\n        discriminator !== undefined,\n        mapping !== undefined,\n    ];\n    let formOk = false;\n    for (const validForm of VALID_FORMS) {\n        formOk =\n            formOk ||\n                validForm.every((value, index) => value === formSignature[index]);\n    }\n    if (!formOk) {\n        return false;\n    }\n    if (definitions !== undefined) {\n        if (typeof definitions !== \"object\" ||\n            Array.isArray(definitions) ||\n            definitions === null) {\n            return false;\n        }\n        for (const value of Object.values(definitions)) {\n            if (!isSchema(value)) {\n                return false;\n            }\n        }\n    }\n    if (nullable !== undefined) {\n        if (typeof nullable !== \"boolean\") {\n            return false;\n        }\n    }\n    if (metadata !== undefined) {\n        if (typeof metadata !== \"object\" ||\n            Array.isArray(metadata) ||\n            metadata === null) {\n            return false;\n        }\n    }\n    if (ref !== undefined) {\n        if (typeof ref !== \"string\") {\n            return false;\n        }\n    }\n    if (type !== undefined) {\n        if (typeof type !== \"string\" || !VALID_TYPES.includes(type)) {\n            return false;\n        }\n    }\n    if (enum_ !== undefined) {\n        if (!Array.isArray(enum_)) {\n            return false;\n        }\n        if (!enum_.every((elem) => typeof elem === \"string\")) {\n            return false;\n        }\n    }\n    if (elements !== undefined) {\n        if (!isSchema(elements)) {\n            return false;\n        }\n    }\n    if (properties !== undefined) {\n        if (typeof properties !== \"object\" ||\n            Array.isArray(properties) ||\n            properties === null) {\n            return false;\n        }\n        for (const value of Object.values(properties)) {\n            if (!isSchema(value)) {\n                return false;\n            }\n        }\n    }\n    if (optionalProperties !== undefined) {\n        if (typeof optionalProperties !== \"object\" ||\n            Array.isArray(optionalProperties) ||\n            optionalProperties === null) {\n            return false;\n        }\n        for (const value of Object.values(optionalProperties)) {\n            if (!isSchema(value)) {\n                return false;\n            }\n        }\n    }\n    if (additionalProperties !== undefined) {\n        if (typeof additionalProperties !== \"boolean\") {\n            return false;\n        }\n    }\n    if (values !== undefined) {\n        if (!isSchema(values)) {\n            return false;\n        }\n    }\n    if (discriminator !== undefined) {\n        if (typeof discriminator !== \"string\") {\n            return false;\n        }\n    }\n    if (mapping !== undefined) {\n        if (typeof mapping !== \"object\" ||\n            Array.isArray(mapping) ||\n            mapping === null) {\n            return false;\n        }\n        for (const value of Object.values(mapping)) {\n            if (!isSchema(value)) {\n                return false;\n            }\n        }\n    }\n    if (Object.keys(rest).length !== 0) {\n        return false;\n    }\n    return true;\n}\nexports.isSchema = isSchema;\n","\"use strict\";\n/**\n * Module validate provides an implementation of JSON Typedef validation.\n *\n * The most important function in this module is {@link validate}, which returns\n * an array of {@link ValidationError}. You can configure {@link validate} by\n * passing it a {@link ValidationConfig}.\n *\n * @packageDocumentation\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validate = exports.MaxDepthExceededError = void 0;\nconst rfc3339_1 = __importDefault(require(\"./rfc3339\"));\nconst schema_1 = require(\"./schema\");\n/**\n * MaxDepthExceededError is the error returned if\n * {@link ValidationConfig.maxDepth} is exceeded during {@link validate}.\n */\nclass MaxDepthExceededError extends Error {\n}\nexports.MaxDepthExceededError = MaxDepthExceededError;\nclass MaxErrorsReachedError extends Error {\n}\n/**\n * validate performs JSON Typedef validation of an instance (or \"input\") against\n * a JSON Typedef schema, returning a standardized set of errors.\n *\n * This function may throw {@link MaxDepthExceededError} if you have configured\n * a {@link ValidationConfig.maxDepth}. If you do not configure such a maxDepth,\n * then this function may cause a stack overflow. That's because of\n * circularly-defined schemas like this one:\n *\n * ```json\n * {\n *   \"ref\": \"loop\",\n *   \"definitions\": {\n *     \"loop\": { \"ref\": \"loop\" }\n *   }\n * }\n * ```\n *\n * If your schema is not circularly defined like this, then there is no risk for\n * validate to overflow the stack.\n *\n * If you are only interested in a certain number of error messages, consider\n * using {@link ValidationConfig.maxErrors} to get better performance. For\n * instance, if all you care about is whether the input is OK or if it has\n * errors, you may want to set maxErrors to 1.\n *\n * @param schema The schema to validate data against\n * @param instance The \"input\" to validate\n * @param config Validation options. Optional.\n */\nfunction validate(schema, instance, config) {\n    const state = {\n        errors: [],\n        instanceTokens: [],\n        schemaTokens: [[]],\n        root: schema,\n        config: config || { maxDepth: 0, maxErrors: 0 },\n    };\n    try {\n        validateWithState(state, schema, instance);\n    }\n    catch (err) {\n        if (err instanceof MaxErrorsReachedError) {\n            // MaxErrorsReachedError is just a dummy error to abort further\n            // validation. The contents of state.errors are what we need to return.\n        }\n        else {\n            // This is a genuine error. Let's re-throw it.\n            throw err;\n        }\n    }\n    return state.errors;\n}\nexports.validate = validate;\nfunction validateWithState(state, schema, instance, parentTag) {\n    if (schema.nullable && instance === null) {\n        return;\n    }\n    if (schema_1.isRefForm(schema)) {\n        if (state.schemaTokens.length === state.config.maxDepth) {\n            throw new MaxDepthExceededError();\n        }\n        // The ref form is the only case where we push a new array onto\n        // schemaTokens; we maintain a separate stack for each reference.\n        state.schemaTokens.push([\"definitions\", schema.ref]);\n        validateWithState(state, state.root.definitions[schema.ref], instance);\n        state.schemaTokens.pop();\n    }\n    else if (schema_1.isTypeForm(schema)) {\n        pushSchemaToken(state, \"type\");\n        switch (schema.type) {\n            case \"boolean\":\n                if (typeof instance !== \"boolean\") {\n                    pushError(state);\n                }\n                break;\n            case \"float32\":\n            case \"float64\":\n                if (typeof instance !== \"number\") {\n                    pushError(state);\n                }\n                break;\n            case \"int8\":\n                validateInt(state, instance, -128, 127);\n                break;\n            case \"uint8\":\n                validateInt(state, instance, 0, 255);\n                break;\n            case \"int16\":\n                validateInt(state, instance, -32768, 32767);\n                break;\n            case \"uint16\":\n                validateInt(state, instance, 0, 65535);\n                break;\n            case \"int32\":\n                validateInt(state, instance, -2147483648, 2147483647);\n                break;\n            case \"uint32\":\n                validateInt(state, instance, 0, 4294967295);\n                break;\n            case \"string\":\n                if (typeof instance !== \"string\") {\n                    pushError(state);\n                }\n                break;\n            case \"timestamp\":\n                if (typeof instance !== \"string\") {\n                    pushError(state);\n                }\n                else {\n                    if (!rfc3339_1.default(instance)) {\n                        pushError(state);\n                    }\n                }\n                break;\n        }\n        popSchemaToken(state);\n    }\n    else if (schema_1.isEnumForm(schema)) {\n        pushSchemaToken(state, \"enum\");\n        if (typeof instance !== \"string\" || !schema.enum.includes(instance)) {\n            pushError(state);\n        }\n        popSchemaToken(state);\n    }\n    else if (schema_1.isElementsForm(schema)) {\n        pushSchemaToken(state, \"elements\");\n        if (Array.isArray(instance)) {\n            for (const [index, subInstance] of instance.entries()) {\n                pushInstanceToken(state, index.toString());\n                validateWithState(state, schema.elements, subInstance);\n                popInstanceToken(state);\n            }\n        }\n        else {\n            pushError(state);\n        }\n        popSchemaToken(state);\n    }\n    else if (schema_1.isPropertiesForm(schema)) {\n        // JSON has six basic types of data (null, boolean, number, string,\n        // array, object). Of their standard JS countparts, three have a\n        // `typeof` of \"object\": null, array, and object.\n        //\n        // This check attempts to check if something is \"really\" an object.\n        if (typeof instance === \"object\" &&\n            instance !== null &&\n            !Array.isArray(instance)) {\n            if (schema.properties !== undefined) {\n                pushSchemaToken(state, \"properties\");\n                for (const [name, subSchema] of Object.entries(schema.properties)) {\n                    pushSchemaToken(state, name);\n                    if (instance.hasOwnProperty(name)) {\n                        pushInstanceToken(state, name);\n                        validateWithState(state, subSchema, instance[name]);\n                        popInstanceToken(state);\n                    }\n                    else {\n                        pushError(state);\n                    }\n                    popSchemaToken(state);\n                }\n                popSchemaToken(state);\n            }\n            if (schema.optionalProperties !== undefined) {\n                pushSchemaToken(state, \"optionalProperties\");\n                for (const [name, subSchema] of Object.entries(schema.optionalProperties)) {\n                    pushSchemaToken(state, name);\n                    if (instance.hasOwnProperty(name)) {\n                        pushInstanceToken(state, name);\n                        validateWithState(state, subSchema, instance[name]);\n                        popInstanceToken(state);\n                    }\n                    popSchemaToken(state);\n                }\n                popSchemaToken(state);\n            }\n            if (schema.additionalProperties !== true) {\n                for (const name of Object.keys(instance)) {\n                    const inRequired = schema.properties && name in schema.properties;\n                    const inOptional = schema.optionalProperties && name in schema.optionalProperties;\n                    if (!inRequired && !inOptional && name !== parentTag) {\n                        pushInstanceToken(state, name);\n                        pushError(state);\n                        popInstanceToken(state);\n                    }\n                }\n            }\n        }\n        else {\n            if (schema.properties !== undefined) {\n                pushSchemaToken(state, \"properties\");\n            }\n            else {\n                pushSchemaToken(state, \"optionalProperties\");\n            }\n            pushError(state);\n            popSchemaToken(state);\n        }\n    }\n    else if (schema_1.isValuesForm(schema)) {\n        pushSchemaToken(state, \"values\");\n        // See comment in properties form on why this is the test we use for\n        // checking for objects.\n        if (typeof instance === \"object\" &&\n            instance !== null &&\n            !Array.isArray(instance)) {\n            for (const [name, subInstance] of Object.entries(instance)) {\n                pushInstanceToken(state, name);\n                validateWithState(state, schema.values, subInstance);\n                popInstanceToken(state);\n            }\n        }\n        else {\n            pushError(state);\n        }\n        popSchemaToken(state);\n    }\n    else if (schema_1.isDiscriminatorForm(schema)) {\n        // See comment in properties form on why this is the test we use for\n        // checking for objects.\n        if (typeof instance === \"object\" &&\n            instance !== null &&\n            !Array.isArray(instance)) {\n            if (instance.hasOwnProperty(schema.discriminator)) {\n                const tag = instance[schema.discriminator];\n                if (typeof tag === \"string\") {\n                    if (tag in schema.mapping) {\n                        pushSchemaToken(state, \"mapping\");\n                        pushSchemaToken(state, tag);\n                        validateWithState(state, schema.mapping[tag], instance, schema.discriminator);\n                        popSchemaToken(state);\n                        popSchemaToken(state);\n                    }\n                    else {\n                        pushSchemaToken(state, \"mapping\");\n                        pushInstanceToken(state, schema.discriminator);\n                        pushError(state);\n                        popInstanceToken(state);\n                        popSchemaToken(state);\n                    }\n                }\n                else {\n                    pushSchemaToken(state, \"discriminator\");\n                    pushInstanceToken(state, schema.discriminator);\n                    pushError(state);\n                    popInstanceToken(state);\n                    popSchemaToken(state);\n                }\n            }\n            else {\n                pushSchemaToken(state, \"discriminator\");\n                pushError(state);\n                popSchemaToken(state);\n            }\n        }\n        else {\n            pushSchemaToken(state, \"discriminator\");\n            pushError(state);\n            popSchemaToken(state);\n        }\n    }\n}\nfunction validateInt(state, instance, min, max) {\n    if (typeof instance !== \"number\" ||\n        !Number.isInteger(instance) ||\n        instance < min ||\n        instance > max) {\n        pushError(state);\n    }\n}\nfunction pushInstanceToken(state, token) {\n    state.instanceTokens.push(token);\n}\nfunction popInstanceToken(state) {\n    state.instanceTokens.pop();\n}\nfunction pushSchemaToken(state, token) {\n    state.schemaTokens[state.schemaTokens.length - 1].push(token);\n}\nfunction popSchemaToken(state) {\n    state.schemaTokens[state.schemaTokens.length - 1].pop();\n}\nfunction pushError(state) {\n    state.errors.push({\n        instancePath: [...state.instanceTokens],\n        schemaPath: [...state.schemaTokens[state.schemaTokens.length - 1]],\n    });\n    if (state.errors.length === state.config.maxErrors) {\n        throw new MaxErrorsReachedError();\n    }\n}\n","import { EMPTY_ARR } from \"./constants\";\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-ignore We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n","import { slice } from './util';\nimport options from './options';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\t_hydrating: null,\n\t\tconstructor: undefined,\n\t\t_original: original == null ? ++vnodeId : original\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == null && options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tconst oldVNode = assign({}, vnode);\n\t\toldVNode._original = vnode._original + 1;\n\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tvnode._hydrating != null ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom,\n\t\t\tvnode._hydrating\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (vnode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || setTimeout)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet queue;\n\twhile ((process._rerenderCount = rerenderQueue.length)) {\n\t\tqueue = rerenderQueue.sort((a, b) => a._vnode._depth - b._vnode._depth);\n\t\trerenderQueue = [];\n\t\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t\t// process() calls from getting scheduled while `queue` is still being consumed.\n\t\tqueue.some(c => {\n\t\t\tif (c._dirty) renderComponent(c);\n\t\t});\n\t}\n}\n\nprocess._rerenderCount = 0;\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').ComponentChildren[]} renderResult\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by getChildContext\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, childVNode, newDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\tnewParentVNode._children = [];\n\tfor (i = 0; i < renderResult.length; i++) {\n\t\tchildVNode = renderResult[i];\n\n\t\tif (childVNode == null || typeof childVNode == 'boolean') {\n\t\t\tchildVNode = newParentVNode._children[i] = null;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint'\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t} else if (Array.isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : null,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\t// Terser removes the `continue` here and wraps the loop body\n\t\t// in a `if (childVNode) { ... } condition\n\t\tif (childVNode == null) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Check if we find a corresponding element in oldChildren.\n\t\t// If found, delete the array item by setting to `undefined`.\n\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t// (holes).\n\t\toldVNode = oldChildren[i];\n\n\t\tif (\n\t\t\toldVNode === null ||\n\t\t\t(oldVNode &&\n\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t) {\n\t\t\toldChildren[i] = undefined;\n\t\t} else {\n\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t// We always match by type (in either case).\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\toldVNode = null;\n\t\t\t}\n\t\t}\n\n\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tisSvg,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating\n\t\t);\n\n\t\tnewDom = childVNode._dom;\n\n\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\tif (!refs) refs = [];\n\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t}\n\n\t\tif (newDom != null) {\n\t\t\tif (firstChildDom == null) {\n\t\t\t\tfirstChildDom = newDom;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttypeof childVNode.type == 'function' &&\n\t\t\t\tchildVNode._children === oldVNode._children\n\t\t\t) {\n\t\t\t\tchildVNode._nextDom = oldDom = reorderChildren(\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldDom,\n\t\t\t\t\tparentDom\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\toldChildren,\n\t\t\t\t\tnewDom,\n\t\t\t\t\toldDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (typeof newParentVNode.type == 'function') {\n\t\t\t\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t\t\t\t// _nextDom property to the nextSibling of its last child DOM node.\n\t\t\t\t//\n\t\t\t\t// `oldDom` contains the correct value here because if the last child\n\t\t\t\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t\t\t\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t\t\t\t// node's nextSibling.\n\t\t\t\tnewParentVNode._nextDom = oldDom;\n\t\t\t}\n\t\t} else if (\n\t\t\toldDom &&\n\t\t\toldVNode._dom == oldDom &&\n\t\t\toldDom.parentNode != parentDom\n\t\t) {\n\t\t\t// The above condition is to handle null placeholders. See test in placeholder.test.js:\n\t\t\t// `efficiently replace null placeholders in parent rerenders`\n\t\t\toldDom = getDomSibling(oldVNode);\n\t\t}\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) {\n\t\t\tunmount(oldChildren[i], oldChildren[i]);\n\t\t}\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\nfunction reorderChildren(childVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\tlet c = childVNode._children;\n\tlet tmp = 0;\n\tfor (; c && tmp < c.length; tmp++) {\n\t\tlet vnode = c[tmp];\n\t\tif (vnode) {\n\t\t\t// We typically enter this code path on sCU bailout, where we copy\n\t\t\t// oldVNode._children to newVNode._children. If that is the case, we need\n\t\t\t// to update the old children's _parent pointer to point to the newVNode\n\t\t\t// (childVNode here).\n\t\t\tvnode._parent = childVNode;\n\n\t\t\tif (typeof vnode.type == 'function') {\n\t\t\t\toldDom = reorderChildren(vnode, oldDom, parentDom);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(parentDom, vnode, vnode, c, vnode._dom, oldDom);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (Array.isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\nfunction placeChild(\n\tparentDom,\n\tchildVNode,\n\toldVNode,\n\toldChildren,\n\tnewDom,\n\toldDom\n) {\n\tlet nextDom;\n\tif (childVNode._nextDom !== undefined) {\n\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t// have a non-undefined _nextDom. Continue the diff from the sibling\n\t\t// of last DOM child of this child VNode\n\t\tnextDom = childVNode._nextDom;\n\n\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because\n\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t// diffing Components and Fragments. Once we store it the nextDOM local var, we\n\t\t// can clean up the property\n\t\tchildVNode._nextDom = undefined;\n\t} else if (\n\t\toldVNode == null ||\n\t\tnewDom != oldDom ||\n\t\tnewDom.parentNode == null\n\t) {\n\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\tparentDom.appendChild(newDom);\n\t\t\tnextDom = null;\n\t\t} else {\n\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\tfor (\n\t\t\t\tlet sibDom = oldDom, j = 0;\n\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildren.length;\n\t\t\t\tj += 2\n\t\t\t) {\n\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t}\n\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\tnextDom = oldDom;\n\t\t}\n\t}\n\n\t// If we have pre-calculated the nextDOM node, use it. Else calculate it now\n\t// Strictly check for `undefined` here cuz `null` is a valid value of `nextDom`.\n\t// See more detail in create-element.js:createVNode\n\tif (nextDom !== undefined) {\n\t\toldDom = nextDom;\n\t} else {\n\t\toldDom = newDom.nextSibling;\n\t}\n\n\treturn oldDom;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (i !== 'children' && i !== 'key' && !(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'children' &&\n\t\t\ti !== 'key' &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, isSvg) {\n\tlet useCapture;\n\n\to: if (name === 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture = name !== (name = name.replace(/Capture$/, ''));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (name.toLowerCase() in dom) name = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\t\tdom.addEventListener(name, handler, useCapture);\n\t\t\t}\n\t\t} else {\n\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\tdom.removeEventListener(name, handler, useCapture);\n\t\t}\n\t} else if (name !== 'dangerouslySetInnerHTML') {\n\t\tif (isSvg) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname !== 'href' &&\n\t\t\tname !== 'list' &&\n\t\t\tname !== 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname !== 'tabIndex' &&\n\t\t\tname !== 'download' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == null ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// ARIA-attributes have a different notion of boolean values.\n\t\t// The value `false` is different from the attribute not\n\t\t// existing on the DOM, so we can't remove it. For non-boolean\n\t\t// ARIA-attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost us too many bytes. On top of\n\t\t// that other VDOM frameworks also always stringify `false`.\n\n\t\tif (typeof value === 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != null && (value !== false || name.indexOf('-') != -1)) {\n\t\t\tdom.setAttribute(name, value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type + false](options.event ? options.event(e) : e);\n}\n\nfunction eventProxyCapture(e) {\n\tthis._listeners[e.type + true](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ } from '../constants';\nimport { Component, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { diffProps, setProperty } from './props';\nimport { assign, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by getChildContext\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._hydrating != null) {\n\t\tisHydrating = oldVNode._hydrating;\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\t// if we resume, we want the tree to be \"unlocked\"\n\t\tnewVNode._hydrating = null;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType == 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\t// @ts-ignore The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, componentContext);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\tnewVNode._original === oldVNode._original\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) c._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.forEach(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tArray.isArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._hydrating = null;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = false;\n\t\t} else if (\n\t\t\texcessDomChildren == null &&\n\t\t\tnewVNode._original === oldVNode._original\n\t\t) {\n\t\t\tnewVNode._children = oldVNode._children;\n\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\tnewVNode._original = null;\n\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\tnewVNode._dom = oldDom;\n\t\t\tnewVNode._hydrating = !!isHydrating;\n\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t// ^ could possibly be simplified to:\n\t\t\t// excessDomChildren.length = 0;\n\t\t}\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-ignore Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-ignore See above ts-ignore on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = newVNode.type;\n\tlet i = 0;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tif (nodeType === 'svg') isSvg = true;\n\n\tif (excessDomChildren != null) {\n\t\tfor (; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tchild &&\n\t\t\t\t'setAttribute' in child === !!nodeType &&\n\t\t\t\t(nodeType ? child.localName === nodeType : child.nodeType === 3)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (nodeType === null) {\n\t\t\t// @ts-ignore createTextNode returns Text, we expect PreactElement\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tif (isSvg) {\n\t\t\tdom = document.createElementNS(\n\t\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType\n\t\t\t);\n\t\t} else {\n\t\t\tdom = document.createElement(\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType,\n\t\t\t\tnewProps.is && newProps\n\t\t\t);\n\t\t}\n\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t\t// we are creating a new node, so we can assume this is a new subtree (in case we are hydrating), this deopts the hydrate\n\t\tisHydrating = false;\n\t}\n\n\tif (nodeType === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\t// But, if we are in a situation where we are using existing DOM (e.g. replaceNode)\n\t\t\t// we should read the existing DOM attributes to diff them\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (\n\t\t\t\t\t!newHtml ||\n\t\t\t\t\t((!oldHtml || newHtml.__html != oldHtml.__html) &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML)\n\t\t\t\t) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\ti = newVNode.props.children;\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tArray.isArray(i) ? i : [i],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg && nodeType !== 'foreignObject',\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\t(i = newProps.value) !== undefined &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(i !== dom.value ||\n\t\t\t\t\t(nodeType === 'progress' && !i) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType === 'option' && i !== oldProps.value))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'value', i, oldProps.value, false);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\t(i = newProps.checked) !== undefined &&\n\t\t\t\ti !== dom.checked\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'checked', i, oldProps.checked, false);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) {\n\t\t\tapplyRef(r, null, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t\tvnode._component = undefined;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type !== 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove && vnode._dom != null) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._parent = vnode._dom = vnode._nextDom = undefined;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { EMPTY_OBJ } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode === 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = (\n\t\t(!isHydrating && replaceNode) ||\n\t\tparentDom\n\t)._children = createElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: parentDom.firstChild\n\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t: null,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t? oldVNode._dom\n\t\t\t: parentDom.firstChild,\n\t\tisHydrating\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue, contextId) {\n\tcontextId = '__cC' + i++;\n\n\tconst context = {\n\t\t_id: contextId,\n\t\t_defaultValue: defaultValue,\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tConsumer(props, contextValue) {\n\t\t\t// return props.children(\n\t\t\t// \tcontext[contextId] ? context[contextId].props.value : defaultValue\n\t\t\t// );\n\t\t\treturn props.children(contextValue);\n\t\t},\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\tlet subs = [];\n\t\t\t\tlet ctx = {};\n\t\t\t\tctx[contextId] = this;\n\n\t\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\t\tthis.shouldComponentUpdate = function(_props) {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\t// I think the forced value propagation here was only needed when `options.debounceRendering` was being bypassed:\n\t\t\t\t\t\t// https://github.com/preactjs/preact/commit/4d339fb803bea09e9f198abf38ca1bf8ea4b7771#diff-54682ce380935a717e41b8bfc54737f6R358\n\t\t\t\t\t\t// In those cases though, even with the value corrected, we're double-rendering all nodes.\n\t\t\t\t\t\t// It might be better to just tell folks not to use force-sync mode.\n\t\t\t\t\t\t// Currently, using `useContext()` in a class component will overwrite its `this.context` value.\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context[contextId] = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\t\t\t\t\t\tsubs.some(enqueueRender);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\n\treturn (context.Provider._contextRef = context.Consumer.contextType = context);\n}\n","import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component, ctor, handled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet EMPTY = [];\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._diff = vnode => {\n\tif (\n\t\ttypeof vnode.type === 'function' &&\n\t\t!vnode._mask &&\n\t\t// Ignore root Fragment node\n\t\tvnode._parent !== null\n\t) {\n\t\tvnode._mask =\n\t\t\t(vnode._parent && vnode._parent._mask ? vnode._parent._mask : '') +\n\t\t\t(vnode._parent && vnode._parent._children\n\t\t\t\t? vnode._parent._children.indexOf(vnode)\n\t\t\t\t: 0);\n\t} else if (!vnode._mask) {\n\t\tvnode._mask =\n\t\t\tvnode._parent && vnode._parent._mask ? vnode._parent._mask : '';\n\t}\n\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingValue = EMPTY;\n\t\t\t\thookItem._nextValue = hookItem._pendingArgs = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\tif (hookItem._pendingValue !== EMPTY) {\n\t\t\t\thookItem._value = hookItem._pendingValue;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t\thookItem._pendingValue = EMPTY;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({ _pendingValue: EMPTY });\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} [initialState]\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tconst prevScu = currentComponent.shouldComponentUpdate;\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\tcurrentComponent.shouldComponentUpdate = function(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\tconst stateHooks = hookState._component.__hooks._list.filter(\n\t\t\t\t\tx => x._component\n\t\t\t\t);\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = false;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn shouldUpdate || hookState._component.props !== p\n\t\t\t\t\t? prevScu\n\t\t\t\t\t\t? prevScu.call(this, p, s, c)\n\t\t\t\t\t\t: true\n\t\t\t\t\t: false;\n\t\t\t};\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tref(createHandle());\n\t\t\t\treturn () => ref(null);\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._pendingValue = factory();\n\t\tstate._pendingArgs = args;\n\t\tstate._factory = factory;\n\t\treturn state._pendingValue;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\n/**\n * @param {(error: any, errorInfo: import('preact').ErrorInfo) => void} cb\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\nfunction hash(s) {\n\tlet h = 0,\n\t\ti = s.length;\n\twhile (i > 0) {\n\t\th = ((h << 5) - h + s.charCodeAt(--i)) | 0;\n\t}\n\treturn h;\n}\n\nexport function useId() {\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\tstate._value = 'P' + hash(currentComponent._vnode._mask) + currentIndex;\n\t}\n\n\treturn state._value;\n}\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n","function cycleDetected(): never {\n\tthrow new Error(\"Cycle detected\");\n}\n\n// Flags for Computed and Effect.\nconst RUNNING = 1 << 0;\nconst NOTIFIED = 1 << 1;\nconst OUTDATED = 1 << 2;\nconst DISPOSED = 1 << 3;\nconst HAS_ERROR = 1 << 4;\nconst TRACKING = 1 << 5;\n\n// A linked list node used to track dependencies (sources) and dependents (targets).\n// Also used to remember the source's last version number that the target saw.\ntype Node = {\n\t// A source whose value the target depends on.\n\t_source: Signal;\n\t_prevSource?: Node;\n\t_nextSource?: Node;\n\n\t// A target that depends on the source and should be notified when the source changes.\n\t_target: Computed | Effect;\n\t_prevTarget?: Node;\n\t_nextTarget?: Node;\n\n\t// The version number of the source that target has last seen. We use version numbers\n\t// instead of storing the source value, because source values can take arbitrary amount\n\t// of memory, and computeds could hang on to them forever because they're lazily evaluated.\n\t// Use the special value -1 to mark potentially unused but recyclable nodes.\n\t_version: number;\n\n\t// Used to remember & roll back the source's previous `._node` value when entering &\n\t// exiting a new evaluation context.\n\t_rollbackNode?: Node;\n};\n\nfunction startBatch() {\n\tbatchDepth++;\n}\n\nfunction endBatch() {\n\tif (batchDepth > 1) {\n\t\tbatchDepth--;\n\t\treturn;\n\t}\n\n\tlet error: unknown;\n\tlet hasError = false;\n\n\twhile (batchedEffect !== undefined) {\n\t\tlet effect: Effect | undefined = batchedEffect;\n\t\tbatchedEffect = undefined;\n\n\t\tbatchIteration++;\n\n\t\twhile (effect !== undefined) {\n\t\t\tconst next: Effect | undefined = effect._nextBatchedEffect;\n\t\t\teffect._nextBatchedEffect = undefined;\n\t\t\teffect._flags &= ~NOTIFIED;\n\n\t\t\tif (!(effect._flags & DISPOSED) && needsToRecompute(effect)) {\n\t\t\t\ttry {\n\t\t\t\t\teffect._callback();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tif (!hasError) {\n\t\t\t\t\t\terror = err;\n\t\t\t\t\t\thasError = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\teffect = next;\n\t\t}\n\t}\n\tbatchIteration = 0;\n\tbatchDepth--;\n\n\tif (hasError) {\n\t\tthrow error;\n\t}\n}\n\nfunction batch<T>(callback: () => T): T {\n\tif (batchDepth > 0) {\n\t\treturn callback();\n\t}\n\t/*@__INLINE__**/ startBatch();\n\ttry {\n\t\treturn callback();\n\t} finally {\n\t\tendBatch();\n\t}\n}\n\n// Currently evaluated computed or effect.\nlet evalContext: Computed | Effect | undefined = undefined;\n\n// Effects collected into a batch.\nlet batchedEffect: Effect | undefined = undefined;\nlet batchDepth = 0;\nlet batchIteration = 0;\n\n// A global version number for signals, used for fast-pathing repeated\n// computed.peek()/computed.value calls when nothing has changed globally.\nlet globalVersion = 0;\n\nfunction addDependency(signal: Signal): Node | undefined {\n\tif (evalContext === undefined) {\n\t\treturn undefined;\n\t}\n\n\tlet node = signal._node;\n\tif (node === undefined || node._target !== evalContext) {\n\t\t// `signal` is a new dependency. Create a new node dependency node, move it\n\t\t//  to the front of the current context's dependency list.\n\t\tnode = {\n\t\t\t_version: 0,\n\t\t\t_source: signal,\n\t\t\t_prevSource: undefined,\n\t\t\t_nextSource: evalContext._sources,\n\t\t\t_target: evalContext,\n\t\t\t_prevTarget: undefined,\n\t\t\t_nextTarget: undefined,\n\t\t\t_rollbackNode: node,\n\t\t};\n\t\tevalContext._sources = node;\n\t\tsignal._node = node;\n\n\t\t// Subscribe to change notifications from this dependency if we're in an effect\n\t\t// OR evaluating a computed signal that in turn has subscribers.\n\t\tif (evalContext._flags & TRACKING) {\n\t\t\tsignal._subscribe(node);\n\t\t}\n\t\treturn node;\n\t} else if (node._version === -1) {\n\t\t// `signal` is an existing dependency from a previous evaluation. Reuse it.\n\t\tnode._version = 0;\n\n\t\t// If `node` is not already the current head of the dependency list (i.e.\n\t\t// there is a previous node in the list), then make `node` the new head.\n\t\tif (node._prevSource !== undefined) {\n\t\t\tnode._prevSource._nextSource = node._nextSource;\n\t\t\tif (node._nextSource !== undefined) {\n\t\t\t\tnode._nextSource._prevSource = node._prevSource;\n\t\t\t}\n\t\t\tnode._prevSource = undefined;\n\t\t\tnode._nextSource = evalContext._sources;\n\t\t\t// evalCotext._sources must be !== undefined (and !== node), because\n\t\t\t// `node` was originally pointing to some previous node.\n\t\t\tevalContext._sources!._prevSource = node;\n\t\t\tevalContext._sources = node;\n\t\t}\n\n\t\t// We can assume that the currently evaluated effect / computed signal is already\n\t\t// subscribed to change notifications from `signal` if needed.\n\t\treturn node;\n\t}\n\treturn undefined;\n}\n\ndeclare class Signal<T = any> {\n\t/** @internal */\n\t_value: unknown;\n\n\t/** @internal\n\t * Version numbers should always be >= 0, because the special value -1 is used\n\t * by Nodes to signify potentially unused but recyclable notes.\n\t */\n\t_version: number;\n\n\t/** @internal */\n\t_node?: Node;\n\n\t/** @internal */\n\t_targets?: Node;\n\n\tconstructor(value?: T);\n\n\t/** @internal */\n\t_refresh(): boolean;\n\n\t/** @internal */\n\t_subscribe(node: Node): void;\n\n\t/** @internal */\n\t_unsubscribe(node: Node): void;\n\n\tsubscribe(fn: (value: T) => void): () => void;\n\n\tvalueOf(): T;\n\n\ttoString(): string;\n\n\tpeek(): T;\n\n\tget value(): T;\n\tset value(value: T);\n}\n\n/** @internal */\nfunction Signal(this: Signal, value?: unknown) {\n\tthis._value = value;\n\tthis._version = 0;\n\tthis._node = undefined;\n\tthis._targets = undefined;\n}\n\nSignal.prototype._refresh = function () {\n\treturn true;\n};\n\nSignal.prototype._subscribe = function (node) {\n\tif (this._targets !== node && node._prevTarget === undefined) {\n\t\tnode._nextTarget = this._targets;\n\t\tif (this._targets !== undefined) {\n\t\t\tthis._targets._prevTarget = node;\n\t\t}\n\t\tthis._targets = node;\n\t}\n};\n\nSignal.prototype._unsubscribe = function (node) {\n\tconst prev = node._prevTarget;\n\tconst next = node._nextTarget;\n\tif (prev !== undefined) {\n\t\tprev._nextTarget = next;\n\t\tnode._prevTarget = undefined;\n\t}\n\tif (next !== undefined) {\n\t\tnext._prevTarget = prev;\n\t\tnode._nextTarget = undefined;\n\t}\n\tif (node === this._targets) {\n\t\tthis._targets = next;\n\t}\n};\n\nSignal.prototype.subscribe = function (fn) {\n\tconst signal = this;\n\treturn effect(function (this: Effect) {\n\t\tconst value = signal.value;\n\t\tconst flag = this._flags & TRACKING;\n\t\tthis._flags &= ~TRACKING;\n\t\ttry {\n\t\t\tfn(value);\n\t\t} finally {\n\t\t\tthis._flags |= flag;\n\t\t}\n\t});\n};\n\nSignal.prototype.valueOf = function () {\n\treturn this.value;\n};\n\nSignal.prototype.toString = function () {\n\treturn this.value + \"\";\n};\n\nSignal.prototype.peek = function () {\n\treturn this._value;\n};\n\nObject.defineProperty(Signal.prototype, \"value\", {\n\tget() {\n\t\tconst node = addDependency(this);\n\t\tif (node !== undefined) {\n\t\t\tnode._version = this._version;\n\t\t}\n\t\treturn this._value;\n\t},\n\tset(value) {\n\t\tif (value !== this._value) {\n\t\t\tif (batchIteration > 100) {\n\t\t\t\tcycleDetected();\n\t\t\t}\n\n\t\t\tthis._value = value;\n\t\t\tthis._version++;\n\t\t\tglobalVersion++;\n\n\t\t\t/**@__INLINE__*/ startBatch();\n\t\t\ttry {\n\t\t\t\tfor (\n\t\t\t\t\tlet node = this._targets;\n\t\t\t\t\tnode !== undefined;\n\t\t\t\t\tnode = node._nextTarget\n\t\t\t\t) {\n\t\t\t\t\tnode._target._notify();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tendBatch();\n\t\t\t}\n\t\t}\n\t},\n});\n\nfunction signal<T>(value: T): Signal<T> {\n\treturn new Signal(value);\n}\n\nfunction needsToRecompute(target: Computed | Effect): boolean {\n\t// Check the dependencies for changed values. The dependency list is already\n\t// in order of use. Therefore if multiple dependencies have changed values, only\n\t// the first used dependency is re-evaluated at this point.\n\tfor (\n\t\tlet node = target._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\t// If there's a new version of the dependency before or after refreshing,\n\t\t// or the dependency has something blocking it from refreshing at all (e.g. a\n\t\t// dependency cycle), then we need to recompute.\n\t\tif (\n\t\t\tnode._source._version !== node._version ||\n\t\t\t!node._source._refresh() ||\n\t\t\tnode._source._version !== node._version\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t}\n\t// If none of the dependencies have changed values since last recompute then the\n\t// there's no need to recompute.\n\treturn false;\n}\n\nfunction prepareSources(target: Computed | Effect) {\n\tfor (\n\t\tlet node = target._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\tconst rollbackNode = node._source._node;\n\t\tif (rollbackNode !== undefined) {\n\t\t\tnode._rollbackNode = rollbackNode;\n\t\t}\n\t\tnode._source._node = node;\n\t\tnode._version = -1;\n\t}\n}\n\nfunction cleanupSources(target: Computed | Effect) {\n\t// At this point target._sources is a mishmash of current & former dependencies.\n\t// The current dependencies are also in a reverse order of use.\n\t// Therefore build a new, reverted list of dependencies containing only the current\n\t// dependencies in a proper order of use.\n\t// Drop former dependencies from the list and unsubscribe from their change notifications.\n\n\tlet node = target._sources;\n\tlet sources = undefined;\n\twhile (node !== undefined) {\n\t\tconst next = node._nextSource;\n\t\tif (node._version === -1) {\n\t\t\tnode._source._unsubscribe(node);\n\t\t\tnode._nextSource = undefined;\n\t\t} else {\n\t\t\tif (sources !== undefined) {\n\t\t\t\tsources._prevSource = node;\n\t\t\t}\n\t\t\tnode._prevSource = undefined;\n\t\t\tnode._nextSource = sources;\n\t\t\tsources = node;\n\t\t}\n\n\t\tnode._source._node = node._rollbackNode;\n\t\tif (node._rollbackNode !== undefined) {\n\t\t\tnode._rollbackNode = undefined;\n\t\t}\n\t\tnode = next;\n\t}\n\ttarget._sources = sources;\n}\n\ndeclare class Computed<T = any> extends Signal<T> {\n\t_compute: () => T;\n\t_sources?: Node;\n\t_globalVersion: number;\n\t_flags: number;\n\n\tconstructor(compute: () => T);\n\n\t_notify(): void;\n\tget value(): T;\n}\n\nfunction Computed(this: Computed, compute: () => unknown) {\n\tSignal.call(this, undefined);\n\n\tthis._compute = compute;\n\tthis._sources = undefined;\n\tthis._globalVersion = globalVersion - 1;\n\tthis._flags = OUTDATED;\n}\n\nComputed.prototype = new Signal() as Computed;\n\nComputed.prototype._refresh = function () {\n\tthis._flags &= ~NOTIFIED;\n\n\tif (this._flags & RUNNING) {\n\t\treturn false;\n\t}\n\n\t// If this computed signal has subscribed to updates from its dependencies\n\t// (TRACKING flag set) and none of them have notified about changes (OUTDATED\n\t// flag not set), then the computed value can't have changed.\n\tif ((this._flags & (OUTDATED | TRACKING)) === TRACKING) {\n\t\treturn true;\n\t}\n\tthis._flags &= ~OUTDATED;\n\n\tif (this._globalVersion === globalVersion) {\n\t\treturn true;\n\t}\n\tthis._globalVersion = globalVersion;\n\n\t// Mark this computed signal running before checking the dependencies for value\n\t// changes, so that the RUNNIN flag can be used to notice cyclical dependencies.\n\tthis._flags |= RUNNING;\n\tif (this._version > 0 && !needsToRecompute(this)) {\n\t\tthis._flags &= ~RUNNING;\n\t\treturn true;\n\t}\n\n\tconst prevContext = evalContext;\n\ttry {\n\t\tprepareSources(this);\n\t\tevalContext = this;\n\t\tconst value = this._compute();\n\t\tif (\n\t\t\tthis._flags & HAS_ERROR ||\n\t\t\tthis._value !== value ||\n\t\t\tthis._version === 0\n\t\t) {\n\t\t\tthis._value = value;\n\t\t\tthis._flags &= ~HAS_ERROR;\n\t\t\tthis._version++;\n\t\t}\n\t} catch (err) {\n\t\tthis._value = err;\n\t\tthis._flags |= HAS_ERROR;\n\t\tthis._version++;\n\t}\n\tevalContext = prevContext;\n\tcleanupSources(this);\n\tthis._flags &= ~RUNNING;\n\treturn true;\n};\n\nComputed.prototype._subscribe = function (node) {\n\tif (this._targets === undefined) {\n\t\tthis._flags |= OUTDATED | TRACKING;\n\n\t\t// A computed signal subscribes lazily to its dependencies when the it\n\t\t// gets its first subscriber.\n\t\tfor (\n\t\t\tlet node = this._sources;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextSource\n\t\t) {\n\t\t\tnode._source._subscribe(node);\n\t\t}\n\t}\n\tSignal.prototype._subscribe.call(this, node);\n};\n\nComputed.prototype._unsubscribe = function (node) {\n\tSignal.prototype._unsubscribe.call(this, node);\n\n\t// Computed signal unsubscribes from its dependencies from it loses its last subscriber.\n\tif (this._targets === undefined) {\n\t\tthis._flags &= ~TRACKING;\n\n\t\tfor (\n\t\t\tlet node = this._sources;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextSource\n\t\t) {\n\t\t\tnode._source._unsubscribe(node);\n\t\t}\n\t}\n};\n\nComputed.prototype._notify = function () {\n\tif (!(this._flags & NOTIFIED)) {\n\t\tthis._flags |= OUTDATED | NOTIFIED;\n\n\t\tfor (\n\t\t\tlet node = this._targets;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextTarget\n\t\t) {\n\t\t\tnode._target._notify();\n\t\t}\n\t}\n};\n\nComputed.prototype.peek = function () {\n\tif (!this._refresh()) {\n\t\tcycleDetected();\n\t}\n\tif (this._flags & HAS_ERROR) {\n\t\tthrow this._value;\n\t}\n\treturn this._value;\n};\n\nObject.defineProperty(Computed.prototype, \"value\", {\n\tget() {\n\t\tif (this._flags & RUNNING) {\n\t\t\tcycleDetected();\n\t\t}\n\t\tconst node = addDependency(this);\n\t\tthis._refresh();\n\t\tif (node !== undefined) {\n\t\t\tnode._version = this._version;\n\t\t}\n\t\tif (this._flags & HAS_ERROR) {\n\t\t\tthrow this._value;\n\t\t}\n\t\treturn this._value;\n\t},\n});\n\ninterface ReadonlySignal<T = any> extends Signal<T> {\n\treadonly value: T;\n}\n\nfunction computed<T>(compute: () => T): ReadonlySignal<T> {\n\treturn new Computed(compute);\n}\n\nfunction cleanupEffect(effect: Effect) {\n\tconst cleanup = effect._cleanup;\n\teffect._cleanup = undefined;\n\n\tif (typeof cleanup === \"function\") {\n\t\t/*@__INLINE__**/ startBatch();\n\n\t\t// Run cleanup functions always outside of any context.\n\t\tconst prevContext = evalContext;\n\t\tevalContext = undefined;\n\t\ttry {\n\t\t\tcleanup();\n\t\t} catch (err) {\n\t\t\teffect._flags &= ~RUNNING;\n\t\t\teffect._flags |= DISPOSED;\n\t\t\tdisposeEffect(effect);\n\t\t\tthrow err;\n\t\t} finally {\n\t\t\tevalContext = prevContext;\n\t\t\tendBatch();\n\t\t}\n\t}\n}\n\nfunction disposeEffect(effect: Effect) {\n\tfor (\n\t\tlet node = effect._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\tnode._source._unsubscribe(node);\n\t}\n\teffect._compute = undefined;\n\teffect._sources = undefined;\n\n\tcleanupEffect(effect);\n}\n\nfunction endEffect(this: Effect, prevContext?: Computed | Effect) {\n\tif (evalContext !== this) {\n\t\tthrow new Error(\"Out-of-order effect\");\n\t}\n\tcleanupSources(this);\n\tevalContext = prevContext;\n\n\tthis._flags &= ~RUNNING;\n\tif (this._flags & DISPOSED) {\n\t\tdisposeEffect(this);\n\t}\n\tendBatch();\n}\n\ndeclare class Effect {\n\t_compute?: () => unknown;\n\t_cleanup?: unknown;\n\t_sources?: Node;\n\t_nextBatchedEffect?: Effect;\n\t_flags: number;\n\n\tconstructor(compute: () => void);\n\n\t_callback(): void;\n\t_start(): () => void;\n\t_notify(): void;\n\t_dispose(): void;\n}\n\nfunction Effect(this: Effect, compute: () => void) {\n\tthis._compute = compute;\n\tthis._cleanup = undefined;\n\tthis._sources = undefined;\n\tthis._nextBatchedEffect = undefined;\n\tthis._flags = TRACKING;\n}\n\nEffect.prototype._callback = function () {\n\tconst finish = this._start();\n\ttry {\n\t\tif (!(this._flags & DISPOSED) && this._compute !== undefined) {\n\t\t\tthis._cleanup = this._compute();\n\t\t}\n\t} finally {\n\t\tfinish();\n\t}\n};\n\nEffect.prototype._start = function () {\n\tif (this._flags & RUNNING) {\n\t\tcycleDetected();\n\t}\n\tthis._flags |= RUNNING;\n\tthis._flags &= ~DISPOSED;\n\tcleanupEffect(this);\n\tprepareSources(this);\n\n\t/*@__INLINE__**/ startBatch();\n\tconst prevContext = evalContext;\n\tevalContext = this;\n\treturn endEffect.bind(this, prevContext);\n};\n\nEffect.prototype._notify = function () {\n\tif (!(this._flags & NOTIFIED)) {\n\t\tthis._flags |= NOTIFIED;\n\t\tthis._nextBatchedEffect = batchedEffect;\n\t\tbatchedEffect = this;\n\t}\n};\n\nEffect.prototype._dispose = function () {\n\tthis._flags |= DISPOSED;\n\n\tif (!(this._flags & RUNNING)) {\n\t\tdisposeEffect(this);\n\t}\n};\n\nfunction effect(compute: () => unknown): () => void {\n\tconst effect = new Effect(compute);\n\teffect._callback();\n\t// Return a bound function instead of a wrapper like `() => effect._dispose()`,\n\t// because bound functions seem to be just as fast and take up a lot less memory.\n\treturn effect._dispose.bind(effect);\n}\n\nexport { signal, computed, effect, batch, Signal, ReadonlySignal };\n","// extracted by mini-css-extract-plugin\nexport default {\"app\":\"app__JeJHz\",\"app-pane\":\"app-pane__eVWfW\",\"appPane\":\"app-pane__eVWfW\",\"convos-pane\":\"convos-pane__T2pbX\",\"convosPane\":\"convos-pane__T2pbX\",\"messages-pane\":\"messages-pane__Qqipz\",\"messagesPane\":\"messages-pane__Qqipz\",\"command-box-pane\":\"command-box-pane__dIbHH\",\"commandBoxPane\":\"command-box-pane__dIbHH\",\"characters-pane\":\"characters-pane__yTeOJ\",\"charactersPane\":\"characters-pane__yTeOJ\"};","// extracted by mini-css-extract-plugin\nexport default {\"command-box\":\"command-box__X2C1t\",\"commandBox\":\"command-box__X2C1t\"};","const randomArr = new Uint32Array(2);\n\nexport default (): ID => {\n    crypto.getRandomValues(randomArr);\n    return ('0000000' + randomArr[0].toString(32)).slice(-7) + ('0000000' + randomArr[1].toString(32)).slice(-7);\n};\n\nexport type ID = string;\n","import {batch} from '@preact/signals';\n\nimport type {AppState} from '../util/store';\nimport id from '../util/id';\n\nexport default (state: AppState, characterName = 'New Character'): void => {\n    batch(() => {\n        const newCharID = id();\n        state.chars.value = [...state.chars.value, {\n            id: newCharID,\n            name: characterName,\n            color: 0xffffff\n        }];\n        state.currentCharID.value = newCharID;\n    });\n};\n","import {batch} from '@preact/signals';\n\nimport createConvo from '../util/create-convo';\nimport type {AppState} from '../util/store';\n\nexport default (state: AppState): void => {\n    batch(() => {\n        const newConvo = createConvo();\n        state.convos.value = {...state.convos.value, [newConvo.id]: newConvo};\n        state.convoIDs.value = [...state.convoIDs.value, newConvo.id];\n        state.currentConvoID.value = newConvo.id;\n    });\n};\n","import id from './id';\nimport type {Convo} from './datatypes';\n\nexport default (): Convo => ({\n    messages: [],\n    id: id(),\n    name: 'New Convo'\n});\n","import {batch} from '@preact/signals';\n\nimport id from '../util/id';\nimport createConvo from './create-convo';\nimport createCharacter from './create-character';\nimport type {AppState} from '../util/store';\n\nexport default (state: AppState, messageContents: string, beforeMessageIndex?: number): void => {\n    batch(() => {\n        if (state.currentConvoID.value === null) {\n            createConvo(state);\n        }\n\n        if (state.currentCharID.value === null) {\n            createCharacter(state);\n        }\n\n        // TODO: pass in currentConvoID or convo\n        const convo = state.convos.value[state.currentConvoID.value!];\n        const newMessages = convo.messages.slice(0);\n        const newMessage = {\n            authorID: state.currentCharID.value!,\n            contents: messageContents,\n            id: id()\n        };\n        if (typeof beforeMessageIndex === 'number') {\n            newMessages.splice(beforeMessageIndex, 0, newMessage);\n        } else {\n            newMessages.push(newMessage);\n        }\n\n        state.convos.value = {\n            ...state.convos.value,\n            [state.currentConvoID.value!]: {\n                ...convo, messages: newMessages\n            }\n        };\n    });\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, convoID: ID, index: number, contents: string): void => {\n    const convo = state.convos.value[convoID];\n    const newMessages = convo.messages.slice(0);\n    newMessages[index] = {...newMessages[index], contents};\n\n    state.convos.value = {...state.convos.value, [convoID]: {...convo, messages: newMessages}};\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.currentCharID.value = id;\n};\n","import type {Convo, Character} from '../util/datatypes';\n\nexport default ({projectName, version, convos, chars}: {\n    projectName: string,\n    version: number,\n    convos: Convo[],\n    chars: Character[]\n}): string => {\n    return JSON.stringify({projectName, version, convos, chars});\n};\n","import {validate, ValidationError} from 'jtd';\n\nconst schema = {\n    properties: {\n        version: {type: 'uint32'},\n        projectName: {type: 'string'},\n        convos: {elements: {properties: {\n            messages: {elements: {properties: {\n                authorID: {type: 'string'},\n                contents: {type: 'string'},\n                id: {type: 'string'}\n            }}},\n            id: {type: 'string'},\n            name: {type: 'string'}\n        }}},\n        chars: {elements: {properties: {\n            id: {type: 'string'},\n            name: {type: 'string'},\n            color: {type: 'uint32'}\n        }}}\n    }\n} as const;\n\nexport default (json: unknown): ValidationError[] => validate(schema, json);\n","import {batch} from '@preact/signals';\n\nimport type {AppState} from '../util/store';\nimport type {ID, Convo, Character} from '../util/datatypes';\n\nexport default (state: AppState, json: {\n    projectName: string,\n    convos: Convo[],\n    chars: Character[]\n}): void => {\n    batch(() => {\n        const convosByID: Record<ID, Convo> = {};\n        for (const convo of json.convos) {\n            convosByID[convo.id] = convo;\n        }\n        state.projectName.value = json.projectName;\n        state.convos.value = convosByID;\n        state.convoIDs.value = json.convos.map(convo => convo.id);\n        state.chars.value = json.chars;\n        state.currentConvoID.value = null;\n    });\n};\n","import {createContext} from 'preact';\nimport {useContext, useMemo} from 'preact/hooks';\nimport {signal, effect, Signal, batch} from '@preact/signals';\n\nimport type {ID, Convo, Character} from './datatypes';\nimport saveState from '../serialization/save-state';\nimport validate from '../serialization/validate';\n\nimport loadState from '../actions/load-state';\n\nconst storeVersion = 2;\n\ntype StoreShape = {\n    version: number,\n    projectName: string,\n    convos: Record<ID, Convo>,\n    convoIDs: ID[],\n    chars: Character[],\n    currentConvoID: ID | null,\n    currentCharID: ID | null,\n    editedMessageID: ID | null,\n    editedConvoID: ID | null,\n    editedCharID: ID | null,\n    exportedConvoID: ID | null,\n    toBeReplacedCharID: ID | null,\n    insertAboveMessageID: ID | null,\n    exportConvoSettings: {\n        wrapTextEnabled: boolean,\n        wrapTextLength: number,\n        justifyEnabled: boolean,\n        justifySide: 'left' | 'right'\n    }\n};\n\ntype SignalState<S, SignalKeys extends string> = {\n    [K in keyof S]: K extends SignalKeys ? SignalState<S[K], SignalKeys> : Signal<S[K]>\n};\n\ntype AppState = SignalState<StoreShape, 'exportConvoSettings'>;\n\nconst loadLegacyState = (store: AppState): void => {\n    const storedStore = localStorage.getItem('store');\n    if (!storedStore) return;\n    const parsedStore = JSON.parse(storedStore) as StoreShape;\n    // Import v1 autosaves.\n    if (parsedStore.version === 1) {\n        const oldConvos = parsedStore.convos as unknown as Convo[];\n        parsedStore.convos = {};\n        parsedStore.convoIDs = [];\n        for (const convo of oldConvos) {\n            parsedStore.convos[convo.id] = convo;\n            parsedStore.convoIDs.push(convo.id);\n        }\n        parsedStore.version = 2;\n    }\n    if (parsedStore.version !== storeVersion) return;\n\n    batch(() => {\n        store.convos.value = parsedStore.convos;\n        store.convoIDs.value = parsedStore.convoIDs;\n        store.chars.value = parsedStore.chars;\n        store.projectName.value = parsedStore.projectName;\n    });\n\n    localStorage.removeItem('store');\n};\n\nconst loadStore = (): AppState => {\n    const defaultStore: AppState = {\n        version: signal(storeVersion),\n        projectName: signal('New Project'),\n        convos: signal({}),\n        convoIDs: signal([]),\n        chars: signal([]),\n        currentConvoID: signal(null),\n        currentCharID: signal(null),\n        editedMessageID: signal(null),\n        editedConvoID: signal(null),\n        editedCharID: signal(null),\n        exportedConvoID: signal(null),\n        toBeReplacedCharID: signal(null),\n        insertAboveMessageID: signal(null),\n        exportConvoSettings: {\n            wrapTextEnabled: signal(false),\n            wrapTextLength: signal(80),\n            justifyEnabled: signal(true),\n            justifySide: signal('left' as const)\n        }\n    };\n\n    loadLegacyState(defaultStore);\n\n    const autosave = localStorage.getItem('autosave');\n    if (autosave) {\n        const parsedAutosave: unknown = JSON.parse(autosave);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        if (validate(parsedAutosave).length === 0) loadState(defaultStore, parsedAutosave as any);\n    }\n\n    return defaultStore;\n};\n\nconst store = loadStore();\n\neffect(() => {\n    const {projectName, convos, convoIDs, chars} = store;\n    const savedState = saveState({\n        projectName: projectName.value,\n        version: 1,\n        convos: convoIDs.value.map(id => convos.value[id]),\n        chars: chars.value\n    });\n    localStorage.setItem('autosave', savedState);\n});\n\nconst AppContext = createContext(store);\n\nconst useAppState = (): AppState => useContext(AppContext);\nconst useAction = <T extends unknown[]>(func: (store: AppState, ...args: T) => void): ((...args: T) => void) => {\n    const context = useContext(AppContext);\n    return useMemo(() => func.bind(null, context), [context]);\n};\n\nexport {useAppState, useAction, AppState, AppContext, store};\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useRef, useState} from 'preact/hooks';\n\nimport createCharacterAction from '../../actions/create-character';\nimport createMessageAction from '../../actions/create-message';\nimport editMessageAction from '../../actions/edit-message';\nimport setCurrentCharacterIDAction from '../../actions/set-current-character-id';\n\nimport {useAppState, useAction} from '../../util/store';\nimport type {Character} from '../../util/datatypes';\n\nconst CommandBox = ({beforeMessage}: {beforeMessage?: number}): JSX.Element => {\n    const {currentCharID, chars, currentConvoID, convos} = useAppState();\n    const createCharacter = useAction(createCharacterAction);\n    const createMessage = useAction(createMessageAction);\n    const editMessage = useAction(editMessageAction);\n    const setCurrentCharacterID = useAction(setCurrentCharacterIDAction);\n\n    const tabResults = useRef<{\n        characters: Character[],\n        index: number\n    } | null>(null);\n\n    // TODO: use a signal for this\n    const [value, setValue] = useState('');\n\n    const onKeyDown = (event: KeyboardEvent): void => {\n        if (event.code === 'Tab') {\n            event.preventDefault();\n            const contents = value.toLowerCase();\n            if (contents.indexOf(':') === -1 && tabResults.current === null) {\n                tabResults.current = {\n                    characters: chars.value.filter(\n                        character => character.name.toLowerCase().startsWith(contents)),\n                    index: 0\n                };\n            }\n            if (!tabResults.current || tabResults.current.characters.length === 0) return;\n            const character = tabResults.current.characters[tabResults.current.index];\n            tabResults.current.index = (tabResults.current.index + 1) % tabResults.current.characters.length;\n            setValue(`${character.name}: `);\n        } else {\n            tabResults.current = null;\n        }\n    };\n\n    const onKeyPress = (event: KeyboardEvent): void => {\n        if (event.code === 'Enter' && !event.shiftKey) {\n            event.preventDefault();\n            let command = value;\n\n            // Parse off leading author specifier\n            const colonMatch = /([^:]+):(?:\\s+)(.+)/g.exec(command);\n            if (colonMatch) {\n                const authorName = colonMatch[1];\n                const authorNameLower = authorName.toLowerCase();\n                const char = chars.value.find(\n                    character => character.name.toLowerCase() === authorNameLower);\n                if (!char) {\n                    createCharacter(authorName);\n                } else {\n                    setCurrentCharacterID(char.id);\n                }\n                command = colonMatch[2];\n            }\n\n            const replaceMatch = /^s\\/([^/]+)\\/([^/]+)\\/?$/.exec(command);\n            if (replaceMatch) {\n                // if we added a new character, get it here\n                const {messages} = convos.value[currentConvoID.value!];\n                for (let i = beforeMessage || messages.length - 1; i >= 0; i--) {\n                    if (messages[i].authorID === currentCharID.value) {\n                        editMessage(\n                            currentConvoID.value!,\n                            i,\n                            messages[i].contents.split(replaceMatch[1]).join(replaceMatch[2])\n                        );\n                        setValue('');\n                        return;\n                    }\n                }\n            }\n\n            setValue('');\n            createMessage(command, beforeMessage);\n            return;\n        }\n    };\n\n    const onInput = (event: Event): void => {\n        setValue((event.target as HTMLTextAreaElement).value);\n    };\n\n    return <textarea\n        className={style.commandBox}\n        onKeyPress={onKeyPress}\n        onInput={onInput}\n        onKeyDown={onKeyDown}\n        value={value}\n    />;\n};\n\nexport default CommandBox;\n","// extracted by mini-css-extract-plugin\nexport default {\"divider\":\"divider__l7yCf\",\"character\":\"character__atbwd\",\"active\":\"active__DI5ru\",\"character-name\":\"character-name__aOTHW\",\"characterName\":\"character-name__aOTHW\"};","// extracted by mini-css-extract-plugin\nexport default {\"icon\":\"icon__l3rTB\",\"icon-button\":\"icon-button__HjReh\",\"iconButton\":\"icon-button__HjReh\",\"active\":\"active__AWofc\",\"disabled\":\"disabled__GoHq2\",\"delete\":\"delete__zP7dI\",\"edit\":\"edit__i_k8T\",\"insert-above\":\"insert-above__ENi4b\",\"insertAbove\":\"insert-above__ENi4b\",\"load\":\"load__hUYQ8\",\"save\":\"save__iEoYK\",\"export\":\"export__aEQp2\"};","import {batch} from '@preact/signals';\n\nimport type {ID} from  '../util/datatypes';\nimport type {AppState} from  '../util/store';\n\nexport default (state: AppState, id: ID, replacementID?: ID): void => {\n    return batch(() => {\n        const chars = state.chars.value;\n        const charIndex = chars.findIndex(char => char.id === id);\n        state.chars.value = chars.filter(char => char.id !== id);\n        state.currentCharID.value = replacementID || (chars.length === 1 ?\n            null :\n            charIndex === chars.length - 1 ?\n                chars[chars.length - 2].id :\n                chars[charIndex + 1].id);\n    });\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.editedCharID.value = id;\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.toBeReplacedCharID.value = id;\n};\n","export default (color: number): string => '#' + ('000000' + color.toString(16)).slice(-6);\n","import style from './style.scss';\nimport icons from '../../icons/icons.scss';\n\nimport type {JSX} from 'preact';\nimport {useComputed} from '@preact/signals';\nimport {useMemo, useCallback} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport deleteCharacterAction from '../../actions/delete-character';\nimport setCurrentCharacterIDAction from '../../actions/set-current-character-id';\nimport setEditedCharacterIDAction from '../../actions/set-edited-character-id';\nimport setToBeReplacedCharacterIDAction from '../../actions/set-to-be-replaced-character-id';\n\nimport colorToHex from '../../util/color-to-hex';\nimport {useAppState, useAction} from '../../util/store';\nimport type {ID, Character} from '../../util/datatypes';\n\nconst CharacterListing = ({char, active, onClick, onEdit, onDelete}: {\n    char: Character,\n    active: boolean,\n    onClick?: (char: Character) => void,\n    onEdit?: (char: Character) => void,\n    onDelete?: (char: Character) => void,\n}): JSX.Element => useMemo(() => (\n    <div\n        className={classNames(style.character, {[style.active]: active})}\n        onClick={onClick && ((): void => onClick(char))}\n    >\n        <div\n            className={style.characterName}\n            style={`color: ${colorToHex(char.color)}`}\n        >{char.name}</div>\n        <div\n            className={classNames(\n                style.edit,\n                icons['icon'],\n                icons['icon-button'],\n                icons['edit'])}\n            onClick={onEdit && ((): void => onEdit(char))}\n        />\n        <div\n            className={classNames(\n                style.delete,\n                icons['icon'],\n                icons['icon-button'],\n                icons['delete'],\n                {[icons['disabled']]: !onDelete})}\n            onClick={onDelete ? ((): void => onDelete(char)) : undefined}\n        />\n    </div>\n), [char, active, onClick, onEdit, onDelete]);\n\nconst CharacterList = (): JSX.Element => {\n    const {chars, currentCharID, convos, currentConvoID} = useAppState();\n    const deleteCharacter = useAction(deleteCharacterAction);\n    const setCurrentCharacterID = useAction(setCurrentCharacterIDAction);\n    const setEditedCharacterID = useAction(setEditedCharacterIDAction);\n    const setToBeReplacedCharacterID = useAction(setToBeReplacedCharacterIDAction);\n    const {charsInConvo, charsNotInConvo} = useComputed(() => {\n        const charIDsInConvo = new Set<ID>();\n\n        if (currentConvoID.value !== null) {\n            const currentConvo = convos.value[currentConvoID.value];\n            for (const message of currentConvo.messages) {\n                charIDsInConvo.add(message.authorID);\n            }\n        }\n\n        const charsInConvo = [];\n        const charsNotInConvo = [];\n        for (const char of chars.value) {\n            if (charIDsInConvo.has(char.id)) {\n                charsInConvo.push(char);\n            } else {\n                charsNotInConvo.push(char);\n            }\n        }\n\n        return {charsInConvo, charsNotInConvo};\n    }).value;\n\n    const onClickCharacter = useCallback((character: Character) => {\n        setCurrentCharacterID(character.id);\n    }, [setCurrentCharacterID]);\n\n    const onEditCharacter = useCallback((character: Character) => {\n        setEditedCharacterID(character.id);\n    }, [setEditedCharacterID]);\n\n    const onDeleteCharacter = useCallback((character: Character) => {\n        for (const convo of Object.values(convos.value)) {\n            for (const message of convo.messages) {\n                if (message.authorID === character.id) {\n                    setToBeReplacedCharacterID(character.id);\n                    return;\n                }\n            }\n        }\n\n        deleteCharacter(character.id);\n    }, [setToBeReplacedCharacterID, deleteCharacter, convos]);\n\n    return (\n        <div className={style.characterList}>\n            {charsInConvo.length > 0 &&\n                <>\n                    <div className={style.divider}>Characters in current convo:</div>\n                    <div className={style.characterSublist}>\n                        {charsInConvo.map(char =>\n                            <CharacterListing\n                                key={char.id}\n                                char={char}\n                                active={char.id === currentCharID.value}\n                                onClick={onClickCharacter}\n                                onEdit={onEditCharacter}\n                                onDelete={chars.value.length > 1 ? onDeleteCharacter : undefined}\n                            />)}\n                    </div>\n                </>\n            }\n            {charsNotInConvo.length > 0 &&\n                <>\n                    <div className={style.divider}>Other characters:</div>\n                    <div className={style.characterSublist}>\n                        {charsNotInConvo.map(char =>\n                            <CharacterListing\n                                key={char.id}\n                                char={char}\n                                active={char.id === currentCharID.value}\n                                onClick={onClickCharacter}\n                                onEdit={onEditCharacter}\n                                onDelete={chars.value.length > 1 ? onDeleteCharacter : undefined}\n                            />)}\n                    </div>\n                </>\n            }\n        </div>\n    );\n};\n\nexport default CharacterList;\n","// extracted by mini-css-extract-plugin\nexport default {\"character-settings\":\"character-settings__JgFDc\",\"characterSettings\":\"character-settings__JgFDc\",\"row\":\"row__zLuUf\",\"label\":\"label__T8d04\",\"control\":\"control__C6kFJ\"};","import type {AppState} from '../util/store';\nimport type {ID, Character} from '../util/datatypes';\n\nexport default (state: AppState, charID: ID, newCharData: Partial<Character>): void => {\n    state.chars.value = state.chars.value.map(char => char.id !== charID ?\n        char :\n        {...char, ...newCharData});\n};\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\n\nimport updateCharacterAction from '../../actions/update-character';\n\nimport colorToHex from '../../util/color-to-hex';\nimport {useAppState, useAction} from '../../util/store';\n\nconst CharacterSettingsModal = (): JSX.Element | null => {\n    const {editedCharID, chars} = useAppState();\n    const updateCharacter = useAction(updateCharacterAction);\n    const onCharacterNameChange = (event: Event): void => {\n        if (!editedCharID.value) return;\n        updateCharacter(editedCharID.value, {name: (event.target as HTMLInputElement).value});\n    };\n\n    const onCharacterColorChange = (event: Event): void => {\n        if (!editedCharID.value) return;\n        updateCharacter(editedCharID.value, {\n            color: parseInt((event.target as HTMLInputElement).value.slice(1), 16)\n        });\n    };\n\n    const character = chars.value.find(char => char.id === editedCharID.value);\n    if (!character) return null;\n    return (\n        <div className={style.characterSettings}>\n            <div className={style.row}>\n                <div className={style.label}>Character name</div>\n                <input\n                    type=\"text\"\n                    className={style.control}\n                    value={character.name}\n                    onChange={onCharacterNameChange}\n                />\n            </div>\n            <div className={style.row}>\n                <div className={style.label}>Character color</div>\n                <input\n                    type=\"color\"\n                    className={style.control}\n                    value={colorToHex(character.color)}\n                    onChange={onCharacterColorChange}\n                />\n            </div>\n        </div>\n    );\n};\n\nexport default CharacterSettingsModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"convo-list\":\"convo-list__j6Sov\",\"convoList\":\"convo-list__j6Sov\",\"convos\":\"convos__BRQXe\",\"convo\":\"convo__bZVJO\",\"active\":\"active__JExB6\",\"convo-name\":\"convo-name__c8nBG\",\"convoName\":\"convo-name__c8nBG\",\"add-convo-wrapper\":\"add-convo-wrapper__U_hhq\",\"addConvoWrapper\":\"add-convo-wrapper__U_hhq\"};","import {batch} from '@preact/signals';\n\nimport type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID): void => {\n    batch(() => {\n    // Use object spread/rest to omit the convo with a given ID from state.convos\n        const {[id]: __, ...newConvos} = state.convos.value;\n\n        const convoIndex = state.convoIDs.value.findIndex(convoID => convoID === id);\n\n        state.convos.value = newConvos;\n        state.convoIDs.value = state.convoIDs.value.filter(existingID => existingID !== id);\n        if (state.convoIDs.value.length === 0) {\n            state.currentConvoID.value = null;\n        } else if (convoIndex === state.convoIDs.value.length) {\n            // If the deleted convo is selected and the last one in the list, select the previous one\n            state.currentConvoID.value = state.convoIDs.value[convoIndex - 1];\n        } else {\n            // TODO: revisit\n            state.currentConvoID.value = state.convoIDs.value[convoIndex];\n        }\n    });\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID, name: string): void => {\n    state.convos.value = {...state.convos.value, [id]: {...state.convos.value[id], name}};\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID): void => {\n    state.currentConvoID.value = id;\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id?: ID | null): void => {\n    state.editedConvoID.value = id === undefined ? state.convos.value[state.currentConvoID.value!].id : id;\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.exportedConvoID.value = id;\n};\n","import style from './style.scss';\nimport icons from '../../icons/icons.scss';\n\nimport type {JSX} from 'preact';\nimport {useComputed} from '@preact/signals';\nimport {useMemo, useRef, useEffect} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport createConvoAction from '../../actions/create-convo';\nimport deleteConvoAction from '../../actions/delete-convo';\nimport setConvoNameAction from '../../actions/set-convo-name';\nimport setCurrentConvoIDAction from '../../actions/set-current-convo-id';\nimport setEditedConvoIDAction from '../../actions/set-edited-convo-id';\nimport setExportedConvoIDAction from '../../actions/set-exported-convo-id';\n\nimport {useAppState, useAction} from '../../util/store';\nimport type {Convo} from '../../util/datatypes';\n\nconst ConvoListing = ({convo: {id, name}}: {convo: Convo}): JSX.Element => {\n    const {currentConvoID, editedConvoID} = useAppState();\n    const setConvoName = useAction(setConvoNameAction);\n    const setCurrentConvoID = useAction(setCurrentConvoIDAction);\n    const setEditedConvoID = useAction(setEditedConvoIDAction);\n    const setExportedConvoID = useAction(setExportedConvoIDAction);\n    const deleteConvo = useAction(deleteConvoAction);\n\n    const active = currentConvoID.value === id;\n    const edited = editedConvoID.value === id;\n\n    const prevEdited = useRef(edited);\n    const editedConvoRef = useRef<HTMLInputElement>(null);\n\n    // Focus the textbox when we click the edit button\n    useEffect(() => {\n        if (!prevEdited.current && edited && editedConvoRef.current !== null) {\n            editedConvoRef.current.focus();\n        }\n        prevEdited.current = edited;\n    });\n\n    return useMemo(() => <div\n        className={classNames(style.convo, {[style.active]: active})}\n        onClick={setCurrentConvoID.bind(null, id)}\n    >\n        <div className={style.convoName}>{edited ?\n            <input\n                type=\"text\"\n                value={name}\n                onInput={(event): unknown => setConvoName(id, (event.target as HTMLInputElement).value)}\n                onKeyPress={(event): void => {\n                    if (event.code === 'Enter') setEditedConvoID(null);\n                }}\n                onBlur={(): unknown => setEditedConvoID(null)}\n                ref={editedConvoRef}\n            /> :\n            name}</div>\n        <div\n            className={classNames(\n                icons['icon'],\n                icons['icon-button'],\n                icons['export'])\n            }\n            onClick={(event): void => {\n                event.stopPropagation();\n                setExportedConvoID(id);\n            }}\n        />\n        <div\n            className={classNames(\n                icons['icon'],\n                icons['icon-button'],\n                icons['edit'])\n            }\n            onClick={(event): void => {\n                event.stopPropagation();\n                setEditedConvoID(id);\n            }}\n        />\n        <div\n            className={classNames(\n                icons['icon'],\n                icons['icon-button'],\n                icons['delete'])\n            }\n            onClick={(event): void => {\n                event.stopPropagation();\n                deleteConvo(id);\n            }}\n        />\n    </div>, [\n        id, name, active, edited, editedConvoRef,\n        setConvoName, setCurrentConvoID, setEditedConvoID, setExportedConvoID, deleteConvo\n    ]);\n};\n\nconst ConvoList = (): JSX.Element => {\n    const {convos, convoIDs} = useAppState();\n    const createConvo = useAction(createConvoAction);\n\n    const convoListings = useComputed(() => convoIDs.value.map(convoID => {\n        const convo = convos.value[convoID];\n        return <ConvoListing key={convoID} convo={convo} />;\n    })).value;\n\n    const createConvoCallback = useMemo(() => createConvo.bind(null), [createConvo]);\n\n    return useMemo(() => (\n        <div className={style.convoList}>\n            <div className={style.convos}>\n                {convoListings}\n            </div>\n            <div className={style.addConvoWrapper}>\n                <button onClick={createConvoCallback}>Add Convo</button>\n            </div>\n        </div>\n    ), [convoListings, createConvoCallback]);\n};\n\nexport default ConvoList;\n","// extracted by mini-css-extract-plugin\nexport default {\"export-title\":\"export-title__Kqtsy\",\"exportTitle\":\"export-title__Kqtsy\",\"row\":\"row__cbCwA\"};","import type {AppState} from '../../util/store';\n\nexport default (state: AppState, enabled: boolean): void => {\n    state.exportConvoSettings.wrapTextEnabled.value = enabled;\n};\n","import type {AppState} from '../../util/store';\n\nexport default (state: AppState, length: number): void => {\n    state.exportConvoSettings.wrapTextLength.value = length;\n};\n","import type {AppState} from '../../util/store';\n\nexport default (state: AppState, enabled: boolean): void => {\n    state.exportConvoSettings.justifyEnabled.value = enabled;\n};\n","import type {AppState} from '../../util/store';\n\nexport default (state: AppState, side: 'left' | 'right'): void => {\n    state.exportConvoSettings.justifySide.value = side;\n};\n","const saveToFile = (name: string, contents: BlobPart): void => {\n    const a = document.createElement('a');\n    const url = URL.createObjectURL(new Blob([contents]));\n\n    a.href = url;\n    a.download = name;\n    a.click();\n    setTimeout(() => {\n        window.URL.revokeObjectURL(url);\n    }, 0);\n};\n\nexport default saveToFile;\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\n\nimport setWrapTextEnabledAction from '../../actions/export-convo-settings/set-wrap-text-enabled';\nimport setWrapTextLengthAction from '../../actions/export-convo-settings/set-wrap-text-length';\nimport setJustifyEnabledAction from '../../actions/export-convo-settings/set-justify-enabled';\nimport setJustifySideAction from '../../actions/export-convo-settings/set-justify-side';\n\nimport saveToFile from '../../util/save-to-file';\nimport {useAppState, useAction} from '../../util/store';\nimport type {ID} from '../../util/datatypes';\n\nconst ExportConvoModal = (): JSX.Element | null => {\n    const {\n        convos,\n        exportedConvoID,\n        chars,\n        exportConvoSettings\n    } = useAppState();\n\n    const {\n        wrapTextEnabled,\n        wrapTextLength,\n        justifyEnabled,\n        justifySide\n    } = exportConvoSettings;\n\n    const setWrapTextEnabled = useAction(setWrapTextEnabledAction);\n    const setWrapTextLength = useAction(setWrapTextLengthAction);\n    const setJustifyEnabled = useAction(setJustifyEnabledAction);\n    const setJustifySide = useAction(setJustifySideAction);\n\n    const onChangeWrapTextEnabled = (event: Event): void => {\n        setWrapTextEnabled((event.target as HTMLInputElement).checked);\n    };\n\n    const onChangeWrapTextLength = (event: Event): void => {\n        const length = parseInt((event.target as HTMLInputElement).value);\n        if (Number.isFinite(length)) setWrapTextLength(length);\n    };\n\n    const onChangeJustifyEnabled = (event: Event): void => {\n        setJustifyEnabled((event.target as HTMLInputElement).checked);\n    };\n\n    const onChangeJustifySide = (event: Event): void => {\n        setJustifySide((event.target as HTMLInputElement).value as 'left' | 'right');\n    };\n\n    const onExport = (): void => {\n        if (!exportedConvoID.value) return;\n        const convo = convos.value[exportedConvoID.value];\n\n        const charsInConvo = new Set<ID>();\n        for (const message of convo.messages) {\n            charsInConvo.add(message.authorID);\n        }\n        const longestCharNameLength = Array.from(charsInConvo)\n            .reduce((prev: number, charID: ID): number =>\n                Math.max(prev, chars.value.find(char => char.id === charID)?.name.length ?? 0), 0);\n\n        const lines = [];\n\n        for (const message of convo.messages) {\n            const charName = chars.value.find(char => char.id === message.authorID)?.name ?? 'Unknown character';\n            let start = `<${charName}> `;\n            if (justifyEnabled.value) {\n                const justification = ' '.repeat(longestCharNameLength - charName.length);\n                if (justifySide.value === 'left') {\n                    start += justification;\n                } else {\n                    start = justification + start;\n                }\n            }\n\n            let line = start;\n\n            if (wrapTextEnabled.value) {\n                const regex = /([^\\s]+)(\\s|$)/g;\n                regex.lastIndex = 0;\n                let match;\n                while ((match = regex.exec(message.contents)) !== null) {\n                    if (line.length + match[1].length <= wrapTextLength.value) {\n                        line += match[0];\n                    } else {\n                        lines.push(line.trimEnd());\n                        line = ' '.repeat(start.length) + match[0];\n                    }\n                }\n                if (line.trimEnd().length > 0) {\n                    lines.push(line.trimEnd());\n                }\n            } else {\n                lines.push(line + message.contents);\n            }\n        }\n        const convoStr = lines.join('\\n');\n\n        saveToFile(`${convo.name}.txt`, convoStr);\n    };\n\n    if (!exportedConvoID.value) return null;\n    const convo = convos.value[exportedConvoID.value];\n\n    return (\n        <div className={style.exportModal}>\n            <div className={style.exportTitle}>Export {`\"${convo.name}\"`}</div>\n            <div className={style.row}>\n                <label><input\n                    type=\"checkbox\"\n                    checked={wrapTextEnabled}\n                    onChange={onChangeWrapTextEnabled}\n                />Wrap text at </label>\n                <input\n                    type=\"number\"\n                    min={0}\n                    onChange={onChangeWrapTextLength}\n                    disabled={!wrapTextEnabled}\n                    value={wrapTextLength}\n                /> chars\n            </div>\n            <div className={style.row}>\n                <label><input\n                    type=\"checkbox\"\n                    checked={justifyEnabled}\n                    onChange={onChangeJustifyEnabled}\n                />Justify usernames </label>\n                <label>\n                    <input\n                        type=\"radio\"\n                        onClick={onChangeJustifySide}\n                        checked={justifySide.value === 'left'}\n                        disabled={!justifyEnabled}\n                        value=\"left\"\n                    /> Left\n                </label>\n                <label>\n                    <input\n                        type=\"radio\"\n                        onClick={onChangeJustifySide}\n                        checked={justifySide.value === 'right'}\n                        disabled={!justifyEnabled}\n                        value=\"right\"\n                    /> Right\n                </label>\n            </div>\n            <div className={style.row}>\n                <button onClick={onExport}>Export</button>\n            </div>\n        </div>\n    );\n};\n\nexport default ExportConvoModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"messages\":\"messages__QvVmW\",\"messages-inner\":\"messages-inner__T5ymp\",\"messagesInner\":\"messages-inner__T5ymp\",\"insert-box\":\"insert-box__BVqQD\",\"insertBox\":\"insert-box__BVqQD\",\"close-wrapper\":\"close-wrapper__Lige8\",\"closeWrapper\":\"close-wrapper__Lige8\",\"close-positioner\":\"close-positioner__F_Vfd\",\"closePositioner\":\"close-positioner__F_Vfd\",\"command-box-wrapper\":\"command-box-wrapper__dWK1s\",\"commandBoxWrapper\":\"command-box-wrapper__dWK1s\"};","// extracted by mini-css-extract-plugin\nexport default {\"message\":\"message__uH2iI\",\"buttons\":\"buttons__tpv1D\",\"contents\":\"contents__bXbLz\",\"author\":\"author__bTxVP\",\"message-edit-wrapper\":\"message-edit-wrapper__Uq_as\",\"messageEditWrapper\":\"message-edit-wrapper__Uq_as\",\"message-edit-area\":\"message-edit-area__UcstZ\",\"messageEditArea\":\"message-edit-area__UcstZ\"};","// extracted by mini-css-extract-plugin\nexport default {\"searchable-menu\":\"searchable-menu__MRzCU\",\"searchableMenu\":\"searchable-menu__MRzCU\",\"search-bar\":\"search-bar__lDaLX\",\"searchBar\":\"search-bar__lDaLX\",\"items\":\"items__BvMBg\",\"item\":\"item__YnleD\"};","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useCallback, useMemo, useEffect, useRef, useState} from 'preact/hooks';\n\ntype MenuItem = {\n    id: string,\n    value: string\n};\n\ntype Props<T extends readonly MenuItem[]> = {\n    items: T\n    x: number,\n    y: number,\n    onDismiss?: () => void,\n    onClickItem?: (result: T[number]['id']) => void\n};\n\nconst SearchableMenu = <T extends readonly MenuItem[]>({\n    items,\n    x,\n    y,\n    onDismiss,\n    onClickItem\n}: Props<T>): JSX.Element => {\n    const [query, setQuery] = useState('');\n    const searchRef = useRef<HTMLInputElement>(null);\n\n    useEffect(() => {\n        if (searchRef.current) searchRef.current.focus();\n    }, []);\n\n    const onInput = useCallback((event: Event): void => {\n        setQuery((event.target as HTMLInputElement).value);\n    }, [setQuery]);\n\n    const onFocusOut = useCallback((event: FocusEvent): void => {\n        if (!(event.currentTarget as HTMLElement).contains(event.relatedTarget as HTMLElement) &&\n            onDismiss) {\n            onDismiss();\n        }\n    }, [onDismiss]);\n\n    return useMemo(() => (\n        <div\n            className={style.searchableMenu}\n            style={{\n                top: `${y}px`,\n                left: `${x}px`,\n                maxHeight: `calc(100vh - ${y}px)`\n            }}\n            // eslint-disable-next-line react/no-unknown-property\n            onfocusout={onFocusOut}\n            tabIndex={0}\n        >\n            <div className={style.searchBar}>\n                <input type=\"text\" onInput={onInput} ref={searchRef}/>\n            </div>\n            <div className={style.items}>\n                {items.map(item => (\n                    item.value.toLowerCase().indexOf(query) === -1 ?\n                        null :\n                        <div\n                            className={style.item}\n                            key={item.id}\n                            onClick={onClickItem ?\n                                onClickItem.bind(this, item.id) :\n                                undefined}\n                        >\n                            {item.value}\n                        </div>\n                ))}\n            </div>\n        </div>\n    ), [items, x, y, query, onInput, onFocusOut]);\n};\n\nexport default SearchableMenu;\n","import type {AppState} from '../util/store';\n\nexport default (state: AppState, messageIndex: number): void => {\n    // TODO: pass in currentConvoID\n    const convo = state.convos.value[state.currentConvoID.value!];\n    const newMessages = convo.messages.slice(0);\n    newMessages.splice(messageIndex, 1);\n    state.convos.value = {...state.convos.value, [convo.id]: {...convo, messages: newMessages}};\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, convoID: ID, index: number, authorID: ID): void => {\n    const convo = state.convos.value[convoID];\n    const newMessages = convo.messages.slice(0);\n    newMessages[index] = {...newMessages[index], authorID};\n\n    state.convos.value = {...state.convos.value, [convoID]: {...convo, messages: newMessages}};\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.editedMessageID.value = id;\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.insertAboveMessageID.value = id;\n};\n","/* eslint-disable react/prefer-stateless-function */\nimport style from './style.scss';\nimport icons from '../../icons/icons.scss';\n\nimport type {Ref, JSX} from 'preact';\nimport {useCallback, useEffect, useMemo, useRef, useState} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport SearchableMenu from '../SearchableMenu/SearchableMenu';\n\nimport deleteMessageAction from '../../actions/delete-message';\nimport editMessageAction from '../../actions/edit-message';\nimport replaceMessageAuthorAction from '../../actions/replace-message-author';\nimport setEditedMessageAction from '../../actions/set-edited-message-id';\nimport setInsertAboveMessageIDAction from '../../actions/set-insert-above-message-id';\n\nimport colorToHex from '../../util/color-to-hex';\nimport {useAppState, useAction} from '../../util/store';\nimport type {ID, Message as MessageType} from '../../util/datatypes';\n\ntype Props = {\n    message: MessageType,\n    convoID: ID,\n    index: number,\n    elemRef?: Ref<HTMLDivElement>\n};\n\nconst Message = ({\n    message,\n    convoID,\n    index,\n    elemRef\n}: Props): JSX.Element => {\n    const {chars, editedMessageID, insertAboveMessageID} = useAppState();\n\n    const deleteMessage = useAction(deleteMessageAction);\n    const editMessage = useAction(editMessageAction);\n    const replaceMessageAuthor = useAction(replaceMessageAuthorAction);\n    const setEditedMessage = useAction(setEditedMessageAction);\n    const setInsertAboveMessageID = useAction(setInsertAboveMessageIDAction);\n\n    const {id, authorID, contents} = message;\n    const editable = id === editedMessageID.value;\n    const prevEditable = useRef(editable);\n\n    const char = useMemo(\n        () => chars.value.find(char => char.id === authorID) || {color: 0xffffff, name: 'Unknown Character'},\n        [chars.value, authorID]\n    );\n\n    const contentsRef = useRef<HTMLTextAreaElement>(null);\n    const [authorMenu, setAuthorMenu] = useState<{\n        x: number,\n        y: number\n    } | null>(null);\n\n    // When we click the edit button, focus the message contents box\n    useEffect(() => {\n        if (!prevEditable.current && editable && contentsRef.current) {\n            contentsRef.current.focus();\n        }\n        prevEditable.current = editable;\n    });\n\n    const onReplaceAuthor = useCallback((newAuthorID: ID): void => {\n        replaceMessageAuthor(convoID, index, newAuthorID);\n        setAuthorMenu(null);\n    }, [replaceMessageAuthor, setAuthorMenu, convoID, index]);\n\n    const onDismissAuthorMenu = useCallback((): void => {\n        setAuthorMenu(null);\n    }, [setAuthorMenu]);\n\n    const authorMenuElement = useMemo(\n        () => authorMenu ? <SearchableMenu\n            items={chars.value.map(({id, name}) => ({id, value: name}))}\n            x={authorMenu.x}\n            y={authorMenu.y}\n            onDismiss={onDismissAuthorMenu}\n            onClickItem={onReplaceAuthor}\n        /> : null,\n        [chars.value, authorMenu]\n    );\n\n    return useMemo(() => {\n        const onKeyPress = (event: KeyboardEvent): void => {\n            if (event.code === 'Enter' && !event.shiftKey && contentsRef.current) {\n                editMessage(convoID, index, contentsRef.current.value);\n                setEditedMessage(null);\n            }\n        };\n\n        const onBlur = (): void => {\n            if (!contentsRef.current) return;\n            editMessage(convoID, index, contentsRef.current.value);\n            setEditedMessage(null);\n        };\n\n        const onClickAuthor = (event: Event): void => {\n            const {x, y, height} = (event.target as Element).getBoundingClientRect();\n            setAuthorMenu(prevValue => prevValue === null ? {x, y: y + height} : null);\n        };\n\n        return (\n            <div className={style.message} ref={elemRef}>\n                <div\n                    className={style.author}\n                    style={`color: ${colorToHex(char.color)}`}\n                    onClick={onClickAuthor}\n                >\n                    {char.name}\n                </div>\n                <div\n                    className={classNames(style.contents, {[style.editable]: editable})}\n                >\n                    {editable ?\n                        <div className={style.messageEditWrapper}>\n                            <textarea\n                                className={style.messageEditArea}\n                                onKeyPress={onKeyPress}\n                                onBlur={onBlur}\n                                tabIndex={0}\n                                ref={contentsRef}\n                                value={contents}\n                            />\n                        </div> :\n                        contents}\n                </div>\n                <div className={style.buttons}>\n                    <div\n                        className={classNames(\n                            icons['icon'],\n                            icons['icon-button'],\n                            icons['insert-above']\n                        )}\n                        title=\"Insert above\"\n                        onClick={(): unknown => setInsertAboveMessageID(insertAboveMessageID.value === id ? null : id)}\n                    />\n                    <div\n                        className={classNames(\n                            icons['icon'],\n                            icons['icon-button'],\n                            icons['edit'])\n                        }\n                        title=\"Edit\"\n                        onClick={(): unknown => setEditedMessage(editedMessageID.value === id ? null : id)}\n                    />\n                    <div\n                        className={classNames(\n                            icons['icon'],\n                            icons['icon-button'],\n                            icons['delete'])\n                        }\n                        title=\"Delete\"\n                        onClick={(): unknown => deleteMessage(index)}\n                    />\n                </div>\n                {authorMenuElement}\n            </div>\n        );\n    }, [char, onReplaceAuthor, onDismissAuthorMenu, authorMenuElement, editable]);\n};\n\nexport default Message;\n","import style from './style.scss';\nimport icons from '../../icons/icons.scss';\n\nimport type {JSX} from 'preact';\nimport {useEffect, useMemo, useRef} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport CommandBox from '../CommandBox/CommandBox';\nimport Message from '../Message/Message';\n\nimport setInsertAboveMessageIDAction from '../../actions/set-insert-above-message-id';\n\nimport {useAppState, useAction} from '../../util/store';\nimport {Convo} from '../../util/datatypes';\n\nconst Messages = ({convo}: {convo: Convo | undefined}): JSX.Element => {\n    const {insertAboveMessageID} = useAppState();\n    const setInsertAboveMessageID = useAction(setInsertAboveMessageIDAction);\n    const lastMessageElem = useRef<HTMLDivElement>(null);\n\n    const messages = convo?.messages;\n    const prevMessagesRef = useRef(messages);\n\n    useEffect(() => {\n        const prevMessages = prevMessagesRef.current;\n        const messageAddedAtBottom = prevMessages && messages &&\n            prevMessages.length + 1 === messages.length &&\n            prevMessages[prevMessages.length - 1] !== messages[messages.length - 1];\n\n        // Ideally, this would happen for messages added anywhere, but that would require creating a ref for every\n        // message and arrays of refs are really hard to do correctly\n        if (messageAddedAtBottom && lastMessageElem.current) {\n            lastMessageElem.current.scrollIntoView();\n        }\n\n        prevMessagesRef.current = messages;\n    });\n\n    const messageElems = useMemo(() => {\n        const messageElems = [];\n        if (messages) {\n            for (let i = 0; i < messages.length; i++) {\n                const message = messages[i];\n                if (insertAboveMessageID.value === message.id) {\n                    messageElems.push(\n                        <div className={style.insertBox}>\n                            <div className={style.closeWrapper}>\n                                <div className={style.closePositioner}>\n                                    <div\n                                        className={classNames(\n                                            icons['icon'],\n                                            icons['icon-button'],\n                                            icons['delete']\n                                        )}\n                                        title=\"Close\"\n                                        onClick={(): unknown => setInsertAboveMessageID(null)}\n                                    />\n                                </div>\n                            </div>\n                            <div className={style.commandBoxWrapper}>\n                                <CommandBox beforeMessage={i}/>\n                            </div>\n                        </div>\n                    );\n                }\n                messageElems.push(<Message\n                    convoID={convo.id}\n                    message={message}\n                    key={message.id}\n                    index={i}\n                    // I could use forwardRef here but don't want to pull in preact/compat\n                    elemRef={i === messages.length - 1 ? lastMessageElem : undefined}\n                />);\n            }\n        }\n        return messageElems;\n    }, [messages, convo?.id]);\n\n\n    return (\n        <div className={style.messages}>\n            <div className={style.messagesInner}>\n                {messageElems}\n            </div>\n        </div>\n    );\n};\n\nexport default Messages;\n","// extracted by mini-css-extract-plugin\nexport default {\"modal-bg\":\"modal-bg__m0HV5\",\"modalBg\":\"modal-bg__m0HV5\",\"fade\":\"fade__cQTz1\",\"modal-positioner\":\"modal-positioner__JC0aj\",\"modalPositioner\":\"modal-positioner__JC0aj\",\"modal\":\"modal__ulBpF\",\"popup\":\"popup__O7W1y\"};","import type {JSX, ComponentChildren} from 'preact';\n\nimport style from './style.scss';\n\nconst Modal = ({onClose, children}: {\n    onClose: (event: Event) => void,\n    children: ComponentChildren\n}): JSX.Element => (\n    <>\n        <div className={style.modalBg} onClick={onClose} />\n        <div className={style.modalPositioner}>\n            <div className={style.modal}>{children}</div>\n        </div>\n    </>\n);\n\nexport default Modal;\n","// extracted by mini-css-extract-plugin\nexport default {\"project-bar\":\"project-bar__jqnP4\",\"projectBar\":\"project-bar__jqnP4\",\"project-name\":\"project-name__uuERj\",\"projectName\":\"project-name__uuERj\",\"button\":\"button__MAT5s\",\"error\":\"error__vb_Q8\"};","import type {AppState} from '../util/store';\n\nexport default (state: AppState, projectName: string): void => {\n    state.projectName.value = projectName;\n};\n","import style from './style.scss';\nimport icons from '../../icons/icons.scss';\n\nimport type {JSX} from 'preact';\nimport {useState} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport loadStateAction from '../../actions/load-state';\nimport setProjectNameAction from '../../actions/set-project-name';\n\nimport saveState from '../../serialization/save-state';\nimport validate from '../../serialization/validate';\n\nimport saveToFile from '../../util/save-to-file';\nimport {useAppState, useAction} from '../../util/store';\n\nconst ProjectBar = (): JSX.Element => {\n    const {version, projectName, convos, chars} = useAppState();\n\n    const loadState = useAction(loadStateAction);\n    const setProjectName = useAction(setProjectNameAction);\n\n    const [error, setError] = useState<Error | null>(null);\n\n    const onInput = (event: Event): unknown => setProjectName((event.target as HTMLInputElement).value);\n\n    const onLoad = (): void => {\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.addEventListener('change', event => {\n            const files = (event.target as HTMLInputElement).files;\n            if (files?.length) {\n                const reader = new FileReader();\n                reader.addEventListener('load', () => {\n                    try {\n                        const result = JSON.parse(reader.result as string) as unknown;\n                        const errors = validate(result);\n                        if (errors.length > 0) throw new Error('Invalid JSON');\n                        // eslint-disable-next-line max-len\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-argument\n                        loadState(result as any);\n                    } catch (error) {\n                        setError(error as Error);\n                    }\n                });\n                reader.readAsText(files[0]);\n            }\n        });\n        input.click();\n    };\n\n    const onSave = (): void =>\n        saveToFile(\n            `${projectName.value}.json`,\n            saveState({\n                version: version.value,\n                projectName: projectName.value,\n                convos: Array.from(Object.values(convos.value)),\n                chars: chars.value\n            }));\n\n    return (\n        <div className={style.projectBar}>\n            <input\n                className={style.projectName}\n                type=\"text\"\n                value={projectName}\n                onInput={onInput}\n            />\n            <div\n                className={classNames(style.button, icons['icon'], icons['icon-button'], icons['save'])}\n                title=\"Save\"\n                onClick={onSave}\n            />\n            <div\n                className={classNames(style.button, icons['icon'], icons['icon-button'], icons['load'])}\n                title=\"Load\"\n                onClick={onLoad}\n            />\n            {error ?\n                <div className={style.error}>\n                    <span className={style.errorMessage}>{error.message}</span>\n                    <div\n                        className={classNames(icons['icon'], icons['icon-button'], icons['delete'])}\n                        onClick={(): void => setError(null)}\n                    />\n                </div> :\n                null\n            }\n        </div>\n    );\n};\n\nexport default ProjectBar;\n","// extracted by mini-css-extract-plugin\nexport default {\"row\":\"row__etbb0\",\"label\":\"label__wCXFO\"};","import type {AppState} from '../util/store';\nimport type {ID, Convo} from '../util/datatypes';\n\nexport default (state: AppState, oldID: ID, newID: ID): void => {\n    const newConvos: Record<ID, Convo> = {};\n    for (const convo of Object.values(state.convos.value)) {\n        let changed = false;\n        let {messages} = convo;\n        for (let i = 0; i < messages.length; i++) {\n            const message = messages[i];\n            if (message.authorID !== oldID) continue;\n\n            // Don't clone convo.messages until we know we need to modify it\n            if (!changed) {\n                changed = true;\n                messages = messages.slice(0);\n            }\n\n            messages[i] = {...message, authorID: newID};\n        }\n\n        newConvos[convo.id] = changed ? {...convo, messages} : convo;\n    }\n    state.convos.value = newConvos;\n};\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useState} from 'preact/hooks';\n\nimport deleteCharacterAction from '../../actions/delete-character';\nimport replaceCharacterAction from '../../actions/replace-character';\nimport setToBeReplacedCharacterIDAction from '../../actions/set-to-be-replaced-character-id';\n\nimport {useAppState, useAction} from '../../util/store';\n\nconst ReplaceCharacterModal = (): JSX.Element => {\n    const {chars, toBeReplacedCharID} = useAppState();\n\n    const deleteCharacter = useAction(deleteCharacterAction);\n    const replaceCharacter = useAction(replaceCharacterAction);\n    const setToBeReplacedCharacterID = useAction(setToBeReplacedCharacterIDAction);\n\n    const [selectedCharacterID, setSelectedCharacterID] = useState<string | undefined>(undefined);\n\n    const replaceCharacterCallback = (): void => {\n        if (!toBeReplacedCharID.value || !selectedCharacterID) return;\n        replaceCharacter(toBeReplacedCharID.value, selectedCharacterID);\n        deleteCharacter(toBeReplacedCharID.value, selectedCharacterID);\n        setToBeReplacedCharacterID(null);\n    };\n\n    return (\n        <div className={style.replaceCharacter}>\n            <div className={style.row}>\n                <div className={style.label}>\n                    Replace character <span className={style.oldCharacterName}> with:</span>\n                </div>\n                <select\n                    onChange={(event): unknown => setSelectedCharacterID((event.target as HTMLSelectElement).value)}\n                    value={selectedCharacterID ?? undefined}>\n                    {chars.value.map(char => char.id === toBeReplacedCharID.value ?\n                        null :\n                        <option value={char.id}>{char.name}</option>)}\n                </select>\n            </div>\n            <div>\n                <button\n                    onClick={replaceCharacterCallback}\n                    disabled={typeof selectedCharacterID === 'undefined'}\n                >Replace</button>\n            </div>\n        </div>\n    );\n};\n\nexport default ReplaceCharacterModal;\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useComputed} from '@preact/signals';\nimport {useMemo} from 'preact/hooks';\n\nimport CommandBox from '../CommandBox/CommandBox';\nimport CharacterList from '../CharacterList/CharacterList';\nimport CharacterSettingsModal from '../CharacterSettingsModal/CharacterSettingsModal';\nimport ConvoList from '../ConvoList/ConvoList';\nimport ExportConvoModal from '../ExportConvoModal/ExportConvoModal';\nimport Messages from '../Messages/Messages';\nimport Modal from '../Modal/Modal';\nimport ProjectBar from '../ProjectBar/ProjectBar';\nimport ReplaceCharacterModal from '../ReplaceCharacterModal/ReplaceCharacterModal';\n\nimport setEditedCharacterIDAction from '../../actions/set-edited-character-id';\nimport setToBeReplacedCharacterIDAction from '../../actions/set-to-be-replaced-character-id';\nimport setExportedConvoIDAction from '../../actions/set-exported-convo-id';\n\nimport {useAppState, useAction} from '../../util/store';\n\nconst App = (): JSX.Element => {\n    const {convos, currentConvoID, editedCharID, toBeReplacedCharID, exportedConvoID} = useAppState();\n    const setEditedCharacterID = useAction(setEditedCharacterIDAction);\n    const setToBeReplacedCharacterID = useAction(setToBeReplacedCharacterIDAction);\n    const setExportedConvoID = useAction(setExportedConvoIDAction);\n    const projectBarPane = useMemo(() => (\n        <div className={style.projectBarPane}>\n            <ProjectBar />\n        </div>\n    ), []);\n\n    const convosPane = useMemo(() => (\n        <div className={style.convosPane}>\n            <ConvoList />\n        </div>\n    ), []);\n\n    const commandBoxPane = useMemo(() => (\n        <div className={style.commandBoxPane}>\n            <CommandBox />\n        </div>\n    ), []);\n\n    const charactersPane = useMemo(() => (\n        <div className={style.charactersPane}>\n            <CharacterList />\n        </div>\n    ), []);\n\n    const modal = useComputed(() => (\n        <>\n            {editedCharID.value !== null ?\n                <Modal onClose={(): unknown => setEditedCharacterID(null)}>\n                    <CharacterSettingsModal />\n                </Modal> :\n                null}\n            {toBeReplacedCharID.value !== null ?\n                <Modal onClose={(): unknown => setToBeReplacedCharacterID(null)}>\n                    <ReplaceCharacterModal />\n                </Modal> :\n                null}\n            {exportedConvoID.value !== null ?\n                <Modal onClose={(): unknown => setExportedConvoID(null)}>\n                    <ExportConvoModal />\n                </Modal> :\n                null}\n        </>\n    )).value;\n\n    return (\n        <div className={style.app}>\n            {projectBarPane}\n            <div className={style.appPane}>\n                {convosPane}\n                <div className={style.messagesPane}>\n                    <Messages convo={currentConvoID.value !== null ? convos.value[currentConvoID.value] : undefined} />\n                    {commandBoxPane}\n                </div>\n                <div className={style.charactersPane}>\n                    {charactersPane}\n                </div>\n            </div>\n            {modal}\n        </div>\n    );\n};\n\nexport default App;\n","import './forms.scss';\n\nimport {render, JSX} from 'preact';\n\nimport App from './components/App/App';\n\nimport {AppContext, store} from './util/store';\n\n\nconst Main = (): JSX.Element => (\n    <AppContext.Provider value={store}>\n        <App />\n    </AppContext.Provider>\n);\n\nrender(<Main />, document.body);\n"],"names":["__webpack_require__","moduleId","cachedModule","__webpack_module_cache__","undefined","exports","module","__webpack_modules__","call","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","includes","key","hasOwn","join","hasOwnProperty","default","__createBinding","this","create","o","m","k","k2","defineProperty","enumerable","get","__exportStar","p","value","require","pattern","s","matches","match","year","parseInt","month","day","hour","minute","second","n","isLeapYear","MONTH_LENGTHS","maxDay","isRefForm","schema","isEnumForm","isElementsForm","isPropertiesForm","isValuesForm","isDiscriminatorForm","__rest","e","t","indexOf","getOwnPropertySymbols","propertyIsEnumerable","isSchema","isValidSchema","isTypeForm","isEmptyForm","rest","keys","root","definitions","subSchema","values","ref","enum","Set","size","elements","properties","optionalProperties","mapping","nullable","discriminator","VALID_FORMS","VALID_TYPES","data","obj","metadata","type","enum_","additionalProperties","formSignature","formOk","validForm","every","index","elem","validateWithState","state","instance","parentTag","schema_1","schemaTokens","config","maxDepth","MaxDepthExceededError","pop","pushSchemaToken","pushError","validateInt","rfc3339_1","popSchemaToken","subInstance","entries","pushInstanceToken","popInstanceToken","name","inOptional","tag","min","max","Number","isInteger","token","instanceTokens","errors","instancePath","schemaPath","maxErrors","MaxErrorsReachedError","__importDefault","mod","__esModule","validate","Error","err","assign","props","removeNode","node","parentNode","removeChild","createElement","children","normalizedProps","slice","defaultProps","createVNode","original","vnode","__k","__","__b","__e","__d","__c","__h","constructor","__v","vnodeId","options","Fragment","Component","context","getDomSibling","childIndex","sibling","updateParentDomPointers","child","base","enqueueRender","c","rerenderQueue","process","prevDebounce","debounceRendering","setTimeout","queue","__r","sort","a","b","some","component","commitQueue","oldVNode","oldDom","parentDom","__P","diff","ownerSVGElement","commitRoot","diffChildren","renderResult","newParentVNode","oldParentVNode","globalContext","isSvg","excessDomChildren","isHydrating","j","childVNode","newDom","firstChildDom","refs","oldChildren","EMPTY_ARR","oldChildrenLength","EMPTY_OBJ","reorderChildren","placeChild","unmount","applyRef","tmp","nextDom","sibDom","outer","appendChild","nextSibling","insertBefore","setStyle","style","setProperty","IS_NON_DIMENSIONAL","test","dom","oldValue","useCapture","cssText","replace","toLowerCase","l","addEventListener","eventProxyCapture","eventProxy","removeEventListener","removeAttribute","setAttribute","event","newVNode","isNew","oldProps","oldState","snapshot","clearProcessingException","newProps","provider","componentContext","renderHook","count","newType","contextType","__E","render","doRender","sub","getDerivedStateFromProps","__s","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","forEach","_sb","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","diffElementNodes","diffed","cb","oldHtml","newHtml","nodeType","localName","document","createTextNode","createElementNS","is","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","diffProps","hydrate","checked","current","parentVNode","skipRemove","r","componentWillUnmount","replaceNode","firstChild","createContext","defaultValue","contextId","Consumer","contextValue","Provider","subs","ctx","_props","old","splice","error","errorInfo","ctor","handled","getDerivedStateFromError","setState","componentDidCatch","update","callback","forceUpdate","getter","d","definition","prop","getHookState","currentComponent","currentHook","hooks","__H","__V","EMPTY","useState","initialState","useReducer","reducer","init","hookState","currentIndex","_reducer","invokeOrReturn","currentValue","nextValue","action","_hasScuFromHooks","prevScu","stateHooks","filter","x","__N","shouldUpdate","hookItem","useEffect","args","argsChanged","_pendingArgs","useRef","initialValue","useMemo","factory","useCallback","useContext","flushAfterPaintEffects","afterPaintEffects","shift","invokeCleanup","invokeEffect","afterNextFrame","raf","done","clearTimeout","timeout","HAS_RAF","cancelAnimationFrame","requestAnimationFrame","hook","comp","cleanup","oldArgs","newArgs","f","cycleDetected","batchDepth","hasError","batchedEffect","effect","batchIteration","next","_nextBatchedEffect","_flags","needsToRecompute","_callback","endBatch","signal","evalContext","_node","_target","_sources","_version","_source","_prevSource","_nextSource","_prevTarget","_nextTarget","_rollbackNode","_subscribe","_value","_targets","Signal","target","_refresh","rollbackNode","sources","_unsubscribe","compute","_compute","_globalVersion","globalVersion","Computed","cleanupEffect","_cleanup","prevContext","disposeEffect","endEffect","cleanupSources","Effect","_dispose","bind","hookName","hookFn","updater","finishUpdate","_start","_ref","currentSignal","useSignal","v","_this","_updateFlags","_updater","peek","computed","createPropUpdater","propSignal","setAsProperty","changeSignal","_update","newSignal","useComputed","$compute","previousComponent","prevRaf","oldBeforeDiff","oldBeforeRender","oldAfterDiff","oldCommit","oldBeforeUnmount","__m","hasErrored","prev","subscribe","fn","flag","valueOf","addDependency","set","_notify","prepareSources","OUTDATED","finish","Text","displayName","defineProperties","configurable","signalProps","__np","setCurrentUpdater","renderedProps","updaters","_updaters","HAS_PENDING_UPDATE","randomArr","Uint32Array","crypto","getRandomValues","characterName","batch","newCharID","id","chars","color","currentCharID","newConvo","messages","convos","convoIDs","currentConvoID","messageContents","beforeMessageIndex","createConvo","createCharacter","convo","newMessages","newMessage","authorID","contents","convoID","projectName","version","JSON","stringify","json","convosByID","map","store","defaultStore","editedMessageID","editedConvoID","editedCharID","exportedConvoID","toBeReplacedCharID","insertAboveMessageID","exportConvoSettings","wrapTextEnabled","wrapTextLength","justifyEnabled","justifySide","storedStore","localStorage","getItem","parsedStore","parse","oldConvos","removeItem","loadLegacyState","autosave","parsedAutosave","loadState","loadStore","savedState","saveState","setItem","AppContext","useAppState","useAction","func","beforeMessage","createCharacterAction","createMessage","createMessageAction","editMessage","editMessageAction","setCurrentCharacterID","setCurrentCharacterIDAction","tabResults","setValue","className","onKeyPress","code","shiftKey","preventDefault","command","colonMatch","exec","authorName","authorNameLower","char","find","character","replaceMatch","split","onInput","onKeyDown","characters","startsWith","replacementID","charIndex","findIndex","CharacterListing","active","onClick","onEdit","onDelete","colorToHex","icons","deleteCharacter","deleteCharacterAction","setEditedCharacterID","setEditedCharacterIDAction","setToBeReplacedCharacterID","setToBeReplacedCharacterIDAction","charsInConvo","charsNotInConvo","charIDsInConvo","currentConvo","message","add","has","onClickCharacter","onEditCharacter","onDeleteCharacter","charID","newCharData","updateCharacter","updateCharacterAction","onChange","newConvos","convoIndex","existingID","ConvoListing","setConvoName","setConvoNameAction","setCurrentConvoID","setCurrentConvoIDAction","setEditedConvoID","setEditedConvoIDAction","setExportedConvoID","setExportedConvoIDAction","deleteConvo","deleteConvoAction","edited","prevEdited","editedConvoRef","focus","onBlur","stopPropagation","createConvoAction","convoListings","createConvoCallback","enabled","side","url","URL","createObjectURL","Blob","href","download","click","window","revokeObjectURL","setWrapTextEnabled","setWrapTextEnabledAction","setWrapTextLength","setWrapTextLengthAction","setJustifyEnabled","setJustifyEnabledAction","setJustifySide","setJustifySideAction","onChangeJustifySide","isFinite","disabled","longestCharNameLength","from","reduce","Math","lines","charName","start","justification","repeat","line","regex","lastIndex","trimEnd","convoStr","saveToFile","items","y","onDismiss","onClickItem","query","setQuery","searchRef","onFocusOut","currentTarget","contains","relatedTarget","top","left","maxHeight","onfocusout","tabIndex","item","messageIndex","elemRef","deleteMessage","deleteMessageAction","replaceMessageAuthor","replaceMessageAuthorAction","setEditedMessage","setEditedMessageAction","setInsertAboveMessageID","setInsertAboveMessageIDAction","editable","prevEditable","contentsRef","authorMenu","setAuthorMenu","onReplaceAuthor","newAuthorID","onDismissAuthorMenu","authorMenuElement","height","getBoundingClientRect","prevValue","title","lastMessageElem","prevMessagesRef","prevMessages","scrollIntoView","messageElems","onClose","loadStateAction","setProjectName","setProjectNameAction","setError","input","files","reader","FileReader","result","readAsText","oldID","newID","changed","replaceCharacter","replaceCharacterAction","selectedCharacterID","setSelectedCharacterID","projectBarPane","convosPane","commandBoxPane","charactersPane","modal","app","appPane","messagesPane","body"],"sourceRoot":""}