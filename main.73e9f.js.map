{"version":3,"file":"main.73e9f.js","mappings":"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","sources":["webpack://chatterscribe/webpack/bootstrap","webpack://chatterscribe/./node_modules/classnames/index.js","webpack://chatterscribe/./node_modules/jtd/lib/index.js","webpack://chatterscribe/./node_modules/jtd/lib/rfc3339.js","webpack://chatterscribe/./node_modules/jtd/lib/schema.js","webpack://chatterscribe/./node_modules/jtd/lib/validate.js","webpack://chatterscribe/../src/util.js","webpack://chatterscribe/../src/create-element.js","webpack://chatterscribe/../src/component.js","webpack://chatterscribe/../src/diff/children.js","webpack://chatterscribe/../src/diff/props.js","webpack://chatterscribe/../src/diff/index.js","webpack://chatterscribe/../src/render.js","webpack://chatterscribe/../src/create-context.js","webpack://chatterscribe/../src/options.js","webpack://chatterscribe/../src/constants.js","webpack://chatterscribe/../src/diff/catch-error.js","webpack://chatterscribe/webpack/runtime/compat get default export","webpack://chatterscribe/webpack/runtime/define property getters","webpack://chatterscribe/webpack/runtime/hasOwnProperty shorthand","webpack://chatterscribe/../src/component-stack.js","webpack://chatterscribe/../src/debug.js","webpack://chatterscribe/../src/index.js","webpack://chatterscribe/../src/index.ts","webpack://chatterscribe/../src/devtools.js","webpack://chatterscribe/../src/check-props.js","webpack://chatterscribe/./src/components/App/style.scss?5c09","webpack://chatterscribe/./src/components/CommandBox/style.scss?3605","webpack://chatterscribe/./src/util/id.ts","webpack://chatterscribe/./src/actions/create-character.ts","webpack://chatterscribe/./src/actions/create-convo.ts","webpack://chatterscribe/./src/util/create-convo.ts","webpack://chatterscribe/./src/actions/create-message.ts","webpack://chatterscribe/./src/actions/edit-message.ts","webpack://chatterscribe/./src/actions/set-current-character-id.ts","webpack://chatterscribe/./src/serialization/save-state.ts","webpack://chatterscribe/./src/serialization/validate.ts","webpack://chatterscribe/./src/actions/load-state.ts","webpack://chatterscribe/./src/util/store.ts","webpack://chatterscribe/./src/components/CommandBox/CommandBox.tsx","webpack://chatterscribe/./src/components/CharacterList/style.scss?f125","webpack://chatterscribe/./src/icons/icons.scss?3fbb","webpack://chatterscribe/./src/actions/delete-character.ts","webpack://chatterscribe/./src/actions/set-edited-character-id.ts","webpack://chatterscribe/./src/actions/set-to-be-replaced-character-id.ts","webpack://chatterscribe/./src/util/color-to-hex.ts","webpack://chatterscribe/./src/components/CharacterList/CharacterList.tsx","webpack://chatterscribe/./src/components/CharacterSettingsModal/style.scss?4254","webpack://chatterscribe/./src/actions/update-character.ts","webpack://chatterscribe/./src/components/CharacterSettingsModal/CharacterSettingsModal.tsx","webpack://chatterscribe/./src/components/ConvoList/style.scss?52e2","webpack://chatterscribe/./src/actions/delete-convo.ts","webpack://chatterscribe/./src/actions/set-convo-name.ts","webpack://chatterscribe/./src/actions/set-current-convo-id.ts","webpack://chatterscribe/./src/actions/set-edited-convo-id.ts","webpack://chatterscribe/./src/actions/set-exported-convo-id.ts","webpack://chatterscribe/./src/components/ConvoList/ConvoList.tsx","webpack://chatterscribe/./src/components/ExportConvoModal/style.scss?ef04","webpack://chatterscribe/./src/actions/export-convo-settings/set-wrap-text-enabled.ts","webpack://chatterscribe/./src/actions/export-convo-settings/set-wrap-text-length.ts","webpack://chatterscribe/./src/actions/export-convo-settings/set-justify-enabled.ts","webpack://chatterscribe/./src/actions/export-convo-settings/set-justify-side.ts","webpack://chatterscribe/./src/util/save-to-file.ts","webpack://chatterscribe/./src/components/ExportConvoModal/ExportConvoModal.tsx","webpack://chatterscribe/./src/components/Messages/style.scss?7655","webpack://chatterscribe/./src/components/Message/style.scss?e398","webpack://chatterscribe/./src/components/SearchableMenu/style.scss?99bd","webpack://chatterscribe/./src/components/SearchableMenu/SearchableMenu.tsx","webpack://chatterscribe/./src/actions/delete-message.ts","webpack://chatterscribe/./src/actions/replace-message-author.ts","webpack://chatterscribe/./src/actions/set-edited-message-id.ts","webpack://chatterscribe/./src/actions/set-insert-above-message-id.ts","webpack://chatterscribe/./src/components/Message/Message.tsx","webpack://chatterscribe/./src/components/Messages/Messages.tsx","webpack://chatterscribe/./src/components/Modal/style.scss?902d","webpack://chatterscribe/./src/components/Modal/Modal.tsx","webpack://chatterscribe/./src/components/ProjectBar/style.scss?337d","webpack://chatterscribe/./src/actions/set-project-name.ts","webpack://chatterscribe/./src/components/ProjectBar/ProjectBar.tsx","webpack://chatterscribe/./src/components/ReplaceCharacterModal/style.scss?8de9","webpack://chatterscribe/./src/actions/replace-character.ts","webpack://chatterscribe/./src/components/ReplaceCharacterModal/ReplaceCharacterModal.tsx","webpack://chatterscribe/./src/components/App/App.tsx","webpack://chatterscribe/./src/index.tsx"],"sourcesContent":["// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","\"use strict\";\n/**\n * Package jtd is an implementation of JSON Typedef.\n *\n * The {@link validate} function is an implementation of JSON Typedef\n * validation. The {@link Schema} interface represents JSON Typedef schemas.\n *\n * See [the README](https://github.com/jsontypedef/json-typedef-js) for examples\n * and links to guides on how to use this package.\n *\n * @packageDocumentation\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./schema\"), exports);\n__exportStar(require(\"./validate\"), exports);\n","\"use strict\";\n/** @ignore */ /** */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst pattern = /^(\\d{4})-(\\d{2})-(\\d{2})[tT](\\d{2}):(\\d{2}):(\\d{2})(\\.\\d+)?([zZ]|((\\+|-)(\\d{2}):(\\d{2})))$/;\nfunction isRFC3339(s) {\n    const matches = s.match(pattern);\n    if (matches === null) {\n        return false;\n    }\n    const year = parseInt(matches[1], 10);\n    const month = parseInt(matches[2], 10);\n    const day = parseInt(matches[3], 10);\n    const hour = parseInt(matches[4], 10);\n    const minute = parseInt(matches[5], 10);\n    const second = parseInt(matches[6], 10);\n    if (month > 12) {\n        return false;\n    }\n    if (day > maxDay(year, month)) {\n        return false;\n    }\n    if (hour > 23) {\n        return false;\n    }\n    if (minute > 59) {\n        return false;\n    }\n    // A value of 60 is permissible as a leap second.\n    if (second > 60) {\n        return false;\n    }\n    return true;\n}\nexports.default = isRFC3339;\nfunction maxDay(year, month) {\n    if (month === 2) {\n        return isLeapYear(year) ? 29 : 28;\n    }\n    return MONTH_LENGTHS[month];\n}\nfunction isLeapYear(n) {\n    return n % 4 === 0 && (n % 100 !== 0 || n % 400 === 0);\n}\nconst MONTH_LENGTHS = [\n    0,\n    31,\n    0,\n    31,\n    30,\n    31,\n    30,\n    31,\n    31,\n    30,\n    31,\n    30,\n    31,\n];\n","\"use strict\";\n/**\n * Module schema provides code to safely handle JSON Typedef schemas.\n *\n * JSON Typedef schemas are represented in this module with {@link Schema}, and\n * you can check if a JSON object is a correct schema by using {@link isSchema}\n * and {@link isValidSchema}.\n *\n * @packageDocumentation\n */\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isSchema = exports.isValidSchema = exports.isDiscriminatorForm = exports.isValuesForm = exports.isPropertiesForm = exports.isElementsForm = exports.isEnumForm = exports.isTypeForm = exports.isRefForm = exports.isEmptyForm = void 0;\n/**\n * isEmptyForm checks whether some Schema is of the empty form.\n *\n * @param schema The schema to validate\n */\nfunction isEmptyForm(schema) {\n    const { definitions, nullable, metadata } = schema, rest = __rest(schema, [\"definitions\", \"nullable\", \"metadata\"]);\n    return Object.keys(rest).length === 0;\n}\nexports.isEmptyForm = isEmptyForm;\n/**\n * isRefForm checks whether some Schema is of the ref form.\n *\n * @param schema The schema to validate\n */\nfunction isRefForm(schema) {\n    return \"ref\" in schema;\n}\nexports.isRefForm = isRefForm;\n/**\n * isTypeForm checks whether some Schema is of the type form.\n *\n * @param schema The schema to validate\n */\nfunction isTypeForm(schema) {\n    return \"type\" in schema;\n}\nexports.isTypeForm = isTypeForm;\n/**\n * isEnumForm checks whether some Schema is of the enum form.\n *\n * @param schema The schema to validate\n */\nfunction isEnumForm(schema) {\n    return \"enum\" in schema;\n}\nexports.isEnumForm = isEnumForm;\n/**\n * isElementsForm checks whether some Schema is of the elements form.\n *\n * @param schema The schema to validate\n */\nfunction isElementsForm(schema) {\n    return \"elements\" in schema;\n}\nexports.isElementsForm = isElementsForm;\n/**\n * isPropertiesForm checks whether some Schema is of the properties form.\n *\n * @param schema The schema to validate\n */\nfunction isPropertiesForm(schema) {\n    return \"properties\" in schema || \"optionalProperties\" in schema;\n}\nexports.isPropertiesForm = isPropertiesForm;\n/**\n * isPropertiesForm checks whether some Schema is of the values form.\n *\n * @param schema The schema to validate\n */\nfunction isValuesForm(schema) {\n    return \"values\" in schema;\n}\nexports.isValuesForm = isValuesForm;\n/**\n * isDiscriminatorForm checks whether some Schema is of the values form.\n *\n * @param schema The schema to validate\n */\nfunction isDiscriminatorForm(schema) {\n    return \"discriminator\" in schema;\n}\nexports.isDiscriminatorForm = isDiscriminatorForm;\n/**\n * isValidSchema checks whether some Schema is correct, according to the syntax\n * rules of JSON Typedef.\n *\n * In particular, isValidSchema verifies that:\n *\n * 1. The schema does not have any non-root definitions,\n * 2. All references point to actually-existing definitions,\n * 3. All enums are non-empty, and do not contain duplicates,\n * 4. The `properties` and `optionalProperties` of a schema never share\n *    properties,\n * 5. All schemas in `mapping` are of the properties form,\n * 6. Schemas in `mapping` never re-specify the `discriminator` property\n *\n * If an object returned from `JSON.parse` passes both {@link isSchema} and\n * {@link isValidSchema}, then it is a correct JSON Typedef schema.\n *\n * @param schema The schema to validate\n * @param root The schema to consider as the \"root\" schema. If undefined,\n * `schema` will be used as the root. This is usually what you want to do.\n */\nfunction isValidSchema(schema, root) {\n    if (root === undefined) {\n        root = schema;\n    }\n    if (schema.definitions !== undefined) {\n        if (root !== schema) {\n            return false;\n        }\n        for (const subSchema of Object.values(schema.definitions)) {\n            if (!isValidSchema(subSchema, root)) {\n                return false;\n            }\n        }\n    }\n    if (isRefForm(schema)) {\n        if (!(schema.ref in (root.definitions || {}))) {\n            return false;\n        }\n    }\n    if (isEnumForm(schema)) {\n        if (schema.enum.length === 0) {\n            return false;\n        }\n        if (schema.enum.length !== new Set(schema.enum).size) {\n            return false;\n        }\n    }\n    if (isElementsForm(schema)) {\n        return isValidSchema(schema.elements, root);\n    }\n    if (isPropertiesForm(schema)) {\n        for (const subSchema of Object.values(schema.properties || {})) {\n            if (!isValidSchema(subSchema, root)) {\n                return false;\n            }\n        }\n        for (const subSchema of Object.values(schema.optionalProperties || {})) {\n            if (!isValidSchema(subSchema, root)) {\n                return false;\n            }\n        }\n        for (const key of Object.keys(schema.properties || {})) {\n            if (key in (schema.optionalProperties || {})) {\n                return false;\n            }\n        }\n    }\n    if (isValuesForm(schema)) {\n        return isValidSchema(schema.values, root);\n    }\n    if (isDiscriminatorForm(schema)) {\n        for (const subSchema of Object.values(schema.mapping)) {\n            if (!isValidSchema(subSchema, root) || !isPropertiesForm(subSchema)) {\n                return false;\n            }\n            if (subSchema.nullable) {\n                return false;\n            }\n            if (schema.discriminator in (subSchema.properties || {})) {\n                return false;\n            }\n            if (schema.discriminator in (subSchema.optionalProperties || {})) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\nexports.isValidSchema = isValidSchema;\n// Index of valid form \"signatures\" -- i.e., combinations of the presence of the\n// keywords (in order):\n//\n// ref type enum elements properties optionalProperties additionalProperties\n// values discriminator mapping\n//\n// The keywords \"definitions\", \"nullable\", and \"metadata\" are not included here,\n// because they would restrict nothing.\nconst VALID_FORMS = [\n    // Empty form\n    [false, false, false, false, false, false, false, false, false, false],\n    // Ref form\n    [true, false, false, false, false, false, false, false, false, false],\n    // Type form\n    [false, true, false, false, false, false, false, false, false, false],\n    // Enum form\n    [false, false, true, false, false, false, false, false, false, false],\n    // Elements form\n    [false, false, false, true, false, false, false, false, false, false],\n    // Properties form -- properties or optional properties or both, and never\n    // additional properties on its own\n    [false, false, false, false, true, false, false, false, false, false],\n    [false, false, false, false, false, true, false, false, false, false],\n    [false, false, false, false, true, true, false, false, false, false],\n    [false, false, false, false, true, false, true, false, false, false],\n    [false, false, false, false, false, true, true, false, false, false],\n    [false, false, false, false, true, true, true, false, false, false],\n    // Values form\n    [false, false, false, false, false, false, false, true, false, false],\n    // Discriminator form\n    [false, false, false, false, false, false, false, false, true, true],\n];\n// List of valid values that the \"type\" keyboard may take on.\nconst VALID_TYPES = [\n    \"boolean\",\n    \"float32\",\n    \"float64\",\n    \"int8\",\n    \"uint8\",\n    \"int16\",\n    \"uint16\",\n    \"int32\",\n    \"uint32\",\n    \"string\",\n    \"timestamp\",\n];\n/**\n * isSchema checks whether some piece of JSON data has the shape of a JSON\n * Typedef Schema.\n *\n * This function only looks at the \"shape\" of data: it just makes sure all\n * property names and types are valid, and that the data takes on one of the\n * eight JSON Typedef forms.\n *\n * If an object returned from `JSON.parse` passes both {@link isSchema} and\n * {@link isValidSchema}, then it is a correct JSON Typedef schema.\n *\n * @param data The data to check\n */\nfunction isSchema(data) {\n    if (typeof data !== \"object\" || Array.isArray(data) || data === null) {\n        return false;\n    }\n    // TypeScript does not let us coerce `{}` into `{ [index: string]: unknown }`.\n    // At the time of writing, it's unclear why this is the case, nor under what\n    // circumstances such an coercion would be wrong.\n    //\n    // So we work around the compiler here.\n    const obj = data;\n    const { definitions = undefined, nullable = undefined, metadata = undefined, ref = undefined, type = undefined, enum: enum_ = undefined, elements = undefined, properties = undefined, optionalProperties = undefined, additionalProperties = undefined, values = undefined, discriminator = undefined, mapping = undefined } = obj, rest = __rest(obj, [\"definitions\", \"nullable\", \"metadata\", \"ref\", \"type\", \"enum\", \"elements\", \"properties\", \"optionalProperties\", \"additionalProperties\", \"values\", \"discriminator\", \"mapping\"]);\n    const formSignature = [\n        ref !== undefined,\n        type !== undefined,\n        enum_ !== undefined,\n        elements !== undefined,\n        properties !== undefined,\n        optionalProperties !== undefined,\n        additionalProperties !== undefined,\n        values !== undefined,\n        discriminator !== undefined,\n        mapping !== undefined,\n    ];\n    let formOk = false;\n    for (const validForm of VALID_FORMS) {\n        formOk =\n            formOk ||\n                validForm.every((value, index) => value === formSignature[index]);\n    }\n    if (!formOk) {\n        return false;\n    }\n    if (definitions !== undefined) {\n        if (typeof definitions !== \"object\" ||\n            Array.isArray(definitions) ||\n            definitions === null) {\n            return false;\n        }\n        for (const value of Object.values(definitions)) {\n            if (!isSchema(value)) {\n                return false;\n            }\n        }\n    }\n    if (nullable !== undefined) {\n        if (typeof nullable !== \"boolean\") {\n            return false;\n        }\n    }\n    if (metadata !== undefined) {\n        if (typeof metadata !== \"object\" ||\n            Array.isArray(metadata) ||\n            metadata === null) {\n            return false;\n        }\n    }\n    if (ref !== undefined) {\n        if (typeof ref !== \"string\") {\n            return false;\n        }\n    }\n    if (type !== undefined) {\n        if (typeof type !== \"string\" || !VALID_TYPES.includes(type)) {\n            return false;\n        }\n    }\n    if (enum_ !== undefined) {\n        if (!Array.isArray(enum_)) {\n            return false;\n        }\n        if (!enum_.every((elem) => typeof elem === \"string\")) {\n            return false;\n        }\n    }\n    if (elements !== undefined) {\n        if (!isSchema(elements)) {\n            return false;\n        }\n    }\n    if (properties !== undefined) {\n        if (typeof properties !== \"object\" ||\n            Array.isArray(properties) ||\n            properties === null) {\n            return false;\n        }\n        for (const value of Object.values(properties)) {\n            if (!isSchema(value)) {\n                return false;\n            }\n        }\n    }\n    if (optionalProperties !== undefined) {\n        if (typeof optionalProperties !== \"object\" ||\n            Array.isArray(optionalProperties) ||\n            optionalProperties === null) {\n            return false;\n        }\n        for (const value of Object.values(optionalProperties)) {\n            if (!isSchema(value)) {\n                return false;\n            }\n        }\n    }\n    if (additionalProperties !== undefined) {\n        if (typeof additionalProperties !== \"boolean\") {\n            return false;\n        }\n    }\n    if (values !== undefined) {\n        if (!isSchema(values)) {\n            return false;\n        }\n    }\n    if (discriminator !== undefined) {\n        if (typeof discriminator !== \"string\") {\n            return false;\n        }\n    }\n    if (mapping !== undefined) {\n        if (typeof mapping !== \"object\" ||\n            Array.isArray(mapping) ||\n            mapping === null) {\n            return false;\n        }\n        for (const value of Object.values(mapping)) {\n            if (!isSchema(value)) {\n                return false;\n            }\n        }\n    }\n    if (Object.keys(rest).length !== 0) {\n        return false;\n    }\n    return true;\n}\nexports.isSchema = isSchema;\n","\"use strict\";\n/**\n * Module validate provides an implementation of JSON Typedef validation.\n *\n * The most important function in this module is {@link validate}, which returns\n * an array of {@link ValidationError}. You can configure {@link validate} by\n * passing it a {@link ValidationConfig}.\n *\n * @packageDocumentation\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validate = exports.MaxDepthExceededError = void 0;\nconst rfc3339_1 = __importDefault(require(\"./rfc3339\"));\nconst schema_1 = require(\"./schema\");\n/**\n * MaxDepthExceededError is the error returned if\n * {@link ValidationConfig.maxDepth} is exceeded during {@link validate}.\n */\nclass MaxDepthExceededError extends Error {\n}\nexports.MaxDepthExceededError = MaxDepthExceededError;\nclass MaxErrorsReachedError extends Error {\n}\n/**\n * validate performs JSON Typedef validation of an instance (or \"input\") against\n * a JSON Typedef schema, returning a standardized set of errors.\n *\n * This function may throw {@link MaxDepthExceededError} if you have configured\n * a {@link ValidationConfig.maxDepth}. If you do not configure such a maxDepth,\n * then this function may cause a stack overflow. That's because of\n * circularly-defined schemas like this one:\n *\n * ```json\n * {\n *   \"ref\": \"loop\",\n *   \"definitions\": {\n *     \"loop\": { \"ref\": \"loop\" }\n *   }\n * }\n * ```\n *\n * If your schema is not circularly defined like this, then there is no risk for\n * validate to overflow the stack.\n *\n * If you are only interested in a certain number of error messages, consider\n * using {@link ValidationConfig.maxErrors} to get better performance. For\n * instance, if all you care about is whether the input is OK or if it has\n * errors, you may want to set maxErrors to 1.\n *\n * @param schema The schema to validate data against\n * @param instance The \"input\" to validate\n * @param config Validation options. Optional.\n */\nfunction validate(schema, instance, config) {\n    const state = {\n        errors: [],\n        instanceTokens: [],\n        schemaTokens: [[]],\n        root: schema,\n        config: config || { maxDepth: 0, maxErrors: 0 },\n    };\n    try {\n        validateWithState(state, schema, instance);\n    }\n    catch (err) {\n        if (err instanceof MaxErrorsReachedError) {\n            // MaxErrorsReachedError is just a dummy error to abort further\n            // validation. The contents of state.errors are what we need to return.\n        }\n        else {\n            // This is a genuine error. Let's re-throw it.\n            throw err;\n        }\n    }\n    return state.errors;\n}\nexports.validate = validate;\nfunction validateWithState(state, schema, instance, parentTag) {\n    if (schema.nullable && instance === null) {\n        return;\n    }\n    if (schema_1.isRefForm(schema)) {\n        if (state.schemaTokens.length === state.config.maxDepth) {\n            throw new MaxDepthExceededError();\n        }\n        // The ref form is the only case where we push a new array onto\n        // schemaTokens; we maintain a separate stack for each reference.\n        state.schemaTokens.push([\"definitions\", schema.ref]);\n        validateWithState(state, state.root.definitions[schema.ref], instance);\n        state.schemaTokens.pop();\n    }\n    else if (schema_1.isTypeForm(schema)) {\n        pushSchemaToken(state, \"type\");\n        switch (schema.type) {\n            case \"boolean\":\n                if (typeof instance !== \"boolean\") {\n                    pushError(state);\n                }\n                break;\n            case \"float32\":\n            case \"float64\":\n                if (typeof instance !== \"number\") {\n                    pushError(state);\n                }\n                break;\n            case \"int8\":\n                validateInt(state, instance, -128, 127);\n                break;\n            case \"uint8\":\n                validateInt(state, instance, 0, 255);\n                break;\n            case \"int16\":\n                validateInt(state, instance, -32768, 32767);\n                break;\n            case \"uint16\":\n                validateInt(state, instance, 0, 65535);\n                break;\n            case \"int32\":\n                validateInt(state, instance, -2147483648, 2147483647);\n                break;\n            case \"uint32\":\n                validateInt(state, instance, 0, 4294967295);\n                break;\n            case \"string\":\n                if (typeof instance !== \"string\") {\n                    pushError(state);\n                }\n                break;\n            case \"timestamp\":\n                if (typeof instance !== \"string\") {\n                    pushError(state);\n                }\n                else {\n                    if (!rfc3339_1.default(instance)) {\n                        pushError(state);\n                    }\n                }\n                break;\n        }\n        popSchemaToken(state);\n    }\n    else if (schema_1.isEnumForm(schema)) {\n        pushSchemaToken(state, \"enum\");\n        if (typeof instance !== \"string\" || !schema.enum.includes(instance)) {\n            pushError(state);\n        }\n        popSchemaToken(state);\n    }\n    else if (schema_1.isElementsForm(schema)) {\n        pushSchemaToken(state, \"elements\");\n        if (Array.isArray(instance)) {\n            for (const [index, subInstance] of instance.entries()) {\n                pushInstanceToken(state, index.toString());\n                validateWithState(state, schema.elements, subInstance);\n                popInstanceToken(state);\n            }\n        }\n        else {\n            pushError(state);\n        }\n        popSchemaToken(state);\n    }\n    else if (schema_1.isPropertiesForm(schema)) {\n        // JSON has six basic types of data (null, boolean, number, string,\n        // array, object). Of their standard JS countparts, three have a\n        // `typeof` of \"object\": null, array, and object.\n        //\n        // This check attempts to check if something is \"really\" an object.\n        if (typeof instance === \"object\" &&\n            instance !== null &&\n            !Array.isArray(instance)) {\n            if (schema.properties !== undefined) {\n                pushSchemaToken(state, \"properties\");\n                for (const [name, subSchema] of Object.entries(schema.properties)) {\n                    pushSchemaToken(state, name);\n                    if (instance.hasOwnProperty(name)) {\n                        pushInstanceToken(state, name);\n                        validateWithState(state, subSchema, instance[name]);\n                        popInstanceToken(state);\n                    }\n                    else {\n                        pushError(state);\n                    }\n                    popSchemaToken(state);\n                }\n                popSchemaToken(state);\n            }\n            if (schema.optionalProperties !== undefined) {\n                pushSchemaToken(state, \"optionalProperties\");\n                for (const [name, subSchema] of Object.entries(schema.optionalProperties)) {\n                    pushSchemaToken(state, name);\n                    if (instance.hasOwnProperty(name)) {\n                        pushInstanceToken(state, name);\n                        validateWithState(state, subSchema, instance[name]);\n                        popInstanceToken(state);\n                    }\n                    popSchemaToken(state);\n                }\n                popSchemaToken(state);\n            }\n            if (schema.additionalProperties !== true) {\n                for (const name of Object.keys(instance)) {\n                    const inRequired = schema.properties && name in schema.properties;\n                    const inOptional = schema.optionalProperties && name in schema.optionalProperties;\n                    if (!inRequired && !inOptional && name !== parentTag) {\n                        pushInstanceToken(state, name);\n                        pushError(state);\n                        popInstanceToken(state);\n                    }\n                }\n            }\n        }\n        else {\n            if (schema.properties !== undefined) {\n                pushSchemaToken(state, \"properties\");\n            }\n            else {\n                pushSchemaToken(state, \"optionalProperties\");\n            }\n            pushError(state);\n            popSchemaToken(state);\n        }\n    }\n    else if (schema_1.isValuesForm(schema)) {\n        pushSchemaToken(state, \"values\");\n        // See comment in properties form on why this is the test we use for\n        // checking for objects.\n        if (typeof instance === \"object\" &&\n            instance !== null &&\n            !Array.isArray(instance)) {\n            for (const [name, subInstance] of Object.entries(instance)) {\n                pushInstanceToken(state, name);\n                validateWithState(state, schema.values, subInstance);\n                popInstanceToken(state);\n            }\n        }\n        else {\n            pushError(state);\n        }\n        popSchemaToken(state);\n    }\n    else if (schema_1.isDiscriminatorForm(schema)) {\n        // See comment in properties form on why this is the test we use for\n        // checking for objects.\n        if (typeof instance === \"object\" &&\n            instance !== null &&\n            !Array.isArray(instance)) {\n            if (instance.hasOwnProperty(schema.discriminator)) {\n                const tag = instance[schema.discriminator];\n                if (typeof tag === \"string\") {\n                    if (tag in schema.mapping) {\n                        pushSchemaToken(state, \"mapping\");\n                        pushSchemaToken(state, tag);\n                        validateWithState(state, schema.mapping[tag], instance, schema.discriminator);\n                        popSchemaToken(state);\n                        popSchemaToken(state);\n                    }\n                    else {\n                        pushSchemaToken(state, \"mapping\");\n                        pushInstanceToken(state, schema.discriminator);\n                        pushError(state);\n                        popInstanceToken(state);\n                        popSchemaToken(state);\n                    }\n                }\n                else {\n                    pushSchemaToken(state, \"discriminator\");\n                    pushInstanceToken(state, schema.discriminator);\n                    pushError(state);\n                    popInstanceToken(state);\n                    popSchemaToken(state);\n                }\n            }\n            else {\n                pushSchemaToken(state, \"discriminator\");\n                pushError(state);\n                popSchemaToken(state);\n            }\n        }\n        else {\n            pushSchemaToken(state, \"discriminator\");\n            pushError(state);\n            popSchemaToken(state);\n        }\n    }\n}\nfunction validateInt(state, instance, min, max) {\n    if (typeof instance !== \"number\" ||\n        !Number.isInteger(instance) ||\n        instance < min ||\n        instance > max) {\n        pushError(state);\n    }\n}\nfunction pushInstanceToken(state, token) {\n    state.instanceTokens.push(token);\n}\nfunction popInstanceToken(state) {\n    state.instanceTokens.pop();\n}\nfunction pushSchemaToken(state, token) {\n    state.schemaTokens[state.schemaTokens.length - 1].push(token);\n}\nfunction popSchemaToken(state) {\n    state.schemaTokens[state.schemaTokens.length - 1].pop();\n}\nfunction pushError(state) {\n    state.errors.push({\n        instancePath: [...state.instanceTokens],\n        schemaPath: [...state.schemaTokens[state.schemaTokens.length - 1]],\n    });\n    if (state.errors.length === state.config.maxErrors) {\n        throw new MaxErrorsReachedError();\n    }\n}\n","import { EMPTY_ARR } from \"./constants\";\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-ignore We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n","import { slice } from './util';\nimport options from './options';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\t_hydrating: null,\n\t\tconstructor: undefined,\n\t\t_original: original == null ? ++vnodeId : original\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == null && options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tconst oldVNode = assign({}, vnode);\n\t\toldVNode._original = vnode._original + 1;\n\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tvnode._hydrating != null ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom,\n\t\t\tvnode._hydrating\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (vnode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || setTimeout)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet queue;\n\twhile ((process._rerenderCount = rerenderQueue.length)) {\n\t\tqueue = rerenderQueue.sort((a, b) => a._vnode._depth - b._vnode._depth);\n\t\trerenderQueue = [];\n\t\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t\t// process() calls from getting scheduled while `queue` is still being consumed.\n\t\tqueue.some(c => {\n\t\t\tif (c._dirty) renderComponent(c);\n\t\t});\n\t}\n}\n\nprocess._rerenderCount = 0;\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').ComponentChildren[]} renderResult\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by getChildContext\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, childVNode, newDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\tnewParentVNode._children = [];\n\tfor (i = 0; i < renderResult.length; i++) {\n\t\tchildVNode = renderResult[i];\n\n\t\tif (childVNode == null || typeof childVNode == 'boolean') {\n\t\t\tchildVNode = newParentVNode._children[i] = null;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint'\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t} else if (Array.isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : null,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\t// Terser removes the `continue` here and wraps the loop body\n\t\t// in a `if (childVNode) { ... } condition\n\t\tif (childVNode == null) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Check if we find a corresponding element in oldChildren.\n\t\t// If found, delete the array item by setting to `undefined`.\n\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t// (holes).\n\t\toldVNode = oldChildren[i];\n\n\t\tif (\n\t\t\toldVNode === null ||\n\t\t\t(oldVNode &&\n\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t) {\n\t\t\toldChildren[i] = undefined;\n\t\t} else {\n\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t// We always match by type (in either case).\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\toldVNode = null;\n\t\t\t}\n\t\t}\n\n\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tisSvg,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating\n\t\t);\n\n\t\tnewDom = childVNode._dom;\n\n\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\tif (!refs) refs = [];\n\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t}\n\n\t\tif (newDom != null) {\n\t\t\tif (firstChildDom == null) {\n\t\t\t\tfirstChildDom = newDom;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttypeof childVNode.type == 'function' &&\n\t\t\t\tchildVNode._children === oldVNode._children\n\t\t\t) {\n\t\t\t\tchildVNode._nextDom = oldDom = reorderChildren(\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldDom,\n\t\t\t\t\tparentDom\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\toldChildren,\n\t\t\t\t\tnewDom,\n\t\t\t\t\toldDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (typeof newParentVNode.type == 'function') {\n\t\t\t\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t\t\t\t// _nextDom property to the nextSibling of its last child DOM node.\n\t\t\t\t//\n\t\t\t\t// `oldDom` contains the correct value here because if the last child\n\t\t\t\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t\t\t\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t\t\t\t// node's nextSibling.\n\t\t\t\tnewParentVNode._nextDom = oldDom;\n\t\t\t}\n\t\t} else if (\n\t\t\toldDom &&\n\t\t\toldVNode._dom == oldDom &&\n\t\t\toldDom.parentNode != parentDom\n\t\t) {\n\t\t\t// The above condition is to handle null placeholders. See test in placeholder.test.js:\n\t\t\t// `efficiently replace null placeholders in parent rerenders`\n\t\t\toldDom = getDomSibling(oldVNode);\n\t\t}\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) {\n\t\t\tunmount(oldChildren[i], oldChildren[i]);\n\t\t}\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\nfunction reorderChildren(childVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\tlet c = childVNode._children;\n\tlet tmp = 0;\n\tfor (; c && tmp < c.length; tmp++) {\n\t\tlet vnode = c[tmp];\n\t\tif (vnode) {\n\t\t\t// We typically enter this code path on sCU bailout, where we copy\n\t\t\t// oldVNode._children to newVNode._children. If that is the case, we need\n\t\t\t// to update the old children's _parent pointer to point to the newVNode\n\t\t\t// (childVNode here).\n\t\t\tvnode._parent = childVNode;\n\n\t\t\tif (typeof vnode.type == 'function') {\n\t\t\t\toldDom = reorderChildren(vnode, oldDom, parentDom);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(parentDom, vnode, vnode, c, vnode._dom, oldDom);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (Array.isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\nfunction placeChild(\n\tparentDom,\n\tchildVNode,\n\toldVNode,\n\toldChildren,\n\tnewDom,\n\toldDom\n) {\n\tlet nextDom;\n\tif (childVNode._nextDom !== undefined) {\n\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t// have a non-undefined _nextDom. Continue the diff from the sibling\n\t\t// of last DOM child of this child VNode\n\t\tnextDom = childVNode._nextDom;\n\n\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because\n\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t// diffing Components and Fragments. Once we store it the nextDOM local var, we\n\t\t// can clean up the property\n\t\tchildVNode._nextDom = undefined;\n\t} else if (\n\t\toldVNode == null ||\n\t\tnewDom != oldDom ||\n\t\tnewDom.parentNode == null\n\t) {\n\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\tparentDom.appendChild(newDom);\n\t\t\tnextDom = null;\n\t\t} else {\n\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\tfor (\n\t\t\t\tlet sibDom = oldDom, j = 0;\n\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildren.length;\n\t\t\t\tj += 2\n\t\t\t) {\n\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t}\n\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\tnextDom = oldDom;\n\t\t}\n\t}\n\n\t// If we have pre-calculated the nextDOM node, use it. Else calculate it now\n\t// Strictly check for `undefined` here cuz `null` is a valid value of `nextDom`.\n\t// See more detail in create-element.js:createVNode\n\tif (nextDom !== undefined) {\n\t\toldDom = nextDom;\n\t} else {\n\t\toldDom = newDom.nextSibling;\n\t}\n\n\treturn oldDom;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (i !== 'children' && i !== 'key' && !(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'children' &&\n\t\t\ti !== 'key' &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, isSvg) {\n\tlet useCapture;\n\n\to: if (name === 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture = name !== (name = name.replace(/Capture$/, ''));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (name.toLowerCase() in dom) name = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\t\tdom.addEventListener(name, handler, useCapture);\n\t\t\t}\n\t\t} else {\n\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\tdom.removeEventListener(name, handler, useCapture);\n\t\t}\n\t} else if (name !== 'dangerouslySetInnerHTML') {\n\t\tif (isSvg) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname !== 'href' &&\n\t\t\tname !== 'list' &&\n\t\t\tname !== 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname !== 'tabIndex' &&\n\t\t\tname !== 'download' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == null ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// ARIA-attributes have a different notion of boolean values.\n\t\t// The value `false` is different from the attribute not\n\t\t// existing on the DOM, so we can't remove it. For non-boolean\n\t\t// ARIA-attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost us too many bytes. On top of\n\t\t// that other VDOM frameworks also always stringify `false`.\n\n\t\tif (typeof value === 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != null && (value !== false || name.indexOf('-') != -1)) {\n\t\t\tdom.setAttribute(name, value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type + false](options.event ? options.event(e) : e);\n}\n\nfunction eventProxyCapture(e) {\n\tthis._listeners[e.type + true](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ } from '../constants';\nimport { Component, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { diffProps, setProperty } from './props';\nimport { assign, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by getChildContext\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._hydrating != null) {\n\t\tisHydrating = oldVNode._hydrating;\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\t// if we resume, we want the tree to be \"unlocked\"\n\t\tnewVNode._hydrating = null;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType == 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\t// @ts-ignore The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, componentContext);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\tnewVNode._original === oldVNode._original\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) c._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.forEach(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tArray.isArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._hydrating = null;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = false;\n\t\t} else if (\n\t\t\texcessDomChildren == null &&\n\t\t\tnewVNode._original === oldVNode._original\n\t\t) {\n\t\t\tnewVNode._children = oldVNode._children;\n\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\tnewVNode._original = null;\n\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\tnewVNode._dom = oldDom;\n\t\t\tnewVNode._hydrating = !!isHydrating;\n\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t// ^ could possibly be simplified to:\n\t\t\t// excessDomChildren.length = 0;\n\t\t}\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-ignore Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-ignore See above ts-ignore on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = newVNode.type;\n\tlet i = 0;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tif (nodeType === 'svg') isSvg = true;\n\n\tif (excessDomChildren != null) {\n\t\tfor (; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tchild &&\n\t\t\t\t'setAttribute' in child === !!nodeType &&\n\t\t\t\t(nodeType ? child.localName === nodeType : child.nodeType === 3)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (nodeType === null) {\n\t\t\t// @ts-ignore createTextNode returns Text, we expect PreactElement\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tif (isSvg) {\n\t\t\tdom = document.createElementNS(\n\t\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType\n\t\t\t);\n\t\t} else {\n\t\t\tdom = document.createElement(\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType,\n\t\t\t\tnewProps.is && newProps\n\t\t\t);\n\t\t}\n\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t\t// we are creating a new node, so we can assume this is a new subtree (in case we are hydrating), this deopts the hydrate\n\t\tisHydrating = false;\n\t}\n\n\tif (nodeType === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\t// But, if we are in a situation where we are using existing DOM (e.g. replaceNode)\n\t\t\t// we should read the existing DOM attributes to diff them\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (\n\t\t\t\t\t!newHtml ||\n\t\t\t\t\t((!oldHtml || newHtml.__html != oldHtml.__html) &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML)\n\t\t\t\t) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\ti = newVNode.props.children;\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tArray.isArray(i) ? i : [i],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg && nodeType !== 'foreignObject',\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\t(i = newProps.value) !== undefined &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(i !== dom.value ||\n\t\t\t\t\t(nodeType === 'progress' && !i) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType === 'option' && i !== oldProps.value))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'value', i, oldProps.value, false);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\t(i = newProps.checked) !== undefined &&\n\t\t\t\ti !== dom.checked\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'checked', i, oldProps.checked, false);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) {\n\t\t\tapplyRef(r, null, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t\tvnode._component = undefined;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type !== 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove && vnode._dom != null) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._parent = vnode._dom = vnode._nextDom = undefined;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { EMPTY_OBJ } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode === 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = (\n\t\t(!isHydrating && replaceNode) ||\n\t\tparentDom\n\t)._children = createElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: parentDom.firstChild\n\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t: null,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t? oldVNode._dom\n\t\t\t: parentDom.firstChild,\n\t\tisHydrating\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue, contextId) {\n\tcontextId = '__cC' + i++;\n\n\tconst context = {\n\t\t_id: contextId,\n\t\t_defaultValue: defaultValue,\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tConsumer(props, contextValue) {\n\t\t\t// return props.children(\n\t\t\t// \tcontext[contextId] ? context[contextId].props.value : defaultValue\n\t\t\t// );\n\t\t\treturn props.children(contextValue);\n\t\t},\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\tlet subs = [];\n\t\t\t\tlet ctx = {};\n\t\t\t\tctx[contextId] = this;\n\n\t\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\t\tthis.shouldComponentUpdate = function(_props) {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\t// I think the forced value propagation here was only needed when `options.debounceRendering` was being bypassed:\n\t\t\t\t\t\t// https://github.com/preactjs/preact/commit/4d339fb803bea09e9f198abf38ca1bf8ea4b7771#diff-54682ce380935a717e41b8bfc54737f6R358\n\t\t\t\t\t\t// In those cases though, even with the value corrected, we're double-rendering all nodes.\n\t\t\t\t\t\t// It might be better to just tell folks not to use force-sync mode.\n\t\t\t\t\t\t// Currently, using `useContext()` in a class component will overwrite its `this.context` value.\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context[contextId] = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\t\t\t\t\t\tsubs.some(enqueueRender);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\n\treturn (context.Provider._contextRef = context.Consumer.contextType = context);\n}\n","import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component, ctor, handled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import { options, Fragment } from 'preact';\n\n/**\n * Get human readable name of the component/dom node\n * @param {import('./internal').VNode} vnode\n * @param {import('./internal').VNode} vnode\n * @returns {string}\n */\nexport function getDisplayName(vnode) {\n\tif (vnode.type === Fragment) {\n\t\treturn 'Fragment';\n\t} else if (typeof vnode.type == 'function') {\n\t\treturn vnode.type.displayName || vnode.type.name;\n\t} else if (typeof vnode.type == 'string') {\n\t\treturn vnode.type;\n\t}\n\n\treturn '#text';\n}\n\n/**\n * Used to keep track of the currently rendered `vnode` and print it\n * in debug messages.\n */\nlet renderStack = [];\n\n/**\n * Keep track of the current owners. An owner describes a component\n * which was responsible to render a specific `vnode`. This exclude\n * children that are passed via `props.children`, because they belong\n * to the parent owner.\n *\n * ```jsx\n * const Foo = props => <div>{props.children}</div> // div's owner is Foo\n * const Bar = props => {\n *   return (\n *     <Foo><span /></Foo> // Foo's owner is Bar, span's owner is Bar\n *   )\n * }\n * ```\n *\n * Note: A `vnode` may be hoisted to the root scope due to compiler\n * optimiztions. In these cases the `_owner` will be different.\n */\nlet ownerStack = [];\n\n/**\n * Get the currently rendered `vnode`\n * @returns {import('./internal').VNode | null}\n */\nexport function getCurrentVNode() {\n\treturn renderStack.length > 0 ? renderStack[renderStack.length - 1] : null;\n}\n\n/**\n * If the user doesn't have `@babel/plugin-transform-react-jsx-source`\n * somewhere in his tool chain we can't print the filename and source\n * location of a component. In that case we just omit that, but we'll\n * print a helpful message to the console, notifying the user of it.\n */\nlet hasBabelPlugin = false;\n\n/**\n * Check if a `vnode` is a possible owner.\n * @param {import('./internal').VNode} vnode\n */\nfunction isPossibleOwner(vnode) {\n\treturn typeof vnode.type == 'function' && vnode.type != Fragment;\n}\n\n/**\n * Return the component stack that was captured up to this point.\n * @param {import('./internal').VNode} vnode\n * @returns {string}\n */\nexport function getOwnerStack(vnode) {\n\tconst stack = [vnode];\n\tlet next = vnode;\n\twhile (next._owner != null) {\n\t\tstack.push(next._owner);\n\t\tnext = next._owner;\n\t}\n\n\treturn stack.reduce((acc, owner) => {\n\t\tacc += `  in ${getDisplayName(owner)}`;\n\n\t\tconst source = owner.__source;\n\t\tif (source) {\n\t\t\tacc += ` (at ${source.fileName}:${source.lineNumber})`;\n\t\t} else if (!hasBabelPlugin) {\n\t\t\thasBabelPlugin = true;\n\t\t\tconsole.warn(\n\t\t\t\t'Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.'\n\t\t\t);\n\t\t}\n\n\t\treturn (acc += '\\n');\n\t}, '');\n}\n\n/**\n * Setup code to capture the component trace while rendering. Note that\n * we cannot simply traverse `vnode._parent` upwards, because we have some\n * debug messages for `this.setState` where the `vnode` is `undefined`.\n */\nexport function setupComponentStack() {\n\tlet oldDiff = options._diff;\n\tlet oldDiffed = options.diffed;\n\tlet oldRoot = options._root;\n\tlet oldVNode = options.vnode;\n\tlet oldRender = options._render;\n\n\toptions.diffed = vnode => {\n\t\tif (isPossibleOwner(vnode)) {\n\t\t\townerStack.pop();\n\t\t}\n\t\trenderStack.pop();\n\t\tif (oldDiffed) oldDiffed(vnode);\n\t};\n\n\toptions._diff = vnode => {\n\t\tif (isPossibleOwner(vnode)) {\n\t\t\trenderStack.push(vnode);\n\t\t}\n\t\tif (oldDiff) oldDiff(vnode);\n\t};\n\n\toptions._root = (vnode, parent) => {\n\t\townerStack = [];\n\t\tif (oldRoot) oldRoot(vnode, parent);\n\t};\n\n\toptions.vnode = vnode => {\n\t\tvnode._owner =\n\t\t\townerStack.length > 0 ? ownerStack[ownerStack.length - 1] : null;\n\t\tif (oldVNode) oldVNode(vnode);\n\t};\n\n\toptions._render = vnode => {\n\t\tif (isPossibleOwner(vnode)) {\n\t\t\townerStack.push(vnode);\n\t\t}\n\n\t\tif (oldRender) oldRender(vnode);\n\t};\n}\n","import { checkPropTypes } from './check-props';\nimport { options, Component } from 'preact';\nimport {\n\tELEMENT_NODE,\n\tDOCUMENT_NODE,\n\tDOCUMENT_FRAGMENT_NODE\n} from './constants';\nimport {\n\tgetOwnerStack,\n\tsetupComponentStack,\n\tgetCurrentVNode,\n\tgetDisplayName\n} from './component-stack';\nimport { assign } from './util';\n\nconst isWeakMapSupported = typeof WeakMap == 'function';\n\nfunction getClosestDomNodeParent(parent) {\n\tif (!parent) return {};\n\tif (typeof parent.type == 'function') {\n\t\treturn getClosestDomNodeParent(parent._parent);\n\t}\n\treturn parent;\n}\n\nexport function initDebug() {\n\tsetupComponentStack();\n\n\tlet hooksAllowed = false;\n\n\t/* eslint-disable no-console */\n\tlet oldBeforeDiff = options._diff;\n\tlet oldDiffed = options.diffed;\n\tlet oldVnode = options.vnode;\n\tlet oldCatchError = options._catchError;\n\tlet oldRoot = options._root;\n\tlet oldHook = options._hook;\n\tconst warnedComponents = !isWeakMapSupported\n\t\t? null\n\t\t: {\n\t\t\t\tuseEffect: new WeakMap(),\n\t\t\t\tuseLayoutEffect: new WeakMap(),\n\t\t\t\tlazyPropTypes: new WeakMap()\n\t\t  };\n\tconst deprecations = [];\n\n\toptions._catchError = (error, vnode, oldVNode, errorInfo) => {\n\t\tlet component = vnode && vnode._component;\n\t\tif (component && typeof error.then == 'function') {\n\t\t\tconst promise = error;\n\t\t\terror = new Error(\n\t\t\t\t`Missing Suspense. The throwing component was: ${getDisplayName(vnode)}`\n\t\t\t);\n\n\t\t\tlet parent = vnode;\n\t\t\tfor (; parent; parent = parent._parent) {\n\t\t\t\tif (parent._component && parent._component._childDidSuspend) {\n\t\t\t\t\terror = promise;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// We haven't recovered and we know at this point that there is no\n\t\t\t// Suspense component higher up in the tree\n\t\t\tif (error instanceof Error) {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\terrorInfo = errorInfo || {};\n\t\t\terrorInfo.componentStack = getOwnerStack(vnode);\n\t\t\toldCatchError(error, vnode, oldVNode, errorInfo);\n\n\t\t\t// when an error was handled by an ErrorBoundary we will nontheless emit an error\n\t\t\t// event on the window object. This is to make up for react compatibility in dev mode\n\t\t\t// and thus make the Next.js dev overlay work.\n\t\t\tif (typeof error.then != 'function') {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\t};\n\n\toptions._root = (vnode, parentNode) => {\n\t\tif (!parentNode) {\n\t\t\tthrow new Error(\n\t\t\t\t'Undefined parent passed to render(), this is the second argument.\\n' +\n\t\t\t\t\t'Check if the element is available in the DOM/has the correct id.'\n\t\t\t);\n\t\t}\n\n\t\tlet isValid;\n\t\tswitch (parentNode.nodeType) {\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\tcase DOCUMENT_NODE:\n\t\t\t\tisValid = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tisValid = false;\n\t\t}\n\n\t\tif (!isValid) {\n\t\t\tlet componentName = getDisplayName(vnode);\n\t\t\tthrow new Error(\n\t\t\t\t`Expected a valid HTML node as a second argument to render.\tReceived ${parentNode} instead: render(<${componentName} />, ${parentNode});`\n\t\t\t);\n\t\t}\n\n\t\tif (oldRoot) oldRoot(vnode, parentNode);\n\t};\n\n\toptions._diff = vnode => {\n\t\tlet { type, _parent: parent } = vnode;\n\t\tlet parentVNode = getClosestDomNodeParent(parent);\n\n\t\thooksAllowed = true;\n\n\t\tif (type === undefined) {\n\t\t\tthrow new Error(\n\t\t\t\t'Undefined component passed to createElement()\\n\\n' +\n\t\t\t\t\t'You likely forgot to export your component or might have mixed up default and named imports' +\n\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t);\n\t\t} else if (type != null && typeof type == 'object') {\n\t\t\tif (type._children !== undefined && type._dom !== undefined) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Invalid type passed to createElement(): ${type}\\n\\n` +\n\t\t\t\t\t\t'Did you accidentally pass a JSX literal as JSX twice?\\n\\n' +\n\t\t\t\t\t\t`  let My${getDisplayName(vnode)} = ${serializeVNode(type)};\\n` +\n\t\t\t\t\t\t`  let vnode = <My${getDisplayName(vnode)} />;\\n\\n` +\n\t\t\t\t\t\t'This usually happens when you export a JSX literal and not the component.' +\n\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthrow new Error(\n\t\t\t\t'Invalid type passed to createElement(): ' +\n\t\t\t\t\t(Array.isArray(type) ? 'array' : type)\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\t(type === 'thead' || type === 'tfoot' || type === 'tbody') &&\n\t\t\tparentVNode.type !== 'table'\n\t\t) {\n\t\t\tconsole.error(\n\t\t\t\t'Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent.' +\n\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t);\n\t\t} else if (\n\t\t\ttype === 'tr' &&\n\t\t\tparentVNode.type !== 'thead' &&\n\t\t\tparentVNode.type !== 'tfoot' &&\n\t\t\tparentVNode.type !== 'tbody' &&\n\t\t\tparentVNode.type !== 'table'\n\t\t) {\n\t\t\tconsole.error(\n\t\t\t\t'Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent.' +\n\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t);\n\t\t} else if (type === 'td' && parentVNode.type !== 'tr') {\n\t\t\tconsole.error(\n\t\t\t\t'Improper nesting of table. Your <td> should have a <tr> parent.' +\n\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t);\n\t\t} else if (type === 'th' && parentVNode.type !== 'tr') {\n\t\t\tconsole.error(\n\t\t\t\t'Improper nesting of table. Your <th> should have a <tr>.' +\n\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\tvnode.ref !== undefined &&\n\t\t\ttypeof vnode.ref != 'function' &&\n\t\t\ttypeof vnode.ref != 'object' &&\n\t\t\t!('$$typeof' in vnode) // allow string refs when preact-compat is installed\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t`Component's \"ref\" property should be a function, or an object created ` +\n\t\t\t\t\t`by createRef(), but got [${typeof vnode.ref}] instead\\n` +\n\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t);\n\t\t}\n\n\t\tif (typeof vnode.type == 'string') {\n\t\t\tfor (const key in vnode.props) {\n\t\t\t\tif (\n\t\t\t\t\tkey[0] === 'o' &&\n\t\t\t\t\tkey[1] === 'n' &&\n\t\t\t\t\ttypeof vnode.props[key] != 'function' &&\n\t\t\t\t\tvnode.props[key] != null\n\t\t\t\t) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`Component's \"${key}\" property should be a function, ` +\n\t\t\t\t\t\t\t`but got [${typeof vnode.props[key]}] instead\\n` +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Check prop-types if available\n\t\tif (typeof vnode.type == 'function' && vnode.type.propTypes) {\n\t\t\tif (\n\t\t\t\tvnode.type.displayName === 'Lazy' &&\n\t\t\t\twarnedComponents &&\n\t\t\t\t!warnedComponents.lazyPropTypes.has(vnode.type)\n\t\t\t) {\n\t\t\t\tconst m =\n\t\t\t\t\t'PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ';\n\t\t\t\ttry {\n\t\t\t\t\tconst lazyVNode = vnode.type();\n\t\t\t\t\twarnedComponents.lazyPropTypes.set(vnode.type, true);\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\tm + `Component wrapped in lazy() is ${getDisplayName(lazyVNode)}`\n\t\t\t\t\t);\n\t\t\t\t} catch (promise) {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\tm + \"We will log the wrapped component's name once it is loaded.\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet values = vnode.props;\n\t\t\tif (vnode.type._forwarded) {\n\t\t\t\tvalues = assign({}, values);\n\t\t\t\tdelete values.ref;\n\t\t\t}\n\n\t\t\tcheckPropTypes(\n\t\t\t\tvnode.type.propTypes,\n\t\t\t\tvalues,\n\t\t\t\t'prop',\n\t\t\t\tgetDisplayName(vnode),\n\t\t\t\t() => getOwnerStack(vnode)\n\t\t\t);\n\t\t}\n\n\t\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n\t};\n\n\toptions._hook = (comp, index, type) => {\n\t\tif (!comp || !hooksAllowed) {\n\t\t\tthrow new Error('Hook can only be invoked from render methods.');\n\t\t}\n\n\t\tif (oldHook) oldHook(comp, index, type);\n\t};\n\n\t// Ideally we'd want to print a warning once per component, but we\n\t// don't have access to the vnode that triggered it here. As a\n\t// compromise and to avoid flooding the console with warnings we\n\t// print each deprecation warning only once.\n\tconst warn = (property, message) => ({\n\t\tget() {\n\t\t\tconst key = 'get' + property + message;\n\t\t\tif (deprecations && deprecations.indexOf(key) < 0) {\n\t\t\t\tdeprecations.push(key);\n\t\t\t\tconsole.warn(`getting vnode.${property} is deprecated, ${message}`);\n\t\t\t}\n\t\t},\n\t\tset() {\n\t\t\tconst key = 'set' + property + message;\n\t\t\tif (deprecations && deprecations.indexOf(key) < 0) {\n\t\t\t\tdeprecations.push(key);\n\t\t\t\tconsole.warn(`setting vnode.${property} is not allowed, ${message}`);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst deprecatedAttributes = {\n\t\tnodeName: warn('nodeName', 'use vnode.type'),\n\t\tattributes: warn('attributes', 'use vnode.props'),\n\t\tchildren: warn('children', 'use vnode.props.children')\n\t};\n\n\tconst deprecatedProto = Object.create({}, deprecatedAttributes);\n\n\toptions.vnode = vnode => {\n\t\tconst props = vnode.props;\n\t\tif (\n\t\t\tvnode.type !== null &&\n\t\t\tprops != null &&\n\t\t\t('__source' in props || '__self' in props)\n\t\t) {\n\t\t\tconst newProps = (vnode.props = {});\n\t\t\tfor (let i in props) {\n\t\t\t\tconst v = props[i];\n\t\t\t\tif (i === '__source') vnode.__source = v;\n\t\t\t\telse if (i === '__self') vnode.__self = v;\n\t\t\t\telse newProps[i] = v;\n\t\t\t}\n\t\t}\n\n\t\t// eslint-disable-next-line\n\t\tvnode.__proto__ = deprecatedProto;\n\t\tif (oldVnode) oldVnode(vnode);\n\t};\n\n\toptions.diffed = vnode => {\n\t\t// Check if the user passed plain objects as children. Note that we cannot\n\t\t// move this check into `options.vnode` because components can receive\n\t\t// children in any shape they want (e.g.\n\t\t// `<MyJSONFormatter>{{ foo: 123, bar: \"abc\" }}</MyJSONFormatter>`).\n\t\t// Putting this check in `options.diffed` ensures that\n\t\t// `vnode._children` is set and that we only validate the children\n\t\t// that were actually rendered.\n\t\tif (vnode._children) {\n\t\t\tvnode._children.forEach(child => {\n\t\t\t\tif (child && child.type === undefined) {\n\t\t\t\t\t// Remove internal vnode keys that will always be patched\n\t\t\t\t\tdelete child._parent;\n\t\t\t\t\tdelete child._depth;\n\t\t\t\t\tconst keys = Object.keys(child).join(',');\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`Objects are not valid as a child. Encountered an object with the keys {${keys}}.` +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\thooksAllowed = false;\n\n\t\tif (oldDiffed) oldDiffed(vnode);\n\n\t\tif (vnode._children != null) {\n\t\t\tconst keys = [];\n\t\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\t\tconst child = vnode._children[i];\n\t\t\t\tif (!child || child.key == null) continue;\n\n\t\t\t\tconst key = child.key;\n\t\t\t\tif (keys.indexOf(key) !== -1) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Following component has two or more children with the ' +\n\t\t\t\t\t\t\t`same key attribute: \"${key}\". This may cause glitches and misbehavior ` +\n\t\t\t\t\t\t\t'in rendering process. Component: \\n\\n' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\n\t\t\t\t\t// Break early to not spam the console\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tkeys.push(key);\n\t\t\t}\n\t\t}\n\t};\n}\n\nconst setState = Component.prototype.setState;\nComponent.prototype.setState = function(update, callback) {\n\tif (this._vnode == null) {\n\t\t// `this._vnode` will be `null` during componentWillMount. But it\n\t\t// is perfectly valid to call `setState` during cWM. So we\n\t\t// need an additional check to verify that we are dealing with a\n\t\t// call inside constructor.\n\t\tif (this.state == null) {\n\t\t\tconsole.warn(\n\t\t\t\t`Calling \"this.setState\" inside the constructor of a component is a ` +\n\t\t\t\t\t`no-op and might be a bug in your application. Instead, set ` +\n\t\t\t\t\t`\"this.state = {}\" directly.\\n\\n${getOwnerStack(getCurrentVNode())}`\n\t\t\t);\n\t\t}\n\t}\n\n\treturn setState.call(this, update, callback);\n};\n\nconst forceUpdate = Component.prototype.forceUpdate;\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode == null) {\n\t\tconsole.warn(\n\t\t\t`Calling \"this.forceUpdate\" inside the constructor of a component is a ` +\n\t\t\t\t`no-op and might be a bug in your application.\\n\\n${getOwnerStack(\n\t\t\t\t\tgetCurrentVNode()\n\t\t\t\t)}`\n\t\t);\n\t} else if (this._parentDom == null) {\n\t\tconsole.warn(\n\t\t\t`Can't call \"this.forceUpdate\" on an unmounted component. This is a no-op, ` +\n\t\t\t\t`but it indicates a memory leak in your application. To fix, cancel all ` +\n\t\t\t\t`subscriptions and asynchronous tasks in the componentWillUnmount method.` +\n\t\t\t\t`\\n\\n${getOwnerStack(this._vnode)}`\n\t\t);\n\t}\n\treturn forceUpdate.call(this, callback);\n};\n\n/**\n * Serialize a vnode tree to a string\n * @param {import('./internal').VNode} vnode\n * @returns {string}\n */\nexport function serializeVNode(vnode) {\n\tlet { props } = vnode;\n\tlet name = getDisplayName(vnode);\n\n\tlet attrs = '';\n\tfor (let prop in props) {\n\t\tif (props.hasOwnProperty(prop) && prop !== 'children') {\n\t\t\tlet value = props[prop];\n\n\t\t\t// If it is an object but doesn't have toString(), use Object.toString\n\t\t\tif (typeof value == 'function') {\n\t\t\t\tvalue = `function ${value.displayName || value.name}() {}`;\n\t\t\t}\n\n\t\t\tvalue =\n\t\t\t\tObject(value) === value && !value.toString\n\t\t\t\t\t? Object.prototype.toString.call(value)\n\t\t\t\t\t: value + '';\n\n\t\t\tattrs += ` ${prop}=${JSON.stringify(value)}`;\n\t\t}\n\t}\n\n\tlet children = props.children;\n\treturn `<${name}${attrs}${\n\t\tchildren && children.length ? '>..</' + name + '>' : ' />'\n\t}`;\n}\n","import { options } from 'preact';\nimport { initDevTools } from './devtools';\n\ninitDevTools();\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, name: string) => T}\n */\nexport function addHookName(value, name) {\n\tif (options._addHookName) {\n\t\toptions._addHookName(name);\n\t}\n\treturn value;\n}\n","function cycleDetected(): never {\n\tthrow new Error(\"Cycle detected\");\n}\n\n// Flags for Computed and Effect.\nconst RUNNING = 1 << 0;\nconst NOTIFIED = 1 << 1;\nconst OUTDATED = 1 << 2;\nconst DISPOSED = 1 << 3;\nconst HAS_ERROR = 1 << 4;\nconst TRACKING = 1 << 5;\n\n// A linked list node used to track dependencies (sources) and dependents (targets).\n// Also used to remember the source's last version number that the target saw.\ntype Node = {\n\t// A source whose value the target depends on.\n\t_source: Signal;\n\t_prevSource?: Node;\n\t_nextSource?: Node;\n\n\t// A target that depends on the source and should be notified when the source changes.\n\t_target: Computed | Effect;\n\t_prevTarget?: Node;\n\t_nextTarget?: Node;\n\n\t// The version number of the source that target has last seen. We use version numbers\n\t// instead of storing the source value, because source values can take arbitrary amount\n\t// of memory, and computeds could hang on to them forever because they're lazily evaluated.\n\t// Use the special value -1 to mark potentially unused but recyclable nodes.\n\t_version: number;\n\n\t// Used to remember & roll back the source's previous `._node` value when entering &\n\t// exiting a new evaluation context.\n\t_rollbackNode?: Node;\n};\n\nfunction startBatch() {\n\tbatchDepth++;\n}\n\nfunction endBatch() {\n\tif (batchDepth > 1) {\n\t\tbatchDepth--;\n\t\treturn;\n\t}\n\n\tlet error: unknown;\n\tlet hasError = false;\n\n\twhile (batchedEffect !== undefined) {\n\t\tlet effect: Effect | undefined = batchedEffect;\n\t\tbatchedEffect = undefined;\n\n\t\tbatchIteration++;\n\n\t\twhile (effect !== undefined) {\n\t\t\tconst next: Effect | undefined = effect._nextBatchedEffect;\n\t\t\teffect._nextBatchedEffect = undefined;\n\t\t\teffect._flags &= ~NOTIFIED;\n\n\t\t\tif (!(effect._flags & DISPOSED) && needsToRecompute(effect)) {\n\t\t\t\ttry {\n\t\t\t\t\teffect._callback();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tif (!hasError) {\n\t\t\t\t\t\terror = err;\n\t\t\t\t\t\thasError = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\teffect = next;\n\t\t}\n\t}\n\tbatchIteration = 0;\n\tbatchDepth--;\n\n\tif (hasError) {\n\t\tthrow error;\n\t}\n}\n\nfunction batch<T>(callback: () => T): T {\n\tif (batchDepth > 0) {\n\t\treturn callback();\n\t}\n\t/*@__INLINE__**/ startBatch();\n\ttry {\n\t\treturn callback();\n\t} finally {\n\t\tendBatch();\n\t}\n}\n\n// Currently evaluated computed or effect.\nlet evalContext: Computed | Effect | undefined = undefined;\n\n// Effects collected into a batch.\nlet batchedEffect: Effect | undefined = undefined;\nlet batchDepth = 0;\nlet batchIteration = 0;\n\n// A global version number for signals, used for fast-pathing repeated\n// computed.peek()/computed.value calls when nothing has changed globally.\nlet globalVersion = 0;\n\nfunction addDependency(signal: Signal): Node | undefined {\n\tif (evalContext === undefined) {\n\t\treturn undefined;\n\t}\n\n\tlet node = signal._node;\n\tif (node === undefined || node._target !== evalContext) {\n\t\t// `signal` is a new dependency. Create a new node dependency node, move it\n\t\t//  to the front of the current context's dependency list.\n\t\tnode = {\n\t\t\t_version: 0,\n\t\t\t_source: signal,\n\t\t\t_prevSource: undefined,\n\t\t\t_nextSource: evalContext._sources,\n\t\t\t_target: evalContext,\n\t\t\t_prevTarget: undefined,\n\t\t\t_nextTarget: undefined,\n\t\t\t_rollbackNode: node,\n\t\t};\n\t\tevalContext._sources = node;\n\t\tsignal._node = node;\n\n\t\t// Subscribe to change notifications from this dependency if we're in an effect\n\t\t// OR evaluating a computed signal that in turn has subscribers.\n\t\tif (evalContext._flags & TRACKING) {\n\t\t\tsignal._subscribe(node);\n\t\t}\n\t\treturn node;\n\t} else if (node._version === -1) {\n\t\t// `signal` is an existing dependency from a previous evaluation. Reuse it.\n\t\tnode._version = 0;\n\n\t\t// If `node` is not already the current head of the dependency list (i.e.\n\t\t// there is a previous node in the list), then make `node` the new head.\n\t\tif (node._prevSource !== undefined) {\n\t\t\tnode._prevSource._nextSource = node._nextSource;\n\t\t\tif (node._nextSource !== undefined) {\n\t\t\t\tnode._nextSource._prevSource = node._prevSource;\n\t\t\t}\n\t\t\tnode._prevSource = undefined;\n\t\t\tnode._nextSource = evalContext._sources;\n\t\t\t// evalCotext._sources must be !== undefined (and !== node), because\n\t\t\t// `node` was originally pointing to some previous node.\n\t\t\tevalContext._sources!._prevSource = node;\n\t\t\tevalContext._sources = node;\n\t\t}\n\n\t\t// We can assume that the currently evaluated effect / computed signal is already\n\t\t// subscribed to change notifications from `signal` if needed.\n\t\treturn node;\n\t}\n\treturn undefined;\n}\n\ndeclare class Signal<T = any> {\n\t/** @internal */\n\t_value: unknown;\n\n\t/** @internal\n\t * Version numbers should always be >= 0, because the special value -1 is used\n\t * by Nodes to signify potentially unused but recyclable notes.\n\t */\n\t_version: number;\n\n\t/** @internal */\n\t_node?: Node;\n\n\t/** @internal */\n\t_targets?: Node;\n\n\tconstructor(value?: T);\n\n\t/** @internal */\n\t_refresh(): boolean;\n\n\t/** @internal */\n\t_subscribe(node: Node): void;\n\n\t/** @internal */\n\t_unsubscribe(node: Node): void;\n\n\tsubscribe(fn: (value: T) => void): () => void;\n\n\tvalueOf(): T;\n\n\ttoString(): string;\n\n\tpeek(): T;\n\n\tget value(): T;\n\tset value(value: T);\n}\n\n/** @internal */\nfunction Signal(this: Signal, value?: unknown) {\n\tthis._value = value;\n\tthis._version = 0;\n\tthis._node = undefined;\n\tthis._targets = undefined;\n}\n\nSignal.prototype._refresh = function () {\n\treturn true;\n};\n\nSignal.prototype._subscribe = function (node) {\n\tif (this._targets !== node && node._prevTarget === undefined) {\n\t\tnode._nextTarget = this._targets;\n\t\tif (this._targets !== undefined) {\n\t\t\tthis._targets._prevTarget = node;\n\t\t}\n\t\tthis._targets = node;\n\t}\n};\n\nSignal.prototype._unsubscribe = function (node) {\n\tconst prev = node._prevTarget;\n\tconst next = node._nextTarget;\n\tif (prev !== undefined) {\n\t\tprev._nextTarget = next;\n\t\tnode._prevTarget = undefined;\n\t}\n\tif (next !== undefined) {\n\t\tnext._prevTarget = prev;\n\t\tnode._nextTarget = undefined;\n\t}\n\tif (node === this._targets) {\n\t\tthis._targets = next;\n\t}\n};\n\nSignal.prototype.subscribe = function (fn) {\n\tconst signal = this;\n\treturn effect(function (this: Effect) {\n\t\tconst value = signal.value;\n\t\tconst flag = this._flags & TRACKING;\n\t\tthis._flags &= ~TRACKING;\n\t\ttry {\n\t\t\tfn(value);\n\t\t} finally {\n\t\t\tthis._flags |= flag;\n\t\t}\n\t});\n};\n\nSignal.prototype.valueOf = function () {\n\treturn this.value;\n};\n\nSignal.prototype.toString = function () {\n\treturn this.value + \"\";\n};\n\nSignal.prototype.peek = function () {\n\treturn this._value;\n};\n\nObject.defineProperty(Signal.prototype, \"value\", {\n\tget() {\n\t\tconst node = addDependency(this);\n\t\tif (node !== undefined) {\n\t\t\tnode._version = this._version;\n\t\t}\n\t\treturn this._value;\n\t},\n\tset(value) {\n\t\tif (value !== this._value) {\n\t\t\tif (batchIteration > 100) {\n\t\t\t\tcycleDetected();\n\t\t\t}\n\n\t\t\tthis._value = value;\n\t\t\tthis._version++;\n\t\t\tglobalVersion++;\n\n\t\t\t/**@__INLINE__*/ startBatch();\n\t\t\ttry {\n\t\t\t\tfor (\n\t\t\t\t\tlet node = this._targets;\n\t\t\t\t\tnode !== undefined;\n\t\t\t\t\tnode = node._nextTarget\n\t\t\t\t) {\n\t\t\t\t\tnode._target._notify();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tendBatch();\n\t\t\t}\n\t\t}\n\t},\n});\n\nfunction signal<T>(value: T): Signal<T> {\n\treturn new Signal(value);\n}\n\nfunction needsToRecompute(target: Computed | Effect): boolean {\n\t// Check the dependencies for changed values. The dependency list is already\n\t// in order of use. Therefore if multiple dependencies have changed values, only\n\t// the first used dependency is re-evaluated at this point.\n\tfor (\n\t\tlet node = target._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\t// If there's a new version of the dependency before or after refreshing,\n\t\t// or the dependency has something blocking it from refreshing at all (e.g. a\n\t\t// dependency cycle), then we need to recompute.\n\t\tif (\n\t\t\tnode._source._version !== node._version ||\n\t\t\t!node._source._refresh() ||\n\t\t\tnode._source._version !== node._version\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t}\n\t// If none of the dependencies have changed values since last recompute then the\n\t// there's no need to recompute.\n\treturn false;\n}\n\nfunction prepareSources(target: Computed | Effect) {\n\tfor (\n\t\tlet node = target._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\tconst rollbackNode = node._source._node;\n\t\tif (rollbackNode !== undefined) {\n\t\t\tnode._rollbackNode = rollbackNode;\n\t\t}\n\t\tnode._source._node = node;\n\t\tnode._version = -1;\n\t}\n}\n\nfunction cleanupSources(target: Computed | Effect) {\n\t// At this point target._sources is a mishmash of current & former dependencies.\n\t// The current dependencies are also in a reverse order of use.\n\t// Therefore build a new, reverted list of dependencies containing only the current\n\t// dependencies in a proper order of use.\n\t// Drop former dependencies from the list and unsubscribe from their change notifications.\n\n\tlet node = target._sources;\n\tlet sources = undefined;\n\twhile (node !== undefined) {\n\t\tconst next = node._nextSource;\n\t\tif (node._version === -1) {\n\t\t\tnode._source._unsubscribe(node);\n\t\t\tnode._nextSource = undefined;\n\t\t} else {\n\t\t\tif (sources !== undefined) {\n\t\t\t\tsources._prevSource = node;\n\t\t\t}\n\t\t\tnode._prevSource = undefined;\n\t\t\tnode._nextSource = sources;\n\t\t\tsources = node;\n\t\t}\n\n\t\tnode._source._node = node._rollbackNode;\n\t\tif (node._rollbackNode !== undefined) {\n\t\t\tnode._rollbackNode = undefined;\n\t\t}\n\t\tnode = next;\n\t}\n\ttarget._sources = sources;\n}\n\ndeclare class Computed<T = any> extends Signal<T> {\n\t_compute: () => T;\n\t_sources?: Node;\n\t_globalVersion: number;\n\t_flags: number;\n\n\tconstructor(compute: () => T);\n\n\t_notify(): void;\n\tget value(): T;\n}\n\nfunction Computed(this: Computed, compute: () => unknown) {\n\tSignal.call(this, undefined);\n\n\tthis._compute = compute;\n\tthis._sources = undefined;\n\tthis._globalVersion = globalVersion - 1;\n\tthis._flags = OUTDATED;\n}\n\nComputed.prototype = new Signal() as Computed;\n\nComputed.prototype._refresh = function () {\n\tthis._flags &= ~NOTIFIED;\n\n\tif (this._flags & RUNNING) {\n\t\treturn false;\n\t}\n\n\t// If this computed signal has subscribed to updates from its dependencies\n\t// (TRACKING flag set) and none of them have notified about changes (OUTDATED\n\t// flag not set), then the computed value can't have changed.\n\tif ((this._flags & (OUTDATED | TRACKING)) === TRACKING) {\n\t\treturn true;\n\t}\n\tthis._flags &= ~OUTDATED;\n\n\tif (this._globalVersion === globalVersion) {\n\t\treturn true;\n\t}\n\tthis._globalVersion = globalVersion;\n\n\t// Mark this computed signal running before checking the dependencies for value\n\t// changes, so that the RUNNIN flag can be used to notice cyclical dependencies.\n\tthis._flags |= RUNNING;\n\tif (this._version > 0 && !needsToRecompute(this)) {\n\t\tthis._flags &= ~RUNNING;\n\t\treturn true;\n\t}\n\n\tconst prevContext = evalContext;\n\ttry {\n\t\tprepareSources(this);\n\t\tevalContext = this;\n\t\tconst value = this._compute();\n\t\tif (\n\t\t\tthis._flags & HAS_ERROR ||\n\t\t\tthis._value !== value ||\n\t\t\tthis._version === 0\n\t\t) {\n\t\t\tthis._value = value;\n\t\t\tthis._flags &= ~HAS_ERROR;\n\t\t\tthis._version++;\n\t\t}\n\t} catch (err) {\n\t\tthis._value = err;\n\t\tthis._flags |= HAS_ERROR;\n\t\tthis._version++;\n\t}\n\tevalContext = prevContext;\n\tcleanupSources(this);\n\tthis._flags &= ~RUNNING;\n\treturn true;\n};\n\nComputed.prototype._subscribe = function (node) {\n\tif (this._targets === undefined) {\n\t\tthis._flags |= OUTDATED | TRACKING;\n\n\t\t// A computed signal subscribes lazily to its dependencies when the it\n\t\t// gets its first subscriber.\n\t\tfor (\n\t\t\tlet node = this._sources;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextSource\n\t\t) {\n\t\t\tnode._source._subscribe(node);\n\t\t}\n\t}\n\tSignal.prototype._subscribe.call(this, node);\n};\n\nComputed.prototype._unsubscribe = function (node) {\n\tSignal.prototype._unsubscribe.call(this, node);\n\n\t// Computed signal unsubscribes from its dependencies from it loses its last subscriber.\n\tif (this._targets === undefined) {\n\t\tthis._flags &= ~TRACKING;\n\n\t\tfor (\n\t\t\tlet node = this._sources;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextSource\n\t\t) {\n\t\t\tnode._source._unsubscribe(node);\n\t\t}\n\t}\n};\n\nComputed.prototype._notify = function () {\n\tif (!(this._flags & NOTIFIED)) {\n\t\tthis._flags |= OUTDATED | NOTIFIED;\n\n\t\tfor (\n\t\t\tlet node = this._targets;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextTarget\n\t\t) {\n\t\t\tnode._target._notify();\n\t\t}\n\t}\n};\n\nComputed.prototype.peek = function () {\n\tif (!this._refresh()) {\n\t\tcycleDetected();\n\t}\n\tif (this._flags & HAS_ERROR) {\n\t\tthrow this._value;\n\t}\n\treturn this._value;\n};\n\nObject.defineProperty(Computed.prototype, \"value\", {\n\tget() {\n\t\tif (this._flags & RUNNING) {\n\t\t\tcycleDetected();\n\t\t}\n\t\tconst node = addDependency(this);\n\t\tthis._refresh();\n\t\tif (node !== undefined) {\n\t\t\tnode._version = this._version;\n\t\t}\n\t\tif (this._flags & HAS_ERROR) {\n\t\t\tthrow this._value;\n\t\t}\n\t\treturn this._value;\n\t},\n});\n\ninterface ReadonlySignal<T = any> extends Signal<T> {\n\treadonly value: T;\n}\n\nfunction computed<T>(compute: () => T): ReadonlySignal<T> {\n\treturn new Computed(compute);\n}\n\nfunction cleanupEffect(effect: Effect) {\n\tconst cleanup = effect._cleanup;\n\teffect._cleanup = undefined;\n\n\tif (typeof cleanup === \"function\") {\n\t\t/*@__INLINE__**/ startBatch();\n\n\t\t// Run cleanup functions always outside of any context.\n\t\tconst prevContext = evalContext;\n\t\tevalContext = undefined;\n\t\ttry {\n\t\t\tcleanup();\n\t\t} catch (err) {\n\t\t\teffect._flags &= ~RUNNING;\n\t\t\teffect._flags |= DISPOSED;\n\t\t\tdisposeEffect(effect);\n\t\t\tthrow err;\n\t\t} finally {\n\t\t\tevalContext = prevContext;\n\t\t\tendBatch();\n\t\t}\n\t}\n}\n\nfunction disposeEffect(effect: Effect) {\n\tfor (\n\t\tlet node = effect._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\tnode._source._unsubscribe(node);\n\t}\n\teffect._compute = undefined;\n\teffect._sources = undefined;\n\n\tcleanupEffect(effect);\n}\n\nfunction endEffect(this: Effect, prevContext?: Computed | Effect) {\n\tif (evalContext !== this) {\n\t\tthrow new Error(\"Out-of-order effect\");\n\t}\n\tcleanupSources(this);\n\tevalContext = prevContext;\n\n\tthis._flags &= ~RUNNING;\n\tif (this._flags & DISPOSED) {\n\t\tdisposeEffect(this);\n\t}\n\tendBatch();\n}\n\ndeclare class Effect {\n\t_compute?: () => unknown;\n\t_cleanup?: unknown;\n\t_sources?: Node;\n\t_nextBatchedEffect?: Effect;\n\t_flags: number;\n\n\tconstructor(compute: () => void);\n\n\t_callback(): void;\n\t_start(): () => void;\n\t_notify(): void;\n\t_dispose(): void;\n}\n\nfunction Effect(this: Effect, compute: () => void) {\n\tthis._compute = compute;\n\tthis._cleanup = undefined;\n\tthis._sources = undefined;\n\tthis._nextBatchedEffect = undefined;\n\tthis._flags = TRACKING;\n}\n\nEffect.prototype._callback = function () {\n\tconst finish = this._start();\n\ttry {\n\t\tif (!(this._flags & DISPOSED) && this._compute !== undefined) {\n\t\t\tthis._cleanup = this._compute();\n\t\t}\n\t} finally {\n\t\tfinish();\n\t}\n};\n\nEffect.prototype._start = function () {\n\tif (this._flags & RUNNING) {\n\t\tcycleDetected();\n\t}\n\tthis._flags |= RUNNING;\n\tthis._flags &= ~DISPOSED;\n\tcleanupEffect(this);\n\tprepareSources(this);\n\n\t/*@__INLINE__**/ startBatch();\n\tconst prevContext = evalContext;\n\tevalContext = this;\n\treturn endEffect.bind(this, prevContext);\n};\n\nEffect.prototype._notify = function () {\n\tif (!(this._flags & NOTIFIED)) {\n\t\tthis._flags |= NOTIFIED;\n\t\tthis._nextBatchedEffect = batchedEffect;\n\t\tbatchedEffect = this;\n\t}\n};\n\nEffect.prototype._dispose = function () {\n\tthis._flags |= DISPOSED;\n\n\tif (!(this._flags & RUNNING)) {\n\t\tdisposeEffect(this);\n\t}\n};\n\nfunction effect(compute: () => unknown): () => void {\n\tconst effect = new Effect(compute);\n\teffect._callback();\n\t// Return a bound function instead of a wrapper like `() => effect._dispose()`,\n\t// because bound functions seem to be just as fast and take up a lot less memory.\n\treturn effect._dispose.bind(effect);\n}\n\nexport { signal, computed, effect, batch, Signal, ReadonlySignal };\n","import { options, Fragment, Component } from 'preact';\n\nexport function initDevTools() {\n\tif (typeof window != 'undefined' && window.__PREACT_DEVTOOLS__) {\n\t\twindow.__PREACT_DEVTOOLS__.attachPreact('10.11.2', options, {\n\t\t\tFragment,\n\t\t\tComponent\n\t\t});\n\t}\n}\n","const ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nlet loggedTypeFailures = {};\n\n/**\n * Reset the history of which prop type warnings have been logged.\n */\nexport function resetPropWarnings() {\n\tloggedTypeFailures = {};\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * Adapted from https://github.com/facebook/prop-types/blob/master/checkPropTypes.js\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n */\nexport function checkPropTypes(\n\ttypeSpecs,\n\tvalues,\n\tlocation,\n\tcomponentName,\n\tgetStack\n) {\n\tObject.keys(typeSpecs).forEach(typeSpecName => {\n\t\tlet error;\n\t\ttry {\n\t\t\terror = typeSpecs[typeSpecName](\n\t\t\t\tvalues,\n\t\t\t\ttypeSpecName,\n\t\t\t\tcomponentName,\n\t\t\t\tlocation,\n\t\t\t\tnull,\n\t\t\t\tReactPropTypesSecret\n\t\t\t);\n\t\t} catch (e) {\n\t\t\terror = e;\n\t\t}\n\t\tif (error && !(error.message in loggedTypeFailures)) {\n\t\t\tloggedTypeFailures[error.message] = true;\n\t\t\tconsole.error(\n\t\t\t\t`Failed ${location} type: ${error.message}${(getStack &&\n\t\t\t\t\t`\\n${getStack()}`) ||\n\t\t\t\t\t''}`\n\t\t\t);\n\t\t}\n\t});\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"app\":\"app__JeJHz\",\"app-pane\":\"app-pane__eVWfW\",\"appPane\":\"app-pane__eVWfW\",\"convos-pane\":\"convos-pane__T2pbX\",\"convosPane\":\"convos-pane__T2pbX\",\"messages-pane\":\"messages-pane__Qqipz\",\"messagesPane\":\"messages-pane__Qqipz\",\"command-box-pane\":\"command-box-pane__dIbHH\",\"commandBoxPane\":\"command-box-pane__dIbHH\",\"characters-pane\":\"characters-pane__yTeOJ\",\"charactersPane\":\"characters-pane__yTeOJ\"};","// extracted by mini-css-extract-plugin\nexport default {\"command-box\":\"command-box__X2C1t\",\"commandBox\":\"command-box__X2C1t\"};","const randomArr = new Uint32Array(2);\n\nexport default (): ID => {\n    crypto.getRandomValues(randomArr);\n    return ('0000000' + randomArr[0].toString(32)).slice(-7) + ('0000000' + randomArr[1].toString(32)).slice(-7);\n};\n\nexport type ID = string;\n","import {batch} from '@preact/signals';\n\nimport type {AppState} from '../util/store';\nimport id from '../util/id';\n\nexport default (state: AppState, characterName = 'New Character'): void => {\n    batch(() => {\n        const newCharID = id();\n        state.chars.value = [...state.chars.value, {\n            id: newCharID,\n            name: characterName,\n            color: 0xffffff\n        }];\n        state.currentCharID.value = newCharID;\n    });\n};\n","import {batch} from '@preact/signals';\n\nimport createConvo from '../util/create-convo';\nimport type {AppState} from '../util/store';\n\nexport default (state: AppState): void => {\n    batch(() => {\n        const newConvo = createConvo();\n        state.convos.value = {...state.convos.value, [newConvo.id]: newConvo};\n        state.convoIDs.value = [...state.convoIDs.value, newConvo.id];\n        state.currentConvoID.value = newConvo.id;\n    });\n};\n","import id from './id';\nimport type {Convo} from './datatypes';\n\nexport default (): Convo => ({\n    messages: [],\n    id: id(),\n    name: 'New Convo'\n});\n","import {batch} from '@preact/signals';\n\nimport id from '../util/id';\nimport createConvo from './create-convo';\nimport createCharacter from './create-character';\nimport type {AppState} from '../util/store';\n\nexport default (state: AppState, messageContents: string, beforeMessageIndex?: number): void => {\n    batch(() => {\n        if (state.currentConvoID.value === null) {\n            createConvo(state);\n        }\n\n        if (state.currentCharID.value === null) {\n            createCharacter(state);\n        }\n\n        // TODO: pass in currentConvoID or convo\n        const convo = state.convos.value[state.currentConvoID.value!];\n        const newMessages = convo.messages.slice(0);\n        const newMessage = {\n            authorID: state.currentCharID.value!,\n            contents: messageContents,\n            id: id()\n        };\n        if (typeof beforeMessageIndex === 'number') {\n            newMessages.splice(beforeMessageIndex, 0, newMessage);\n        } else {\n            newMessages.push(newMessage);\n        }\n\n        state.convos.value = {\n            ...state.convos.value,\n            [state.currentConvoID.value!]: {\n                ...convo, messages: newMessages\n            }\n        };\n    });\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, convoID: ID, index: number, contents: string): void => {\n    const convo = state.convos.value[convoID];\n    const newMessages = convo.messages.slice(0);\n    newMessages[index] = {...newMessages[index], contents};\n\n    state.convos.value = {...state.convos.value, [convoID]: {...convo, messages: newMessages}};\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.currentCharID.value = id;\n};\n","import type {Convo, Character} from '../util/datatypes';\n\nexport default ({projectName, version, convos, chars}: {\n    projectName: string,\n    version: number,\n    convos: Convo[],\n    chars: Character[]\n}): string => {\n    return JSON.stringify({projectName, version, convos, chars});\n};\n","import {validate, ValidationError} from 'jtd';\n\nconst schema = {\n    properties: {\n        version: {type: 'uint32'},\n        projectName: {type: 'string'},\n        convos: {elements: {properties: {\n            messages: {elements: {properties: {\n                authorID: {type: 'string'},\n                contents: {type: 'string'},\n                id: {type: 'string'}\n            }}},\n            id: {type: 'string'},\n            name: {type: 'string'}\n        }}},\n        chars: {elements: {properties: {\n            id: {type: 'string'},\n            name: {type: 'string'},\n            color: {type: 'uint32'}\n        }}}\n    }\n} as const;\n\nexport default (json: unknown): ValidationError[] => validate(schema, json);\n","import {batch} from '@preact/signals';\n\nimport type {AppState} from '../util/store';\nimport type {ID, Convo, Character} from '../util/datatypes';\n\nexport default (state: AppState, json: {\n    projectName: string,\n    convos: Convo[],\n    chars: Character[]\n}): void => {\n    batch(() => {\n        const convosByID: Record<ID, Convo> = {};\n        for (const convo of json.convos) {\n            convosByID[convo.id] = convo;\n        }\n        state.projectName.value = json.projectName;\n        state.convos.value = convosByID;\n        state.convoIDs.value = json.convos.map(convo => convo.id);\n        state.chars.value = json.chars;\n        state.currentConvoID.value = null;\n    });\n};\n","import {createContext} from 'preact';\nimport {useContext, useMemo} from 'preact/hooks';\nimport {signal, effect, Signal, batch} from '@preact/signals';\n\nimport type {ID, Convo, Character} from './datatypes';\nimport saveState from '../serialization/save-state';\nimport validate from '../serialization/validate';\n\nimport loadState from '../actions/load-state';\n\nconst storeVersion = 2;\n\ntype StoreShape = {\n    version: number,\n    projectName: string,\n    convos: Record<ID, Convo>,\n    convoIDs: ID[],\n    chars: Character[],\n    currentConvoID: ID | null,\n    currentCharID: ID | null,\n    editedMessageID: ID | null,\n    editedConvoID: ID | null,\n    editedCharID: ID | null,\n    exportedConvoID: ID | null,\n    toBeReplacedCharID: ID | null,\n    insertAboveMessageID: ID | null,\n    exportConvoSettings: {\n        wrapTextEnabled: boolean,\n        wrapTextLength: number,\n        justifyEnabled: boolean,\n        justifySide: 'left' | 'right'\n    }\n};\n\ntype SignalState<S, SignalKeys extends string> = {\n    [K in keyof S]: K extends SignalKeys ? SignalState<S[K], SignalKeys> : Signal<S[K]>\n};\n\ntype AppState = SignalState<StoreShape, 'exportConvoSettings'>;\n\nconst loadLegacyState = (store: AppState): void => {\n    const storedStore = localStorage.getItem('store');\n    if (!storedStore) return;\n    const parsedStore = JSON.parse(storedStore) as StoreShape;\n    // Import v1 autosaves.\n    if (parsedStore.version === 1) {\n        const oldConvos = parsedStore.convos as unknown as Convo[];\n        parsedStore.convos = {};\n        parsedStore.convoIDs = [];\n        for (const convo of oldConvos) {\n            parsedStore.convos[convo.id] = convo;\n            parsedStore.convoIDs.push(convo.id);\n        }\n        parsedStore.version = 2;\n    }\n    if (parsedStore.version !== storeVersion) return;\n\n    batch(() => {\n        store.convos.value = parsedStore.convos;\n        store.convoIDs.value = parsedStore.convoIDs;\n        store.chars.value = parsedStore.chars;\n        store.projectName.value = parsedStore.projectName;\n    });\n\n    localStorage.removeItem('store');\n};\n\nconst loadStore = (): AppState => {\n    const defaultStore: AppState = {\n        version: signal(storeVersion),\n        projectName: signal('New Project'),\n        convos: signal({}),\n        convoIDs: signal([]),\n        chars: signal([]),\n        currentConvoID: signal(null),\n        currentCharID: signal(null),\n        editedMessageID: signal(null),\n        editedConvoID: signal(null),\n        editedCharID: signal(null),\n        exportedConvoID: signal(null),\n        toBeReplacedCharID: signal(null),\n        insertAboveMessageID: signal(null),\n        exportConvoSettings: {\n            wrapTextEnabled: signal(false),\n            wrapTextLength: signal(80),\n            justifyEnabled: signal(true),\n            justifySide: signal('left' as const)\n        }\n    };\n\n    loadLegacyState(defaultStore);\n\n    const autosave = localStorage.getItem('autosave');\n    if (autosave) {\n        const parsedAutosave: unknown = JSON.parse(autosave);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        if (validate(parsedAutosave).length === 0) loadState(defaultStore, parsedAutosave as any);\n    }\n\n    return defaultStore;\n};\n\nconst store = loadStore();\n\neffect(() => {\n    const {projectName, convos, convoIDs, chars} = store;\n    const savedState = saveState({\n        projectName: projectName.value,\n        version: 1,\n        convos: convoIDs.value.map(id => convos.value[id]),\n        chars: chars.value\n    });\n    localStorage.setItem('autosave', savedState);\n});\n\nconst AppContext = createContext(store);\n\nconst useAppState = (): AppState => useContext(AppContext);\nconst useAction = <T extends unknown[]>(func: (store: AppState, ...args: T) => void): ((...args: T) => void) => {\n    const context = useContext(AppContext);\n    return useMemo(() => func.bind(null, context), [context]);\n};\n\nexport {useAppState, useAction, AppState, AppContext, store};\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useRef, useState} from 'preact/hooks';\n\nimport createCharacterAction from '../../actions/create-character';\nimport createMessageAction from '../../actions/create-message';\nimport editMessageAction from '../../actions/edit-message';\nimport setCurrentCharacterIDAction from '../../actions/set-current-character-id';\n\nimport {useAppState, useAction} from '../../util/store';\nimport type {Character} from '../../util/datatypes';\n\nconst CommandBox = ({beforeMessage}: {beforeMessage?: number}): JSX.Element => {\n    const {currentCharID, chars, currentConvoID, convos} = useAppState();\n    const createCharacter = useAction(createCharacterAction);\n    const createMessage = useAction(createMessageAction);\n    const editMessage = useAction(editMessageAction);\n    const setCurrentCharacterID = useAction(setCurrentCharacterIDAction);\n\n    const tabResults = useRef<{\n        characters: Character[],\n        index: number\n    } | null>(null);\n\n    // TODO: use a signal for this\n    const [value, setValue] = useState('');\n\n    const onKeyDown = (event: KeyboardEvent): void => {\n        if (event.code === 'Tab') {\n            event.preventDefault();\n            const contents = value.toLowerCase();\n            if (contents.indexOf(':') === -1 && tabResults.current === null) {\n                tabResults.current = {\n                    characters: chars.value.filter(\n                        character => character.name.toLowerCase().startsWith(contents)),\n                    index: 0\n                };\n            }\n            if (!tabResults.current || tabResults.current.characters.length === 0) return;\n            const character = tabResults.current.characters[tabResults.current.index];\n            tabResults.current.index = (tabResults.current.index + 1) % tabResults.current.characters.length;\n            setValue(`${character.name}: `);\n        } else {\n            tabResults.current = null;\n        }\n    };\n\n    const onKeyPress = (event: KeyboardEvent): void => {\n        if (event.code === 'Enter' && !event.shiftKey) {\n            event.preventDefault();\n            let command = value;\n\n            // Parse off leading author specifier\n            const colonMatch = /([^:]+):(?:\\s+)(.+)/g.exec(command);\n            if (colonMatch) {\n                const authorName = colonMatch[1];\n                const authorNameLower = authorName.toLowerCase();\n                const char = chars.value.find(\n                    character => character.name.toLowerCase() === authorNameLower);\n                if (!char) {\n                    createCharacter(authorName);\n                } else {\n                    setCurrentCharacterID(char.id);\n                }\n                command = colonMatch[2];\n            }\n\n            const replaceMatch = /^s\\/([^/]+)\\/([^/]+)\\/?$/.exec(command);\n            if (replaceMatch) {\n                // if we added a new character, get it here\n                const {messages} = convos.value[currentConvoID.value!];\n                for (let i = beforeMessage || messages.length - 1; i >= 0; i--) {\n                    if (messages[i].authorID === currentCharID.value) {\n                        editMessage(\n                            currentConvoID.value!,\n                            i,\n                            messages[i].contents.split(replaceMatch[1]).join(replaceMatch[2])\n                        );\n                        setValue('');\n                        return;\n                    }\n                }\n            }\n\n            setValue('');\n            createMessage(command, beforeMessage);\n            return;\n        }\n    };\n\n    const onInput = (event: Event): void => {\n        setValue((event.target as HTMLTextAreaElement).value);\n    };\n\n    return <textarea\n        className={style.commandBox}\n        onKeyPress={onKeyPress}\n        onInput={onInput}\n        onKeyDown={onKeyDown}\n        value={value}\n    />;\n};\n\nexport default CommandBox;\n","// extracted by mini-css-extract-plugin\nexport default {\"divider\":\"divider__l7yCf\",\"character\":\"character__atbwd\",\"active\":\"active__DI5ru\",\"character-name\":\"character-name__aOTHW\",\"characterName\":\"character-name__aOTHW\"};","// extracted by mini-css-extract-plugin\nexport default {\"icon\":\"icon__l3rTB\",\"icon-button\":\"icon-button__HjReh\",\"iconButton\":\"icon-button__HjReh\",\"active\":\"active__AWofc\",\"disabled\":\"disabled__GoHq2\",\"delete\":\"delete__zP7dI\",\"edit\":\"edit__i_k8T\",\"insert-above\":\"insert-above__ENi4b\",\"insertAbove\":\"insert-above__ENi4b\",\"load\":\"load__hUYQ8\",\"save\":\"save__iEoYK\",\"export\":\"export__aEQp2\"};","import {batch} from '@preact/signals';\n\nimport type {ID} from  '../util/datatypes';\nimport type {AppState} from  '../util/store';\n\nexport default (state: AppState, id: ID, replacementID?: ID): void => {\n    return batch(() => {\n        const chars = state.chars.value;\n        const charIndex = chars.findIndex(char => char.id === id);\n        state.chars.value = chars.filter(char => char.id !== id);\n        state.currentCharID.value = replacementID || (chars.length === 1 ?\n            null :\n            charIndex === chars.length - 1 ?\n                chars[chars.length - 2].id :\n                chars[charIndex + 1].id);\n    });\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.editedCharID.value = id;\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.toBeReplacedCharID.value = id;\n};\n","export default (color: number): string => '#' + ('000000' + color.toString(16)).slice(-6);\n","import style from './style.scss';\nimport icons from '../../icons/icons.scss';\n\nimport type {JSX} from 'preact';\nimport {useComputed} from '@preact/signals';\nimport {useMemo, useCallback} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport deleteCharacterAction from '../../actions/delete-character';\nimport setCurrentCharacterIDAction from '../../actions/set-current-character-id';\nimport setEditedCharacterIDAction from '../../actions/set-edited-character-id';\nimport setToBeReplacedCharacterIDAction from '../../actions/set-to-be-replaced-character-id';\n\nimport colorToHex from '../../util/color-to-hex';\nimport {useAppState, useAction} from '../../util/store';\nimport type {ID, Character} from '../../util/datatypes';\n\nconst CharacterListing = ({char, active, onClick, onEdit, onDelete}: {\n    char: Character,\n    active: boolean,\n    onClick?: (char: Character) => void,\n    onEdit?: (char: Character) => void,\n    onDelete?: (char: Character) => void,\n}): JSX.Element => useMemo(() => (\n    <div\n        className={classNames(style.character, {[style.active]: active})}\n        onClick={onClick && ((): void => onClick(char))}\n    >\n        <div\n            className={style.characterName}\n            style={`color: ${colorToHex(char.color)}`}\n        >{char.name}</div>\n        <div\n            className={classNames(\n                style.edit,\n                icons['icon'],\n                icons['icon-button'],\n                icons['edit'])}\n            onClick={onEdit && ((): void => onEdit(char))}\n        />\n        <div\n            className={classNames(\n                style.delete,\n                icons['icon'],\n                icons['icon-button'],\n                icons['delete'],\n                {[icons['disabled']]: !onDelete})}\n            onClick={onDelete ? ((): void => onDelete(char)) : undefined}\n        />\n    </div>\n), [char, active, onClick, onEdit, onDelete]);\n\nconst CharacterList = (): JSX.Element => {\n    const {chars, currentCharID, convos, currentConvoID} = useAppState();\n    const deleteCharacter = useAction(deleteCharacterAction);\n    const setCurrentCharacterID = useAction(setCurrentCharacterIDAction);\n    const setEditedCharacterID = useAction(setEditedCharacterIDAction);\n    const setToBeReplacedCharacterID = useAction(setToBeReplacedCharacterIDAction);\n    const {charsInConvo, charsNotInConvo} = useComputed(() => {\n        const charIDsInConvo = new Set<ID>();\n\n        if (currentConvoID.value !== null) {\n            const currentConvo = convos.value[currentConvoID.value];\n            for (const message of currentConvo.messages) {\n                charIDsInConvo.add(message.authorID);\n            }\n        }\n\n        const charsInConvo = [];\n        const charsNotInConvo = [];\n        for (const char of chars.value) {\n            if (charIDsInConvo.has(char.id)) {\n                charsInConvo.push(char);\n            } else {\n                charsNotInConvo.push(char);\n            }\n        }\n\n        return {charsInConvo, charsNotInConvo};\n    }).value;\n\n    const onClickCharacter = useCallback((character: Character) => {\n        setCurrentCharacterID(character.id);\n    }, [setCurrentCharacterID]);\n\n    const onEditCharacter = useCallback((character: Character) => {\n        setEditedCharacterID(character.id);\n    }, [setEditedCharacterID]);\n\n    const onDeleteCharacter = useCallback((character: Character) => {\n        for (const convo of Object.values(convos.value)) {\n            for (const message of convo.messages) {\n                if (message.authorID === character.id) {\n                    setToBeReplacedCharacterID(character.id);\n                    return;\n                }\n            }\n        }\n\n        deleteCharacter(character.id);\n    }, [setToBeReplacedCharacterID, deleteCharacter, convos]);\n\n    return (\n        <div className={style.characterList}>\n            {charsInConvo.length > 0 &&\n                <>\n                    <div className={style.divider}>Characters in current convo:</div>\n                    <div className={style.characterSublist}>\n                        {charsInConvo.map(char =>\n                            <CharacterListing\n                                key={char.id}\n                                char={char}\n                                active={char.id === currentCharID.value}\n                                onClick={onClickCharacter}\n                                onEdit={onEditCharacter}\n                                onDelete={chars.value.length > 1 ? onDeleteCharacter : undefined}\n                            />)}\n                    </div>\n                </>\n            }\n            {charsNotInConvo.length > 0 &&\n                <>\n                    <div className={style.divider}>Other characters:</div>\n                    <div className={style.characterSublist}>\n                        {charsNotInConvo.map(char =>\n                            <CharacterListing\n                                key={char.id}\n                                char={char}\n                                active={char.id === currentCharID.value}\n                                onClick={onClickCharacter}\n                                onEdit={onEditCharacter}\n                                onDelete={chars.value.length > 1 ? onDeleteCharacter : undefined}\n                            />)}\n                    </div>\n                </>\n            }\n        </div>\n    );\n};\n\nexport default CharacterList;\n","// extracted by mini-css-extract-plugin\nexport default {\"character-settings\":\"character-settings__JgFDc\",\"characterSettings\":\"character-settings__JgFDc\",\"row\":\"row__zLuUf\",\"label\":\"label__T8d04\",\"control\":\"control__C6kFJ\"};","import type {AppState} from '../util/store';\nimport type {ID, Character} from '../util/datatypes';\n\nexport default (state: AppState, charID: ID, newCharData: Partial<Character>): void => {\n    state.chars.value = state.chars.value.map(char => char.id !== charID ?\n        char :\n        {...char, ...newCharData});\n};\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\n\nimport updateCharacterAction from '../../actions/update-character';\n\nimport colorToHex from '../../util/color-to-hex';\nimport {useAppState, useAction} from '../../util/store';\n\nconst CharacterSettingsModal = (): JSX.Element | null => {\n    const {editedCharID, chars} = useAppState();\n    const updateCharacter = useAction(updateCharacterAction);\n    const onCharacterNameChange = (event: Event): void => {\n        if (!editedCharID.value) return;\n        updateCharacter(editedCharID.value, {name: (event.target as HTMLInputElement).value});\n    };\n\n    const onCharacterColorChange = (event: Event): void => {\n        if (!editedCharID.value) return;\n        updateCharacter(editedCharID.value, {\n            color: parseInt((event.target as HTMLInputElement).value.slice(1), 16)\n        });\n    };\n\n    const character = chars.value.find(char => char.id === editedCharID.value);\n    if (!character) return null;\n    return (\n        <div className={style.characterSettings}>\n            <div className={style.row}>\n                <div className={style.label}>Character name</div>\n                <input\n                    type=\"text\"\n                    className={style.control}\n                    value={character.name}\n                    onChange={onCharacterNameChange}\n                />\n            </div>\n            <div className={style.row}>\n                <div className={style.label}>Character color</div>\n                <input\n                    type=\"color\"\n                    className={style.control}\n                    value={colorToHex(character.color)}\n                    onChange={onCharacterColorChange}\n                />\n            </div>\n        </div>\n    );\n};\n\nexport default CharacterSettingsModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"convo-list\":\"convo-list__j6Sov\",\"convoList\":\"convo-list__j6Sov\",\"convos\":\"convos__BRQXe\",\"convo\":\"convo__bZVJO\",\"active\":\"active__JExB6\",\"convo-name\":\"convo-name__c8nBG\",\"convoName\":\"convo-name__c8nBG\",\"add-convo-wrapper\":\"add-convo-wrapper__U_hhq\",\"addConvoWrapper\":\"add-convo-wrapper__U_hhq\"};","import {batch} from '@preact/signals';\n\nimport type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID): void => {\n    batch(() => {\n    // Use object spread/rest to omit the convo with a given ID from state.convos\n        const {[id]: __, ...newConvos} = state.convos.value;\n\n        const convoIndex = state.convoIDs.value.findIndex(convoID => convoID === id);\n\n        state.convos.value = newConvos;\n        state.convoIDs.value = state.convoIDs.value.filter(existingID => existingID !== id);\n        if (state.convoIDs.value.length === 0) {\n            state.currentConvoID.value = null;\n        } else if (convoIndex === state.convoIDs.value.length) {\n            // If the deleted convo is selected and the last one in the list, select the previous one\n            state.currentConvoID.value = state.convoIDs.value[convoIndex - 1];\n        } else {\n            // TODO: revisit\n            state.currentConvoID.value = state.convoIDs.value[convoIndex];\n        }\n    });\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID, name: string): void => {\n    state.convos.value = {...state.convos.value, [id]: {...state.convos.value[id], name}};\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID): void => {\n    state.currentConvoID.value = id;\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id?: ID | null): void => {\n    state.editedConvoID.value = id === undefined ? state.convos.value[state.currentConvoID.value!].id : id;\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.exportedConvoID.value = id;\n};\n","import style from './style.scss';\nimport icons from '../../icons/icons.scss';\n\nimport type {JSX} from 'preact';\nimport {useComputed} from '@preact/signals';\nimport {useMemo, useRef, useEffect} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport createConvoAction from '../../actions/create-convo';\nimport deleteConvoAction from '../../actions/delete-convo';\nimport setConvoNameAction from '../../actions/set-convo-name';\nimport setCurrentConvoIDAction from '../../actions/set-current-convo-id';\nimport setEditedConvoIDAction from '../../actions/set-edited-convo-id';\nimport setExportedConvoIDAction from '../../actions/set-exported-convo-id';\n\nimport {useAppState, useAction} from '../../util/store';\nimport type {Convo} from '../../util/datatypes';\n\nconst ConvoListing = ({convo: {id, name}}: {convo: Convo}): JSX.Element => {\n    const {currentConvoID, editedConvoID} = useAppState();\n    const setConvoName = useAction(setConvoNameAction);\n    const setCurrentConvoID = useAction(setCurrentConvoIDAction);\n    const setEditedConvoID = useAction(setEditedConvoIDAction);\n    const setExportedConvoID = useAction(setExportedConvoIDAction);\n    const deleteConvo = useAction(deleteConvoAction);\n\n    const active = currentConvoID.value === id;\n    const edited = editedConvoID.value === id;\n\n    const prevEdited = useRef(edited);\n    const editedConvoRef = useRef<HTMLInputElement>(null);\n\n    // Focus the textbox when we click the edit button\n    useEffect(() => {\n        if (!prevEdited.current && edited && editedConvoRef.current !== null) {\n            editedConvoRef.current.focus();\n        }\n        prevEdited.current = edited;\n    });\n\n    return useMemo(() => <div\n        className={classNames(style.convo, {[style.active]: active})}\n        onClick={setCurrentConvoID.bind(null, id)}\n    >\n        <div className={style.convoName}>{edited ?\n            <input\n                type=\"text\"\n                value={name}\n                onInput={(event): unknown => setConvoName(id, (event.target as HTMLInputElement).value)}\n                onKeyPress={(event): void => {\n                    if (event.code === 'Enter') setEditedConvoID(null);\n                }}\n                onBlur={(): unknown => setEditedConvoID(null)}\n                ref={editedConvoRef}\n            /> :\n            name}</div>\n        <div\n            className={classNames(\n                icons['icon'],\n                icons['icon-button'],\n                icons['export'])\n            }\n            onClick={(event): void => {\n                event.stopPropagation();\n                setExportedConvoID(id);\n            }}\n        />\n        <div\n            className={classNames(\n                icons['icon'],\n                icons['icon-button'],\n                icons['edit'])\n            }\n            onClick={(event): void => {\n                event.stopPropagation();\n                setEditedConvoID(id);\n            }}\n        />\n        <div\n            className={classNames(\n                icons['icon'],\n                icons['icon-button'],\n                icons['delete'])\n            }\n            onClick={(event): void => {\n                event.stopPropagation();\n                deleteConvo(id);\n            }}\n        />\n    </div>, [\n        id, name, active, edited, editedConvoRef,\n        setConvoName, setCurrentConvoID, setEditedConvoID, setExportedConvoID, deleteConvo\n    ]);\n};\n\nconst ConvoList = (): JSX.Element => {\n    const {convos, convoIDs} = useAppState();\n    const createConvo = useAction(createConvoAction);\n\n    const convoListings = useComputed(() => convoIDs.value.map(convoID => {\n        const convo = convos.value[convoID];\n        return <ConvoListing key={convoID} convo={convo} />;\n    })).value;\n\n    const createConvoCallback = useMemo(() => createConvo.bind(null), [createConvo]);\n\n    return useMemo(() => (\n        <div className={style.convoList}>\n            <div className={style.convos}>\n                {convoListings}\n            </div>\n            <div className={style.addConvoWrapper}>\n                <button onClick={createConvoCallback}>Add Convo</button>\n            </div>\n        </div>\n    ), [convoListings, createConvoCallback]);\n};\n\nexport default ConvoList;\n","// extracted by mini-css-extract-plugin\nexport default {\"export-title\":\"export-title__Kqtsy\",\"exportTitle\":\"export-title__Kqtsy\",\"row\":\"row__cbCwA\"};","import type {AppState} from '../../util/store';\n\nexport default (state: AppState, enabled: boolean): void => {\n    state.exportConvoSettings.wrapTextEnabled.value = enabled;\n};\n","import type {AppState} from '../../util/store';\n\nexport default (state: AppState, length: number): void => {\n    state.exportConvoSettings.wrapTextLength.value = length;\n};\n","import type {AppState} from '../../util/store';\n\nexport default (state: AppState, enabled: boolean): void => {\n    state.exportConvoSettings.justifyEnabled.value = enabled;\n};\n","import type {AppState} from '../../util/store';\n\nexport default (state: AppState, side: 'left' | 'right'): void => {\n    state.exportConvoSettings.justifySide.value = side;\n};\n","const saveToFile = (name: string, contents: BlobPart): void => {\n    const a = document.createElement('a');\n    const url = URL.createObjectURL(new Blob([contents]));\n\n    a.href = url;\n    a.download = name;\n    a.click();\n    setTimeout(() => {\n        window.URL.revokeObjectURL(url);\n    }, 0);\n};\n\nexport default saveToFile;\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\n\nimport setWrapTextEnabledAction from '../../actions/export-convo-settings/set-wrap-text-enabled';\nimport setWrapTextLengthAction from '../../actions/export-convo-settings/set-wrap-text-length';\nimport setJustifyEnabledAction from '../../actions/export-convo-settings/set-justify-enabled';\nimport setJustifySideAction from '../../actions/export-convo-settings/set-justify-side';\n\nimport saveToFile from '../../util/save-to-file';\nimport {useAppState, useAction} from '../../util/store';\nimport type {ID} from '../../util/datatypes';\n\nconst ExportConvoModal = (): JSX.Element | null => {\n    const {\n        convos,\n        exportedConvoID,\n        chars,\n        exportConvoSettings\n    } = useAppState();\n\n    const {\n        wrapTextEnabled,\n        wrapTextLength,\n        justifyEnabled,\n        justifySide\n    } = exportConvoSettings;\n\n    const setWrapTextEnabled = useAction(setWrapTextEnabledAction);\n    const setWrapTextLength = useAction(setWrapTextLengthAction);\n    const setJustifyEnabled = useAction(setJustifyEnabledAction);\n    const setJustifySide = useAction(setJustifySideAction);\n\n    const onChangeWrapTextEnabled = (event: Event): void => {\n        setWrapTextEnabled((event.target as HTMLInputElement).checked);\n    };\n\n    const onChangeWrapTextLength = (event: Event): void => {\n        const length = parseInt((event.target as HTMLInputElement).value);\n        if (Number.isFinite(length)) setWrapTextLength(length);\n    };\n\n    const onChangeJustifyEnabled = (event: Event): void => {\n        setJustifyEnabled((event.target as HTMLInputElement).checked);\n    };\n\n    const onChangeJustifySide = (event: Event): void => {\n        setJustifySide((event.target as HTMLInputElement).value as 'left' | 'right');\n    };\n\n    const onExport = (): void => {\n        if (!exportedConvoID.value) return;\n        const convo = convos.value[exportedConvoID.value];\n\n        const charsInConvo = new Set<ID>();\n        for (const message of convo.messages) {\n            charsInConvo.add(message.authorID);\n        }\n        const longestCharNameLength = Array.from(charsInConvo)\n            .reduce((prev: number, charID: ID): number =>\n                Math.max(prev, chars.value.find(char => char.id === charID)?.name.length ?? 0), 0);\n\n        const lines = [];\n\n        for (const message of convo.messages) {\n            const charName = chars.value.find(char => char.id === message.authorID)?.name ?? 'Unknown character';\n            let start = `<${charName}> `;\n            if (justifyEnabled.value) {\n                const justification = ' '.repeat(longestCharNameLength - charName.length);\n                if (justifySide.value === 'left') {\n                    start += justification;\n                } else {\n                    start = justification + start;\n                }\n            }\n\n            let line = start;\n\n            if (wrapTextEnabled.value) {\n                const regex = /([^\\s]+)(\\s|$)/g;\n                regex.lastIndex = 0;\n                let match;\n                while ((match = regex.exec(message.contents)) !== null) {\n                    if (line.length + match[1].length <= wrapTextLength.value) {\n                        line += match[0];\n                    } else {\n                        lines.push(line.trimEnd());\n                        line = ' '.repeat(start.length) + match[0];\n                    }\n                }\n                if (line.trimEnd().length > 0) {\n                    lines.push(line.trimEnd());\n                }\n            } else {\n                lines.push(line + message.contents);\n            }\n        }\n        const convoStr = lines.join('\\n');\n\n        saveToFile(`${convo.name}.txt`, convoStr);\n    };\n\n    if (!exportedConvoID.value) return null;\n    const convo = convos.value[exportedConvoID.value];\n\n    return (\n        <div className={style.exportModal}>\n            <div className={style.exportTitle}>Export {`\"${convo.name}\"`}</div>\n            <div className={style.row}>\n                <label><input\n                    type=\"checkbox\"\n                    checked={wrapTextEnabled}\n                    onChange={onChangeWrapTextEnabled}\n                />Wrap text at </label>\n                <input\n                    type=\"number\"\n                    min={0}\n                    onChange={onChangeWrapTextLength}\n                    disabled={!wrapTextEnabled}\n                    value={wrapTextLength}\n                /> chars\n            </div>\n            <div className={style.row}>\n                <label><input\n                    type=\"checkbox\"\n                    checked={justifyEnabled}\n                    onChange={onChangeJustifyEnabled}\n                />Justify usernames </label>\n                <label>\n                    <input\n                        type=\"radio\"\n                        onClick={onChangeJustifySide}\n                        checked={justifySide.value === 'left'}\n                        disabled={!justifyEnabled}\n                        value=\"left\"\n                    /> Left\n                </label>\n                <label>\n                    <input\n                        type=\"radio\"\n                        onClick={onChangeJustifySide}\n                        checked={justifySide.value === 'right'}\n                        disabled={!justifyEnabled}\n                        value=\"right\"\n                    /> Right\n                </label>\n            </div>\n            <div className={style.row}>\n                <button onClick={onExport}>Export</button>\n            </div>\n        </div>\n    );\n};\n\nexport default ExportConvoModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"messages\":\"messages__QvVmW\",\"messages-inner\":\"messages-inner__T5ymp\",\"messagesInner\":\"messages-inner__T5ymp\",\"insert-box\":\"insert-box__BVqQD\",\"insertBox\":\"insert-box__BVqQD\",\"close-wrapper\":\"close-wrapper__Lige8\",\"closeWrapper\":\"close-wrapper__Lige8\",\"close-positioner\":\"close-positioner__F_Vfd\",\"closePositioner\":\"close-positioner__F_Vfd\",\"command-box-wrapper\":\"command-box-wrapper__dWK1s\",\"commandBoxWrapper\":\"command-box-wrapper__dWK1s\"};","// extracted by mini-css-extract-plugin\nexport default {\"message\":\"message__uH2iI\",\"buttons\":\"buttons__tpv1D\",\"contents\":\"contents__bXbLz\",\"author\":\"author__bTxVP\",\"message-edit-wrapper\":\"message-edit-wrapper__Uq_as\",\"messageEditWrapper\":\"message-edit-wrapper__Uq_as\",\"message-edit-area\":\"message-edit-area__UcstZ\",\"messageEditArea\":\"message-edit-area__UcstZ\"};","// extracted by mini-css-extract-plugin\nexport default {\"searchable-menu\":\"searchable-menu__MRzCU\",\"searchableMenu\":\"searchable-menu__MRzCU\",\"search-bar\":\"search-bar__lDaLX\",\"searchBar\":\"search-bar__lDaLX\",\"items\":\"items__BvMBg\",\"item\":\"item__YnleD\"};","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useCallback, useMemo, useEffect, useRef, useState} from 'preact/hooks';\n\ntype MenuItem = {\n    id: string,\n    value: string\n};\n\ntype Props<T extends readonly MenuItem[]> = {\n    items: T\n    x: number,\n    y: number,\n    onDismiss?: () => void,\n    onClickItem?: (result: T[number]['id']) => void\n};\n\nconst SearchableMenu = <T extends readonly MenuItem[]>({\n    items,\n    x,\n    y,\n    onDismiss,\n    onClickItem\n}: Props<T>): JSX.Element => {\n    const [query, setQuery] = useState('');\n    const searchRef = useRef<HTMLInputElement>(null);\n\n    useEffect(() => {\n        if (searchRef.current) searchRef.current.focus();\n    }, []);\n\n    const onInput = useCallback((event: Event): void => {\n        setQuery((event.target as HTMLInputElement).value);\n    }, [setQuery]);\n\n    const onFocusOut = useCallback((event: FocusEvent): void => {\n        if (!(event.currentTarget as HTMLElement).contains(event.relatedTarget as HTMLElement) &&\n            onDismiss) {\n            onDismiss();\n        }\n    }, [onDismiss]);\n\n    return useMemo(() => (\n        <div\n            className={style.searchableMenu}\n            style={{\n                top: `${y}px`,\n                left: `${x}px`,\n                maxHeight: `calc(100vh - ${y}px)`\n            }}\n            // eslint-disable-next-line react/no-unknown-property\n            onfocusout={onFocusOut}\n            tabIndex={0}\n        >\n            <div className={style.searchBar}>\n                <input type=\"text\" onInput={onInput} ref={searchRef}/>\n            </div>\n            <div className={style.items}>\n                {items.map(item => (\n                    item.value.toLowerCase().indexOf(query) === -1 ?\n                        null :\n                        <div\n                            className={style.item}\n                            key={item.id}\n                            onClick={onClickItem ?\n                                onClickItem.bind(this, item.id) :\n                                undefined}\n                        >\n                            {item.value}\n                        </div>\n                ))}\n            </div>\n        </div>\n    ), [items, x, y, query, onInput, onFocusOut]);\n};\n\nexport default SearchableMenu;\n","import type {AppState} from '../util/store';\n\nexport default (state: AppState, messageIndex: number): void => {\n    // TODO: pass in currentConvoID\n    const convo = state.convos.value[state.currentConvoID.value!];\n    const newMessages = convo.messages.slice(0);\n    newMessages.splice(messageIndex, 1);\n    state.convos.value = {...state.convos.value, [convo.id]: {...convo, messages: newMessages}};\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, convoID: ID, index: number, authorID: ID): void => {\n    const convo = state.convos.value[convoID];\n    const newMessages = convo.messages.slice(0);\n    newMessages[index] = {...newMessages[index], authorID};\n\n    state.convos.value = {...state.convos.value, [convoID]: {...convo, messages: newMessages}};\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.editedMessageID.value = id;\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.insertAboveMessageID.value = id;\n};\n","/* eslint-disable react/prefer-stateless-function */\nimport style from './style.scss';\nimport icons from '../../icons/icons.scss';\n\nimport type {Ref, JSX} from 'preact';\nimport {useCallback, useEffect, useMemo, useRef, useState} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport SearchableMenu from '../SearchableMenu/SearchableMenu';\n\nimport deleteMessageAction from '../../actions/delete-message';\nimport editMessageAction from '../../actions/edit-message';\nimport replaceMessageAuthorAction from '../../actions/replace-message-author';\nimport setEditedMessageAction from '../../actions/set-edited-message-id';\nimport setInsertAboveMessageIDAction from '../../actions/set-insert-above-message-id';\n\nimport colorToHex from '../../util/color-to-hex';\nimport {useAppState, useAction} from '../../util/store';\nimport type {ID, Message as MessageType} from '../../util/datatypes';\n\ntype Props = {\n    message: MessageType,\n    convoID: ID,\n    index: number,\n    elemRef?: Ref<HTMLDivElement>\n};\n\nconst Message = ({\n    message,\n    convoID,\n    index,\n    elemRef\n}: Props): JSX.Element => {\n    const {chars, editedMessageID, insertAboveMessageID} = useAppState();\n\n    const deleteMessage = useAction(deleteMessageAction);\n    const editMessage = useAction(editMessageAction);\n    const replaceMessageAuthor = useAction(replaceMessageAuthorAction);\n    const setEditedMessage = useAction(setEditedMessageAction);\n    const setInsertAboveMessageID = useAction(setInsertAboveMessageIDAction);\n\n    const {id, authorID, contents} = message;\n    const editable = id === editedMessageID.value;\n    const prevEditable = useRef(editable);\n\n    const char = useMemo(\n        () => chars.value.find(char => char.id === authorID) || {color: 0xffffff, name: 'Unknown Character'},\n        [chars.value, authorID]\n    );\n\n    const contentsRef = useRef<HTMLTextAreaElement>(null);\n    const [authorMenu, setAuthorMenu] = useState<{\n        x: number,\n        y: number\n    } | null>(null);\n\n    // When we click the edit button, focus the message contents box\n    useEffect(() => {\n        if (!prevEditable.current && editable && contentsRef.current) {\n            contentsRef.current.focus();\n        }\n        prevEditable.current = editable;\n    });\n\n    const onReplaceAuthor = useCallback((newAuthorID: ID): void => {\n        replaceMessageAuthor(convoID, index, newAuthorID);\n        setAuthorMenu(null);\n    }, [replaceMessageAuthor, setAuthorMenu, convoID, index]);\n\n    const onDismissAuthorMenu = useCallback((): void => {\n        setAuthorMenu(null);\n    }, [setAuthorMenu]);\n\n    const authorMenuElement = useMemo(\n        () => authorMenu ? <SearchableMenu\n            items={chars.value.map(({id, name}) => ({id, value: name}))}\n            x={authorMenu.x}\n            y={authorMenu.y}\n            onDismiss={onDismissAuthorMenu}\n            onClickItem={onReplaceAuthor}\n        /> : null,\n        [chars.value, authorMenu]\n    );\n\n    return useMemo(() => {\n        const onKeyPress = (event: KeyboardEvent): void => {\n            if (event.code === 'Enter' && !event.shiftKey && contentsRef.current) {\n                editMessage(convoID, index, contentsRef.current.value);\n                setEditedMessage(null);\n            }\n        };\n\n        const onBlur = (): void => {\n            if (!contentsRef.current) return;\n            editMessage(convoID, index, contentsRef.current.value);\n            setEditedMessage(null);\n        };\n\n        const onClickAuthor = (event: Event): void => {\n            const {x, y, height} = (event.target as Element).getBoundingClientRect();\n            setAuthorMenu(prevValue => prevValue === null ? {x, y: y + height} : null);\n        };\n\n        return (\n            <div className={style.message} ref={elemRef}>\n                <div\n                    className={style.author}\n                    style={`color: ${colorToHex(char.color)}`}\n                    onClick={onClickAuthor}\n                >\n                    {char.name}\n                </div>\n                <div\n                    className={classNames(style.contents, {[style.editable]: editable})}\n                >\n                    {editable ?\n                        <div className={style.messageEditWrapper}>\n                            <textarea\n                                className={style.messageEditArea}\n                                onKeyPress={onKeyPress}\n                                onBlur={onBlur}\n                                tabIndex={0}\n                                ref={contentsRef}\n                                value={contents}\n                            />\n                        </div> :\n                        contents}\n                </div>\n                <div className={style.buttons}>\n                    <div\n                        className={classNames(\n                            icons['icon'],\n                            icons['icon-button'],\n                            icons['insert-above']\n                        )}\n                        title=\"Insert above\"\n                        onClick={(): unknown => setInsertAboveMessageID(insertAboveMessageID.value === id ? null : id)}\n                    />\n                    <div\n                        className={classNames(\n                            icons['icon'],\n                            icons['icon-button'],\n                            icons['edit'])\n                        }\n                        title=\"Edit\"\n                        onClick={(): unknown => setEditedMessage(editedMessageID.value === id ? null : id)}\n                    />\n                    <div\n                        className={classNames(\n                            icons['icon'],\n                            icons['icon-button'],\n                            icons['delete'])\n                        }\n                        title=\"Delete\"\n                        onClick={(): unknown => deleteMessage(index)}\n                    />\n                </div>\n                {authorMenuElement}\n            </div>\n        );\n    }, [char, onReplaceAuthor, onDismissAuthorMenu, authorMenuElement, editable]);\n};\n\nexport default Message;\n","import style from './style.scss';\nimport icons from '../../icons/icons.scss';\n\nimport type {JSX} from 'preact';\nimport {useEffect, useMemo, useRef} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport CommandBox from '../CommandBox/CommandBox';\nimport Message from '../Message/Message';\n\nimport setInsertAboveMessageIDAction from '../../actions/set-insert-above-message-id';\n\nimport {useAppState, useAction} from '../../util/store';\nimport {Convo} from '../../util/datatypes';\n\nconst Messages = ({convo}: {convo: Convo | undefined}): JSX.Element => {\n    const {insertAboveMessageID} = useAppState();\n    const setInsertAboveMessageID = useAction(setInsertAboveMessageIDAction);\n    const lastMessageElem = useRef<HTMLDivElement>(null);\n\n    const messages = convo?.messages;\n    const prevMessagesRef = useRef(messages);\n\n    useEffect(() => {\n        const prevMessages = prevMessagesRef.current;\n        const messageAddedAtBottom = prevMessages && messages &&\n            prevMessages.length + 1 === messages.length &&\n            prevMessages[prevMessages.length - 1] !== messages[messages.length - 1];\n\n        // Ideally, this would happen for messages added anywhere, but that would require creating a ref for every\n        // message and arrays of refs are really hard to do correctly\n        if (messageAddedAtBottom && lastMessageElem.current) {\n            lastMessageElem.current.scrollIntoView();\n        }\n\n        prevMessagesRef.current = messages;\n    });\n\n    const messageElems = useMemo(() => {\n        const messageElems = [];\n        if (messages) {\n            for (let i = 0; i < messages.length; i++) {\n                const message = messages[i];\n                if (insertAboveMessageID.value === message.id) {\n                    messageElems.push(\n                        <div className={style.insertBox}>\n                            <div className={style.closeWrapper}>\n                                <div className={style.closePositioner}>\n                                    <div\n                                        className={classNames(\n                                            icons['icon'],\n                                            icons['icon-button'],\n                                            icons['delete']\n                                        )}\n                                        title=\"Close\"\n                                        onClick={(): unknown => setInsertAboveMessageID(null)}\n                                    />\n                                </div>\n                            </div>\n                            <div className={style.commandBoxWrapper}>\n                                <CommandBox beforeMessage={i}/>\n                            </div>\n                        </div>\n                    );\n                }\n                messageElems.push(<Message\n                    convoID={convo.id}\n                    message={message}\n                    key={message.id}\n                    index={i}\n                    // I could use forwardRef here but don't want to pull in preact/compat\n                    elemRef={i === messages.length - 1 ? lastMessageElem : undefined}\n                />);\n            }\n        }\n        return messageElems;\n    }, [messages, convo?.id]);\n\n\n    return (\n        <div className={style.messages}>\n            <div className={style.messagesInner}>\n                {messageElems}\n            </div>\n        </div>\n    );\n};\n\nexport default Messages;\n","// extracted by mini-css-extract-plugin\nexport default {\"modal-bg\":\"modal-bg__m0HV5\",\"modalBg\":\"modal-bg__m0HV5\",\"fade\":\"fade__cQTz1\",\"modal-positioner\":\"modal-positioner__JC0aj\",\"modalPositioner\":\"modal-positioner__JC0aj\",\"modal\":\"modal__ulBpF\",\"popup\":\"popup__O7W1y\"};","import type {JSX, ComponentChildren} from 'preact';\n\nimport style from './style.scss';\n\nconst Modal = ({onClose, children}: {\n    onClose: (event: Event) => void,\n    children: ComponentChildren\n}): JSX.Element => (\n    <>\n        <div className={style.modalBg} onClick={onClose} />\n        <div className={style.modalPositioner}>\n            <div className={style.modal}>{children}</div>\n        </div>\n    </>\n);\n\nexport default Modal;\n","// extracted by mini-css-extract-plugin\nexport default {\"project-bar\":\"project-bar__jqnP4\",\"projectBar\":\"project-bar__jqnP4\",\"project-name\":\"project-name__uuERj\",\"projectName\":\"project-name__uuERj\",\"button\":\"button__MAT5s\",\"error\":\"error__vb_Q8\"};","import type {AppState} from '../util/store';\n\nexport default (state: AppState, projectName: string): void => {\n    state.projectName.value = projectName;\n};\n","import style from './style.scss';\nimport icons from '../../icons/icons.scss';\n\nimport type {JSX} from 'preact';\nimport {useState} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport loadStateAction from '../../actions/load-state';\nimport setProjectNameAction from '../../actions/set-project-name';\n\nimport saveState from '../../serialization/save-state';\nimport validate from '../../serialization/validate';\n\nimport saveToFile from '../../util/save-to-file';\nimport {useAppState, useAction} from '../../util/store';\n\nconst ProjectBar = (): JSX.Element => {\n    const {version, projectName, convos, chars} = useAppState();\n\n    const loadState = useAction(loadStateAction);\n    const setProjectName = useAction(setProjectNameAction);\n\n    const [error, setError] = useState<Error | null>(null);\n\n    const onInput = (event: Event): unknown => setProjectName((event.target as HTMLInputElement).value);\n\n    const onLoad = (): void => {\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.addEventListener('change', event => {\n            const files = (event.target as HTMLInputElement).files;\n            if (files?.length) {\n                const reader = new FileReader();\n                reader.addEventListener('load', () => {\n                    try {\n                        const result = JSON.parse(reader.result as string) as unknown;\n                        const errors = validate(result);\n                        if (errors.length > 0) throw new Error('Invalid JSON');\n                        // eslint-disable-next-line max-len\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-argument\n                        loadState(result as any);\n                    } catch (error) {\n                        setError(error as Error);\n                    }\n                });\n                reader.readAsText(files[0]);\n            }\n        });\n        input.click();\n    };\n\n    const onSave = (): void =>\n        saveToFile(\n            `${projectName.value}.json`,\n            saveState({\n                version: version.value,\n                projectName: projectName.value,\n                convos: Array.from(Object.values(convos.value)),\n                chars: chars.value\n            }));\n\n    return (\n        <div className={style.projectBar}>\n            <input\n                className={style.projectName}\n                type=\"text\"\n                value={projectName}\n                onInput={onInput}\n            />\n            <div\n                className={classNames(style.button, icons['icon'], icons['icon-button'], icons['save'])}\n                title=\"Save\"\n                onClick={onSave}\n            />\n            <div\n                className={classNames(style.button, icons['icon'], icons['icon-button'], icons['load'])}\n                title=\"Load\"\n                onClick={onLoad}\n            />\n            {error ?\n                <div className={style.error}>\n                    <span className={style.errorMessage}>{error.message}</span>\n                    <div\n                        className={classNames(icons['icon'], icons['icon-button'], icons['delete'])}\n                        onClick={(): void => setError(null)}\n                    />\n                </div> :\n                null\n            }\n        </div>\n    );\n};\n\nexport default ProjectBar;\n","// extracted by mini-css-extract-plugin\nexport default {\"row\":\"row__etbb0\",\"label\":\"label__wCXFO\"};","import type {AppState} from '../util/store';\nimport type {ID, Convo} from '../util/datatypes';\n\nexport default (state: AppState, oldID: ID, newID: ID): void => {\n    const newConvos: Record<ID, Convo> = {};\n    for (const convo of Object.values(state.convos.value)) {\n        let changed = false;\n        let {messages} = convo;\n        for (let i = 0; i < messages.length; i++) {\n            const message = messages[i];\n            if (message.authorID !== oldID) continue;\n\n            // Don't clone convo.messages until we know we need to modify it\n            if (!changed) {\n                changed = true;\n                messages = messages.slice(0);\n            }\n\n            messages[i] = {...message, authorID: newID};\n        }\n\n        newConvos[convo.id] = changed ? {...convo, messages} : convo;\n    }\n    state.convos.value = newConvos;\n};\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useState} from 'preact/hooks';\n\nimport deleteCharacterAction from '../../actions/delete-character';\nimport replaceCharacterAction from '../../actions/replace-character';\nimport setToBeReplacedCharacterIDAction from '../../actions/set-to-be-replaced-character-id';\n\nimport {useAppState, useAction} from '../../util/store';\n\nconst ReplaceCharacterModal = (): JSX.Element => {\n    const {chars, toBeReplacedCharID} = useAppState();\n\n    const deleteCharacter = useAction(deleteCharacterAction);\n    const replaceCharacter = useAction(replaceCharacterAction);\n    const setToBeReplacedCharacterID = useAction(setToBeReplacedCharacterIDAction);\n\n    const [selectedCharacterID, setSelectedCharacterID] = useState<string | undefined>(undefined);\n\n    const replaceCharacterCallback = (): void => {\n        if (!toBeReplacedCharID.value || !selectedCharacterID) return;\n        replaceCharacter(toBeReplacedCharID.value, selectedCharacterID);\n        deleteCharacter(toBeReplacedCharID.value, selectedCharacterID);\n        setToBeReplacedCharacterID(null);\n    };\n\n    return (\n        <div className={style.replaceCharacter}>\n            <div className={style.row}>\n                <div className={style.label}>\n                    Replace character <span className={style.oldCharacterName}> with:</span>\n                </div>\n                <select\n                    onChange={(event): unknown => setSelectedCharacterID((event.target as HTMLSelectElement).value)}\n                    value={selectedCharacterID ?? undefined}>\n                    {chars.value.map(char => char.id === toBeReplacedCharID.value ?\n                        null :\n                        <option value={char.id}>{char.name}</option>)}\n                </select>\n            </div>\n            <div>\n                <button\n                    onClick={replaceCharacterCallback}\n                    disabled={typeof selectedCharacterID === 'undefined'}\n                >Replace</button>\n            </div>\n        </div>\n    );\n};\n\nexport default ReplaceCharacterModal;\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useComputed} from '@preact/signals';\nimport {useMemo} from 'preact/hooks';\n\nimport CommandBox from '../CommandBox/CommandBox';\nimport CharacterList from '../CharacterList/CharacterList';\nimport CharacterSettingsModal from '../CharacterSettingsModal/CharacterSettingsModal';\nimport ConvoList from '../ConvoList/ConvoList';\nimport ExportConvoModal from '../ExportConvoModal/ExportConvoModal';\nimport Messages from '../Messages/Messages';\nimport Modal from '../Modal/Modal';\nimport ProjectBar from '../ProjectBar/ProjectBar';\nimport ReplaceCharacterModal from '../ReplaceCharacterModal/ReplaceCharacterModal';\n\nimport setEditedCharacterIDAction from '../../actions/set-edited-character-id';\nimport setToBeReplacedCharacterIDAction from '../../actions/set-to-be-replaced-character-id';\nimport setExportedConvoIDAction from '../../actions/set-exported-convo-id';\n\nimport {useAppState, useAction} from '../../util/store';\n\nconst App = (): JSX.Element => {\n    const {convos, currentConvoID, editedCharID, toBeReplacedCharID, exportedConvoID} = useAppState();\n    const setEditedCharacterID = useAction(setEditedCharacterIDAction);\n    const setToBeReplacedCharacterID = useAction(setToBeReplacedCharacterIDAction);\n    const setExportedConvoID = useAction(setExportedConvoIDAction);\n    const projectBarPane = useMemo(() => (\n        <div className={style.projectBarPane}>\n            <ProjectBar />\n        </div>\n    ), []);\n\n    const convosPane = useMemo(() => (\n        <div className={style.convosPane}>\n            <ConvoList />\n        </div>\n    ), []);\n\n    const commandBoxPane = useMemo(() => (\n        <div className={style.commandBoxPane}>\n            <CommandBox />\n        </div>\n    ), []);\n\n    const charactersPane = useMemo(() => (\n        <div className={style.charactersPane}>\n            <CharacterList />\n        </div>\n    ), []);\n\n    const modal = useComputed(() => (\n        <>\n            {editedCharID.value !== null ?\n                <Modal onClose={(): unknown => setEditedCharacterID(null)}>\n                    <CharacterSettingsModal />\n                </Modal> :\n                null}\n            {toBeReplacedCharID.value !== null ?\n                <Modal onClose={(): unknown => setToBeReplacedCharacterID(null)}>\n                    <ReplaceCharacterModal />\n                </Modal> :\n                null}\n            {exportedConvoID.value !== null ?\n                <Modal onClose={(): unknown => setExportedConvoID(null)}>\n                    <ExportConvoModal />\n                </Modal> :\n                null}\n        </>\n    )).value;\n\n    return (\n        <div className={style.app}>\n            {projectBarPane}\n            <div className={style.appPane}>\n                {convosPane}\n                <div className={style.messagesPane}>\n                    <Messages convo={currentConvoID.value !== null ? convos.value[currentConvoID.value] : undefined} />\n                    {commandBoxPane}\n                </div>\n                <div className={style.charactersPane}>\n                    {charactersPane}\n                </div>\n            </div>\n            {modal}\n        </div>\n    );\n};\n\nexport default App;\n","import './forms.scss';\n\nimport {render, JSX} from 'preact';\n\nimport 'preact/debug';\n\nimport App from './components/App/App';\n\nimport {AppContext, store} from './util/store';\n\n\nconst Main = (): JSX.Element => (\n    <AppContext.Provider value={store}>\n        <App />\n    </AppContext.Provider>\n);\n\nrender(<Main />, document.body);\n"],"names":["__webpack_require__","moduleId","cachedModule","__webpack_module_cache__","undefined","exports","module","__webpack_modules__","call","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","includes","key","hasOwn","join","hasOwnProperty","default","__createBinding","this","create","o","m","k","k2","defineProperty","enumerable","get","__exportStar","p","value","require","pattern","s","matches","match","year","parseInt","month","day","hour","minute","second","n","isLeapYear","MONTH_LENGTHS","maxDay","isRefForm","schema","isEnumForm","isElementsForm","isPropertiesForm","isValuesForm","isDiscriminatorForm","__rest","e","t","indexOf","getOwnPropertySymbols","propertyIsEnumerable","isSchema","isValidSchema","isTypeForm","isEmptyForm","rest","keys","root","definitions","subSchema","values","ref","enum","Set","size","elements","properties","optionalProperties","mapping","nullable","discriminator","VALID_FORMS","VALID_TYPES","data","obj","metadata","type","enum_","additionalProperties","formSignature","formOk","validForm","every","index","elem","validateWithState","state","instance","parentTag","schema_1","schemaTokens","config","maxDepth","MaxDepthExceededError","pop","pushSchemaToken","pushError","validateInt","rfc3339_1","popSchemaToken","subInstance","entries","pushInstanceToken","popInstanceToken","name","inOptional","tag","min","max","Number","isInteger","token","instanceTokens","errors","instancePath","schemaPath","maxErrors","MaxErrorsReachedError","__importDefault","mod","__esModule","validate","Error","err","assign","props","removeNode","node","parentNode","removeChild","createElement","children","normalizedProps","slice","defaultProps","createVNode","original","vnode","__k","__","__b","__e","__d","__c","__h","constructor","__v","vnodeId","options","Fragment","Component","context","getDomSibling","childIndex","sibling","updateParentDomPointers","child","base","enqueueRender","c","rerenderQueue","process","prevDebounce","debounceRendering","setTimeout","queue","__r","sort","a","b","some","component","commitQueue","oldVNode","oldDom","parentDom","__P","diff","ownerSVGElement","commitRoot","diffChildren","renderResult","newParentVNode","oldParentVNode","globalContext","isSvg","excessDomChildren","isHydrating","j","childVNode","newDom","firstChildDom","refs","oldChildren","EMPTY_ARR","oldChildrenLength","EMPTY_OBJ","reorderChildren","placeChild","unmount","applyRef","tmp","nextDom","sibDom","outer","appendChild","nextSibling","insertBefore","setStyle","style","setProperty","IS_NON_DIMENSIONAL","test","dom","oldValue","useCapture","cssText","replace","toLowerCase","l","addEventListener","eventProxyCapture","eventProxy","removeEventListener","removeAttribute","setAttribute","event","newVNode","isNew","oldProps","oldState","snapshot","clearProcessingException","newProps","provider","componentContext","renderHook","count","newType","contextType","__E","render","doRender","sub","getDerivedStateFromProps","__s","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","forEach","_sb","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","diffElementNodes","diffed","cb","oldHtml","newHtml","nodeType","localName","document","createTextNode","createElementNS","is","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","diffProps","hydrate","checked","current","parentVNode","skipRemove","r","componentWillUnmount","replaceNode","firstChild","createContext","defaultValue","contextId","Consumer","contextValue","Provider","subs","ctx","_props","old","splice","error","errorInfo","ctor","handled","getDerivedStateFromError","setState","componentDidCatch","update","callback","forceUpdate","getter","d","definition","prop","getDisplayName","displayName","getCurrentVNode","renderStack","isPossibleOwner","getOwnerStack","stack","next","__o","reduce","acc","owner","source","__source","fileName","lineNumber","hasBabelPlugin","console","warn","getClosestDomNodeParent","parent","serializeVNode","attrs","JSON","stringify","getHookState","currentComponent","currentHook","hooks","__H","__V","EMPTY","useState","initialState","useReducer","reducer","init","hookState","currentIndex","_reducer","invokeOrReturn","currentValue","nextValue","action","_hasScuFromHooks","prevScu","stateHooks","filter","x","__N","shouldUpdate","hookItem","useEffect","args","argsChanged","_pendingArgs","useRef","initialValue","useMemo","factory","useCallback","useContext","flushAfterPaintEffects","afterPaintEffects","shift","invokeCleanup","invokeEffect","afterNextFrame","raf","done","clearTimeout","timeout","HAS_RAF","cancelAnimationFrame","requestAnimationFrame","hook","comp","cleanup","oldArgs","newArgs","f","cycleDetected","batchDepth","hasError","batchedEffect","effect","batchIteration","_nextBatchedEffect","_flags","needsToRecompute","_callback","endBatch","signal","evalContext","_node","_target","_sources","_version","_source","_prevSource","_nextSource","_prevTarget","_nextTarget","_rollbackNode","_subscribe","_value","_targets","Signal","target","_refresh","rollbackNode","sources","_unsubscribe","compute","_compute","_globalVersion","globalVersion","Computed","cleanupEffect","_cleanup","prevContext","disposeEffect","endEffect","cleanupSources","Effect","_dispose","bind","hookName","hookFn","updater","finishUpdate","_start","_ref","currentSignal","useSignal","v","_this","_updateFlags","_updater","peek","computed","createPropUpdater","propSignal","setAsProperty","changeSignal","_update","newSignal","useComputed","$compute","window","__PREACT_DEVTOOLS__","attachPreact","loggedTypeFailures","ownerStack","isWeakMapSupported","WeakMap","oldDiff","oldDiffed","oldRoot","oldRender","hooksAllowed","oldBeforeDiff","oldVnode","oldCatchError","oldHook","warnedComponents","useLayoutEffect","lazyPropTypes","deprecations","then","promise","componentStack","isValid","componentName","propTypes","has","lazyVNode","set","__f","checkPropTypes","typeSpecs","location","getStack","typeSpecName","message","property","deprecatedAttributes","nodeName","deprecatedProto","__self","__proto__","previousComponent","prevRaf","oldBeforeRender","oldAfterDiff","oldCommit","oldBeforeUnmount","__m","hasErrored","prev","subscribe","fn","flag","valueOf","addDependency","_notify","prepareSources","OUTDATED","finish","Text","defineProperties","configurable","signalProps","__np","setCurrentUpdater","renderedProps","updaters","_updaters","HAS_PENDING_UPDATE","randomArr","Uint32Array","crypto","getRandomValues","characterName","batch","newCharID","id","chars","color","currentCharID","newConvo","messages","convos","convoIDs","currentConvoID","messageContents","beforeMessageIndex","createConvo","createCharacter","convo","newMessages","newMessage","authorID","contents","convoID","projectName","version","json","convosByID","map","store","defaultStore","editedMessageID","editedConvoID","editedCharID","exportedConvoID","toBeReplacedCharID","insertAboveMessageID","exportConvoSettings","wrapTextEnabled","wrapTextLength","justifyEnabled","justifySide","storedStore","localStorage","getItem","parsedStore","parse","oldConvos","removeItem","loadLegacyState","autosave","parsedAutosave","loadState","loadStore","savedState","saveState","setItem","AppContext","useAppState","useAction","func","beforeMessage","createCharacterAction","createMessage","createMessageAction","editMessage","editMessageAction","setCurrentCharacterID","setCurrentCharacterIDAction","tabResults","setValue","className","onKeyPress","code","shiftKey","preventDefault","command","colonMatch","exec","authorName","authorNameLower","char","find","character","replaceMatch","split","onInput","onKeyDown","characters","startsWith","replacementID","charIndex","findIndex","CharacterListing","active","onClick","onEdit","onDelete","colorToHex","icons","deleteCharacter","deleteCharacterAction","setEditedCharacterID","setEditedCharacterIDAction","setToBeReplacedCharacterID","setToBeReplacedCharacterIDAction","charsInConvo","charsNotInConvo","charIDsInConvo","currentConvo","add","onClickCharacter","onEditCharacter","onDeleteCharacter","charID","newCharData","updateCharacter","updateCharacterAction","onChange","newConvos","convoIndex","existingID","ConvoListing","setConvoName","setConvoNameAction","setCurrentConvoID","setCurrentConvoIDAction","setEditedConvoID","setEditedConvoIDAction","setExportedConvoID","setExportedConvoIDAction","deleteConvo","deleteConvoAction","edited","prevEdited","editedConvoRef","focus","onBlur","stopPropagation","createConvoAction","convoListings","createConvoCallback","enabled","side","url","URL","createObjectURL","Blob","href","download","click","revokeObjectURL","setWrapTextEnabled","setWrapTextEnabledAction","setWrapTextLength","setWrapTextLengthAction","setJustifyEnabled","setJustifyEnabledAction","setJustifySide","setJustifySideAction","onChangeJustifySide","isFinite","disabled","longestCharNameLength","from","Math","lines","charName","start","justification","repeat","line","regex","lastIndex","trimEnd","convoStr","saveToFile","items","y","onDismiss","onClickItem","query","setQuery","searchRef","onFocusOut","currentTarget","contains","relatedTarget","top","left","maxHeight","onfocusout","tabIndex","item","messageIndex","elemRef","deleteMessage","deleteMessageAction","replaceMessageAuthor","replaceMessageAuthorAction","setEditedMessage","setEditedMessageAction","setInsertAboveMessageID","setInsertAboveMessageIDAction","editable","prevEditable","contentsRef","authorMenu","setAuthorMenu","onReplaceAuthor","newAuthorID","onDismissAuthorMenu","authorMenuElement","height","getBoundingClientRect","prevValue","title","lastMessageElem","prevMessagesRef","prevMessages","scrollIntoView","messageElems","onClose","loadStateAction","setProjectName","setProjectNameAction","setError","input","files","reader","FileReader","result","readAsText","oldID","newID","changed","replaceCharacter","replaceCharacterAction","selectedCharacterID","setSelectedCharacterID","projectBarPane","convosPane","commandBoxPane","charactersPane","modal","app","appPane","messagesPane","body"],"sourceRoot":""}