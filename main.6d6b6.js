(()=>{function e(o){var r=n[o];if(void 0!==r)return r.exports;var i=n[o]={exports:{}};return t[o].call(i.exports,i,i.exports,e),i.exports}var t={588:(e,t)=>{var n;!function(){"use strict";function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var s=o.apply(null,n);s&&e.push(s)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}var r={}.hasOwnProperty;e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},454:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(559),t),r(n(433),t)},944:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(\.\d+)?([zZ]|((\+|-)(\d{2}):(\d{2})))$/;t.default=function(e){const t=e.match(n);if(null===t)return!1;const r=parseInt(t[1],10),i=parseInt(t[2],10),s=parseInt(t[3],10),a=parseInt(t[4],10),l=parseInt(t[5],10),c=parseInt(t[6],10);return!(i>12)&&(!(s>function(e,t){if(2===t)return function(e){return e%4==0&&(e%100!=0||e%400==0)}(e)?29:28;return o[t]}(r,i))&&(!(a>23)&&(!(l>59)&&!(c>60))))};const o=[0,31,0,31,30,31,30,31,31,30,31,30,31]},559:function(e,t){"use strict";function n(e){return"ref"in e}function o(e){return"enum"in e}function r(e){return"elements"in e}function i(e){return"properties"in e||"optionalProperties"in e}function s(e){return"values"in e}function a(e){return"discriminator"in e}var l=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.isSchema=t.isValidSchema=t.isDiscriminatorForm=t.isValuesForm=t.isPropertiesForm=t.isElementsForm=t.isEnumForm=t.isTypeForm=t.isRefForm=t.isEmptyForm=void 0,t.isEmptyForm=function(e){const t=l(e,["definitions","nullable","metadata"]);return 0===Object.keys(t).length},t.isRefForm=n,t.isTypeForm=function(e){return"type"in e},t.isEnumForm=o,t.isElementsForm=r,t.isPropertiesForm=i,t.isValuesForm=s,t.isDiscriminatorForm=a,t.isValidSchema=function e(t,l){if(void 0===l&&(l=t),void 0!==t.definitions){if(l!==t)return!1;for(const n of Object.values(t.definitions))if(!e(n,l))return!1}if(n(t)&&!(t.ref in(l.definitions||{})))return!1;if(o(t)){if(0===t.enum.length)return!1;if(t.enum.length!==new Set(t.enum).size)return!1}if(r(t))return e(t.elements,l);if(i(t)){for(const n of Object.values(t.properties||{}))if(!e(n,l))return!1;for(const n of Object.values(t.optionalProperties||{}))if(!e(n,l))return!1;for(const e of Object.keys(t.properties||{}))if(e in(t.optionalProperties||{}))return!1}if(s(t))return e(t.values,l);if(a(t))for(const n of Object.values(t.mapping)){if(!e(n,l)||!i(n))return!1;if(n.nullable)return!1;if(t.discriminator in(n.properties||{}))return!1;if(t.discriminator in(n.optionalProperties||{}))return!1}return!0};const c=[[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!0,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!0,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!0,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!0,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!1,!0,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!0,!1,!1,!1],[!1,!1,!1,!1,!0,!0,!0,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!0,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!0,!0]],u=["boolean","float32","float64","int8","uint8","int16","uint16","int32","uint32","string","timestamp"];t.isSchema=function e(t){if("object"!=typeof t||Array.isArray(t)||null===t)return!1;const n=t,{definitions:o,nullable:r,metadata:i,ref:s,type:a,enum:_,elements:v,properties:f,optionalProperties:d,additionalProperties:p,values:h,discriminator:m,mapping:y}=n,g=l(n,["definitions","nullable","metadata","ref","type","enum","elements","properties","optionalProperties","additionalProperties","values","discriminator","mapping"]),b=[void 0!==s,void 0!==a,void 0!==_,void 0!==v,void 0!==f,void 0!==d,void 0!==p,void 0!==h,void 0!==m,void 0!==y];let C=!1;for(const e of c)C=C||e.every(((e,t)=>e===b[t]));if(!C)return!1;if(void 0!==o){if("object"!=typeof o||Array.isArray(o)||null===o)return!1;for(const t of Object.values(o))if(!e(t))return!1}if(void 0!==r&&"boolean"!=typeof r)return!1;if(void 0!==i&&("object"!=typeof i||Array.isArray(i)||null===i))return!1;if(void 0!==s&&"string"!=typeof s)return!1;if(void 0!==a&&("string"!=typeof a||!u.includes(a)))return!1;if(void 0!==_){if(!Array.isArray(_))return!1;if(!_.every((e=>"string"==typeof e)))return!1}if(void 0!==v&&!e(v))return!1;if(void 0!==f){if("object"!=typeof f||Array.isArray(f)||null===f)return!1;for(const t of Object.values(f))if(!e(t))return!1}if(void 0!==d){if("object"!=typeof d||Array.isArray(d)||null===d)return!1;for(const t of Object.values(d))if(!e(t))return!1}if(void 0!==p&&"boolean"!=typeof p)return!1;if(void 0!==h&&!e(h))return!1;if(void 0!==m&&"string"!=typeof m)return!1;if(void 0!==y){if("object"!=typeof y||Array.isArray(y)||null===y)return!1;for(const t of Object.values(y))if(!e(t))return!1}return 0===Object.keys(g).length}},433:function(e,t,n){"use strict";function o(e,t,n,u){if(!t.nullable||null!==n)if(v.isRefForm(t)){if(e.schemaTokens.length===e.config.maxDepth)throw new f;e.schemaTokens.push(["definitions",t.ref]),o(e,e.root.definitions[t.ref],n),e.schemaTokens.pop()}else if(v.isTypeForm(t)){switch(a(e,"type"),t.type){case"boolean":"boolean"!=typeof n&&c(e);break;case"float32":case"float64":"number"!=typeof n&&c(e);break;case"int8":r(e,n,-128,127);break;case"uint8":r(e,n,0,255);break;case"int16":r(e,n,-32768,32767);break;case"uint16":r(e,n,0,65535);break;case"int32":r(e,n,-2147483648,2147483647);break;case"uint32":r(e,n,0,4294967295);break;case"string":"string"!=typeof n&&c(e);break;case"timestamp":"string"!=typeof n?c(e):_.default(n)||c(e)}l(e)}else if(v.isEnumForm(t))a(e,"enum"),"string"==typeof n&&t.enum.includes(n)||c(e),l(e);else if(v.isElementsForm(t)){if(a(e,"elements"),Array.isArray(n))for(const[r,a]of n.entries())i(e,r.toString()),o(e,t.elements,a),s(e);else c(e);l(e)}else if(v.isPropertiesForm(t))if("object"!=typeof n||null===n||Array.isArray(n))a(e,void 0!==t.properties?"properties":"optionalProperties"),c(e),l(e);else{if(void 0!==t.properties){a(e,"properties");for(const[r,u]of Object.entries(t.properties))a(e,r),n.hasOwnProperty(r)?(i(e,r),o(e,u,n[r]),s(e)):c(e),l(e);l(e)}if(void 0!==t.optionalProperties){a(e,"optionalProperties");for(const[r,c]of Object.entries(t.optionalProperties))a(e,r),n.hasOwnProperty(r)&&(i(e,r),o(e,c,n[r]),s(e)),l(e);l(e)}if(!0!==t.additionalProperties)for(const o of Object.keys(n)){const n=t.optionalProperties&&o in t.optionalProperties;t.properties&&o in t.properties||n||o===u||(i(e,o),c(e),s(e))}}else if(v.isValuesForm(t)){if(a(e,"values"),"object"!=typeof n||null===n||Array.isArray(n))c(e);else for(const[r,a]of Object.entries(n))i(e,r),o(e,t.values,a),s(e);l(e)}else if(v.isDiscriminatorForm(t))if("object"!=typeof n||null===n||Array.isArray(n))a(e,"discriminator"),c(e),l(e);else if(n.hasOwnProperty(t.discriminator)){const r=n[t.discriminator];"string"==typeof r?r in t.mapping?(a(e,"mapping"),a(e,r),o(e,t.mapping[r],n,t.discriminator),l(e),l(e)):(a(e,"mapping"),i(e,t.discriminator),c(e),s(e),l(e)):(a(e,"discriminator"),i(e,t.discriminator),c(e),s(e),l(e))}else a(e,"discriminator"),c(e),l(e)}function r(e,t,n,o){("number"!=typeof t||!Number.isInteger(t)||t<n||t>o)&&c(e)}function i(e,t){e.instanceTokens.push(t)}function s(e){e.instanceTokens.pop()}function a(e,t){e.schemaTokens[e.schemaTokens.length-1].push(t)}function l(e){e.schemaTokens[e.schemaTokens.length-1].pop()}function c(e){if(e.errors.push({instancePath:[...e.instanceTokens],schemaPath:[...e.schemaTokens[e.schemaTokens.length-1]]}),e.errors.length===e.config.maxErrors)throw new d}var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=t.MaxDepthExceededError=void 0;const _=u(n(944)),v=n(559);class f extends Error{}t.MaxDepthExceededError=f;class d extends Error{}t.validate=function(e,t,n){const r={errors:[],instanceTokens:[],schemaTokens:[[]],root:e,config:n||{maxDepth:0,maxErrors:0}};try{o(r,e,t)}catch(e){if(!(e instanceof d))throw e}return r.errors}},609:(e,t,n)=>{"use strict";function o(e,t){for(var n in t)e[n]=t[n];return e}function r(e){var t=e.parentNode;t&&t.removeChild(e)}function i(e,t,n){var o,r,i,a={};for(i in t)"key"==i?o=t[i]:"ref"==i?r=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?j.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===a[i]&&(a[i]=e.defaultProps[i]);return s(e,a,o,r,null)}function s(e,t,n,o,r){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++P:r};return null==r&&null!=S.vnode&&S.vnode(i),i}function a(e){return e.children}function l(e,t){this.props=e,this.context=t}function c(e,t){if(null==t)return e.__?c(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?c(e):null}function u(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return u(e)}}function _(e){(!e.__d&&(e.__d=!0)&&E.push(e)&&!v.__r++||O!==S.debounceRendering)&&((O=S.debounceRendering)||setTimeout)(v)}function v(){for(var e;v.__r=E.length;)e=E.sort((function(e,t){return e.__v.__b-t.__v.__b})),E=[],e.some((function(e){var t,n,r,i,s,a;e.__d&&(s=(i=(t=e).__v).__e,(a=t.__P)&&(n=[],(r=o({},i)).__v=i.__v+1,b(a,i,r,t.__n,void 0!==a.ownerSVGElement,null!=i.__h?[s]:null,n,null==s?c(i):s,i.__h),C(n,i),i.__e!=s&&u(i)))}))}function f(e,t,n,o,r,i,l,u,_,v){var f,h,m,y,g,C,x,I=o&&o.__k||M,D=I.length;for(n.__k=[],f=0;f<t.length;f++)if(null!=(y=n.__k[f]=null==(y=t[f])||"boolean"==typeof y?null:"string"==typeof y||"number"==typeof y||"bigint"==typeof y?s(null,y,null,null,y):Array.isArray(y)?s(a,{children:y},null,null,null):y.__b>0?s(y.type,y.props,y.key,y.ref?y.ref:null,y.__v):y)){if(y.__=n,y.__b=n.__b+1,null===(m=I[f])||m&&y.key==m.key&&y.type===m.type)I[f]=void 0;else for(h=0;h<D;h++){if((m=I[h])&&y.key==m.key&&y.type===m.type){I[h]=void 0;break}m=null}b(e,y,m=m||A,r,i,l,u,_,v),g=y.__e,(h=y.ref)&&m.ref!=h&&(x||(x=[]),m.ref&&x.push(m.ref,null,y),x.push(h,y.__c||g,y)),null!=g?(null==C&&(C=g),"function"==typeof y.type&&y.__k===m.__k?y.__d=_=d(y,_,e):_=p(e,y,m,I,g,_),"function"==typeof n.type&&(n.__d=_)):_&&m.__e==_&&_.parentNode!=e&&(_=c(m))}for(n.__e=C,f=D;f--;)null!=I[f]&&N(I[f],I[f]);if(x)for(f=0;f<x.length;f++)k(x[f],x[++f],x[++f])}function d(e,t,n){for(var o,r=e.__k,i=0;r&&i<r.length;i++)(o=r[i])&&(o.__=e,t="function"==typeof o.type?d(o,t,n):p(n,o,o,r,o.__e,t));return t}function p(e,t,n,o,r,i){var s,a,l;if(void 0!==t.__d)s=t.__d,t.__d=void 0;else if(null==n||r!=i||null==r.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(r),s=null;else{for(a=i,l=0;(a=a.nextSibling)&&l<o.length;l+=2)if(a==r)break e;e.insertBefore(r,i),s=i}return void 0!==s?s:r.nextSibling}function h(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||H.test(t)?n:n+"px"}function m(e,t,n,o,r){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||h(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||h(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o||e.addEventListener(t,i?g:y,i):e.removeEventListener(t,i?g:y,i);else if("dangerouslySetInnerHTML"!==t){if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function y(e){this.l[e.type+!1](S.event?S.event(e):e)}function g(e){this.l[e.type+!0](S.event?S.event(e):e)}function b(e,t,n,r,i,s,c,u,_){var v,d,p,h,m,y,g,b,C,k,N,D,w,j,P,E=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(_=n.__h,u=t.__e=n.__e,t.__h=null,s=[u]),(v=S.__b)&&v(t);try{e:if("function"==typeof E){if(b=t.props,C=(v=E.contextType)&&r[v.__c],k=v?C?C.props.value:v.__:r,n.__c?g=(d=t.__c=n.__c).__=d.__E:("prototype"in E&&E.prototype.render?t.__c=d=new E(b,k):(t.__c=d=new l(b,k),d.constructor=E,d.render=I),C&&C.sub(d),d.props=b,d.state||(d.state={}),d.context=k,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=E.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=o({},d.__s)),o(d.__s,E.getDerivedStateFromProps(b,d.__s))),h=d.props,m=d.state,p)null==E.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==E.getDerivedStateFromProps&&b!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(b,k),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(b,d.__s,k)||t.__v===n.__v){for(d.props=b,d.state=d.__s,t.__v!==n.__v&&(d.__d=!1),d.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),N=0;N<d._sb.length;N++)d.__h.push(d._sb[N]);d._sb=[],d.__h.length&&c.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(b,d.__s,k),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(h,m,y)}))}if(d.context=k,d.props=b,d.__v=t,d.__P=e,D=S.__r,w=0,"prototype"in E&&E.prototype.render){for(d.state=d.__s,d.__d=!1,D&&D(t),v=d.render(d.props,d.state,d.context),j=0;j<d._sb.length;j++)d.__h.push(d._sb[j]);d._sb=[]}else do{d.__d=!1,D&&D(t),v=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++w<25);d.state=d.__s,null!=d.getChildContext&&(r=o(o({},r),d.getChildContext())),p||null==d.getSnapshotBeforeUpdate||(y=d.getSnapshotBeforeUpdate(h,m)),P=null!=v&&v.type===a&&null==v.key?v.props.children:v,f(e,Array.isArray(P)?P:[P],t,n,r,i,s,c,u,_),d.base=t.__e,t.__h=null,d.__h.length&&c.push(d),g&&(d.__E=d.__=null),d.__e=!1}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=x(n.__e,t,n,r,i,s,c,_);(v=S.diffed)&&v(t)}catch(e){t.__v=null,(_||null!=s)&&(t.__e=u,t.__h=!!_,s[s.indexOf(u)]=null),S.__e(e,t,n)}}function C(e,t){S.__c&&S.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){S.__e(e,t.__v)}}))}function x(e,t,n,o,i,s,a,l){var u,_,v,d=n.props,p=t.props,h=t.type,y=0;if("svg"===h&&(i=!0),null!=s)for(;y<s.length;y++)if((u=s[y])&&"setAttribute"in u==!!h&&(h?u.localName===h:3===u.nodeType)){e=u,s[y]=null;break}if(null==e){if(null===h)return document.createTextNode(p);e=i?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,p.is&&p),s=null,l=!1}if(null===h)d===p||l&&e.data===p||(e.data=p);else{if(s=s&&j.call(e.childNodes),_=(d=n.props||A).dangerouslySetInnerHTML,v=p.dangerouslySetInnerHTML,!l){if(null!=s)for(d={},y=0;y<e.attributes.length;y++)d[e.attributes[y].name]=e.attributes[y].value;(v||_)&&(v&&(_&&v.__html==_.__html||v.__html===e.innerHTML)||(e.innerHTML=v&&v.__html||""))}if(function(e,t,n,o,r){var i;for(i in n)"children"===i||"key"===i||i in t||m(e,i,null,n[i],o);for(i in t)r&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||m(e,i,t[i],n[i],o)}(e,p,d,i,l),v)t.__k=[];else if(y=t.props.children,f(e,Array.isArray(y)?y:[y],t,n,o,i&&"foreignObject"!==h,s,a,s?s[0]:n.__k&&c(n,0),l),null!=s)for(y=s.length;y--;)null!=s[y]&&r(s[y]);l||("value"in p&&void 0!==(y=p.value)&&(y!==e.value||"progress"===h&&!y||"option"===h&&y!==d.value)&&m(e,"value",y,d.value,!1),"checked"in p&&void 0!==(y=p.checked)&&y!==e.checked&&m(e,"checked",y,d.checked,!1))}return e}function k(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){S.__e(e,n)}}function N(e,t,n){var o,i;if(S.unmount&&S.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||k(o,null,t)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){S.__e(e,t)}o.base=o.__P=null,e.__c=void 0}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&N(o[i],t,n||"function"!=typeof e.type);n||null==e.__e||r(e.__e),e.__=e.__e=e.__d=void 0}function I(e,t,n){return this.constructor(e,n)}function D(e,t,n){var o,r,s;S.__&&S.__(e,t),r=(o="function"==typeof n)?null:n&&n.__k||t.__k,s=[],b(t,e=(!o&&n||t).__k=i(a,null,[e]),r||A,A,void 0!==t.ownerSVGElement,!o&&n?[n]:r?null:t.firstChild?j.call(t.childNodes):null,s,!o&&n?n:r?r.__e:t.firstChild,o),C(s,e)}function w(e,t){var n={__c:t="__cC"+T++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,o;return this.getChildContext||(n=[],(o={})[t]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(_)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}n.d(t,{HY:()=>a,YM:()=>S,h:()=>i,kr:()=>w,sY:()=>D,wA:()=>l});var j,S,P,E,O,T,A={},M=[],H=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;j=M.slice,S={__e:function(e,t,n,o){for(var r,i,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(e)),s=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,o||{}),s=r.__d),s)return r.__E=r}catch(t){e=t}throw e}},P=0,l.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=o({},this.state),"function"==typeof e&&(e=e(o({},n),this.props)),e&&o(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),_(this))},l.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),_(this))},l.prototype.render=a,E=[],v.__r=0,T=0}},n={};e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function t(e,t){M.YM.__h&&M.YM.__h(F,e,$||t),$=0;var n=F.__H||(F.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:B}),n.__[e]}function n(e){return $=1,function(e,n,o){var r=t(U++,2);if(r.t=e,!r.__c&&(r.__=[o?o(n):f(void 0,n),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=F,!F.u)){F.u=!0;var i=F.shouldComponentUpdate;F.shouldComponentUpdate=function(e,t,n){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter((function(e){return e.__c}));if(o.every((function(e){return!e.__N})))return!i||i.call(this,e,t,n);var s=!1;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),!(!s&&r.__c.props===e)&&(!i||i.call(this,e,t,n))}}return r.__N||r.__}(f,e)}function o(e,n){var o=t(U++,3);!M.YM.__s&&v(o.__H,n)&&(o.__=e,o.i=n,F.__H.__h.push(o))}function r(e){return $=5,i((function(){return{current:e}}),[])}function i(e,n){var o=t(U++,7);return v(o.__H,n)?(o.__V=e(),o.i=n,o.__h=e,o.__V):o.__}function s(e,t){return $=8,i((function(){return e}),t)}function a(e){var n=F.context[e.__c],o=t(U++,9);return o.c=e,n?(null==o.__&&(o.__=!0,n.sub(F)),n.props.value):e.__}function l(){for(var e;e=R.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(u),e.__H.__h.forEach(_),e.__H.__h=[]}catch(t){e.__H.__h=[],M.YM.__e(t,e.__v)}}function c(e){var t,n=function(){clearTimeout(o),X&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);X&&(t=requestAnimationFrame(n))}function u(e){var t=F,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),F=t}function _(e){var t=F;e.__c=e.__(),F=t}function v(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function f(e,t){return"function"==typeof t?t(e):t}function d(){throw new Error("Cycle detected")}function p(){if(ee>1)ee--;else{for(var e,t=!1;void 0!==Z;){var n=Z;for(Z=void 0,te++;void 0!==n;){var o=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&b(n))try{n.c()}catch(n){t||(e=n,t=!0)}n=o}}if(te=0,ee--,t)throw e}}function h(e){if(ee>0)return e();ee++;try{return e()}finally{p()}}function m(e){if(void 0!==G){var t=e.n;if(void 0===t||t.t!==G)return G.s=t={i:0,S:e,p:void 0,n:G.s,t:G,e:void 0,x:void 0,r:t},e.n=t,32&G.f&&e.S(t),t;if(-1===t.i)return t.i=0,void 0!==t.p&&(t.p.n=t.n,void 0!==t.n&&(t.n.p=t.p),t.p=void 0,t.n=G.s,G.s.p=t,G.s=t),t}}function y(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}function g(e){return new y(e)}function b(e){for(var t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function C(e){for(var t=e.s;void 0!==t;t=t.n){var n=t.S.n;void 0!==n&&(t.r=n),t.S.n=t,t.i=-1}}function x(e){for(var t=e.s,n=void 0;void 0!==t;){var o=t.n;-1===t.i?(t.S.U(t),t.n=void 0):(void 0!==n&&(n.p=t),t.p=void 0,t.n=n,n=t),t.S.n=t.r,void 0!==t.r&&(t.r=void 0),t=o}e.s=n}function k(e){y.call(this,void 0),this.x=e,this.s=void 0,this.g=ne-1,this.f=4}function N(e){return new k(e)}function I(e){var t=e.u;if(e.u=void 0,"function"==typeof t){ee++;var n=G;G=void 0;try{t()}catch(t){throw e.f&=-2,e.f|=8,D(e),t}finally{G=n,p()}}}function D(e){for(var t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,I(e)}function w(e){if(G!==this)throw new Error("Out-of-order effect");x(this),G=e,this.f&=-2,8&this.f&&D(this),p()}function j(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}function S(e){var t=new j(e);return t.c(),t.d.bind(t)}function P(e,t){M.YM[e]=t.bind(null,M.YM[e]||function(){})}function E(e){Q&&Q(),Q=e&&e.S()}function O(e){var t=this,n=e.data,o=function(e){return i((function(){return g(e)}),[])}(n);o.value=n;var r=i((function(){for(var e=t.__v;e=e.__;)if(e.__c){e.__c.__$f|=4;break}return t.__$u.c=function(){t.base.data=r.peek()},N((function(){var e=o.value.value;return 0===e?0:!0===e?"":e||""}))}),[]);return r.value}function T(e,t,n,o){var r=t in e&&void 0===e.ownerSVGElement,i=g(n);return{o:function(e,t){i.value=e,o=t},d:S((function(){var n=i.value.value;o[t]!==n&&(o[t]=n,r?e[t]=n:n?e.setAttribute(t,n):e.removeAttribute(t))}))}}function A(e){var t=r(e);return t.current=e,K.__$f|=4,i((function(){return N((function(){return t.current()}))}),[])}var M=e(609);const H={app:"app__JeJHz","app-pane":"app-pane__eVWfW",appPane:"app-pane__eVWfW","convos-pane":"convos-pane__T2pbX",convosPane:"convos-pane__T2pbX","messages-pane":"messages-pane__Qqipz",messagesPane:"messages-pane__Qqipz","command-box-pane":"command-box-pane__dIbHH",commandBoxPane:"command-box-pane__dIbHH","characters-pane":"characters-pane__yTeOJ",charactersPane:"characters-pane__yTeOJ"};var U,F,L,Y,$=0,R=[],B=[],V=M.YM.__b,W=M.YM.__r,q=M.YM.diffed,J=M.YM.__c,z=M.YM.unmount;M.YM.__b=function(e){"function"!=typeof e.type||e.__m||null===e.__?e.__m||(e.__m=e.__&&e.__.__m?e.__.__m:""):e.__m=(e.__&&e.__.__m?e.__.__m:"")+(e.__&&e.__.__k?e.__.__k.indexOf(e):0),F=null,V&&V(e)},M.YM.__r=function(e){W&&W(e),U=0;var t=(F=e.__c).__H;t&&(L===F?(t.__h=[],F.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=B,e.__N=e.i=void 0}))):(t.__h.forEach(u),t.__h.forEach(_),t.__h=[])),L=F},M.YM.diffed=function(e){q&&q(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==R.push(t)&&Y===M.YM.requestAnimationFrame||((Y=M.YM.requestAnimationFrame)||c)(l)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==B&&(e.__=e.__V),e.i=void 0,e.__V=B}))),L=F=null},M.YM.__c=function(e,t){t.some((function(e){try{e.__h.forEach(u),e.__h=e.__h.filter((function(e){return!e.__||_(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],M.YM.__e(n,e.__v)}})),J&&J(e,t)},M.YM.unmount=function(e){z&&z(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{u(e)}catch(e){t=e}})),n.__H=void 0,t&&M.YM.__e(t,n.__v))};var K,Q,X="function"==typeof requestAnimationFrame,G=void 0,Z=void 0,ee=0,te=0,ne=0;y.prototype.h=function(){return!0},y.prototype.S=function(e){this.t!==e&&void 0===e.e&&(e.x=this.t,void 0!==this.t&&(this.t.e=e),this.t=e)},y.prototype.U=function(e){var t=e.e,n=e.x;void 0!==t&&(t.x=n,e.e=void 0),void 0!==n&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)},y.prototype.subscribe=function(e){var t=this;return S((function(){var n=t.value,o=32&this.f;this.f&=-33;try{e(n)}finally{this.f|=o}}))},y.prototype.valueOf=function(){return this.value},y.prototype.toString=function(){return this.value+""},y.prototype.peek=function(){return this.v},Object.defineProperty(y.prototype,"value",{get:function(){var e=m(this);return void 0!==e&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){te>100&&d(),this.v=e,this.i++,ne++,ee++;try{for(var t=this.t;void 0!==t;t=t.x)t.t.N()}finally{p()}}}}),(k.prototype=new y).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f))return!0;if(this.f&=-5,this.g===ne)return!0;if(this.g=ne,this.f|=1,this.i>0&&!b(this))return this.f&=-2,!0;var e=G;try{C(this),G=this;var t=this.x();(16&this.f||this.v!==t||0===this.i)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return G=e,x(this),this.f&=-2,!0},k.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t)}y.prototype.S.call(this,e)},k.prototype.U=function(e){if(y.prototype.U.call(this,e),void 0===this.t){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t)}},k.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;void 0!==e;e=e.x)e.t.N()}},k.prototype.peek=function(){if(this.h()||d(),16&this.f)throw this.v;return this.v},Object.defineProperty(k.prototype,"value",{get:function(){1&this.f&&d();var e=m(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),j.prototype.c=function(){var e=this.S();try{8&this.f||void 0===this.x||(this.u=this.x())}finally{e()}},j.prototype.S=function(){1&this.f&&d(),this.f|=1,this.f&=-9,I(this),C(this),ee++;var e=G;return G=this,w.bind(this,e)},j.prototype.N=function(){2&this.f||(this.f|=2,this.o=Z,Z=this)},j.prototype.d=function(){this.f|=8,1&this.f||D(this)},O.displayName="_st",Object.defineProperties(y.prototype,{constructor:{configurable:!0},type:{configurable:!0,value:O},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),P("__b",(function(e,t){if("string"==typeof t.type){var n,o=t.props;for(var r in o)if("children"!==r){var i=o[r];i instanceof y&&(n||(t.__np=n={}),n[r]=i,o[r]=i.peek())}}e(t)})),P("__r",(function(e,t){E();var n,o=t.__c;o&&(o.__$f&=-2,void 0===(n=o.__$u)&&(o.__$u=n=function(){var e;return S((function(){e=this})),e.c=function(){o.__$f|=1,o.setState({})},e}())),K=o,E(n),e(t)})),P("__e",(function(e,t,n,o){E(),K=void 0,e(t,n,o)})),P("diffed",(function(e,t){var n;if(E(),K=void 0,"string"==typeof t.type&&(n=t.__e)){var o=t.__np,r=t.props;if(o){var i=n.U;if(i)for(var s in i){var a=i[s];void 0===a||s in o||(a.d(),i[s]=void 0)}else n.U=i={};for(var l in o){var c=i[l],u=o[l];void 0===c?(c=T(n,l,u,r),i[l]=c):c.o(u,r)}}}e(t)})),P("unmount",(function(e,t){if("string"==typeof t.type){var n=t.__e;if(n){var o=n.U;if(o)for(var r in n.U=void 0,o){var i=o[r];i&&i.d()}}}else{var s=t.__c;if(s){var a=s.__$u;a&&(s.__$u=void 0,a.d())}}e(t)})),P("__h",(function(e,t,n,o){o<3&&(t.__$f|=2),e(t,n,o)})),M.wA.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u;if(!(n&&void 0!==n.s||4&this.__$f))return!0;if(3&this.__$f)return!0;for(var o in t)return!0;for(var r in e)if("__source"!==r&&e[r]!==this.props[r])return!0;for(var i in this.props)if(!(i in e))return!0;return!1};const oe="command-box__X2C1t",re=new Uint32Array(2),ie=()=>(crypto.getRandomValues(re),("0000000"+re[0].toString(32)).slice(-7)+("0000000"+re[1].toString(32)).slice(-7)),se=(e,t="New Character")=>{h((()=>{const n=ie();e.chars.value=[...e.chars.value,{id:n,name:t,color:16777215}],e.currentCharID.value=n}))},ae=e=>{h((()=>{const t={messages:[],id:ie(),name:"New Convo"};e.convos.value={...e.convos.value,[t.id]:t},e.convoIDs.value=[...e.convoIDs.value,t.id],e.currentConvoID.value=t.id}))},le=(e,t,n)=>{h((()=>{null===e.currentConvoID.value&&ae(e),null===e.currentCharID.value&&se(e);const o=e.convos.value[e.currentConvoID.value],r=o.messages.slice(0),i={authorID:e.currentCharID.value,contents:t,id:ie()};"number"==typeof n?r.splice(n,0,i):r.push(i),e.convos.value={...e.convos.value,[e.currentConvoID.value]:{...o,messages:r}}}))},ce=(e,t,n,o)=>{const r=e.convos.value[t],i=r.messages.slice(0);i[n]={...i[n],contents:o},e.convos.value={...e.convos.value,[t]:{...r,messages:i}}},ue=(e,t)=>{e.currentCharID.value=t},_e=({projectName:e,version:t,convos:n,chars:o})=>JSON.stringify({projectName:e,version:t,convos:n,chars:o});var ve=e(454);const fe={properties:{version:{type:"uint32"},projectName:{type:"string"},convos:{elements:{properties:{messages:{elements:{properties:{authorID:{type:"string"},contents:{type:"string"},id:{type:"string"}}}},id:{type:"string"},name:{type:"string"}}}},chars:{elements:{properties:{id:{type:"string"},name:{type:"string"},color:{type:"uint32"}}}}}},de=e=>(0,ve.validate)(fe,e),pe=(e,t)=>{h((()=>{const n={};for(const e of t.convos)n[e.id]=e;e.projectName.value=t.projectName,e.convos.value=n,e.convoIDs.value=t.convos.map((e=>e.id)),e.chars.value=t.chars,e.currentConvoID.value=null}))},he=(()=>{const e={version:g(2),projectName:g("New Project"),convos:g({}),convoIDs:g([]),chars:g([]),currentConvoID:g(null),currentCharID:g(null),editedMessageID:g(null),editedConvoID:g(null),editedCharID:g(null),exportedConvoID:g(null),toBeReplacedCharID:g(null),insertAboveMessageID:g(null),exportConvoSettings:{wrapTextEnabled:g(!1),wrapTextLength:g(80),justifyEnabled:g(!0),justifySide:g("left")}};(e=>{const t=localStorage.getItem("store");if(!t)return;const n=JSON.parse(t);if(1===n.version){const e=n.convos;n.convos={},n.convoIDs=[];for(const t of e)n.convos[t.id]=t,n.convoIDs.push(t.id);n.version=2}2===n.version&&(h((()=>{e.convos.value=n.convos,e.convoIDs.value=n.convoIDs,e.chars.value=n.chars,e.projectName.value=n.projectName})),localStorage.removeItem("store"))})(e);const t=localStorage.getItem("autosave");if(t){const n=JSON.parse(t);0===de(n).length&&pe(e,n)}return e})();S((()=>{const{projectName:e,convos:t,convoIDs:n,chars:o}=he,r=_e({projectName:e.value,version:1,convos:n.value.map((e=>t.value[e])),chars:o.value});localStorage.setItem("autosave",r)}));const me=(0,M.kr)(he),ye=()=>a(me),ge=e=>{const t=a(me);return i((()=>e.bind(null,t)),[t])};var be=e(609).h;const Ce=({beforeMessage:e})=>{const{currentCharID:t,chars:o,currentConvoID:i,convos:s}=ye(),a=ge(se),l=ge(le),c=ge(ce),u=ge(ue),_=r(null),[v,f]=n("");return be("textarea",{className:oe,onKeyPress:n=>{if("Enter"===n.code&&!n.shiftKey){n.preventDefault();let r=v;const _=/([^:]+):(?:\s+)(.+)/g.exec(r);if(_){const e=_[1],t=e.toLowerCase(),n=o.value.find((e=>e.name.toLowerCase()===t));n?u(n.id):a(e),r=_[2]}const d=/^s\/([^/]+)\/([^/]+)\/?$/.exec(r);if(d){const{messages:n}=s.value[i.value];for(let o=e||n.length-1;o>=0;o--)if(n[o].authorID===t.value)return c(i.value,o,n[o].contents.split(d[1]).join(d[2])),void f("")}return f(""),void l(r,e)}},onInput:e=>{f(e.target.value)},onKeyDown:e=>{if("Tab"===e.code){e.preventDefault();const t=v.toLowerCase();if(-1===t.indexOf(":")&&null===_.current&&(_.current={characters:o.value.filter((e=>e.name.toLowerCase().startsWith(t))),index:0}),!_.current||0===_.current.characters.length)return;const n=_.current.characters[_.current.index];_.current.index=(_.current.index+1)%_.current.characters.length,f(`${n.name}: `)}else _.current=null},value:v})},xe={divider:"divider__l7yCf",character:"character__atbwd",active:"active__DI5ru","character-name":"character-name__aOTHW",characterName:"character-name__aOTHW"},ke="icon__l3rTB",Ne="icon-button__HjReh",Ie="disabled__GoHq2",De="delete__zP7dI",we="edit__i_k8T",je="insert-above__ENi4b",Se="load__hUYQ8",Pe="save__iEoYK",Ee="export__aEQp2";var Oe=e(588),Te=e.n(Oe);const Ae=(e,t,n)=>h((()=>{const o=e.chars.value,r=o.findIndex((e=>e.id===t));e.chars.value=o.filter((e=>e.id!==t)),e.currentCharID.value=n||(1===o.length?null:r===o.length-1?o[o.length-2].id:o[r+1].id)})),Me=(e,t)=>{e.editedCharID.value=t},He=(e,t)=>{e.toBeReplacedCharID.value=t},Ue=e=>"#"+("000000"+e.toString(16)).slice(-6);var Fe=e(609).h,Le=e(609).HY;const Ye=({char:e,active:t,onClick:n,onEdit:o,onDelete:r})=>i((()=>Fe("div",{className:Te()(xe.character,{[xe.active]:t}),onClick:n&&(()=>n(e))},Fe("div",{className:xe.characterName,style:`color: ${Ue(e.color)}`},e.name),Fe("div",{className:Te()(xe.edit,ke,Ne,we),onClick:o&&(()=>o(e))}),Fe("div",{className:Te()(xe.delete,ke,Ne,De,{[Ie]:!r}),onClick:r?()=>r(e):void 0}))),[e,t,n,o,r]),$e=()=>{const{chars:e,currentCharID:t,convos:n,currentConvoID:o}=ye(),r=ge(Ae),i=ge(ue),a=ge(Me),l=ge(He),{charsInConvo:c,charsNotInConvo:u}=A((()=>{const t=new Set;if(null!==o.value){const e=n.value[o.value];for(const n of e.messages)t.add(n.authorID)}const r=[],i=[];for(const n of e.value)t.has(n.id)?r.push(n):i.push(n);return{charsInConvo:r,charsNotInConvo:i}})).value,_=s((e=>{i(e.id)}),[i]),v=s((e=>{a(e.id)}),[a]),f=s((e=>{for(const t of Object.values(n.value))for(const n of t.messages)if(n.authorID===e.id)return void l(e.id);r(e.id)}),[l,r,n]);return Fe("div",{className:xe.characterList},c.length>0&&Fe(Le,null,Fe("div",{className:xe.divider},"Characters in current convo:"),Fe("div",{className:xe.characterSublist},c.map((n=>Fe(Ye,{key:n.id,char:n,active:n.id===t.value,onClick:_,onEdit:v,onDelete:e.value.length>1?f:void 0}))))),u.length>0&&Fe(Le,null,Fe("div",{className:xe.divider},"Other characters:"),Fe("div",{className:xe.characterSublist},u.map((n=>Fe(Ye,{key:n.id,char:n,active:n.id===t.value,onClick:_,onEdit:v,onDelete:e.value.length>1?f:void 0}))))))},Re="character-settings__JgFDc",Be="row__zLuUf",Ve="label__T8d04",We="control__C6kFJ",qe=(e,t,n)=>{e.chars.value=e.chars.value.map((e=>e.id!==t?e:{...e,...n}))};var Je=e(609).h;const ze=()=>{const{editedCharID:e,chars:t}=ye(),n=ge(qe),o=t.value.find((t=>t.id===e.value));return o?Je("div",{className:Re},Je("div",{className:Be},Je("div",{className:Ve},"Character name"),Je("input",{type:"text",className:We,value:o.name,onChange:t=>{e.value&&n(e.value,{name:t.target.value})}})),Je("div",{className:Be},Je("div",{className:Ve},"Character color"),Je("input",{type:"color",className:We,value:Ue(o.color),onChange:t=>{e.value&&n(e.value,{color:parseInt(t.target.value.slice(1),16)})}}))):null},Ke="convo-list__j6Sov",Qe="convos__BRQXe",Xe="convo__bZVJO",Ge="active__JExB6",Ze="convo-name__c8nBG",et="add-convo-wrapper__U_hhq",tt=(e,t)=>{h((()=>{const{[t]:n,...o}=e.convos.value,r=e.convoIDs.value.findIndex((e=>e===t));e.convos.value=o,e.convoIDs.value=e.convoIDs.value.filter((e=>e!==t)),e.currentConvoID.value=0===e.convoIDs.value.length?null:r===e.convoIDs.value.length?e.convoIDs.value[r-1]:e.convoIDs.value[r]}))},nt=(e,t,n)=>{e.convos.value={...e.convos.value,[t]:{...e.convos.value[t],name:n}}},ot=(e,t)=>{e.currentConvoID.value=t},rt=(e,t)=>{e.editedConvoID.value=void 0===t?e.convos.value[e.currentConvoID.value].id:t},it=(e,t)=>{e.exportedConvoID.value=t};var st=e(609).h;const at=({convo:{id:e,name:t}})=>{const{currentConvoID:n,editedConvoID:s}=ye(),a=ge(nt),l=ge(ot),c=ge(rt),u=ge(it),_=ge(tt),v=n.value===e,f=s.value===e,d=r(f),p=r(null);return o((()=>{!d.current&&f&&null!==p.current&&p.current.focus(),d.current=f})),i((()=>st("div",{className:Te()(Xe,{[Ge]:v}),onClick:l.bind(null,e)},st("div",{className:Ze},f?st("input",{type:"text",value:t,onInput:t=>a(e,t.target.value),onKeyPress:e=>{"Enter"===e.code&&c(null)},onBlur:()=>c(null),ref:p}):t),st("div",{className:Te()(ke,Ne,Ee),onClick:t=>{t.stopPropagation(),u(e)}}),st("div",{className:Te()(ke,Ne,we),onClick:t=>{t.stopPropagation(),c(e)}}),st("div",{className:Te()(ke,Ne,De),onClick:t=>{t.stopPropagation(),_(e)}}))),[e,t,v,f,p,a,l,c,u,_])},lt=()=>{const{convos:e,convoIDs:t}=ye(),n=ge(ae),o=A((()=>t.value.map((t=>st(at,{key:t,convo:e.value[t]}))))).value,r=i((()=>n.bind(null)),[n]);return i((()=>st("div",{className:Ke},st("div",{className:Qe},o),st("div",{className:et},st("button",{onClick:r},"Add Convo")))),[o,r])},ct={"export-title":"export-title__Kqtsy",exportTitle:"export-title__Kqtsy",row:"row__cbCwA"},ut=(e,t)=>{e.exportConvoSettings.wrapTextEnabled.value=t},_t=(e,t)=>{e.exportConvoSettings.wrapTextLength.value=t},vt=(e,t)=>{e.exportConvoSettings.justifyEnabled.value=t},ft=(e,t)=>{e.exportConvoSettings.justifySide.value=t},dt=(e,t)=>{const n=document.createElement("a"),o=URL.createObjectURL(new Blob([t]));n.href=o,n.download=e,n.click(),setTimeout((()=>{window.URL.revokeObjectURL(o)}),0)};var pt=e(609).h;const ht=()=>{const{convos:e,exportedConvoID:t,chars:n,exportConvoSettings:o}=ye(),{wrapTextEnabled:r,wrapTextLength:i,justifyEnabled:s,justifySide:a}=o,l=ge(ut),c=ge(_t),u=ge(vt),_=ge(ft),v=e=>{_(e.target.value)};if(!t.value)return null;return pt("div",{className:ct.exportModal},pt("div",{className:ct.exportTitle},"Export ",`"${e.value[t.value].name}"`),pt("div",{className:ct.row},pt("label",null,pt("input",{type:"checkbox",checked:r,onChange:e=>{l(e.target.checked)}}),"Wrap text at "),pt("input",{type:"number",min:0,onChange:e=>{const t=parseInt(e.target.value);Number.isFinite(t)&&c(t)},disabled:!r,value:i})," chars"),pt("div",{className:ct.row},pt("label",null,pt("input",{type:"checkbox",checked:s,onChange:e=>{u(e.target.checked)}}),"Justify usernames "),pt("label",null,pt("input",{type:"radio",onClick:v,checked:"left"===a.value,disabled:!s,value:"left"})," Left"),pt("label",null,pt("input",{type:"radio",onClick:v,checked:"right"===a.value,disabled:!s,value:"right"})," Right")),pt("div",{className:ct.row},pt("button",{onClick:()=>{if(!t.value)return;const o=e.value[t.value],l=new Set;for(const e of o.messages)l.add(e.authorID);const c=Array.from(l).reduce(((e,t)=>Math.max(e,n.value.find((e=>e.id===t))?.name.length??0)),0),u=[];for(const e of o.messages){const t=n.value.find((t=>t.id===e.authorID))?.name??"Unknown character";let o=`<${t}> `;if(s.value){const e=" ".repeat(c-t.length);"left"===a.value?o+=e:o=e+o}let l=o;if(r.value){const t=/([^\s]+)(\s|$)/g;let n;for(t.lastIndex=0;null!==(n=t.exec(e.contents));)l.length+n[1].length<=i.value?l+=n[0]:(u.push(l.trimEnd()),l=" ".repeat(o.length)+n[0]);l.trimEnd().length>0&&u.push(l.trimEnd())}else u.push(l+e.contents)}const _=u.join("\n");dt(`${o.name}.txt`,_)}},"Export")))},mt="messages__QvVmW",yt="messages-inner__T5ymp",gt="insert-box__BVqQD",bt="close-wrapper__Lige8",Ct="close-positioner__F_Vfd",xt="command-box-wrapper__dWK1s",kt={message:"message__uH2iI",buttons:"buttons__tpv1D",contents:"contents__bXbLz",author:"author__bTxVP","message-edit-wrapper":"message-edit-wrapper__Uq_as",messageEditWrapper:"message-edit-wrapper__Uq_as","message-edit-area":"message-edit-area__UcstZ",messageEditArea:"message-edit-area__UcstZ"},Nt="searchable-menu__MRzCU",It="search-bar__lDaLX",Dt="items__BvMBg",wt="item__YnleD";var jt=e(609).h;const St=({items:e,x:t,y:a,onDismiss:l,onClickItem:c})=>{const[u,_]=n(""),v=r(null);o((()=>{v.current&&v.current.focus()}),[]);const f=s((e=>{_(e.target.value)}),[_]),d=s((e=>{!e.currentTarget.contains(e.relatedTarget)&&l&&l()}),[l]);return i((()=>jt("div",{className:Nt,style:{top:`${a}px`,left:`${t}px`,maxHeight:`calc(100vh - ${a}px)`},onfocusout:d,tabIndex:0},jt("div",{className:It},jt("input",{type:"text",onInput:f,ref:v})),jt("div",{className:Dt},e.map((e=>-1===e.value.toLowerCase().indexOf(u)?null:jt("div",{className:wt,key:e.id,onClick:c?c.bind(void 0,e.id):void 0},e.value)))))),[e,t,a,u,f,d])},Pt=(e,t)=>{const n=e.convos.value[e.currentConvoID.value],o=n.messages.slice(0);o.splice(t,1),e.convos.value={...e.convos.value,[n.id]:{...n,messages:o}}},Et=(e,t,n,o)=>{const r=e.convos.value[t],i=r.messages.slice(0);i[n]={...i[n],authorID:o},e.convos.value={...e.convos.value,[t]:{...r,messages:i}}},Ot=(e,t)=>{e.editedMessageID.value=t},Tt=(e,t)=>{e.insertAboveMessageID.value=t};var At=e(609).h;const Mt=({message:e,convoID:t,index:a,elemRef:l})=>{const{chars:c,editedMessageID:u,insertAboveMessageID:_}=ye(),v=ge(Pt),f=ge(ce),d=ge(Et),p=ge(Ot),h=ge(Tt),{id:m,authorID:y,contents:g}=e,b=m===u.value,C=r(b),x=i((()=>c.value.find((e=>e.id===y))||{color:16777215,name:"Unknown Character"}),[c.value,y]),k=r(null),[N,I]=n(null);o((()=>{!C.current&&b&&k.current&&k.current.focus(),C.current=b}));const D=s((e=>{d(t,a,e),I(null)}),[d,I,t,a]),w=s((()=>{I(null)}),[I]),j=i((()=>N?At(St,{items:c.value.map((({id:e,name:t})=>({id:e,value:t}))),x:N.x,y:N.y,onDismiss:w,onClickItem:D}):null),[c.value,N]);return i((()=>At("div",{className:kt.message,ref:l},At("div",{className:kt.author,style:`color: ${Ue(x.color)}`,onClick:e=>{const{x:t,y:n,height:o}=e.target.getBoundingClientRect();I((e=>null===e?{x:t,y:n+o}:null))}},x.name),At("div",{className:Te()(kt.contents,{[kt.editable]:b})},b?At("div",{className:kt.messageEditWrapper},At("textarea",{className:kt.messageEditArea,onKeyPress:e=>{"Enter"===e.code&&!e.shiftKey&&k.current&&(f(t,a,k.current.value),p(null))},onBlur:()=>{k.current&&(f(t,a,k.current.value),p(null))},tabIndex:0,ref:k,value:g})):g),At("div",{className:kt.buttons},At("div",{className:Te()(ke,Ne,je),title:"Insert above",onClick:()=>h(_.value===m?null:m)}),At("div",{className:Te()(ke,Ne,we),title:"Edit",onClick:()=>p(u.value===m?null:m)}),At("div",{className:Te()(ke,Ne,De),title:"Delete",onClick:()=>v(a)})),j)),[x,D,w,j,b])};var Ht=e(609).h;const Ut=({convo:e})=>{const{insertAboveMessageID:t}=ye(),n=ge(Tt),s=r(null),a=e?.messages,l=r(a);o((()=>{const e=l.current;e&&a&&e.length+1===a.length&&e[e.length-1]!==a[a.length-1]&&s.current&&s.current.scrollIntoView(),l.current=a}));const c=i((()=>{const o=[];if(a)for(let r=0;r<a.length;r++){const i=a[r];t.value===i.id&&o.push(Ht("div",{className:gt},Ht("div",{className:bt},Ht("div",{className:Ct},Ht("div",{className:Te()(ke,Ne,De),title:"Close",onClick:()=>n(null)}))),Ht("div",{className:xt},Ht(Ce,{beforeMessage:r})))),o.push(Ht(Mt,{convoID:e.id,message:i,key:i.id,index:r,elemRef:r===a.length-1?s:void 0}))}return o}),[a,e?.id]);return Ht("div",{className:mt},Ht("div",{className:yt},c))},Ft="modal-bg__m0HV5",Lt="modal-positioner__JC0aj",Yt="modal__ulBpF";var $t=e(609).h,Rt=e(609).HY;const Bt=({onClose:e,children:t})=>$t(Rt,null,$t("div",{className:Ft,onClick:e}),$t("div",{className:Lt},$t("div",{className:Yt},t))),Vt={"project-bar":"project-bar__jqnP4",projectBar:"project-bar__jqnP4","project-name":"project-name__uuERj",projectName:"project-name__uuERj",button:"button__MAT5s",error:"error__vb_Q8"},Wt=(e,t)=>{e.projectName.value=t};var qt=e(609).h;const Jt=()=>{const{version:e,projectName:t,convos:o,chars:r}=ye(),i=ge(pe),s=ge(Wt),[a,l]=n(null);return qt("div",{className:Vt.projectBar},qt("input",{className:Vt.projectName,type:"text",value:t,onInput:e=>s(e.target.value)}),qt("div",{className:Te()(Vt.button,ke,Ne,Pe),title:"Save",onClick:()=>dt(`${t.value}.json`,_e({version:e.value,projectName:t.value,convos:Array.from(Object.values(o.value)),chars:r.value}))}),qt("div",{className:Te()(Vt.button,ke,Ne,Se),title:"Load",onClick:()=>{const e=document.createElement("input");e.type="file",e.addEventListener("change",(e=>{const t=e.target.files;if(t?.length){const e=new FileReader;e.addEventListener("load",(()=>{try{const t=JSON.parse(e.result);if(de(t).length>0)throw new Error("Invalid JSON");i(t)}catch(e){l(e)}})),e.readAsText(t[0])}})),e.click()}}),a?qt("div",{className:Vt.error},qt("span",{className:Vt.errorMessage},a.message),qt("div",{className:Te()(ke,Ne,De),onClick:()=>l(null)})):null)},zt={row:"row__etbb0",label:"label__wCXFO"},Kt=(e,t,n)=>{const o={};for(const r of Object.values(e.convos.value)){let e=!1,{messages:i}=r;for(let o=0;o<i.length;o++){const r=i[o];r.authorID===t&&(e||(e=!0,i=i.slice(0)),i[o]={...r,authorID:n})}o[r.id]=e?{...r,messages:i}:r}e.convos.value=o};var Qt=e(609).h;const Xt=()=>{const{chars:e,toBeReplacedCharID:t}=ye(),o=ge(Ae),r=ge(Kt),i=ge(He),[s,a]=n(void 0);return Qt("div",{className:zt.replaceCharacter},Qt("div",{className:zt.row},Qt("div",{className:zt.label},"Replace character ",Qt("span",{className:zt.oldCharacterName}," with:")),Qt("select",{onChange:e=>a(e.target.value),value:s??void 0},e.value.map((e=>e.id===t.value?null:Qt("option",{value:e.id},e.name))))),Qt("div",null,Qt("button",{onClick:()=>{t.value&&s&&(r(t.value,s),o(t.value,s),i(null))},disabled:void 0===s},"Replace")))};var Gt=e(609).h,Zt=e(609).HY;const en=()=>{const{convos:e,currentConvoID:t,editedCharID:n,toBeReplacedCharID:o,exportedConvoID:r}=ye(),s=ge(Me),a=ge(He),l=ge(it),c=i((()=>Gt("div",{className:H.projectBarPane},Gt(Jt,null))),[]),u=i((()=>Gt("div",{className:H.convosPane},Gt(lt,null))),[]),_=i((()=>Gt("div",{className:H.commandBoxPane},Gt(Ce,null))),[]),v=i((()=>Gt("div",{className:H.charactersPane},Gt($e,null))),[]),f=A((()=>Gt(Zt,null,null!==n.value?Gt(Bt,{onClose:()=>s(null)},Gt(ze,null)):null,null!==o.value?Gt(Bt,{onClose:()=>a(null)},Gt(Xt,null)):null,null!==r.value?Gt(Bt,{onClose:()=>l(null)},Gt(ht,null)):null))).value;return Gt("div",{className:H.app},c,Gt("div",{className:H.appPane},u,Gt("div",{className:H.messagesPane},Gt(Ut,{convo:null!==t.value?e.value[t.value]:void 0}),_),Gt("div",{className:H.charactersPane},v)),f)};var tn=e(609).h;(0,M.sY)(tn((()=>tn(me.Provider,{value:he},tn(en,null))),null),document.body)})()})();
//# sourceMappingURL=main.6d6b6.js.map