!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s="mdyV")}({"+bXj":function(e,t,n){"use strict";(function(e){var r=n("Uvu/"),o=n("yTKo"),s=n("hosL"),i=n("UQAG"),a=n("8Jek"),c=n.n(a),l=n("0odJ"),u=n("D9g8"),p=n("S07r"),h=n("h2tO"),d=n("hQme");t.a=Object(i.connect)(["convos","currentConvoIndex","editedConvoID"],{createConvo:l.a,setCurrentConvoIndex:h.a,setEditedConvo:d.a,setConvoName:p.a,deleteConvo:u.a})(class extends s.Component{constructor(e){super(e),this.onAddConvo=this.onAddConvo.bind(this),this.onEditConvo=this.onEditConvo.bind(this),this.onConvoEditKeyPress=this.onConvoEditKeyPress.bind(this),this.onConvoEditBlur=this.onConvoEditBlur.bind(this),this.editedConvoRef=Object(s.createRef)()}onAddConvo(){this.props.createConvo(),this.props.setEditedConvo()}onClickConvo(e){this.props.setCurrentConvoIndex(e)}onEditConvo(e,t){t.stopPropagation(),this.props.setEditedConvo(e)}onDeleteConvo(e,t){t.stopPropagation(),this.props.deleteConvo(e)}onConvoEditKeyPress(e){"Enter"===e.code&&this.props.setEditedConvo(null)}onConvoEditBlur(){this.props.setEditedConvo(null)}updateConvoName(e,t){this.props.setConvoName(e,t.target.value)}componentDidUpdate(e){this.props.editedConvoID&&e.editedConvoID!==this.props.editedConvoID&&this.editedConvoRef.current&&(this.editedConvoRef.current.focus(),this.editedConvoRef.current.select())}render(){const{convos:t,currentConvoIndex:n}=this.props;return e("div",{className:r.a["convo-list"]},e("div",{className:r.a.convos},t.map(((t,s)=>e("div",{className:c()(r.a.convo,{[r.a.active]:n===s}),key:t.id,onClick:this.onClickConvo.bind(this,s)},e("div",{className:r.a["convo-name"]},this.props.editedConvoID===t.id?e("input",{type:"text",value:t.name,onInput:this.updateConvoName.bind(this,t.id),onKeyPress:this.onConvoEditKeyPress,onBlur:this.onConvoEditBlur,ref:this.editedConvoRef}):t.name),e("div",{className:c()(r.a.edit,o.a.icon,o.a["icon-button"],o.a.edit),onClick:this.onEditConvo.bind(this,t.id)}),e("div",{className:c()(r.a.delete,o.a.icon,o.a["icon-button"],o.a.delete),onClick:this.onDeleteConvo.bind(this,s)}))))),e("div",{className:r.a["add-convo-wrapper"]},e("button",{onClick:this.onAddConvo},"Add Convo")))}})}).call(this,n("hosL").h)},"/f2m":function(e,t){"use strict";t.a=(e,t)=>({convos:t.convos,chars:t.chars,currentConvoIndex:-1,currentCharID:null,editedMessageID:null,editedConvoID:null,editedCharID:null,toBeReplacedCharID:null})},"04Fd":function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n("5x3I"),a=n("0odJ"),c=n("2hU4");t.a=(e,t,n)=>(-1===e.currentConvoIndex&&(e=o(o({},e),Object(a.a)(e))),null===e.currentCharID&&(e=o(o({},e),Object(c.a)(e))),o(o({},e),{},{convos:e.convos.map(((r,s)=>{if(s!==e.currentConvoIndex)return r;const a=r.messages.slice(0),c={authorID:e.currentCharID,contents:t,id:Object(i.a)()};return n?a.splice(n,0,c):a.push(c),o(o({},r),{},{messages:a})}))}))},"0odJ":function(e,t,n){"use strict";var r=n("5x3I");t.a=e=>({convos:[...e.convos,{messages:[],id:Object(r.a)(),name:"New Convo"}],currentConvoIndex:e.convos.length})},"2hU4":function(e,t,n){"use strict";var r=n("5x3I");t.a=(e,t="New Character")=>{const n=Object(r.a)();return{chars:[...e.chars,{id:n,name:t,color:16777215}],currentCharID:n}}},"3Ov2":function(){},"3Ufl":function(e,t){"use strict";t.a={row:"row__JJVPS",label:"label__1esP_"}},"4HEG":function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t)=>({convos:e.convos.map(((n,o)=>o!==e.currentConvoIndex?n:r(r({},n),{},{messages:n.messages.filter(((e,n)=>n!==t))})))})},"4omB":function(e,t,n){"use strict";(function(e){var r=n("ZQP2"),o=n("yTKo"),s=n("UQAG"),i=n("8Jek"),a=n.n(i),c=n("omBr"),l=n("s3hk"),u=n("ZKFM");t.a=Object(s.connect)(["insertAboveMessageID"],{setInsertAboveMessageID:u.a})((({messages:t,insertAboveMessageID:n,setInsertAboveMessageID:s})=>{const i=[];if(t)for(let u=0;u<t.length;u++){const p=t[u];n===p.id&&i.push(e("div",{className:r.a["insert-box"]},e("div",{className:r.a["close-wrapper"]},e("div",{className:r.a["close-positioner"]},e("div",{className:a()(o.a.icon,o.a["icon-button"],o.a.delete),title:"Close",onClick:()=>s(null)}))),e("div",{className:r.a["command-box-wrapper"]},e(c.a,{beforeMessage:u})))),i.push(e(l.a,{message:p,key:p.id,index:u}))}return e("div",{className:r.a.messages},e("div",{className:r.a["messages-inner"]},i))}))}).call(this,n("hosL").h)},"5/DW":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(\.\d+)?([zZ]|((\+|-)(\d{2}):(\d{2})))$/;t.default=function(e){const t=e.match(n);if(null===t)return!1;const o=parseInt(t[1],10),s=parseInt(t[2],10),i=parseInt(t[3],10),a=parseInt(t[4],10),c=parseInt(t[5],10),l=parseInt(t[6],10);return!(s>12)&&(!(i>function(e,t){if(2===t)return(n=e)%4!=0||n%100==0&&n%400!=0?28:29;var n;return r[t]}(o,s))&&(!(a>23)&&(!(c>59)&&!(l>60))))};const r=[0,31,0,31,30,31,30,31,31,30,31,30,31]},"5x3I":function(e,t){"use strict";const n=new Uint32Array(1);t.a=()=>(crypto.getRandomValues(n),("00000000"+n[0].toString(16)).slice(-8))},"7Pee":function(e,t){"use strict";t.a=(e,t)=>({editedCharID:t})},"7sUR":function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t,n)=>{for(let o=0;o<e.convos.length;o++){const s=e.convos[o];for(let i=0;i<s.messages.length;i++){const a=s.messages[i];if(a.id===t){const t=e.convos.slice(0),c=s.messages.slice(0);return c[i]=r(r({},a),{},{contents:n}),t[o]=r(r({},s),{},{messages:c}),{convos:t}}}}}},"8Jek":function(e,t){var n;!function(){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var i=r.apply(null,n);i&&e.push(i)}}else if("object"===s)if(n.toString===Object.prototype.toString)for(var a in n)o.call(n,a)&&n[a]&&e.push(a);else e.push(n.toString())}}return e.join(" ")}var o={}.hasOwnProperty;e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},"8pl+":function(e,t){"use strict";t.a=(e,t)=>({currentCharID:t})},"9KuC":function(e,t,n){"use strict";var r=n("fdQA");const o={properties:{version:{type:"uint32"},projectName:{type:"string"},convos:{elements:{properties:{messages:{elements:{properties:{authorID:{type:"string"},contents:{type:"string"},id:{type:"string"}}}},id:{type:"string"},name:{type:"string"}}}},chars:{elements:{properties:{id:{type:"string"},name:{type:"string"},color:{type:"uint32"}}}}}};t.a=e=>Object(r.validate)(o,e)},BuAb:function(e,t){"use strict";function n(e){return"ref"in e}function r(e){return"enum"in e}function o(e){return"elements"in e}function s(e){return"properties"in e||"optionalProperties"in e}function i(e){return"values"in e}function a(e){return"discriminator"in e}var c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.isSchema=t.isValidSchema=t.isDiscriminatorForm=t.isValuesForm=t.isPropertiesForm=t.isElementsForm=t.isEnumForm=t.isTypeForm=t.isRefForm=t.isEmptyForm=void 0,t.isEmptyForm=function(e){const t=c(e,["definitions","nullable","metadata"]);return 0===Object.keys(t).length},t.isRefForm=n,t.isTypeForm=function(e){return"type"in e},t.isEnumForm=r,t.isElementsForm=o,t.isPropertiesForm=s,t.isValuesForm=i,t.isDiscriminatorForm=a,t.isValidSchema=function e(t,c){if(void 0===c&&(c=t),void 0!==t.definitions){if(c!==t)return!1;for(const n of Object.values(t.definitions))if(!e(n,c))return!1}if(n(t)&&!(t.ref in(c.definitions||{})))return!1;if(r(t)){if(0===t.enum.length)return!1;if(t.enum.length!==new Set(t.enum).size)return!1}if(o(t))return e(t.elements,c);if(s(t)){for(const n of Object.values(t.properties||{}))if(!e(n,c))return!1;for(const n of Object.values(t.optionalProperties||{}))if(!e(n,c))return!1;for(const e of Object.keys(t.properties||{}))if(e in(t.optionalProperties||{}))return!1}if(i(t))return e(t.values,c);if(a(t))for(const n of Object.values(t.mapping)){if(!e(n,c)||!s(n))return!1;if(n.nullable)return!1;if(t.discriminator in(n.properties||{}))return!1;if(t.discriminator in(n.optionalProperties||{}))return!1}return!0};const l=[[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!0,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!0,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!0,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!0,!1,!1,!1,!1],[!1,!1,!1,!1,!0,!1,!0,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!0,!1,!1,!1],[!1,!1,!1,!1,!0,!0,!0,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!0,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!0,!0]],u=["boolean","float32","float64","int8","uint8","int16","uint16","int32","uint32","string","timestamp"];t.isSchema=function e(t){if("object"!=typeof t||Array.isArray(t)||null===t)return!1;const n=t,{definitions:r,nullable:o,metadata:s,ref:i,type:a,enum:p,elements:h,properties:d,optionalProperties:f,additionalProperties:_,values:v,discriminator:m,mapping:b}=n,g=c(n,["definitions","nullable","metadata","ref","type","enum","elements","properties","optionalProperties","additionalProperties","values","discriminator","mapping"]),y=[void 0!==i,void 0!==a,void 0!==p,void 0!==h,void 0!==d,void 0!==f,void 0!==_,void 0!==v,void 0!==m,void 0!==b];let C=!1;for(const e of l)C=C||e.every(((e,t)=>e===y[t]));if(!C)return!1;if(void 0!==r){if("object"!=typeof r||Array.isArray(r)||null===r)return!1;for(const t of Object.values(r))if(!e(t))return!1}if(void 0!==o&&"boolean"!=typeof o)return!1;if(void 0!==s&&("object"!=typeof s||Array.isArray(s)||null===s))return!1;if(void 0!==i&&"string"!=typeof i)return!1;if(void 0!==a&&("string"!=typeof a||!u.includes(a)))return!1;if(void 0!==p){if(!Array.isArray(p))return!1;if(!p.every((e=>"string"==typeof e)))return!1}if(void 0!==h&&!e(h))return!1;if(void 0!==d){if("object"!=typeof d||Array.isArray(d)||null===d)return!1;for(const t of Object.values(d))if(!e(t))return!1}if(void 0!==f){if("object"!=typeof f||Array.isArray(f)||null===f)return!1;for(const t of Object.values(f))if(!e(t))return!1}if(void 0!==_&&"boolean"!=typeof _)return!1;if(void 0!==v&&!e(v))return!1;if(void 0!==m&&"string"!=typeof m)return!1;if(void 0!==b){if("object"!=typeof b||Array.isArray(b)||null===b)return!1;for(const t of Object.values(b))if(!e(t))return!1}return 0===Object.keys(g).length}},CPM1:function(e,t){"use strict";function n(e,t){for(var n in t)e[n]=t[n];return e}t.a=function(e){function t(e){for(var t=[],n=0;n<o.length;n++)o[n]===e?e=null:t.push(o[n]);o=t}function r(t,r,s){e=r?t:n(n({},e),t);for(var i=o,a=0;a<i.length;a++)i[a](e,s)}var o=[];return e=e||{},{action:function(t){function n(e){r(e,!1,t)}return function(){for(var r=arguments,o=[e],s=0;s<arguments.length;s++)o.push(r[s]);var i=t.apply(this,o);if(null!=i)return i.then?i.then(n):n(i)}},setState:r,subscribe:function(e){return o.push(e),function(){t(e)}},unsubscribe:t,getState:function(){return e}}}},"CR+S":function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t,n)=>({chars:e.chars.map((e=>e.id!==t?e:r(r({},e),n)))})},D9g8:function(e,t){"use strict";t.a=(e,t)=>({convos:e.convos.filter(((e,n)=>n!==t)),currentConvoIndex:1===e.convos.length?-1:e.currentConvoIndex===e.convos.length-1?e.currentConvoIndex-1:e.currentConvoIndex})},"FNu+":function(e,t,n){"use strict";function r(e,t,n,u){if(!t.nullable||null!==n)if(h.isRefForm(t)){if(e.schemaTokens.length===e.config.maxDepth)throw new d;e.schemaTokens.push(["definitions",t.ref]),r(e,e.root.definitions[t.ref],n),e.schemaTokens.pop()}else if(h.isTypeForm(t)){switch(a(e,"type"),t.type){case"boolean":"boolean"!=typeof n&&l(e);break;case"float32":case"float64":"number"!=typeof n&&l(e);break;case"int8":o(e,n,-128,127);break;case"uint8":o(e,n,0,255);break;case"int16":o(e,n,-32768,32767);break;case"uint16":o(e,n,0,65535);break;case"int32":o(e,n,-2147483648,2147483647);break;case"uint32":o(e,n,0,4294967295);break;case"string":"string"!=typeof n&&l(e);break;case"timestamp":"string"!=typeof n?l(e):p.default(n)||l(e)}c(e)}else if(h.isEnumForm(t))a(e,"enum"),"string"==typeof n&&t.enum.includes(n)||l(e),c(e);else if(h.isElementsForm(t)){if(a(e,"elements"),Array.isArray(n))for(const[o,a]of n.entries())s(e,o.toString()),r(e,t.elements,a),i(e);else l(e);c(e)}else if(h.isPropertiesForm(t))if("object"!=typeof n||null===n||Array.isArray(n))a(e,void 0!==t.properties?"properties":"optionalProperties"),l(e),c(e);else{if(void 0!==t.properties){a(e,"properties");for(const[o,u]of Object.entries(t.properties))a(e,o),n.hasOwnProperty(o)?(s(e,o),r(e,u,n[o]),i(e)):l(e),c(e);c(e)}if(void 0!==t.optionalProperties){a(e,"optionalProperties");for(const[o,l]of Object.entries(t.optionalProperties))a(e,o),n.hasOwnProperty(o)&&(s(e,o),r(e,l,n[o]),i(e)),c(e);c(e)}if(!0!==t.additionalProperties)for(const r of Object.keys(n)){const n=t.optionalProperties&&r in t.optionalProperties;t.properties&&r in t.properties||n||r===u||(s(e,r),l(e),i(e))}}else if(h.isValuesForm(t)){if(a(e,"values"),"object"!=typeof n||null===n||Array.isArray(n))l(e);else for(const[o,a]of Object.entries(n))s(e,o),r(e,t.values,a),i(e);c(e)}else if(h.isDiscriminatorForm(t))if("object"!=typeof n||null===n||Array.isArray(n))a(e,"discriminator"),l(e),c(e);else if(n.hasOwnProperty(t.discriminator)){const o=n[t.discriminator];"string"==typeof o?o in t.mapping?(a(e,"mapping"),a(e,o),r(e,t.mapping[o],n,t.discriminator),c(e),c(e)):(a(e,"mapping"),s(e,t.discriminator),l(e),i(e),c(e)):(a(e,"discriminator"),s(e,t.discriminator),l(e),i(e),c(e))}else a(e,"discriminator"),l(e),c(e)}function o(e,t,n,r){("number"!=typeof t||!Number.isInteger(t)||t<n||t>r)&&l(e)}function s(e,t){e.instanceTokens.push(t)}function i(e){e.instanceTokens.pop()}function a(e,t){e.schemaTokens[e.schemaTokens.length-1].push(t)}function c(e){e.schemaTokens[e.schemaTokens.length-1].pop()}function l(e){if(e.errors.push({instancePath:[...e.instanceTokens],schemaPath:[...e.schemaTokens[e.schemaTokens.length-1]]}),e.errors.length===e.config.maxErrors)throw new f}var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=t.MaxDepthExceededError=void 0;const p=u(n("5/DW")),h=n("BuAb");class d extends Error{}t.MaxDepthExceededError=d;class f extends Error{}t.validate=function(e,t,n){const o={errors:[],instanceTokens:[],schemaTokens:[[]],root:e,config:n||{maxDepth:0,maxErrors:0}};try{r(o,e,t)}catch(e){if(!(e instanceof f))throw e}return o.errors}},"GDN+":function(e,t,n){"use strict";(function(e){var r=n("MECP"),o=n("hosL"),s=n("UQAG"),i=n("omBr"),a=n("cuUh"),c=n("KSen"),l=n("+bXj"),u=n("4omB"),p=n("VqH4"),h=n("dnxQ"),d=n("nVVG"),f=n("7Pee"),_=n("b0Ln");t.a=Object(s.connect)(["convos","currentConvoIndex","editedCharID","toBeReplacedCharID"],{setEditedCharacterID:f.a,setToBeReplacedCharacterID:_.a})(class extends o.Component{constructor(e){super(e),this.closeCharacterSettings=this.closeCharacterSettings.bind(this),this.closeCharacterReplaceDialog=this.closeCharacterReplaceDialog.bind(this)}closeCharacterSettings(){this.props.setEditedCharacterID(null)}closeCharacterReplaceDialog(){this.props.setToBeReplacedCharacterID(null)}render(){const{convos:t,currentConvoIndex:n,editedCharID:o,toBeReplacedCharID:s}=this.props;return e("div",{className:r.a.app},e("div",{className:r.a["project-bar-pane"]},e(h.a,null)),e("div",{className:r.a["app-pane"]},e("div",{className:r.a["convos-pane"]},e(l.a,null)),e("div",{className:r.a["messages-pane"]},e(u.a,{messages:-1!==n?t[n].messages:null}),e("div",{className:r.a["command-box-pane"]},e(i.a,null))),e("div",{className:r.a["characters-pane"]},e(a.a,null))),null!==o?e(p.a,{onClose:this.closeCharacterSettings},e(c.a,null)):null,null!==s?e(p.a,{onClose:this.closeCharacterReplaceDialog},e(d.a,null)):null)}})}).call(this,n("hosL").h)},GZ11:function(e,t){"use strict";t.a={"searchable-menu":"searchable-menu__2ejBr","search-bar":"search-bar___gyq1",items:"items__3X6Q4",item:"item__1G1Qx"}},ILzg:function(e,t){"use strict";t.a=({projectName:e,version:t,convos:n,chars:r})=>JSON.stringify({projectName:e,version:t,convos:n,chars:r})},JNjM:function(e,t){"use strict";t.a={"command-box":"command-box__1-HCN"}},KSen:function(e,t,n){"use strict";(function(e){var r=n("Rb1n"),o=n("hosL"),s=n("UQAG"),i=n("CR+S"),a=n("UCOg");t.a=Object(s.connect)(["chars","editedCharID"],{updateCharacter:i.a})(class extends o.Component{constructor(e){super(e),this.onCharacterNameChange=this.onCharacterNameChange.bind(this),this.onCharacterColorChange=this.onCharacterColorChange.bind(this)}onCharacterNameChange(e){this.props.updateCharacter(this.props.editedCharID,{name:e.target.value})}onCharacterColorChange(e){this.props.updateCharacter(this.props.editedCharID,{color:parseInt(e.target.value.slice(1),16)})}render(){const{editedCharID:t,chars:n}=this.props,o=n.find((e=>e.id===t));return e("div",{className:r.a["character-settings"]},e("div",{className:r.a.row},e("div",{className:r.a.label},"Character name"),e("input",{type:"text",className:r.a.control,value:o.name,onChange:this.onCharacterNameChange})),e("div",{className:r.a.row},e("div",{className:r.a.label},"Character color"),e("input",{type:"color",className:r.a.control,value:Object(a.a)(o.color),onChange:this.onCharacterColorChange})))}})}).call(this,n("hosL").h)},MECP:function(e,t){"use strict";t.a={app:"app__3v5cP","app-pane":"app-pane__3z7Kq","convos-pane":"convos-pane__3jigy","messages-pane":"messages-pane__2RWKi","command-box-pane":"command-box-pane__2Jtnd","characters-pane":"characters-pane__2IW0B"}},PMWH:function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t,n)=>({convos:e.convos.map((e=>r(r({},e),{},{messages:e.messages.map((e=>e.authorID!==t?e:r(r({},e),{},{authorID:n})))})))})},QfWi:function(e,t,n){"use strict";n.r(t),function(e){n("3Ov2");var r=n("CPM1"),o=n("UQAG"),s=n("GDN+");const i=Object(r.a)((()=>{const e=localStorage.getItem("store");if(!e)return null;const t=JSON.parse(e);return 1!==t.version?null:t})()||{version:1,projectName:"New Project",convos:[],chars:[],currentConvoIndex:-1,currentCharID:null,editedMessageID:null,editedConvoID:null,editedCharID:null,toBeReplacedCharID:null,insertAboveMessageID:null});i.subscribe((e=>{localStorage.setItem("store",JSON.stringify(e))}));t.default=()=>e(o.Provider,{store:i},e(s.a,null))}.call(this,n("hosL").h)},Rb1n:function(e,t){"use strict";t.a={"character-settings":"character-settings__uP29I",row:"row__1cd3k",label:"label__7PH9z",control:"control__3kM2c"}},RtvN:function(e,t){"use strict";t.a=(e,t,n)=>{const r=e.chars.findIndex((e=>e.id===t));return{chars:e.chars.filter((e=>e.id!==t)),currentCharID:n||(1===e.chars.length?null:r===e.chars.length-1?e.chars[e.chars.length-2].id:e.chars[r+1].id)}}},S07r:function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t,n)=>({convos:e.convos.map((e=>e.id!==t?e:r(r({},e),{},{name:n})))})},SQ3b:function(e,t){"use strict";t.a={message:"message__1Gv6N",buttons:"buttons__2O_FT",contents:"contents__2Y7XI",author:"author__2YOzN","message-edit-wrapper":"message-edit-wrapper__2wEXY","message-edit-area":"message-edit-area__1C4xo"}},UCOg:function(e,t){"use strict";t.a=e=>"#"+("000000"+e.toString(16)).slice(-6)},UQAG:function(e,t,n){function r(e,t){for(var n in t)e[n]=t[n];return e}function o(e){this.getChildContext=function(){return{store:e.store}}}var s=n("hosL");o.prototype.render=function(e){return e.children&&e.children[0]||e.children},t.connect=function(e,t){var n;return"function"!=typeof e&&("string"==typeof(n=e||{})&&(n=n.split(/\s*,\s*/)),e=function(e){for(var t={},r=0;r<n.length;r++)t[n[r]]=e[n[r]];return t}),function(n){function o(o,i){var a=this,c=i.store,l=e(c?c.getState():{},o),u=t?function(e,t){"function"==typeof e&&(e=e(t));var n={};for(var r in e)n[r]=t.action(e[r]);return n}(t,c):{store:c},p=function(){var t=e(c?c.getState():{},o);for(var n in t)if(t[n]!==l[n])return l=t,a.setState({});for(var r in l)if(!(r in t))return l=t,a.setState({})};this.componentWillReceiveProps=function(e){o=e,p()},this.componentDidMount=function(){c.subscribe(p)},this.componentWillUnmount=function(){c.unsubscribe(p)},this.render=function(e){return s.h(n,r(r(r({},u),e),l))}}return(o.prototype=new s.Component).constructor=o}},t.Provider=o},"Uvu/":function(e,t){"use strict";t.a={"convo-list":"convo-list__2Fe7s",convos:"convos__2WWx_",convo:"convo__I4Lqx",active:"active__1seF6","convo-name":"convo-name__2gZc2","add-convo-wrapper":"add-convo-wrapper__3-zDP"}},VWK7:function(e,t){"use strict";t.a={divider:"divider__24wuz",character:"character__xFcjl",active:"active__cphkj","character-name":"character-name__1D7tD"}},VqH4:function(e,t,n){"use strict";(function(e,r){var o=n("q6Rg");t.a=({onClose:t,children:n})=>e(r,null,e("div",{className:o.a["modal-bg"],onClick:t}),e("div",{className:o.a["modal-positioner"]},e("div",{className:o.a.modal},n)))}).call(this,n("hosL").h,n("hosL").Fragment)},ZKFM:function(e,t){"use strict";t.a=(e,t)=>({insertAboveMessageID:t})},ZQP2:function(e,t){"use strict";t.a={messages:"messages__TwUxC","messages-inner":"messages-inner__2L45y","insert-box":"insert-box__2EmIz","close-wrapper":"close-wrapper__1AM-W","close-positioner":"close-positioner__1_7T5","command-box-wrapper":"command-box-wrapper__5ml5b"}},b0Ln:function(e,t){"use strict";t.a=(e,t)=>({toBeReplacedCharID:t})},cuUh:function(e,t,n){"use strict";(function(e,r){var o=n("VWK7"),s=n("yTKo"),i=n("hosL"),a=n("UQAG"),c=n("8Jek"),l=n.n(c),u=n("RtvN"),p=n("8pl+"),h=n("7Pee"),d=n("b0Ln"),f=n("UCOg");const _=({char:t,active:n,onClick:r,onEdit:i,onDelete:a})=>e("div",{className:l()(o.a.character,{[o.a.active]:n}),onClick:r&&(()=>r(t))},e("div",{className:o.a["character-name"],style:`color: ${Object(f.a)(t.color)}`},t.name),e("div",{className:l()(o.a.edit,s.a.icon,s.a["icon-button"],s.a.edit),onClick:i&&(()=>i(t))}),e("div",{className:l()(o.a.delete,s.a.icon,s.a["icon-button"],s.a.delete,{[s.a.disabled]:!a}),onClick:a?()=>a(t):null}));t.a=Object(a.connect)(["chars","currentCharID","convos","currentConvoIndex"],{deleteCharacter:u.a,setCurrentCharacterID:p.a,setEditedCharacterID:h.a,setToBeReplacedCharacterID:d.a})(class extends i.Component{constructor(e){super(e),this.onClickCharacter=this.onClickCharacter.bind(this),this.onEditCharacter=this.onEditCharacter.bind(this),this.onDeleteCharacter=this.onDeleteCharacter.bind(this)}onClickCharacter(e){this.props.setCurrentCharacterID(e.id)}onEditCharacter(e){this.props.setEditedCharacterID(e.id)}onDeleteCharacter(e){for(const t of this.props.convos)for(const n of t.messages)if(n.authorID===e.id)return void this.props.setToBeReplacedCharacterID(e.id);this.props.deleteCharacter(e.id)}render(){const{chars:t,currentCharID:n,convos:s,currentConvoIndex:i}=this.props,a=new Set;if(-1!==i){const e=s[i];for(const t of e.messages)a.has(t.authorID)||a.add(t.authorID)}const c=[],l=[];for(const e of t)a.has(e.id)?c.push(e):l.push(e);return e("div",{className:o.a["character-list"]},c.length>0&&e(r,null,e("div",{className:o.a.divider},"Characters in current convo:"),e("div",{className:o.a["character-sublist"]},c.map((t=>e(_,{key:t.id,char:t,active:t.id===n,onClick:this.onClickCharacter,onEdit:this.onEditCharacter,onDelete:this.props.chars.length>1&&this.onDeleteCharacter}))))),l.length>0&&e(r,null,e("div",{className:o.a.divider},"Other characters:"),e("div",{className:o.a["character-sublist"]},l.map((t=>e(_,{key:t.id,char:t,active:t.id===n,onClick:this.onClickCharacter,onEdit:this.onEditCharacter,onDelete:this.props.chars.length>1&&this.onDeleteCharacter}))))))}})}).call(this,n("hosL").h,n("hosL").Fragment)},"dB+w":function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=(e,t,n)=>{for(let o=0;o<e.convos.length;o++){const s=e.convos[o];for(let i=0;i<s.messages.length;i++){const a=s.messages[i];if(a.id===t){const t=e.convos.slice(0),c=s.messages.slice(0);return c[i]=r(r({},a),{},{authorID:n}),t[o]=r(r({},s),{},{messages:c}),{convos:t}}}}}},dnxQ:function(e,t,n){"use strict";(function(e){var r=n("u6aR"),o=n("yTKo"),s=n("hosL"),i=n("UQAG"),a=n("8Jek"),c=n.n(a),l=n("/f2m"),u=n("iEaH"),p=n("ILzg"),h=n("9KuC");t.a=Object(i.connect)(["version","projectName","convos","chars"],{loadState:l.a,setProjectName:u.a})(class extends s.Component{constructor(e){super(e),this.state={error:null},this.onInput=this.onInput.bind(this),this.onSave=this.onSave.bind(this),this.onLoad=this.onLoad.bind(this),this.closeError=this.closeError.bind(this)}onInput(e){this.props.setProjectName(e.target.value)}onLoad(){const e=document.createElement("input");e.type="file",e.addEventListener("change",(e=>{const t=e.target.files;if(t.length>0){const e=new FileReader;e.addEventListener("load",(()=>{try{const t=JSON.parse(e.result);if(Object(h.a)(t).length>0)throw new Error("Invalid JSON");this.props.loadState(t)}catch(e){this.setState({error:e})}})),e.readAsText(t[0])}})),e.click()}onSave(){const{version:e,projectName:t,convos:n,chars:r}=this.props,o=document.createElement("a"),s=URL.createObjectURL(new Blob([Object(p.a)({version:e,projectName:t,convos:n,chars:r})]));o.href=s,o.download=`${t}.json`,o.click(),setTimeout((()=>{window.URL.revokeObjectURL(s)}),0)}closeError(){this.setState({error:null})}render(){return e("div",{className:r.a["project-bar"]},e("input",{className:r.a["project-name"],type:"text",value:this.props.projectName,onInput:this.onInput}),e("div",{className:c()(r.a.button,o.a.icon,o.a["icon-button"],o.a.save),title:"Save",onClick:this.onSave}),e("div",{className:c()(r.a.button,o.a.icon,o.a["icon-button"],o.a.load),title:"Load",onClick:this.onLoad}),this.state.error?e("div",{className:r.a.error},e("span",{className:r.a["error-message"]},this.state.error.message),e("div",{className:c()(o.a.icon,o.a["icon-button"],o.a.delete),onClick:this.closeError})):null)}})}).call(this,n("hosL").h)},fdQA:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("BuAb"),t),o(n("FNu+"),t)},h2tO:function(e,t){"use strict";t.a=(e,t)=>({currentConvoIndex:t})},hQme:function(e,t){"use strict";t.a=(e,t)=>({editedConvoID:void 0===t?e.convos[e.currentConvoIndex].id:t})},hosL:function(e,t,n){"use strict";function r(e,t){for(var n in t)e[n]=t[n];return e}function o(e){var t=e.parentNode;t&&t.removeChild(e)}function s(e,t,n){var r,o,s,a={};for(s in t)"key"==s?r=t[s]:"ref"==s?o=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?M.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===a[s]&&(a[s]=e.defaultProps[s]);return i(e,a,r,o,null)}function i(e,t,n,r,o){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++A:o};return null!=S.vnode&&S.vnode(s),s}function a(){return{current:null}}function c(e){return e.children}function l(e,t){this.props=e,this.context=t}function u(e,t){if(null==t)return e.__?u(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?u(e):null}function p(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return p(e)}}function h(e){(!e.__d&&(e.__d=!0)&&L.push(e)&&!d.__r++||U!==S.debounceRendering)&&((U=S.debounceRendering)||T)(d)}function d(){for(var e;d.__r=L.length;)e=L.sort((function(e,t){return e.__v.__b-t.__v.__b})),L=[],e.some((function(e){var t,n,o,s,i,a;e.__d&&(i=(s=(t=e).__v).__e,(a=t.__P)&&(n=[],(o=r({},s)).__v=s.__v+1,O(a,s,o,t.__n,void 0!==a.ownerSVGElement,null!=s.__h?[i]:null,n,null==i?u(s):i,s.__h),j(n,s),s.__e!=i&&p(s)))}))}function f(e,t,n,r,o,s,a,l,p,h){var d,f,v,b,g,y,C,j=r&&r.__k||K,D=j.length;for(n.__k=[],d=0;d<t.length;d++)if(null!=(b=n.__k[d]=null==(b=t[d])||"boolean"==typeof b?null:"string"==typeof b||"number"==typeof b||"bigint"==typeof b?i(null,b,null,null,b):Array.isArray(b)?i(c,{children:b},null,null,null):b.__b>0?i(b.type,b.props,b.key,null,b.__v):b)){if(b.__=n,b.__b=n.__b+1,null===(v=j[d])||v&&b.key==v.key&&b.type===v.type)j[d]=void 0;else for(f=0;f<D;f++){if((v=j[f])&&b.key==v.key&&b.type===v.type){j[f]=void 0;break}v=null}O(e,b,v=v||B,o,s,a,l,p,h),g=b.__e,(f=b.ref)&&v.ref!=f&&(C||(C=[]),v.ref&&C.push(v.ref,null,b),C.push(f,b.__c||g,b)),null!=g?(null==y&&(y=g),"function"==typeof b.type&&null!=b.__k&&b.__k===v.__k?b.__d=p=_(b,p,e):p=m(e,b,v,j,g,p),h||"option"!==n.type?"function"==typeof n.type&&(n.__d=p):e.value=""):p&&v.__e==p&&p.parentNode!=e&&(p=u(v))}for(n.__e=y,d=D;d--;)null!=j[d]&&("function"==typeof n.type&&null!=j[d].__e&&j[d].__e==n.__d&&(n.__d=u(r,d+1)),P(j[d],j[d]));if(C)for(d=0;d<C.length;d++)I(C[d],C[++d],C[++d])}function _(e,t,n){var r,o;for(r=0;r<e.__k.length;r++)(o=e.__k[r])&&(o.__=e,t="function"==typeof o.type?_(o,t,n):m(n,o,o,e.__k,o.__e,t));return t}function v(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){v(e,t)})):t.push(e)),t}function m(e,t,n,r,o,s){var i,a,c;if(void 0!==t.__d)i=t.__d,t.__d=void 0;else if(null==n||o!=s||null==o.parentNode)e:if(null==s||s.parentNode!==e)e.appendChild(o),i=null;else{for(a=s,c=0;(a=a.nextSibling)&&c<r.length;c+=2)if(a==o)break e;e.insertBefore(o,s),i=s}return void 0!==i?i:o.nextSibling}function b(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||W.test(t)?n:n+"px"}function g(e,t,n,r,o){var s;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||b(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||b(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r||e.addEventListener(t,s?C:y,s):e.removeEventListener(t,s?C:y,s);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function y(e){this.l[e.type+!1](S.event?S.event(e):e)}function C(e){this.l[e.type+!0](S.event?S.event(e):e)}function O(e,t,n,o,s,i,a,u,p){var h,d,_,v,m,b,g,y,C,O,j,I=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(p=n.__h,u=t.__e=n.__e,t.__h=null,i=[u]),(h=S.__b)&&h(t);try{e:if("function"==typeof I){if(y=t.props,C=(h=I.contextType)&&o[h.__c],O=h?C?C.props.value:h.__:o,n.__c?g=(d=t.__c=n.__c).__=d.__E:("prototype"in I&&I.prototype.render?t.__c=d=new I(y,O):(t.__c=d=new l(y,O),d.constructor=I,d.render=k),C&&C.sub(d),d.props=y,d.state||(d.state={}),d.context=O,d.__n=o,_=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=I.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=r({},d.__s)),r(d.__s,I.getDerivedStateFromProps(y,d.__s))),v=d.props,m=d.state,_)null==I.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==I.getDerivedStateFromProps&&y!==v&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(y,O),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(y,d.__s,O)||t.__v===n.__v){d.props=y,d.state=d.__s,t.__v!==n.__v&&(d.__d=!1),d.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(y,d.__s,O),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(v,m,b)}))}d.context=O,d.props=y,d.state=d.__s,(h=S.__r)&&h(t),d.__d=!1,d.__v=t,d.__P=e,h=d.render(d.props,d.state,d.context),d.state=d.__s,null!=d.getChildContext&&(o=r(r({},o),d.getChildContext())),_||null==d.getSnapshotBeforeUpdate||(b=d.getSnapshotBeforeUpdate(v,m)),j=null!=h&&h.type===c&&null==h.key?h.props.children:h,f(e,Array.isArray(j)?j:[j],t,n,o,s,i,a,u,p),d.base=t.__e,t.__h=null,d.__h.length&&a.push(d),g&&(d.__E=d.__=null),d.__e=!1}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=D(n.__e,t,n,o,s,i,a,p);(h=S.diffed)&&h(t)}catch(e){t.__v=null,(p||null!=i)&&(t.__e=u,t.__h=!!p,i[i.indexOf(u)]=null),S.__e(e,t,n)}}function j(e,t){S.__c&&S.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){S.__e(e,t.__v)}}))}function D(e,t,n,r,s,i,a,c){var l,p,h,d=n.props,_=t.props,v=t.type,m=0;if("svg"===v&&(s=!0),null!=i)for(;m<i.length;m++)if((l=i[m])&&(l===e||(v?l.localName==v:3==l.nodeType))){e=l,i[m]=null;break}if(null==e){if(null===v)return document.createTextNode(_);e=s?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,_.is&&_),i=null,c=!1}if(null===v)d===_||c&&e.data===_||(e.data=_);else{if(i=i&&M.call(e.childNodes),p=(d=n.props||B).dangerouslySetInnerHTML,h=_.dangerouslySetInnerHTML,!c){if(null!=i)for(d={},m=0;m<e.attributes.length;m++)d[e.attributes[m].name]=e.attributes[m].value;(h||p)&&(h&&(p&&h.__html==p.__html||h.__html===e.innerHTML)||(e.innerHTML=h&&h.__html||""))}if(function(e,t,n,r,o){var s;for(s in n)"children"===s||"key"===s||s in t||g(e,s,null,n[s],r);for(s in t)o&&"function"!=typeof t[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===t[s]||g(e,s,t[s],n[s],r)}(e,_,d,s,c),h)t.__k=[];else if(m=t.props.children,f(e,Array.isArray(m)?m:[m],t,n,r,s&&"foreignObject"!==v,i,a,i?i[0]:n.__k&&u(n,0),c),null!=i)for(m=i.length;m--;)null!=i[m]&&o(i[m]);c||("value"in _&&void 0!==(m=_.value)&&(m!==e.value||"progress"===v&&!m)&&g(e,"value",m,d.value,!1),"checked"in _&&void 0!==(m=_.checked)&&m!==e.checked&&g(e,"checked",m,d.checked,!1))}return e}function I(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){S.__e(e,n)}}function P(e,t,n){var r,s;if(S.unmount&&S.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||I(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){S.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&P(r[s],t,"function"!=typeof e.type);n||null==e.__e||o(e.__e),e.__e=e.__d=void 0}function k(e,t,n){return this.constructor(e,n)}function w(e,t,n){var r,o,i;S.__&&S.__(e,t),o=(r="function"==typeof n)?null:n&&n.__k||t.__k,i=[],O(t,e=(!r&&n||t).__k=s(c,null,[e]),o||B,B,void 0!==t.ownerSVGElement,!r&&n?[n]:o?null:t.firstChild?M.call(t.childNodes):null,i,!r&&n?n:o?o.__e:t.firstChild,r),j(i,e)}function x(e,t){w(e,t,x)}function N(e,t,n){var o,s,a,c=r({},e.props);for(a in t)"key"==a?o=t[a]:"ref"==a?s=t[a]:c[a]=t[a];return arguments.length>2&&(c.children=arguments.length>3?M.call(arguments,2):n),i(e.type,c,o||e.key,s||e.ref,null)}function E(e,t){var n={__c:t="__cC"+F++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(h)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}n.r(t),n.d(t,"render",(function(){return w})),n.d(t,"hydrate",(function(){return x})),n.d(t,"createElement",(function(){return s})),n.d(t,"h",(function(){return s})),n.d(t,"Fragment",(function(){return c})),n.d(t,"createRef",(function(){return a})),n.d(t,"isValidElement",(function(){return R})),n.d(t,"Component",(function(){return l})),n.d(t,"cloneElement",(function(){return N})),n.d(t,"createContext",(function(){return E})),n.d(t,"toChildArray",(function(){return v})),n.d(t,"options",(function(){return S}));var M,S,A,R,L,T,U,F,B={},K=[],W=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;M=K.slice,S={__e:function(e,t){for(var n,r,o;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),o=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),o=n.__d),o)return n.__E=n}catch(t){e=t}throw e}},A=0,R=function(e){return null!=e&&void 0===e.constructor},l.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=r({},this.state),"function"==typeof e&&(e=e(r({},n),this.props)),e&&r(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),h(this))},l.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),h(this))},l.prototype.render=c,L=[],T="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,d.__r=0,F=0},iEaH:function(e,t){"use strict";t.a=(e,t)=>({projectName:t})},"l/KG":function(e,t){"use strict";t.a=(e,t)=>({editedMessageID:t})},mdyV:function(e,t,n){"use strict";n.r(t);var r=n("hosL");const{h:o,render:s,hydrate:i}=r,a=e=>e&&e.default?e.default:e;if("serviceWorker"in navigator&&navigator.serviceWorker.register(n.p+"sw-esm.js"),"function"==typeof a(n("QfWi"))){let e=document.getElementById("preact_root")||document.body.firstElementChild;0,(()=>{let t=a(n("QfWi")),r={};const i=document.querySelector('[type="__PREACT_CLI_DATA__"]');i&&(r=JSON.parse(decodeURI(i.innerHTML)).preRenderData||r);r.url&&(c=r.url);var c;e=s(o(t,{CLI_DATA:{preRenderData:r}}),document.body,e)})()}},nVVG:function(e,t,n){"use strict";(function(e){var r=n("3Ufl"),o=n("hosL"),s=n("UQAG"),i=n("RtvN"),a=n("PMWH"),c=n("b0Ln");t.a=Object(s.connect)(["chars","toBeReplacedCharID"],{replaceCharacter:a.a,setToBeReplacedCharacterID:c.a,deleteCharacter:i.a})(class extends o.Component{constructor(e){super(e),this.state={selectedCharacterID:null},this.selectBox=Object(o.createRef)(),this.selectCharacter=this.selectCharacter.bind(this),this.replaceCharacter=this.replaceCharacter.bind(this)}selectCharacter(e){this.setState({selectedCharacterID:e.target.value})}replaceCharacter(){this.props.replaceCharacter(this.props.toBeReplacedCharID,this.state.selectedCharacterID),this.props.deleteCharacter(this.props.toBeReplacedCharID,this.state.selectedCharacterID),this.props.setToBeReplacedCharacterID(null)}render(){const{chars:t,toBeReplacedCharID:n}=this.props;return e("div",{className:r.a["replace-character"]},e("div",{className:r.a.row},e("div",{className:r.a.label},"Replace character ",e("span",{className:r.a["old-character-name"]}," with:")),e("select",{onChange:this.selectCharacter,value:this.state.selectedCharacterID,ref:this.selectBox},t.map((t=>t.id===n?null:e("option",{value:t.id},t.name))))),e("div",null,e("button",{onClick:this.replaceCharacter,disabled:null===this.state.selectedCharacterID},"Replace")))}})}).call(this,n("hosL").h)},nvQP:function(e,t,n){"use strict";(function(e){var r=n("GZ11"),o=n("hosL");t.a=class extends o.Component{constructor(e){super(e),this.state={query:"",maxHeight:null,y:null},this.onInput=this.onInput.bind(this),this.onFocusOut=this.onFocusOut.bind(this),this.searchRef=Object(o.createRef)()}onInput(e){this.setState({query:e.target.value})}onFocusOut(e){!e.currentTarget.contains(e.relatedTarget)&&this.props.onDismiss&&this.props.onDismiss()}componentDidMount(){this.searchRef.current&&this.searchRef.current.focus()}render(){return e("div",{className:r.a["searchable-menu"],style:{top:`${this.props.y}px`,left:`${this.props.x}px`,maxHeight:`calc(100vh - ${this.props.y}px)`},onfocusout:this.onFocusOut,tabIndex:"0"},e("div",{className:r.a["search-bar"]},e("input",{type:"text",onInput:this.onInput,ref:this.searchRef})),e("div",{className:r.a.items},this.props.items.map((t=>-1===t.value.toLowerCase().indexOf(this.state.query)?null:e("div",{className:r.a.item,key:t.id,onClick:this.props.onClickItem?this.props.onClickItem.bind(this,t.id):null},t.value)))))}}}).call(this,n("hosL").h)},omBr:function(e,t,n){"use strict";(function(e){var r=n("JNjM"),o=n("hosL"),s=n("UQAG"),i=n("2hU4"),a=n("04Fd"),c=n("7sUR"),l=n("8pl+");t.a=Object(s.connect)(["chars"],{createMessage:a.a,editMessage:c.a,createCharacter:i.a,setCurrentCharacterID:l.a})(class extends o.Component{constructor(e){super(e),this.onKeyPress=this.onKeyPress.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}onKeyDown(e){if("Tab"===e.code){e.preventDefault();const t=e.target.value.toLowerCase();if(-1===t.indexOf(":")){const n=this.props.chars.find((e=>e.name.toLowerCase().startsWith(t)));if(!n)return;e.target.value=`${n.name}: `}}}onKeyPress(e){if("Enter"===e.code&&!e.shiftKey){e.preventDefault();let t=e.target.value;const n=/([^:]+):(?:\s+)(.+)/g.exec(t);if(n){const e=n[1].toLowerCase(),r=e.toLowerCase(),o=this.props.chars.find((e=>e.name.toLowerCase()===r));o?this.props.setCurrentCharacterID(o.id):this.props.createCharacter(e),t=n[2]}const r=/^s\/([^/]+)\/([^/]+)\/?$/.exec(t);if(r){const{currentCharID:t,chars:n,currentConvoIndex:o,convos:s}=this.context.store.getState(),i=n.find((e=>e.id===t)),{messages:a}=s[o];for(let t=this.props.beforeMessage||a.length-1;t>=0;t--)if(a[t].authorID===i.id)return this.props.editMessage(a[t].id,a[t].contents.split(r[1]).join(r[2])),void(e.target.value="")}e.target.value="",this.props.createMessage(t,this.props.beforeMessage)}}render(){return e("textarea",{className:r.a["command-box"],onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown})}})}).call(this,n("hosL").h)},q6Rg:function(e,t){"use strict";t.a={"modal-bg":"modal-bg__2cJDI",fade:"fade__1w0KX","modal-positioner":"modal-positioner__F8P48",modal:"modal__LYvZS",popup:"popup__1XomI"}},s3hk:function(e,t,n){"use strict";(function(e){var r=n("SQ3b"),o=n("yTKo"),s=n("hosL"),i=n("UQAG"),a=n("8Jek"),c=n.n(a),l=n("nvQP"),u=n("4HEG"),p=n("7sUR"),h=n("dB+w"),d=n("l/KG"),f=n("ZKFM"),_=n("UCOg");t.a=Object(i.connect)(["chars","editedMessageID","insertAboveMessageID"],{deleteMessage:u.a,editMessage:p.a,replaceMessageAuthor:h.a,setEditedMessage:d.a,setInsertAboveMessageID:f.a})(class extends s.Component{constructor(e){super(e),this.state={authorMenuOpen:!1,authorMenuX:0,authorMenuY:0},this.contentsRef=Object(s.createRef)(),this.onInsertAbove=this.onInsertAbove.bind(this),this.onMessageEdit=this.onMessageEdit.bind(this),this.onMessageDelete=this.onMessageDelete.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.onBlur=this.onBlur.bind(this),this.onClickAuthor=this.onClickAuthor.bind(this),this.onDismissAuthorMenu=this.onDismissAuthorMenu.bind(this),this.onReplaceAuthor=this.onReplaceAuthor.bind(this)}onInsertAbove(){this.props.setInsertAboveMessageID(this.props.insertAboveMessageID===this.props.message.id?null:this.props.message.id)}onMessageEdit(){this.props.setEditedMessage(this.props.editedMessageID===this.props.message.id?null:this.props.message.id)}onMessageDelete(){this.props.deleteMessage(this.props.index)}onKeyPress(e){"Enter"!==e.code||e.shiftKey||(this.props.editMessage(this.props.message.id,this.contentsRef.current.value),this.props.setEditedMessage(null))}onBlur(){this.props.editMessage(this.props.message.id,this.contentsRef.current.value),this.props.setEditedMessage(null)}onClickAuthor(e){const{x:t,y:n,height:r}=e.target.getBoundingClientRect();this.setState((e=>({authorMenuOpen:!e.authorMenuOpen,authorMenuX:t,authorMenuY:n+r})))}onReplaceAuthor(e){this.props.replaceMessageAuthor(this.props.message.id,e),this.setState({authorMenuOpen:!1})}onDismissAuthorMenu(){this.setState({authorMenuOpen:!1})}componentDidUpdate(e){e.editedMessageID!==e.message.id&&this.props.editedMessageID===this.props.message.id&&this.contentsRef.current&&this.contentsRef.current.focus()}render(){const{message:t,chars:n,editedMessageID:s}=this.props,{id:i,authorID:a,contents:u}=t,p=i===s,h=n.find((e=>e.id===t.authorID));return e("div",{className:r.a.message},e("div",{className:r.a.author,style:`color: ${Object(_.a)(h.color)}`,onClick:this.onClickAuthor},n.find((e=>e.id===a)).name),e("div",{className:c()(r.a.contents,{[r.a.editable]:p})},p?e("div",{className:r.a["message-edit-wrapper"]},e("textarea",{className:r.a["message-edit-area"],onKeyPress:this.onKeyPress,onBlur:this.onBlur,tabIndex:"0",ref:this.contentsRef,value:u})):u),e("div",{className:r.a.buttons},e("div",{className:c()(o.a.icon,o.a["icon-button"],o.a["insert-above"]),title:"Insert above",onClick:this.onInsertAbove}),e("div",{className:c()(o.a.icon,o.a["icon-button"],o.a.edit),title:"Edit",onClick:this.onMessageEdit}),e("div",{className:c()(o.a.icon,o.a["icon-button"],o.a.delete),title:"Delete",onClick:this.onMessageDelete})),this.state.authorMenuOpen?e(l.a,{items:this.props.chars.map((({id:e,name:t})=>({id:e,value:t}))),x:this.state.authorMenuX,y:this.state.authorMenuY,onDismiss:this.onDismissAuthorMenu,onClickItem:this.onReplaceAuthor}):null)}})}).call(this,n("hosL").h)},u6aR:function(e,t){"use strict";t.a={"project-bar":"project-bar__1grAi","project-name":"project-name__11aJs",button:"button__3v3wp",error:"error__3QnLA"}},yTKo:function(e,t){"use strict";t.a={icon:"icon__1RDVl","icon-button":"icon-button__3dJs1",active:"active__X9UHb",disabled:"disabled___Rdup",delete:"delete__5sT5d",edit:"edit__hkaq1","insert-above":"insert-above__2e7WT",load:"load__14cpF",save:"save__3lssl"}}});
//# sourceMappingURL=bundle.d5019.esm.js.map