{"version":3,"file":"main.14079.js","mappings":"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","sources":["webpack://chatterscribe/webpack/bootstrap","webpack://chatterscribe/./node_modules/classnames/index.js","webpack://chatterscribe/./node_modules/jtd/lib/index.js","webpack://chatterscribe/./node_modules/jtd/lib/rfc3339.js","webpack://chatterscribe/./node_modules/jtd/lib/schema.js","webpack://chatterscribe/./node_modules/jtd/lib/validate.js","webpack://chatterscribe/../src/util.js","webpack://chatterscribe/../src/create-element.js","webpack://chatterscribe/../src/component.js","webpack://chatterscribe/../src/constants.js","webpack://chatterscribe/../src/diff/children.js","webpack://chatterscribe/../src/diff/props.js","webpack://chatterscribe/../src/diff/index.js","webpack://chatterscribe/../src/render.js","webpack://chatterscribe/../src/create-context.js","webpack://chatterscribe/../src/options.js","webpack://chatterscribe/../src/diff/catch-error.js","webpack://chatterscribe/webpack/runtime/compat get default export","webpack://chatterscribe/webpack/runtime/define property getters","webpack://chatterscribe/webpack/runtime/hasOwnProperty shorthand","webpack://chatterscribe/../src/index.js","webpack://chatterscribe/../src/index.ts","webpack://chatterscribe/./src/components/App/style.scss?5c09","webpack://chatterscribe/./src/components/CommandBox/style.scss?3605","webpack://chatterscribe/./src/util/id.ts","webpack://chatterscribe/./src/actions/create-character.ts","webpack://chatterscribe/./src/actions/create-convo.ts","webpack://chatterscribe/./src/util/create-convo.ts","webpack://chatterscribe/./src/actions/create-message.ts","webpack://chatterscribe/./src/actions/edit-message.ts","webpack://chatterscribe/./src/actions/set-current-character-id.ts","webpack://chatterscribe/./src/serialization/save-state.ts","webpack://chatterscribe/./src/serialization/validate.ts","webpack://chatterscribe/./src/actions/load-state.ts","webpack://chatterscribe/./src/util/store.ts","webpack://chatterscribe/./src/components/CommandBox/CommandBox.tsx","webpack://chatterscribe/./src/components/CharacterList/style.scss?f125","webpack://chatterscribe/./src/components/Icon/style.scss?c501","webpack://chatterscribe/./src/components/Icon/Icon.tsx","webpack://chatterscribe/./src/actions/delete-character.ts","webpack://chatterscribe/./src/actions/set-edited-character-id.ts","webpack://chatterscribe/./src/actions/set-to-be-replaced-character-id.ts","webpack://chatterscribe/./src/util/color-to-hex.ts","webpack://chatterscribe/./src/components/CharacterList/CharacterList.tsx","webpack://chatterscribe/./src/components/CharacterSettingsModal/style.scss?4254","webpack://chatterscribe/./src/actions/update-character.ts","webpack://chatterscribe/./src/components/CharacterSettingsModal/CharacterSettingsModal.tsx","webpack://chatterscribe/./src/components/ConvoList/style.scss?52e2","webpack://chatterscribe/./src/actions/delete-convo.ts","webpack://chatterscribe/./src/actions/set-convo-name.ts","webpack://chatterscribe/./src/actions/set-current-convo-id.ts","webpack://chatterscribe/./src/actions/set-edited-convo-id.ts","webpack://chatterscribe/./src/actions/set-exported-convo-id.ts","webpack://chatterscribe/./src/components/ConvoList/ConvoList.tsx","webpack://chatterscribe/./src/components/ExportConvoModal/style.scss?ef04","webpack://chatterscribe/./src/actions/export-convo-settings/set-wrap-text-enabled.ts","webpack://chatterscribe/./src/actions/export-convo-settings/set-wrap-text-length.ts","webpack://chatterscribe/./src/actions/export-convo-settings/set-justify-enabled.ts","webpack://chatterscribe/./src/actions/export-convo-settings/set-justify-side.ts","webpack://chatterscribe/./src/util/save-to-file.ts","webpack://chatterscribe/./src/components/ExportConvoModal/ExportConvoModal.tsx","webpack://chatterscribe/./src/components/Messages/style.scss?7655","webpack://chatterscribe/./src/components/Message/style.scss?e398","webpack://chatterscribe/./src/components/SearchableMenu/style.scss?99bd","webpack://chatterscribe/./src/components/SearchableMenu/SearchableMenu.tsx","webpack://chatterscribe/./src/actions/delete-message.ts","webpack://chatterscribe/./src/actions/replace-message-author.ts","webpack://chatterscribe/./src/actions/set-edited-message-id.ts","webpack://chatterscribe/./src/actions/set-insert-above-message-id.ts","webpack://chatterscribe/./src/components/Message/Message.tsx","webpack://chatterscribe/./src/components/Messages/Messages.tsx","webpack://chatterscribe/./src/components/Modal/style.scss?902d","webpack://chatterscribe/./src/components/Modal/Modal.tsx","webpack://chatterscribe/./src/components/ProjectBar/style.scss?337d","webpack://chatterscribe/./src/actions/set-project-name.ts","webpack://chatterscribe/./src/components/ProjectBar/ProjectBar.tsx","webpack://chatterscribe/./src/components/ReplaceCharacterModal/style.scss?8de9","webpack://chatterscribe/./src/actions/replace-character.ts","webpack://chatterscribe/./src/components/ReplaceCharacterModal/ReplaceCharacterModal.tsx","webpack://chatterscribe/./src/components/App/App.tsx","webpack://chatterscribe/./src/index.tsx"],"sourcesContent":["// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","\"use strict\";\n/**\n * Package jtd is an implementation of JSON Typedef.\n *\n * The {@link validate} function is an implementation of JSON Typedef\n * validation. The {@link Schema} interface represents JSON Typedef schemas.\n *\n * See [the README](https://github.com/jsontypedef/json-typedef-js) for examples\n * and links to guides on how to use this package.\n *\n * @packageDocumentation\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./schema\"), exports);\n__exportStar(require(\"./validate\"), exports);\n","\"use strict\";\n/** @ignore */ /** */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst pattern = /^(\\d{4})-(\\d{2})-(\\d{2})[tT](\\d{2}):(\\d{2}):(\\d{2})(\\.\\d+)?([zZ]|((\\+|-)(\\d{2}):(\\d{2})))$/;\nfunction isRFC3339(s) {\n    const matches = s.match(pattern);\n    if (matches === null) {\n        return false;\n    }\n    const year = parseInt(matches[1], 10);\n    const month = parseInt(matches[2], 10);\n    const day = parseInt(matches[3], 10);\n    const hour = parseInt(matches[4], 10);\n    const minute = parseInt(matches[5], 10);\n    const second = parseInt(matches[6], 10);\n    if (month > 12) {\n        return false;\n    }\n    if (day > maxDay(year, month)) {\n        return false;\n    }\n    if (hour > 23) {\n        return false;\n    }\n    if (minute > 59) {\n        return false;\n    }\n    // A value of 60 is permissible as a leap second.\n    if (second > 60) {\n        return false;\n    }\n    return true;\n}\nexports.default = isRFC3339;\nfunction maxDay(year, month) {\n    if (month === 2) {\n        return isLeapYear(year) ? 29 : 28;\n    }\n    return MONTH_LENGTHS[month];\n}\nfunction isLeapYear(n) {\n    return n % 4 === 0 && (n % 100 !== 0 || n % 400 === 0);\n}\nconst MONTH_LENGTHS = [\n    0,\n    31,\n    0,\n    31,\n    30,\n    31,\n    30,\n    31,\n    31,\n    30,\n    31,\n    30,\n    31,\n];\n","\"use strict\";\n/**\n * Module schema provides code to safely handle JSON Typedef schemas.\n *\n * JSON Typedef schemas are represented in this module with {@link Schema}, and\n * you can check if a JSON object is a correct schema by using {@link isSchema}\n * and {@link isValidSchema}.\n *\n * @packageDocumentation\n */\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isSchema = exports.isValidSchema = exports.isDiscriminatorForm = exports.isValuesForm = exports.isPropertiesForm = exports.isElementsForm = exports.isEnumForm = exports.isTypeForm = exports.isRefForm = exports.isEmptyForm = void 0;\n/**\n * isEmptyForm checks whether some Schema is of the empty form.\n *\n * @param schema The schema to validate\n */\nfunction isEmptyForm(schema) {\n    const { definitions, nullable, metadata } = schema, rest = __rest(schema, [\"definitions\", \"nullable\", \"metadata\"]);\n    return Object.keys(rest).length === 0;\n}\nexports.isEmptyForm = isEmptyForm;\n/**\n * isRefForm checks whether some Schema is of the ref form.\n *\n * @param schema The schema to validate\n */\nfunction isRefForm(schema) {\n    return \"ref\" in schema;\n}\nexports.isRefForm = isRefForm;\n/**\n * isTypeForm checks whether some Schema is of the type form.\n *\n * @param schema The schema to validate\n */\nfunction isTypeForm(schema) {\n    return \"type\" in schema;\n}\nexports.isTypeForm = isTypeForm;\n/**\n * isEnumForm checks whether some Schema is of the enum form.\n *\n * @param schema The schema to validate\n */\nfunction isEnumForm(schema) {\n    return \"enum\" in schema;\n}\nexports.isEnumForm = isEnumForm;\n/**\n * isElementsForm checks whether some Schema is of the elements form.\n *\n * @param schema The schema to validate\n */\nfunction isElementsForm(schema) {\n    return \"elements\" in schema;\n}\nexports.isElementsForm = isElementsForm;\n/**\n * isPropertiesForm checks whether some Schema is of the properties form.\n *\n * @param schema The schema to validate\n */\nfunction isPropertiesForm(schema) {\n    return \"properties\" in schema || \"optionalProperties\" in schema;\n}\nexports.isPropertiesForm = isPropertiesForm;\n/**\n * isPropertiesForm checks whether some Schema is of the values form.\n *\n * @param schema The schema to validate\n */\nfunction isValuesForm(schema) {\n    return \"values\" in schema;\n}\nexports.isValuesForm = isValuesForm;\n/**\n * isDiscriminatorForm checks whether some Schema is of the values form.\n *\n * @param schema The schema to validate\n */\nfunction isDiscriminatorForm(schema) {\n    return \"discriminator\" in schema;\n}\nexports.isDiscriminatorForm = isDiscriminatorForm;\n/**\n * isValidSchema checks whether some Schema is correct, according to the syntax\n * rules of JSON Typedef.\n *\n * In particular, isValidSchema verifies that:\n *\n * 1. The schema does not have any non-root definitions,\n * 2. All references point to actually-existing definitions,\n * 3. All enums are non-empty, and do not contain duplicates,\n * 4. The `properties` and `optionalProperties` of a schema never share\n *    properties,\n * 5. All schemas in `mapping` are of the properties form,\n * 6. Schemas in `mapping` never re-specify the `discriminator` property\n *\n * If an object returned from `JSON.parse` passes both {@link isSchema} and\n * {@link isValidSchema}, then it is a correct JSON Typedef schema.\n *\n * @param schema The schema to validate\n * @param root The schema to consider as the \"root\" schema. If undefined,\n * `schema` will be used as the root. This is usually what you want to do.\n */\nfunction isValidSchema(schema, root) {\n    if (root === undefined) {\n        root = schema;\n    }\n    if (schema.definitions !== undefined) {\n        if (root !== schema) {\n            return false;\n        }\n        for (const subSchema of Object.values(schema.definitions)) {\n            if (!isValidSchema(subSchema, root)) {\n                return false;\n            }\n        }\n    }\n    if (isRefForm(schema)) {\n        if (!(schema.ref in (root.definitions || {}))) {\n            return false;\n        }\n    }\n    if (isEnumForm(schema)) {\n        if (schema.enum.length === 0) {\n            return false;\n        }\n        if (schema.enum.length !== new Set(schema.enum).size) {\n            return false;\n        }\n    }\n    if (isElementsForm(schema)) {\n        return isValidSchema(schema.elements, root);\n    }\n    if (isPropertiesForm(schema)) {\n        for (const subSchema of Object.values(schema.properties || {})) {\n            if (!isValidSchema(subSchema, root)) {\n                return false;\n            }\n        }\n        for (const subSchema of Object.values(schema.optionalProperties || {})) {\n            if (!isValidSchema(subSchema, root)) {\n                return false;\n            }\n        }\n        for (const key of Object.keys(schema.properties || {})) {\n            if (key in (schema.optionalProperties || {})) {\n                return false;\n            }\n        }\n    }\n    if (isValuesForm(schema)) {\n        return isValidSchema(schema.values, root);\n    }\n    if (isDiscriminatorForm(schema)) {\n        for (const subSchema of Object.values(schema.mapping)) {\n            if (!isValidSchema(subSchema, root) || !isPropertiesForm(subSchema)) {\n                return false;\n            }\n            if (subSchema.nullable) {\n                return false;\n            }\n            if (schema.discriminator in (subSchema.properties || {})) {\n                return false;\n            }\n            if (schema.discriminator in (subSchema.optionalProperties || {})) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\nexports.isValidSchema = isValidSchema;\n// Index of valid form \"signatures\" -- i.e., combinations of the presence of the\n// keywords (in order):\n//\n// ref type enum elements properties optionalProperties additionalProperties\n// values discriminator mapping\n//\n// The keywords \"definitions\", \"nullable\", and \"metadata\" are not included here,\n// because they would restrict nothing.\nconst VALID_FORMS = [\n    // Empty form\n    [false, false, false, false, false, false, false, false, false, false],\n    // Ref form\n    [true, false, false, false, false, false, false, false, false, false],\n    // Type form\n    [false, true, false, false, false, false, false, false, false, false],\n    // Enum form\n    [false, false, true, false, false, false, false, false, false, false],\n    // Elements form\n    [false, false, false, true, false, false, false, false, false, false],\n    // Properties form -- properties or optional properties or both, and never\n    // additional properties on its own\n    [false, false, false, false, true, false, false, false, false, false],\n    [false, false, false, false, false, true, false, false, false, false],\n    [false, false, false, false, true, true, false, false, false, false],\n    [false, false, false, false, true, false, true, false, false, false],\n    [false, false, false, false, false, true, true, false, false, false],\n    [false, false, false, false, true, true, true, false, false, false],\n    // Values form\n    [false, false, false, false, false, false, false, true, false, false],\n    // Discriminator form\n    [false, false, false, false, false, false, false, false, true, true],\n];\n// List of valid values that the \"type\" keyboard may take on.\nconst VALID_TYPES = [\n    \"boolean\",\n    \"float32\",\n    \"float64\",\n    \"int8\",\n    \"uint8\",\n    \"int16\",\n    \"uint16\",\n    \"int32\",\n    \"uint32\",\n    \"string\",\n    \"timestamp\",\n];\n/**\n * isSchema checks whether some piece of JSON data has the shape of a JSON\n * Typedef Schema.\n *\n * This function only looks at the \"shape\" of data: it just makes sure all\n * property names and types are valid, and that the data takes on one of the\n * eight JSON Typedef forms.\n *\n * If an object returned from `JSON.parse` passes both {@link isSchema} and\n * {@link isValidSchema}, then it is a correct JSON Typedef schema.\n *\n * @param data The data to check\n */\nfunction isSchema(data) {\n    if (typeof data !== \"object\" || Array.isArray(data) || data === null) {\n        return false;\n    }\n    // TypeScript does not let us coerce `{}` into `{ [index: string]: unknown }`.\n    // At the time of writing, it's unclear why this is the case, nor under what\n    // circumstances such an coercion would be wrong.\n    //\n    // So we work around the compiler here.\n    const obj = data;\n    const { definitions = undefined, nullable = undefined, metadata = undefined, ref = undefined, type = undefined, enum: enum_ = undefined, elements = undefined, properties = undefined, optionalProperties = undefined, additionalProperties = undefined, values = undefined, discriminator = undefined, mapping = undefined } = obj, rest = __rest(obj, [\"definitions\", \"nullable\", \"metadata\", \"ref\", \"type\", \"enum\", \"elements\", \"properties\", \"optionalProperties\", \"additionalProperties\", \"values\", \"discriminator\", \"mapping\"]);\n    const formSignature = [\n        ref !== undefined,\n        type !== undefined,\n        enum_ !== undefined,\n        elements !== undefined,\n        properties !== undefined,\n        optionalProperties !== undefined,\n        additionalProperties !== undefined,\n        values !== undefined,\n        discriminator !== undefined,\n        mapping !== undefined,\n    ];\n    let formOk = false;\n    for (const validForm of VALID_FORMS) {\n        formOk =\n            formOk ||\n                validForm.every((value, index) => value === formSignature[index]);\n    }\n    if (!formOk) {\n        return false;\n    }\n    if (definitions !== undefined) {\n        if (typeof definitions !== \"object\" ||\n            Array.isArray(definitions) ||\n            definitions === null) {\n            return false;\n        }\n        for (const value of Object.values(definitions)) {\n            if (!isSchema(value)) {\n                return false;\n            }\n        }\n    }\n    if (nullable !== undefined) {\n        if (typeof nullable !== \"boolean\") {\n            return false;\n        }\n    }\n    if (metadata !== undefined) {\n        if (typeof metadata !== \"object\" ||\n            Array.isArray(metadata) ||\n            metadata === null) {\n            return false;\n        }\n    }\n    if (ref !== undefined) {\n        if (typeof ref !== \"string\") {\n            return false;\n        }\n    }\n    if (type !== undefined) {\n        if (typeof type !== \"string\" || !VALID_TYPES.includes(type)) {\n            return false;\n        }\n    }\n    if (enum_ !== undefined) {\n        if (!Array.isArray(enum_)) {\n            return false;\n        }\n        if (!enum_.every((elem) => typeof elem === \"string\")) {\n            return false;\n        }\n    }\n    if (elements !== undefined) {\n        if (!isSchema(elements)) {\n            return false;\n        }\n    }\n    if (properties !== undefined) {\n        if (typeof properties !== \"object\" ||\n            Array.isArray(properties) ||\n            properties === null) {\n            return false;\n        }\n        for (const value of Object.values(properties)) {\n            if (!isSchema(value)) {\n                return false;\n            }\n        }\n    }\n    if (optionalProperties !== undefined) {\n        if (typeof optionalProperties !== \"object\" ||\n            Array.isArray(optionalProperties) ||\n            optionalProperties === null) {\n            return false;\n        }\n        for (const value of Object.values(optionalProperties)) {\n            if (!isSchema(value)) {\n                return false;\n            }\n        }\n    }\n    if (additionalProperties !== undefined) {\n        if (typeof additionalProperties !== \"boolean\") {\n            return false;\n        }\n    }\n    if (values !== undefined) {\n        if (!isSchema(values)) {\n            return false;\n        }\n    }\n    if (discriminator !== undefined) {\n        if (typeof discriminator !== \"string\") {\n            return false;\n        }\n    }\n    if (mapping !== undefined) {\n        if (typeof mapping !== \"object\" ||\n            Array.isArray(mapping) ||\n            mapping === null) {\n            return false;\n        }\n        for (const value of Object.values(mapping)) {\n            if (!isSchema(value)) {\n                return false;\n            }\n        }\n    }\n    if (Object.keys(rest).length !== 0) {\n        return false;\n    }\n    return true;\n}\nexports.isSchema = isSchema;\n","\"use strict\";\n/**\n * Module validate provides an implementation of JSON Typedef validation.\n *\n * The most important function in this module is {@link validate}, which returns\n * an array of {@link ValidationError}. You can configure {@link validate} by\n * passing it a {@link ValidationConfig}.\n *\n * @packageDocumentation\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validate = exports.MaxDepthExceededError = void 0;\nconst rfc3339_1 = __importDefault(require(\"./rfc3339\"));\nconst schema_1 = require(\"./schema\");\n/**\n * MaxDepthExceededError is the error returned if\n * {@link ValidationConfig.maxDepth} is exceeded during {@link validate}.\n */\nclass MaxDepthExceededError extends Error {\n}\nexports.MaxDepthExceededError = MaxDepthExceededError;\nclass MaxErrorsReachedError extends Error {\n}\n/**\n * validate performs JSON Typedef validation of an instance (or \"input\") against\n * a JSON Typedef schema, returning a standardized set of errors.\n *\n * This function may throw {@link MaxDepthExceededError} if you have configured\n * a {@link ValidationConfig.maxDepth}. If you do not configure such a maxDepth,\n * then this function may cause a stack overflow. That's because of\n * circularly-defined schemas like this one:\n *\n * ```json\n * {\n *   \"ref\": \"loop\",\n *   \"definitions\": {\n *     \"loop\": { \"ref\": \"loop\" }\n *   }\n * }\n * ```\n *\n * If your schema is not circularly defined like this, then there is no risk for\n * validate to overflow the stack.\n *\n * If you are only interested in a certain number of error messages, consider\n * using {@link ValidationConfig.maxErrors} to get better performance. For\n * instance, if all you care about is whether the input is OK or if it has\n * errors, you may want to set maxErrors to 1.\n *\n * @param schema The schema to validate data against\n * @param instance The \"input\" to validate\n * @param config Validation options. Optional.\n */\nfunction validate(schema, instance, config) {\n    const state = {\n        errors: [],\n        instanceTokens: [],\n        schemaTokens: [[]],\n        root: schema,\n        config: config || { maxDepth: 0, maxErrors: 0 },\n    };\n    try {\n        validateWithState(state, schema, instance);\n    }\n    catch (err) {\n        if (err instanceof MaxErrorsReachedError) {\n            // MaxErrorsReachedError is just a dummy error to abort further\n            // validation. The contents of state.errors are what we need to return.\n        }\n        else {\n            // This is a genuine error. Let's re-throw it.\n            throw err;\n        }\n    }\n    return state.errors;\n}\nexports.validate = validate;\nfunction validateWithState(state, schema, instance, parentTag) {\n    if (schema.nullable && instance === null) {\n        return;\n    }\n    if (schema_1.isRefForm(schema)) {\n        if (state.schemaTokens.length === state.config.maxDepth) {\n            throw new MaxDepthExceededError();\n        }\n        // The ref form is the only case where we push a new array onto\n        // schemaTokens; we maintain a separate stack for each reference.\n        state.schemaTokens.push([\"definitions\", schema.ref]);\n        validateWithState(state, state.root.definitions[schema.ref], instance);\n        state.schemaTokens.pop();\n    }\n    else if (schema_1.isTypeForm(schema)) {\n        pushSchemaToken(state, \"type\");\n        switch (schema.type) {\n            case \"boolean\":\n                if (typeof instance !== \"boolean\") {\n                    pushError(state);\n                }\n                break;\n            case \"float32\":\n            case \"float64\":\n                if (typeof instance !== \"number\") {\n                    pushError(state);\n                }\n                break;\n            case \"int8\":\n                validateInt(state, instance, -128, 127);\n                break;\n            case \"uint8\":\n                validateInt(state, instance, 0, 255);\n                break;\n            case \"int16\":\n                validateInt(state, instance, -32768, 32767);\n                break;\n            case \"uint16\":\n                validateInt(state, instance, 0, 65535);\n                break;\n            case \"int32\":\n                validateInt(state, instance, -2147483648, 2147483647);\n                break;\n            case \"uint32\":\n                validateInt(state, instance, 0, 4294967295);\n                break;\n            case \"string\":\n                if (typeof instance !== \"string\") {\n                    pushError(state);\n                }\n                break;\n            case \"timestamp\":\n                if (typeof instance !== \"string\") {\n                    pushError(state);\n                }\n                else {\n                    if (!rfc3339_1.default(instance)) {\n                        pushError(state);\n                    }\n                }\n                break;\n        }\n        popSchemaToken(state);\n    }\n    else if (schema_1.isEnumForm(schema)) {\n        pushSchemaToken(state, \"enum\");\n        if (typeof instance !== \"string\" || !schema.enum.includes(instance)) {\n            pushError(state);\n        }\n        popSchemaToken(state);\n    }\n    else if (schema_1.isElementsForm(schema)) {\n        pushSchemaToken(state, \"elements\");\n        if (Array.isArray(instance)) {\n            for (const [index, subInstance] of instance.entries()) {\n                pushInstanceToken(state, index.toString());\n                validateWithState(state, schema.elements, subInstance);\n                popInstanceToken(state);\n            }\n        }\n        else {\n            pushError(state);\n        }\n        popSchemaToken(state);\n    }\n    else if (schema_1.isPropertiesForm(schema)) {\n        // JSON has six basic types of data (null, boolean, number, string,\n        // array, object). Of their standard JS countparts, three have a\n        // `typeof` of \"object\": null, array, and object.\n        //\n        // This check attempts to check if something is \"really\" an object.\n        if (typeof instance === \"object\" &&\n            instance !== null &&\n            !Array.isArray(instance)) {\n            if (schema.properties !== undefined) {\n                pushSchemaToken(state, \"properties\");\n                for (const [name, subSchema] of Object.entries(schema.properties)) {\n                    pushSchemaToken(state, name);\n                    if (instance.hasOwnProperty(name)) {\n                        pushInstanceToken(state, name);\n                        validateWithState(state, subSchema, instance[name]);\n                        popInstanceToken(state);\n                    }\n                    else {\n                        pushError(state);\n                    }\n                    popSchemaToken(state);\n                }\n                popSchemaToken(state);\n            }\n            if (schema.optionalProperties !== undefined) {\n                pushSchemaToken(state, \"optionalProperties\");\n                for (const [name, subSchema] of Object.entries(schema.optionalProperties)) {\n                    pushSchemaToken(state, name);\n                    if (instance.hasOwnProperty(name)) {\n                        pushInstanceToken(state, name);\n                        validateWithState(state, subSchema, instance[name]);\n                        popInstanceToken(state);\n                    }\n                    popSchemaToken(state);\n                }\n                popSchemaToken(state);\n            }\n            if (schema.additionalProperties !== true) {\n                for (const name of Object.keys(instance)) {\n                    const inRequired = schema.properties && name in schema.properties;\n                    const inOptional = schema.optionalProperties && name in schema.optionalProperties;\n                    if (!inRequired && !inOptional && name !== parentTag) {\n                        pushInstanceToken(state, name);\n                        pushError(state);\n                        popInstanceToken(state);\n                    }\n                }\n            }\n        }\n        else {\n            if (schema.properties !== undefined) {\n                pushSchemaToken(state, \"properties\");\n            }\n            else {\n                pushSchemaToken(state, \"optionalProperties\");\n            }\n            pushError(state);\n            popSchemaToken(state);\n        }\n    }\n    else if (schema_1.isValuesForm(schema)) {\n        pushSchemaToken(state, \"values\");\n        // See comment in properties form on why this is the test we use for\n        // checking for objects.\n        if (typeof instance === \"object\" &&\n            instance !== null &&\n            !Array.isArray(instance)) {\n            for (const [name, subInstance] of Object.entries(instance)) {\n                pushInstanceToken(state, name);\n                validateWithState(state, schema.values, subInstance);\n                popInstanceToken(state);\n            }\n        }\n        else {\n            pushError(state);\n        }\n        popSchemaToken(state);\n    }\n    else if (schema_1.isDiscriminatorForm(schema)) {\n        // See comment in properties form on why this is the test we use for\n        // checking for objects.\n        if (typeof instance === \"object\" &&\n            instance !== null &&\n            !Array.isArray(instance)) {\n            if (instance.hasOwnProperty(schema.discriminator)) {\n                const tag = instance[schema.discriminator];\n                if (typeof tag === \"string\") {\n                    if (tag in schema.mapping) {\n                        pushSchemaToken(state, \"mapping\");\n                        pushSchemaToken(state, tag);\n                        validateWithState(state, schema.mapping[tag], instance, schema.discriminator);\n                        popSchemaToken(state);\n                        popSchemaToken(state);\n                    }\n                    else {\n                        pushSchemaToken(state, \"mapping\");\n                        pushInstanceToken(state, schema.discriminator);\n                        pushError(state);\n                        popInstanceToken(state);\n                        popSchemaToken(state);\n                    }\n                }\n                else {\n                    pushSchemaToken(state, \"discriminator\");\n                    pushInstanceToken(state, schema.discriminator);\n                    pushError(state);\n                    popInstanceToken(state);\n                    popSchemaToken(state);\n                }\n            }\n            else {\n                pushSchemaToken(state, \"discriminator\");\n                pushError(state);\n                popSchemaToken(state);\n            }\n        }\n        else {\n            pushSchemaToken(state, \"discriminator\");\n            pushError(state);\n            popSchemaToken(state);\n        }\n    }\n}\nfunction validateInt(state, instance, min, max) {\n    if (typeof instance !== \"number\" ||\n        !Number.isInteger(instance) ||\n        instance < min ||\n        instance > max) {\n        pushError(state);\n    }\n}\nfunction pushInstanceToken(state, token) {\n    state.instanceTokens.push(token);\n}\nfunction popInstanceToken(state) {\n    state.instanceTokens.pop();\n}\nfunction pushSchemaToken(state, token) {\n    state.schemaTokens[state.schemaTokens.length - 1].push(token);\n}\nfunction popSchemaToken(state) {\n    state.schemaTokens[state.schemaTokens.length - 1].pop();\n}\nfunction pushError(state) {\n    state.errors.push({\n        instancePath: [...state.instanceTokens],\n        schemaPath: [...state.schemaTokens[state.schemaTokens.length - 1]],\n    });\n    if (state.errors.length === state.config.maxErrors) {\n        throw new MaxErrorsReachedError();\n    }\n}\n","import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {preact.ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n","import { slice } from './util';\nimport options from './options';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: original == null ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == null && options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor == undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tparentDom = component._parentDom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {Component} a\n * @param {Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c;\n\trerenderQueue.sort(depthSort);\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile ((c = rerenderQueue.shift())) {\n\t\tif (c._dirty) {\n\t\t\tlet renderQueueLength = rerenderQueue.length;\n\t\t\trenderComponent(c);\n\t\t\tif (rerenderQueue.length > renderQueueLength) {\n\t\t\t\t// When i.e. rerendering a provider additional new items can be injected, we want to\n\t\t\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t\t\t// single pass\n\t\t\t\trerenderQueue.sort(depthSort);\n\t\t\t}\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n","/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 16;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 17;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR, INSERT_VNODE, MATCHED } from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\tnewParentVNode._nextDom = oldDom;\n\tconstructNewChildrenArray(newParentVNode, renderResult, oldChildren);\n\toldDom = newParentVNode._nextDom;\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\n\t\tif (\n\t\t\tchildVNode == null ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index === -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tisSvg,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, null, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == null && newDom != null) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tif (\n\t\t\tchildVNode._flags & INSERT_VNODE ||\n\t\t\toldVNode._children === childVNode._children\n\t\t) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom);\n\t\t} else if (\n\t\t\ttypeof childVNode.type == 'function' &&\n\t\t\tchildVNode._nextDom !== undefined\n\t\t) {\n\t\t\t// Since Fragments or components that return Fragment like VNodes can\n\t\t\t// contain multiple DOM nodes as the same level, continue the diff from\n\t\t\t// the sibling of last DOM child of this child VNode\n\t\t\toldDom = childVNode._nextDom;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because it\n\t\t// is only used by `diffChildren` to determine where to resume the diff\n\t\t// after diffing Components and Fragments. Once we store it the nextDOM\n\t\t// local var, we can clean up the property. Also prevents us hanging on to\n\t\t// DOM nodes that may have been unmounted.\n\t\tchildVNode._nextDom = undefined;\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\t// TODO: With new child diffing algo, consider alt ways to diff Fragments.\n\t// Such as dropping oldDom and moving fragments in place\n\t//\n\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t// _nextDom property to the nextSibling of its last child DOM node.\n\t//\n\t// `oldDom` contains the correct value here because if the last child\n\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t// node's nextSibling.\n\tnewParentVNode._nextDom = oldDom;\n\tnewParentVNode._dom = firstChildDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(newParentVNode, renderResult, oldChildren) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tconst newChildrenLength = renderResult.length;\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = [];\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == null ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = null;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode.constructor === undefined && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : null,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\t// Handle unmounting null placeholders, i.e. VNode => null in unkeyed children\n\t\tif (childVNode == null) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode && oldVNode.key == null && oldVNode._dom) {\n\t\t\t\tif (oldVNode._dom == newParentVNode._nextDom) {\n\t\t\t\t\tnewParentVNode._nextDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode, false);\n\n\t\t\t\t// Explicitly nullify this position in oldChildren instead of just\n\t\t\t\t// setting `_match=true` to prevent other routines (e.g.\n\t\t\t\t// `findMatchingIndex` or `getDomSibling`) from thinking VNodes or DOM\n\t\t\t\t// nodes in this position are still available to be used in diffing when\n\t\t\t\t// they have actually already been unmounted. For example, by only\n\t\t\t\t// setting `_match=true` here, the unmounting loop later would attempt\n\t\t\t\t// to unmount this VNode again seeing `_match==true`.  Further,\n\t\t\t\t// getDomSibling doesn't know about _match and so would incorrectly\n\t\t\t\t// assume DOM nodes in this subtree are mounted and usable.\n\t\t\t\toldChildren[i] = null;\n\t\t\t\tremainingOldChildren--;\n\t\t\t}\n\n\t\t\tcontinue;\n\t\t}\n\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\tconst skewedIndex = i + skew;\n\t\tconst matchingIndex = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t);\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tchildVNode._index = matchingIndex;\n\n\t\toldVNode = null;\n\t\tif (matchingIndex !== -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original === null\n\t\tconst isMounting = oldVNode == null || oldVNode._original === null;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\tskew--;\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex !== skewedIndex) {\n\t\t\tif (matchingIndex === skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else if (matchingIndex > skewedIndex) {\n\t\t\t\tif (remainingOldChildren > newChildrenLength - skewedIndex) {\n\t\t\t\t\tskew += matchingIndex - skewedIndex;\n\t\t\t\t} else {\n\t\t\t\t\t// ### Change from keyed: I think this was missing from the algo...\n\t\t\t\t\tskew--;\n\t\t\t\t}\n\t\t\t} else if (matchingIndex < skewedIndex) {\n\t\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\t\tskew = matchingIndex - skewedIndex;\n\t\t\t\t} else {\n\t\t\t\t\tskew = 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tskew = 0;\n\t\t\t}\n\n\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t// match the new skew index (i + new skew)\n\t\t\tif (matchingIndex !== i + skew) {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != null && (oldVNode._flags & MATCHED) === 0) {\n\t\t\t\tif (oldVNode._dom == newParentVNode._nextDom) {\n\t\t\t\t\tnewParentVNode._nextDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tparentDom.insertBefore(parentVNode._dom, oldDom || null);\n\t\toldDom = parentVNode._dom;\n\t}\n\n\treturn oldDom && oldDom.nextSibling;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet x = skewedIndex - 1;\n\tlet y = skewedIndex + 1;\n\tlet oldVNode = oldChildren[skewedIndex];\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\tlet shouldSearch =\n\t\tremainingOldChildren >\n\t\t(oldVNode != null && (oldVNode._flags & MATCHED) === 0 ? 1 : 0);\n\n\tif (\n\t\toldVNode === null ||\n\t\t(oldVNode && key == oldVNode.key && type === oldVNode.type)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tif (x >= 0) {\n\t\t\t\toldVNode = oldChildren[x];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) === 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn x;\n\t\t\t\t}\n\t\t\t\tx--;\n\t\t\t}\n\n\t\t\tif (y < oldChildren.length) {\n\t\t\t\toldVNode = oldChildren[y];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) === 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn y;\n\t\t\t\t}\n\t\t\t\ty++;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value == null ? '' : value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, isSvg) {\n\tlet useCapture;\n\n\to: if (name === 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture =\n\t\t\tname !== (name = name.replace(/(PointerCapture)$|Capture$/, '$1'));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (name.toLowerCase() in dom) name = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = Date.now();\n\t\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\t\tdom.addEventListener(name, handler, useCapture);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\tdom.removeEventListener(name, handler, useCapture);\n\t\t}\n\t} else {\n\t\tif (isSvg) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname !== 'width' &&\n\t\t\tname !== 'height' &&\n\t\t\tname !== 'href' &&\n\t\t\tname !== 'list' &&\n\t\t\tname !== 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname !== 'tabIndex' &&\n\t\t\tname !== 'download' &&\n\t\t\tname !== 'rowSpan' &&\n\t\t\tname !== 'colSpan' &&\n\t\t\tname !== 'role' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == null ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != null && (value !== false || name[4] === '-')) {\n\t\t\tdom.setAttribute(name, value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {PreactEvent} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tconst eventHandler = this._listeners[e.type + false];\n\t/**\n\t * This trick is inspired by Vue https://github.com/vuejs/core/blob/main/packages/runtime-dom/src/modules/events.ts#L90-L101\n\t * when the dom performs an event it leaves micro-ticks in between bubbling up which means that an event can trigger on a newly\n\t * created DOM-node while the event bubbles up, this can cause quirky behavior as seen in https://github.com/preactjs/preact/issues/3927\n\t */\n\tif (!e._dispatched) {\n\t\t// When an event has no _dispatched we know this is the first event-target in the chain\n\t\t// so we set the initial dispatched time.\n\t\te._dispatched = Date.now();\n\t\t// When the _dispatched is smaller than the time when the targetted event handler was attached\n\t\t// we know we have bubbled up to an element that was added during patching the dom.\n\t} else if (e._dispatched <= eventHandler._attached) {\n\t\treturn;\n\t}\n\treturn eventHandler(options.event ? options.event(e) : e);\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {PreactEvent} e The event object from the browser\n * @private\n */\nfunction eventProxyCapture(e) {\n\treturn this._listeners[e.type + true](options.event ? options.event(e) : e);\n}\n","import {\n\tEMPTY_OBJ,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tRESET_MODE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!c._force &&\n\t\t\t\t\t((c.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\t\tnewVNode._original === oldVNode._original)\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.forEach(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = null;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t: MODE_HYDRATE;\n\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t\t// ^ could possibly be simplified to:\n\t\t\t\t// excessDomChildren.length = 0;\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == null &&\n\t\tnewVNode._original === oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\tnewVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tisSvg,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\troot._nextDom = undefined;\n\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tif (nodeType === 'svg') isSvg = true;\n\n\tif (excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value === !!nodeType &&\n\t\t\t\t(nodeType ? value.localName === nodeType : value.nodeType === 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (nodeType === null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tif (isSvg) {\n\t\t\tdom = document.createElementNS('http://www.w3.org/2000/svg', nodeType);\n\t\t} else {\n\t\t\tdom = document.createElement(nodeType, newProps.is && newProps);\n\t\t}\n\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tisHydrating = false;\n\t}\n\n\tif (nodeType === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != null) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (i !== 'key' && !(i in newProps)) {\n\t\t\t\tsetProperty(dom, i, null, value, isSvg);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\ti !== 'key' &&\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], isSvg);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html !== oldHtml.__html &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg && nodeType !== 'foreignObject',\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (\n\t\t\t\tinputValue !== undefined &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType === 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType === 'option' && inputValue !== oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], false);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked !== undefined && checked !== dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], false);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any>} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) {\n\t\t\tapplyRef(r, null, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t\tvnode._component = undefined;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type !== 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove && vnode._dom != null) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._parent = vnode._dom = vnode._nextDom = undefined;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { EMPTY_OBJ } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {ComponentChild} vnode The virtual node to render\n * @param {PreactElement} parentDom The DOM element to render into\n * @param {PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: parentDom.firstChild\n\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t: null,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t? oldVNode._dom\n\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {ComponentChild} vnode The virtual node to render\n * @param {PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue, contextId) {\n\tcontextId = '__cC' + i++;\n\n\tconst context = {\n\t\t_id: contextId,\n\t\t_defaultValue: defaultValue,\n\t\t/** @type {FunctionComponent} */\n\t\tConsumer(props, contextValue) {\n\t\t\t// return props.children(\n\t\t\t// \tcontext[contextId] ? context[contextId].props.value : defaultValue\n\t\t\t// );\n\t\t\treturn props.children(contextValue);\n\t\t},\n\t\t/** @type {FunctionComponent} */\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\t/** @type {Component[]} */\n\t\t\t\tlet subs = [];\n\t\t\t\tlet ctx = {};\n\t\t\t\tctx[contextId] = this;\n\n\t\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\t// I think the forced value propagation here was only needed when `options.debounceRendering` was being bypassed:\n\t\t\t\t\t\t// https://github.com/preactjs/preact/commit/4d339fb803bea09e9f198abf38ca1bf8ea4b7771#diff-54682ce380935a717e41b8bfc54737f6R358\n\t\t\t\t\t\t// In those cases though, even with the value corrected, we're double-rendering all nodes.\n\t\t\t\t\t\t// It might be better to just tell folks not to use force-sync mode.\n\t\t\t\t\t\t// Currently, using `useContext()` in a class component will overwrite its `this.context` value.\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context[contextId] = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\t\t\t\t\t\tsubs.some(c => {\n\t\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\n\treturn (context.Provider._contextRef = context.Consumer.contextType =\n\t\tcontext);\n}\n","import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {VNode} [oldVNode]\n * @param {ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {Component} */\n\tlet component,\n\t\t/** @type {ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet EMPTY = [];\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingValue = EMPTY;\n\t\t\t\thookItem._nextValue = hookItem._pendingArgs = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\tif (hookItem._pendingValue !== EMPTY) {\n\t\t\t\thookItem._value = hookItem._pendingValue;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t\thookItem._pendingValue = EMPTY;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({ _pendingValue: EMPTY });\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} [initialState]\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\tconst stateHooks = hookState._component.__hooks._list.filter(\n\t\t\t\t\tx => x._component\n\t\t\t\t);\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = false;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn shouldUpdate || hookState._component.props !== p\n\t\t\t\t\t? prevScu\n\t\t\t\t\t\t? prevScu.call(this, p, s, c)\n\t\t\t\t\t\t: true\n\t\t\t\t\t: false;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tref(createHandle());\n\t\t\t\treturn () => ref(null);\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._pendingValue = factory();\n\t\tstate._pendingArgs = args;\n\t\tstate._factory = factory;\n\t\treturn state._pendingValue;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\n/**\n * @param {(error: any, errorInfo: import('preact').ErrorInfo) => void} cb\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\nexport function useId() {\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal.d').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n","function cycleDetected(): never {\n\tthrow new Error(\"Cycle detected\");\n}\nfunction mutationDetected(): never {\n\tthrow new Error(\"Computed cannot have side-effects\");\n}\n\nconst identifier = Symbol.for(\"preact-signals\");\n\n// Flags for Computed and Effect.\nconst RUNNING = 1 << 0;\nconst NOTIFIED = 1 << 1;\nconst OUTDATED = 1 << 2;\nconst DISPOSED = 1 << 3;\nconst HAS_ERROR = 1 << 4;\nconst TRACKING = 1 << 5;\n\n// A linked list node used to track dependencies (sources) and dependents (targets).\n// Also used to remember the source's last version number that the target saw.\ntype Node = {\n\t// A source whose value the target depends on.\n\t_source: Signal;\n\t_prevSource?: Node;\n\t_nextSource?: Node;\n\n\t// A target that depends on the source and should be notified when the source changes.\n\t_target: Computed | Effect;\n\t_prevTarget?: Node;\n\t_nextTarget?: Node;\n\n\t// The version number of the source that target has last seen. We use version numbers\n\t// instead of storing the source value, because source values can take arbitrary amount\n\t// of memory, and computeds could hang on to them forever because they're lazily evaluated.\n\t// Use the special value -1 to mark potentially unused but recyclable nodes.\n\t_version: number;\n\n\t// Used to remember & roll back the source's previous `._node` value when entering &\n\t// exiting a new evaluation context.\n\t_rollbackNode?: Node;\n};\n\nfunction startBatch() {\n\tbatchDepth++;\n}\n\nfunction endBatch() {\n\tif (batchDepth > 1) {\n\t\tbatchDepth--;\n\t\treturn;\n\t}\n\n\tlet error: unknown;\n\tlet hasError = false;\n\n\twhile (batchedEffect !== undefined) {\n\t\tlet effect: Effect | undefined = batchedEffect;\n\t\tbatchedEffect = undefined;\n\n\t\tbatchIteration++;\n\n\t\twhile (effect !== undefined) {\n\t\t\tconst next: Effect | undefined = effect._nextBatchedEffect;\n\t\t\teffect._nextBatchedEffect = undefined;\n\t\t\teffect._flags &= ~NOTIFIED;\n\n\t\t\tif (!(effect._flags & DISPOSED) && needsToRecompute(effect)) {\n\t\t\t\ttry {\n\t\t\t\t\teffect._callback();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tif (!hasError) {\n\t\t\t\t\t\terror = err;\n\t\t\t\t\t\thasError = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\teffect = next;\n\t\t}\n\t}\n\tbatchIteration = 0;\n\tbatchDepth--;\n\n\tif (hasError) {\n\t\tthrow error;\n\t}\n}\n\nfunction batch<T>(callback: () => T): T {\n\tif (batchDepth > 0) {\n\t\treturn callback();\n\t}\n\t/*@__INLINE__**/ startBatch();\n\ttry {\n\t\treturn callback();\n\t} finally {\n\t\tendBatch();\n\t}\n}\n\n// Currently evaluated computed or effect.\nlet evalContext: Computed | Effect | undefined = undefined;\n\nlet untrackedDepth = 0;\n\nfunction untracked<T>(callback: () => T): T {\n\tif (untrackedDepth > 0) {\n\t\treturn callback();\n\t}\n\tconst prevContext = evalContext;\n\tevalContext = undefined;\n\tuntrackedDepth++;\n\ttry {\n\t\treturn callback();\n\t} finally {\n\t\tuntrackedDepth--;\n\t\tevalContext = prevContext;\n\t}\n}\n\n// Effects collected into a batch.\nlet batchedEffect: Effect | undefined = undefined;\nlet batchDepth = 0;\nlet batchIteration = 0;\n\n// A global version number for signals, used for fast-pathing repeated\n// computed.peek()/computed.value calls when nothing has changed globally.\nlet globalVersion = 0;\n\nfunction addDependency(signal: Signal): Node | undefined {\n\tif (evalContext === undefined) {\n\t\treturn undefined;\n\t}\n\n\tlet node = signal._node;\n\tif (node === undefined || node._target !== evalContext) {\n\t\t/**\n\t\t * `signal` is a new dependency. Create a new dependency node, and set it\n\t\t * as the tail of the current context's dependency list. e.g:\n\t\t *\n\t\t * { A <-> B       }\n\t\t *         ↑     ↑\n\t\t *        tail  node (new)\n\t\t *               ↓\n\t\t * { A <-> B <-> C }\n\t\t *               ↑\n\t\t *              tail (evalContext._sources)\n\t\t */\n\t\tnode = {\n\t\t\t_version: 0,\n\t\t\t_source: signal,\n\t\t\t_prevSource: evalContext._sources,\n\t\t\t_nextSource: undefined,\n\t\t\t_target: evalContext,\n\t\t\t_prevTarget: undefined,\n\t\t\t_nextTarget: undefined,\n\t\t\t_rollbackNode: node,\n\t\t};\n\n\t\tif (evalContext._sources !== undefined) {\n\t\t\tevalContext._sources._nextSource = node;\n\t\t}\n\t\tevalContext._sources = node;\n\t\tsignal._node = node;\n\n\t\t// Subscribe to change notifications from this dependency if we're in an effect\n\t\t// OR evaluating a computed signal that in turn has subscribers.\n\t\tif (evalContext._flags & TRACKING) {\n\t\t\tsignal._subscribe(node);\n\t\t}\n\t\treturn node;\n\t} else if (node._version === -1) {\n\t\t// `signal` is an existing dependency from a previous evaluation. Reuse it.\n\t\tnode._version = 0;\n\n\t\t/**\n\t\t * If `node` is not already the current tail of the dependency list (i.e.\n\t\t * there is a next node in the list), then make the `node` the new tail. e.g:\n\t\t *\n\t\t * { A <-> B <-> C <-> D }\n\t\t *         ↑           ↑\n\t\t *        node   ┌─── tail (evalContext._sources)\n\t\t *         └─────│─────┐\n\t\t *               ↓     ↓\n\t\t * { A <-> C <-> D <-> B }\n\t\t *                     ↑\n\t\t *                    tail (evalContext._sources)\n\t\t */\n\t\tif (node._nextSource !== undefined) {\n\t\t\tnode._nextSource._prevSource = node._prevSource;\n\n\t\t\tif (node._prevSource !== undefined) {\n\t\t\t\tnode._prevSource._nextSource = node._nextSource;\n\t\t\t}\n\n\t\t\tnode._prevSource = evalContext._sources;\n\t\t\tnode._nextSource = undefined;\n\n\t\t\tevalContext._sources!._nextSource = node;\n\t\t\tevalContext._sources = node;\n\t\t}\n\n\t\t// We can assume that the currently evaluated effect / computed signal is already\n\t\t// subscribed to change notifications from `signal` if needed.\n\t\treturn node;\n\t}\n\treturn undefined;\n}\n\n// @ts-ignore internal Signal is viewed as a function\ndeclare class Signal<T = any> {\n\t/** @internal */\n\t_value: unknown;\n\n\t/**\n\t * @internal\n\t * Version numbers should always be >= 0, because the special value -1 is used\n\t * by Nodes to signify potentially unused but recyclable nodes.\n\t */\n\t_version: number;\n\n\t/** @internal */\n\t_node?: Node;\n\n\t/** @internal */\n\t_targets?: Node;\n\n\tconstructor(value?: T);\n\n\t/** @internal */\n\t_refresh(): boolean;\n\n\t/** @internal */\n\t_subscribe(node: Node): void;\n\n\t/** @internal */\n\t_unsubscribe(node: Node): void;\n\n\tsubscribe(fn: (value: T) => void): () => void;\n\n\tvalueOf(): T;\n\n\ttoString(): string;\n\n\ttoJSON(): T;\n\n\tpeek(): T;\n\n\tbrand: typeof identifier;\n\n\tget value(): T;\n\tset value(value: T);\n}\n\n/** @internal */\n// @ts-ignore internal Signal is viewed as function\nfunction Signal(this: Signal, value?: unknown) {\n\tthis._value = value;\n\tthis._version = 0;\n\tthis._node = undefined;\n\tthis._targets = undefined;\n}\n\nSignal.prototype.brand = identifier;\n\nSignal.prototype._refresh = function () {\n\treturn true;\n};\n\nSignal.prototype._subscribe = function (node) {\n\tif (this._targets !== node && node._prevTarget === undefined) {\n\t\tnode._nextTarget = this._targets;\n\t\tif (this._targets !== undefined) {\n\t\t\tthis._targets._prevTarget = node;\n\t\t}\n\t\tthis._targets = node;\n\t}\n};\n\nSignal.prototype._unsubscribe = function (node) {\n\t// Only run the unsubscribe step if the signal has any subscribers to begin with.\n\tif (this._targets !== undefined) {\n\t\tconst prev = node._prevTarget;\n\t\tconst next = node._nextTarget;\n\t\tif (prev !== undefined) {\n\t\t\tprev._nextTarget = next;\n\t\t\tnode._prevTarget = undefined;\n\t\t}\n\t\tif (next !== undefined) {\n\t\t\tnext._prevTarget = prev;\n\t\t\tnode._nextTarget = undefined;\n\t\t}\n\t\tif (node === this._targets) {\n\t\t\tthis._targets = next;\n\t\t}\n\t}\n};\n\nSignal.prototype.subscribe = function (fn) {\n\tconst signal = this;\n\treturn effect(function (this: Effect) {\n\t\tconst value = signal.value;\n\t\tconst flag = this._flags & TRACKING;\n\t\tthis._flags &= ~TRACKING;\n\t\ttry {\n\t\t\tfn(value);\n\t\t} finally {\n\t\t\tthis._flags |= flag;\n\t\t}\n\t});\n};\n\nSignal.prototype.valueOf = function () {\n\treturn this.value;\n};\n\nSignal.prototype.toString = function () {\n\treturn this.value + \"\";\n};\n\nSignal.prototype.toJSON = function () {\n\treturn this.value;\n};\n\nSignal.prototype.peek = function () {\n\treturn this._value;\n};\n\nObject.defineProperty(Signal.prototype, \"value\", {\n\tget() {\n\t\tconst node = addDependency(this);\n\t\tif (node !== undefined) {\n\t\t\tnode._version = this._version;\n\t\t}\n\t\treturn this._value;\n\t},\n\tset(this: Signal, value) {\n\t\tif (evalContext instanceof Computed) {\n\t\t\tmutationDetected();\n\t\t}\n\n\t\tif (value !== this._value) {\n\t\t\tif (batchIteration > 100) {\n\t\t\t\tcycleDetected();\n\t\t\t}\n\n\t\t\tthis._value = value;\n\t\t\tthis._version++;\n\t\t\tglobalVersion++;\n\n\t\t\t/**@__INLINE__*/ startBatch();\n\t\t\ttry {\n\t\t\t\tfor (\n\t\t\t\t\tlet node = this._targets;\n\t\t\t\t\tnode !== undefined;\n\t\t\t\t\tnode = node._nextTarget\n\t\t\t\t) {\n\t\t\t\t\tnode._target._notify();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tendBatch();\n\t\t\t}\n\t\t}\n\t},\n});\n\nfunction signal<T>(value: T): Signal<T> {\n\treturn new Signal(value);\n}\n\nfunction needsToRecompute(target: Computed | Effect): boolean {\n\t// Check the dependencies for changed values. The dependency list is already\n\t// in order of use. Therefore if multiple dependencies have changed values, only\n\t// the first used dependency is re-evaluated at this point.\n\tfor (\n\t\tlet node = target._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\t// If there's a new version of the dependency before or after refreshing,\n\t\t// or the dependency has something blocking it from refreshing at all (e.g. a\n\t\t// dependency cycle), then we need to recompute.\n\t\tif (\n\t\t\tnode._source._version !== node._version ||\n\t\t\t!node._source._refresh() ||\n\t\t\tnode._source._version !== node._version\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t}\n\t// If none of the dependencies have changed values since last recompute then\n\t// there's no need to recompute.\n\treturn false;\n}\n\nfunction prepareSources(target: Computed | Effect) {\n\t/**\n\t * 1. Mark all current sources as re-usable nodes (version: -1)\n\t * 2. Set a rollback node if the current node is being used in a different context\n\t * 3. Point 'target._sources' to the tail of the doubly-linked list, e.g:\n\t *\n\t *    { undefined <- A <-> B <-> C -> undefined }\n\t *                   ↑           ↑\n\t *                   │           └──────┐\n\t * target._sources = A; (node is head)  │\n\t *                   ↓                  │\n\t * target._sources = C; (node is tail) ─┘\n\t */\n\tfor (\n\t\tlet node = target._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\tconst rollbackNode = node._source._node;\n\t\tif (rollbackNode !== undefined) {\n\t\t\tnode._rollbackNode = rollbackNode;\n\t\t}\n\t\tnode._source._node = node;\n\t\tnode._version = -1;\n\n\t\tif (node._nextSource === undefined) {\n\t\t\ttarget._sources = node;\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nfunction cleanupSources(target: Computed | Effect) {\n\tlet node = target._sources;\n\tlet head = undefined;\n\n\t/**\n\t * At this point 'target._sources' points to the tail of the doubly-linked list.\n\t * It contains all existing sources + new sources in order of use.\n\t * Iterate backwards until we find the head node while dropping old dependencies.\n\t */\n\twhile (node !== undefined) {\n\t\tconst prev = node._prevSource;\n\n\t\t/**\n\t\t * The node was not re-used, unsubscribe from its change notifications and remove itself\n\t\t * from the doubly-linked list. e.g:\n\t\t *\n\t\t * { A <-> B <-> C }\n\t\t *         ↓\n\t\t *    { A <-> C }\n\t\t */\n\t\tif (node._version === -1) {\n\t\t\tnode._source._unsubscribe(node);\n\n\t\t\tif (prev !== undefined) {\n\t\t\t\tprev._nextSource = node._nextSource;\n\t\t\t}\n\t\t\tif (node._nextSource !== undefined) {\n\t\t\t\tnode._nextSource._prevSource = prev;\n\t\t\t}\n\t\t} else {\n\t\t\t/**\n\t\t\t * The new head is the last node seen which wasn't removed/unsubscribed\n\t\t\t * from the doubly-linked list. e.g:\n\t\t\t *\n\t\t\t * { A <-> B <-> C }\n\t\t\t *   ↑     ↑     ↑\n\t\t\t *   │     │     └ head = node\n\t\t\t *   │     └ head = node\n\t\t\t *   └ head = node\n\t\t\t */\n\t\t\thead = node;\n\t\t}\n\n\t\tnode._source._node = node._rollbackNode;\n\t\tif (node._rollbackNode !== undefined) {\n\t\t\tnode._rollbackNode = undefined;\n\t\t}\n\n\t\tnode = prev;\n\t}\n\n\ttarget._sources = head;\n}\n\ndeclare class Computed<T = any> extends Signal<T> {\n\t_compute: () => T;\n\t_sources?: Node;\n\t_globalVersion: number;\n\t_flags: number;\n\n\tconstructor(compute: () => T);\n\n\t_notify(): void;\n\tget value(): T;\n}\n\nfunction Computed(this: Computed, compute: () => unknown) {\n\tSignal.call(this, undefined);\n\n\tthis._compute = compute;\n\tthis._sources = undefined;\n\tthis._globalVersion = globalVersion - 1;\n\tthis._flags = OUTDATED;\n}\n\nComputed.prototype = new Signal() as Computed;\n\nComputed.prototype._refresh = function () {\n\tthis._flags &= ~NOTIFIED;\n\n\tif (this._flags & RUNNING) {\n\t\treturn false;\n\t}\n\n\t// If this computed signal has subscribed to updates from its dependencies\n\t// (TRACKING flag set) and none of them have notified about changes (OUTDATED\n\t// flag not set), then the computed value can't have changed.\n\tif ((this._flags & (OUTDATED | TRACKING)) === TRACKING) {\n\t\treturn true;\n\t}\n\tthis._flags &= ~OUTDATED;\n\n\tif (this._globalVersion === globalVersion) {\n\t\treturn true;\n\t}\n\tthis._globalVersion = globalVersion;\n\n\t// Mark this computed signal running before checking the dependencies for value\n\t// changes, so that the RUNNING flag can be used to notice cyclical dependencies.\n\tthis._flags |= RUNNING;\n\tif (this._version > 0 && !needsToRecompute(this)) {\n\t\tthis._flags &= ~RUNNING;\n\t\treturn true;\n\t}\n\n\tconst prevContext = evalContext;\n\ttry {\n\t\tprepareSources(this);\n\t\tevalContext = this;\n\t\tconst value = this._compute();\n\t\tif (\n\t\t\tthis._flags & HAS_ERROR ||\n\t\t\tthis._value !== value ||\n\t\t\tthis._version === 0\n\t\t) {\n\t\t\tthis._value = value;\n\t\t\tthis._flags &= ~HAS_ERROR;\n\t\t\tthis._version++;\n\t\t}\n\t} catch (err) {\n\t\tthis._value = err;\n\t\tthis._flags |= HAS_ERROR;\n\t\tthis._version++;\n\t}\n\tevalContext = prevContext;\n\tcleanupSources(this);\n\tthis._flags &= ~RUNNING;\n\treturn true;\n};\n\nComputed.prototype._subscribe = function (node) {\n\tif (this._targets === undefined) {\n\t\tthis._flags |= OUTDATED | TRACKING;\n\n\t\t// A computed signal subscribes lazily to its dependencies when the it\n\t\t// gets its first subscriber.\n\t\tfor (\n\t\t\tlet node = this._sources;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextSource\n\t\t) {\n\t\t\tnode._source._subscribe(node);\n\t\t}\n\t}\n\tSignal.prototype._subscribe.call(this, node);\n};\n\nComputed.prototype._unsubscribe = function (node) {\n\t// Only run the unsubscribe step if the computed signal has any subscribers.\n\tif (this._targets !== undefined) {\n\t\tSignal.prototype._unsubscribe.call(this, node);\n\n\t\t// Computed signal unsubscribes from its dependencies when it loses its last subscriber.\n\t\t// This makes it possible for unreferences subgraphs of computed signals to get garbage collected.\n\t\tif (this._targets === undefined) {\n\t\t\tthis._flags &= ~TRACKING;\n\n\t\t\tfor (\n\t\t\t\tlet node = this._sources;\n\t\t\t\tnode !== undefined;\n\t\t\t\tnode = node._nextSource\n\t\t\t) {\n\t\t\t\tnode._source._unsubscribe(node);\n\t\t\t}\n\t\t}\n\t}\n};\n\nComputed.prototype._notify = function () {\n\tif (!(this._flags & NOTIFIED)) {\n\t\tthis._flags |= OUTDATED | NOTIFIED;\n\n\t\tfor (\n\t\t\tlet node = this._targets;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextTarget\n\t\t) {\n\t\t\tnode._target._notify();\n\t\t}\n\t}\n};\n\nComputed.prototype.peek = function () {\n\tif (!this._refresh()) {\n\t\tcycleDetected();\n\t}\n\tif (this._flags & HAS_ERROR) {\n\t\tthrow this._value;\n\t}\n\treturn this._value;\n};\n\nObject.defineProperty(Computed.prototype, \"value\", {\n\tget() {\n\t\tif (this._flags & RUNNING) {\n\t\t\tcycleDetected();\n\t\t}\n\t\tconst node = addDependency(this);\n\t\tthis._refresh();\n\t\tif (node !== undefined) {\n\t\t\tnode._version = this._version;\n\t\t}\n\t\tif (this._flags & HAS_ERROR) {\n\t\t\tthrow this._value;\n\t\t}\n\t\treturn this._value;\n\t},\n});\n\ninterface ReadonlySignal<T = any> extends Signal<T> {\n\treadonly value: T;\n}\n\nfunction computed<T>(compute: () => T): ReadonlySignal<T> {\n\treturn new Computed(compute);\n}\n\nfunction cleanupEffect(effect: Effect) {\n\tconst cleanup = effect._cleanup;\n\teffect._cleanup = undefined;\n\n\tif (typeof cleanup === \"function\") {\n\t\t/*@__INLINE__**/ startBatch();\n\n\t\t// Run cleanup functions always outside of any context.\n\t\tconst prevContext = evalContext;\n\t\tevalContext = undefined;\n\t\ttry {\n\t\t\tcleanup();\n\t\t} catch (err) {\n\t\t\teffect._flags &= ~RUNNING;\n\t\t\teffect._flags |= DISPOSED;\n\t\t\tdisposeEffect(effect);\n\t\t\tthrow err;\n\t\t} finally {\n\t\t\tevalContext = prevContext;\n\t\t\tendBatch();\n\t\t}\n\t}\n}\n\nfunction disposeEffect(effect: Effect) {\n\tfor (\n\t\tlet node = effect._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\tnode._source._unsubscribe(node);\n\t}\n\teffect._compute = undefined;\n\teffect._sources = undefined;\n\n\tcleanupEffect(effect);\n}\n\nfunction endEffect(this: Effect, prevContext?: Computed | Effect) {\n\tif (evalContext !== this) {\n\t\tthrow new Error(\"Out-of-order effect\");\n\t}\n\tcleanupSources(this);\n\tevalContext = prevContext;\n\n\tthis._flags &= ~RUNNING;\n\tif (this._flags & DISPOSED) {\n\t\tdisposeEffect(this);\n\t}\n\tendBatch();\n}\n\ntype EffectCleanup = () => unknown;\ndeclare class Effect {\n\t_compute?: () => unknown | EffectCleanup;\n\t_cleanup?: () => unknown;\n\t_sources?: Node;\n\t_nextBatchedEffect?: Effect;\n\t_flags: number;\n\n\tconstructor(compute: () => unknown | EffectCleanup);\n\n\t_callback(): void;\n\t_start(): () => void;\n\t_notify(): void;\n\t_dispose(): void;\n}\n\nfunction Effect(this: Effect, compute: () => unknown | EffectCleanup) {\n\tthis._compute = compute;\n\tthis._cleanup = undefined;\n\tthis._sources = undefined;\n\tthis._nextBatchedEffect = undefined;\n\tthis._flags = TRACKING;\n}\n\nEffect.prototype._callback = function () {\n\tconst finish = this._start();\n\ttry {\n\t\tif (this._flags & DISPOSED) return;\n\t\tif (this._compute === undefined) return;\n\n\t\tconst cleanup = this._compute();\n\t\tif (typeof cleanup === \"function\") {\n\t\t\tthis._cleanup = cleanup as EffectCleanup;\n\t\t}\n\t} finally {\n\t\tfinish();\n\t}\n};\n\nEffect.prototype._start = function () {\n\tif (this._flags & RUNNING) {\n\t\tcycleDetected();\n\t}\n\tthis._flags |= RUNNING;\n\tthis._flags &= ~DISPOSED;\n\tcleanupEffect(this);\n\tprepareSources(this);\n\n\t/*@__INLINE__**/ startBatch();\n\tconst prevContext = evalContext;\n\tevalContext = this;\n\treturn endEffect.bind(this, prevContext);\n};\n\nEffect.prototype._notify = function () {\n\tif (!(this._flags & NOTIFIED)) {\n\t\tthis._flags |= NOTIFIED;\n\t\tthis._nextBatchedEffect = batchedEffect;\n\t\tbatchedEffect = this;\n\t}\n};\n\nEffect.prototype._dispose = function () {\n\tthis._flags |= DISPOSED;\n\n\tif (!(this._flags & RUNNING)) {\n\t\tdisposeEffect(this);\n\t}\n};\n\nfunction effect(compute: () => unknown | EffectCleanup): () => void {\n\tconst effect = new Effect(compute);\n\ttry {\n\t\teffect._callback();\n\t} catch (err) {\n\t\teffect._dispose();\n\t\tthrow err;\n\t}\n\t// Return a bound function instead of a wrapper like `() => effect._dispose()`,\n\t// because bound functions seem to be just as fast and take up a lot less memory.\n\treturn effect._dispose.bind(effect);\n}\n\nexport {\n\tsignal,\n\tcomputed,\n\teffect,\n\tbatch,\n\tSignal,\n\tReadonlySignal,\n\tuntracked,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"app\":\"app__JeJHz\",\"app-pane\":\"app-pane__eVWfW\",\"appPane\":\"app-pane__eVWfW\",\"convos-pane\":\"convos-pane__T2pbX\",\"convosPane\":\"convos-pane__T2pbX\",\"messages-pane\":\"messages-pane__Qqipz\",\"messagesPane\":\"messages-pane__Qqipz\",\"command-box-pane\":\"command-box-pane__dIbHH\",\"commandBoxPane\":\"command-box-pane__dIbHH\",\"characters-pane\":\"characters-pane__yTeOJ\",\"charactersPane\":\"characters-pane__yTeOJ\"};","// extracted by mini-css-extract-plugin\nexport default {\"command-box\":\"command-box__X2C1t\",\"commandBox\":\"command-box__X2C1t\"};","const randomArr = new Uint32Array(2);\n\nexport default (): ID => {\n    crypto.getRandomValues(randomArr);\n    return ('0000000' + randomArr[0].toString(32)).slice(-7) + ('0000000' + randomArr[1].toString(32)).slice(-7);\n};\n\nexport type ID = string;\n","import {batch} from '@preact/signals';\n\nimport type {AppState} from '../util/store';\nimport id from '../util/id';\n\nexport default (state: AppState, characterName = 'New Character'): void => {\n    batch(() => {\n        const newCharID = id();\n        state.chars.value = [...state.chars.value, {\n            id: newCharID,\n            name: characterName,\n            color: 0xffffff\n        }];\n        state.currentCharID.value = newCharID;\n    });\n};\n","import {batch} from '@preact/signals';\n\nimport createConvo from '../util/create-convo';\nimport type {AppState} from '../util/store';\n\nexport default (state: AppState): void => {\n    batch(() => {\n        const newConvo = createConvo();\n        state.convos.value = {...state.convos.value, [newConvo.id]: newConvo};\n        state.convoIDs.value = [...state.convoIDs.value, newConvo.id];\n        state.currentConvoID.value = newConvo.id;\n    });\n};\n","import id from './id';\nimport type {Convo} from './datatypes';\n\nexport default (): Convo => ({\n    messages: [],\n    id: id(),\n    name: 'New Convo'\n});\n","import {batch} from '@preact/signals';\n\nimport id from '../util/id';\nimport createConvo from './create-convo';\nimport createCharacter from './create-character';\nimport type {AppState} from '../util/store';\n\nexport default (state: AppState, messageContents: string, beforeMessageIndex?: number): void => {\n    batch(() => {\n        if (state.currentConvoID.value === null) {\n            createConvo(state);\n        }\n\n        if (state.currentCharID.value === null) {\n            createCharacter(state);\n        }\n\n        // TODO: pass in currentConvoID or convo\n        const convo = state.convos.value[state.currentConvoID.value!];\n        const newMessages = convo.messages.slice(0);\n        const newMessage = {\n            authorID: state.currentCharID.value!,\n            contents: messageContents,\n            id: id()\n        };\n        if (typeof beforeMessageIndex === 'number') {\n            newMessages.splice(beforeMessageIndex, 0, newMessage);\n        } else {\n            newMessages.push(newMessage);\n        }\n\n        state.convos.value = {\n            ...state.convos.value,\n            [state.currentConvoID.value!]: {\n                ...convo, messages: newMessages\n            }\n        };\n    });\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, convoID: ID, index: number, contents: string): void => {\n    const convo = state.convos.value[convoID];\n    const newMessages = convo.messages.slice(0);\n    newMessages[index] = {...newMessages[index], contents};\n\n    state.convos.value = {...state.convos.value, [convoID]: {...convo, messages: newMessages}};\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.currentCharID.value = id;\n};\n","import type {Convo, Character} from '../util/datatypes';\n\nexport default ({projectName, version, convos, chars}: {\n    projectName: string,\n    version: number,\n    convos: Convo[],\n    chars: Character[]\n}): string => {\n    return JSON.stringify({projectName, version, convos, chars});\n};\n","import {validate, ValidationError} from 'jtd';\n\nconst schema = {\n    properties: {\n        version: {type: 'uint32'},\n        projectName: {type: 'string'},\n        convos: {elements: {properties: {\n            messages: {elements: {properties: {\n                authorID: {type: 'string'},\n                contents: {type: 'string'},\n                id: {type: 'string'}\n            }}},\n            id: {type: 'string'},\n            name: {type: 'string'}\n        }}},\n        chars: {elements: {properties: {\n            id: {type: 'string'},\n            name: {type: 'string'},\n            color: {type: 'uint32'}\n        }}}\n    }\n} as const;\n\nexport default (json: unknown): ValidationError[] => validate(schema, json);\n","import {batch} from '@preact/signals';\n\nimport type {AppState} from '../util/store';\nimport type {ID, Convo, Character} from '../util/datatypes';\n\nexport default (state: AppState, json: {\n    projectName: string,\n    convos: Convo[],\n    chars: Character[]\n}): void => {\n    batch(() => {\n        const convosByID: Record<ID, Convo> = {};\n        for (const convo of json.convos) {\n            convosByID[convo.id] = convo;\n        }\n        state.projectName.value = json.projectName;\n        state.convos.value = convosByID;\n        state.convoIDs.value = json.convos.map(convo => convo.id);\n        state.chars.value = json.chars;\n        state.currentConvoID.value = null;\n    });\n};\n","import {createContext} from 'preact';\nimport {useContext, useMemo} from 'preact/hooks';\nimport {signal, effect, Signal, batch} from '@preact/signals';\n\nimport type {ID, Convo, Character} from './datatypes';\nimport saveState from '../serialization/save-state';\nimport validate from '../serialization/validate';\n\nimport loadState from '../actions/load-state';\n\nconst storeVersion = 2;\n\ntype StoreShape = {\n    version: number,\n    projectName: string,\n    convos: Record<ID, Convo>,\n    convoIDs: ID[],\n    chars: Character[],\n    currentConvoID: ID | null,\n    currentCharID: ID | null,\n    editedMessageID: ID | null,\n    editedConvoID: ID | null,\n    editedCharID: ID | null,\n    exportedConvoID: ID | null,\n    toBeReplacedCharID: ID | null,\n    insertAboveMessageID: ID | null,\n    exportConvoSettings: {\n        wrapTextEnabled: boolean,\n        wrapTextLength: number,\n        justifyEnabled: boolean,\n        justifySide: 'left' | 'right'\n    }\n};\n\ntype SignalState<S, SignalKeys extends string> = {\n    [K in keyof S]: K extends SignalKeys ? SignalState<S[K], SignalKeys> : Signal<S[K]>\n};\n\ntype AppState = SignalState<StoreShape, 'exportConvoSettings'>;\n\nconst loadLegacyState = (store: AppState): void => {\n    const storedStore = localStorage.getItem('store');\n    if (!storedStore) return;\n    const parsedStore = JSON.parse(storedStore) as StoreShape;\n    // Import v1 autosaves.\n    if (parsedStore.version === 1) {\n        const oldConvos = parsedStore.convos as unknown as Convo[];\n        parsedStore.convos = {};\n        parsedStore.convoIDs = [];\n        for (const convo of oldConvos) {\n            parsedStore.convos[convo.id] = convo;\n            parsedStore.convoIDs.push(convo.id);\n        }\n        parsedStore.version = 2;\n    }\n    if (parsedStore.version !== storeVersion) return;\n\n    batch(() => {\n        store.convos.value = parsedStore.convos;\n        store.convoIDs.value = parsedStore.convoIDs;\n        store.chars.value = parsedStore.chars;\n        store.projectName.value = parsedStore.projectName;\n    });\n\n    localStorage.removeItem('store');\n};\n\nconst loadStore = (): AppState => {\n    const defaultStore: AppState = {\n        version: signal(storeVersion),\n        projectName: signal('New Project'),\n        convos: signal({}),\n        convoIDs: signal([]),\n        chars: signal([]),\n        currentConvoID: signal(null),\n        currentCharID: signal(null),\n        editedMessageID: signal(null),\n        editedConvoID: signal(null),\n        editedCharID: signal(null),\n        exportedConvoID: signal(null),\n        toBeReplacedCharID: signal(null),\n        insertAboveMessageID: signal(null),\n        exportConvoSettings: {\n            wrapTextEnabled: signal(false),\n            wrapTextLength: signal(80),\n            justifyEnabled: signal(true),\n            justifySide: signal('left' as const)\n        }\n    };\n\n    loadLegacyState(defaultStore);\n\n    const autosave = localStorage.getItem('autosave');\n    if (autosave) {\n        const parsedAutosave: unknown = JSON.parse(autosave);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-explicit-any\n        if (validate(parsedAutosave).length === 0) loadState(defaultStore, parsedAutosave as any);\n    }\n\n    return defaultStore;\n};\n\nconst store = loadStore();\n\neffect(() => {\n    const {projectName, convos, convoIDs, chars} = store;\n    const savedState = saveState({\n        projectName: projectName.value,\n        version: 1,\n        convos: convoIDs.value.map(id => convos.value[id]),\n        chars: chars.value\n    });\n    localStorage.setItem('autosave', savedState);\n});\n\nconst AppContext = createContext(store);\n\nconst useAppState = (): AppState => useContext(AppContext);\nconst useAction = <T extends unknown[]>(func: (store: AppState, ...args: T) => void): ((...args: T) => void) => {\n    const context = useContext(AppContext);\n    return useMemo(() => func.bind(null, context), [context]);\n};\n\nexport {useAppState, useAction, AppState, AppContext, store};\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useRef, useState} from 'preact/hooks';\n\nimport createCharacterAction from '../../actions/create-character';\nimport createMessageAction from '../../actions/create-message';\nimport editMessageAction from '../../actions/edit-message';\nimport setCurrentCharacterIDAction from '../../actions/set-current-character-id';\n\nimport {useAppState, useAction} from '../../util/store';\nimport type {Character} from '../../util/datatypes';\n\nconst CommandBox = ({beforeMessage}: {beforeMessage?: number}): JSX.Element => {\n    const {currentCharID, chars, currentConvoID, convos} = useAppState();\n    const createCharacter = useAction(createCharacterAction);\n    const createMessage = useAction(createMessageAction);\n    const editMessage = useAction(editMessageAction);\n    const setCurrentCharacterID = useAction(setCurrentCharacterIDAction);\n\n    const tabResults = useRef<{\n        characters: Character[],\n        index: number\n    } | null>(null);\n\n    // TODO: use a signal for this\n    const [value, setValue] = useState('');\n\n    const onKeyDown = (event: KeyboardEvent): void => {\n        if (event.code === 'Tab') {\n            event.preventDefault();\n            const contents = value.toLowerCase();\n            if (contents.indexOf(':') === -1 && tabResults.current === null) {\n                tabResults.current = {\n                    characters: chars.value.filter(\n                        character => character.name.toLowerCase().startsWith(contents)),\n                    index: 0\n                };\n            }\n            if (!tabResults.current || tabResults.current.characters.length === 0) return;\n            const character = tabResults.current.characters[tabResults.current.index];\n            tabResults.current.index = (tabResults.current.index + 1) % tabResults.current.characters.length;\n            setValue(`${character.name}: `);\n        } else {\n            tabResults.current = null;\n        }\n    };\n\n    const onKeyPress = (event: KeyboardEvent): void => {\n        if (event.code === 'Enter' && !event.shiftKey) {\n            event.preventDefault();\n            let command = value;\n\n            // Parse off leading author specifier\n            const colonMatch = /([^:]+):(?:\\s+)(.+)/g.exec(command);\n            if (colonMatch) {\n                const authorName = colonMatch[1];\n                const authorNameLower = authorName.toLowerCase();\n                const char = chars.value.find(\n                    character => character.name.toLowerCase() === authorNameLower);\n                if (!char) {\n                    createCharacter(authorName);\n                } else {\n                    setCurrentCharacterID(char.id);\n                }\n                command = colonMatch[2];\n            }\n\n            const replaceMatch = /^s\\/([^/]+)\\/([^/]+)\\/?$/.exec(command);\n            if (replaceMatch) {\n                // if we added a new character, get it here\n                const {messages} = convos.value[currentConvoID.value!];\n                for (let i = beforeMessage || messages.length - 1; i >= 0; i--) {\n                    if (messages[i].authorID === currentCharID.value) {\n                        editMessage(\n                            currentConvoID.value!,\n                            i,\n                            messages[i].contents.split(replaceMatch[1]).join(replaceMatch[2])\n                        );\n                        setValue('');\n                        return;\n                    }\n                }\n            }\n\n            setValue('');\n            createMessage(command, beforeMessage);\n            return;\n        }\n    };\n\n    const onInput = (event: Event): void => {\n        setValue((event.target as HTMLTextAreaElement).value);\n    };\n\n    return <textarea\n        className={style.commandBox}\n        onKeyPress={onKeyPress}\n        onInput={onInput}\n        onKeyDown={onKeyDown}\n        value={value}\n    />;\n};\n\nexport default CommandBox;\n","// extracted by mini-css-extract-plugin\nexport default {\"divider\":\"divider__l7yCf\",\"character\":\"character__atbwd\",\"active\":\"active__DI5ru\",\"character-name\":\"character-name__aOTHW\",\"characterName\":\"character-name__aOTHW\"};","// extracted by mini-css-extract-plugin\nexport default {\"icon\":\"icon__fsktX\",\"icon-button\":\"icon-button__zOyi6\",\"iconButton\":\"icon-button__zOyi6\",\"active\":\"active__AHzSP\",\"disabled\":\"disabled__uqfhE\",\"delete\":\"delete__hETEF\",\"edit\":\"edit__lPJQK\",\"export\":\"export__pXQWP\",\"insert-above\":\"insert-above__Tz5sf\",\"insertAbove\":\"insert-above__Tz5sf\",\"load\":\"load__L2z_n\",\"save\":\"save__sCfFq\"};","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport classNames from 'classnames';\n\ntype IconType =\n    | 'delete'\n    | 'edit'\n    | 'export'\n    | 'insert-above'\n    | 'load'\n    | 'save';\n\nconst Icon = ({type, title, onClick, disabled}: {\n    type: IconType,\n    title: string,\n    onClick?: (event: Event) => unknown,\n    disabled?: boolean\n}): JSX.Element => {\n    return (\n        <div\n            className={classNames(\n                style['icon'],\n                {[style['icon-button']]: onClick},\n                style[type])}\n            title={title}\n            onClick={disabled ? undefined : onClick}\n        />\n    );\n};\n\nexport default Icon;\n","import {batch} from '@preact/signals';\n\nimport type {ID} from  '../util/datatypes';\nimport type {AppState} from  '../util/store';\n\nexport default (state: AppState, id: ID, replacementID?: ID): void => {\n    return batch(() => {\n        const chars = state.chars.value;\n        const charIndex = chars.findIndex(char => char.id === id);\n        state.chars.value = chars.filter(char => char.id !== id);\n        state.currentCharID.value = replacementID || (chars.length === 1 ?\n            null :\n            charIndex === chars.length - 1 ?\n                chars[chars.length - 2].id :\n                chars[charIndex + 1].id);\n    });\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.editedCharID.value = id;\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.toBeReplacedCharID.value = id;\n};\n","export default (color: number): string => '#' + ('000000' + color.toString(16)).slice(-6);\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useComputed} from '@preact/signals';\nimport {useMemo, useCallback} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport Icon from '../Icon/Icon';\n\nimport deleteCharacterAction from '../../actions/delete-character';\nimport setCurrentCharacterIDAction from '../../actions/set-current-character-id';\nimport setEditedCharacterIDAction from '../../actions/set-edited-character-id';\nimport setToBeReplacedCharacterIDAction from '../../actions/set-to-be-replaced-character-id';\n\nimport colorToHex from '../../util/color-to-hex';\nimport {useAppState, useAction} from '../../util/store';\nimport type {ID, Character} from '../../util/datatypes';\n\nconst CharacterListing = ({char, active, onClick, onEdit, onDelete}: {\n    char: Character,\n    active: boolean,\n    onClick?: (char: Character) => void,\n    onEdit?: (char: Character) => void,\n    onDelete?: (char: Character) => void,\n}): JSX.Element => useMemo(() => {\n    const handleClick = useCallback(() => onClick && onClick(char), [onClick, char]);\n    const handleEdit = useCallback(() => onEdit && onEdit(char), [onEdit, char]);\n    const handleDelete = useCallback(() => onDelete && onDelete(char), [onDelete, char]);\n    return (\n        <div className={classNames(style.character, {[style.active]: active})} onClick={handleClick}>\n            <div\n                className={style.characterName}\n                style={`color: ${colorToHex(char.color)}`}\n            >{char.name}</div>\n            <Icon type='edit' title='Edit' onClick={handleEdit} />\n            <Icon type='delete' title='Delete' onClick={handleDelete} />\n        </div>\n    );\n}, [char, active, onClick, onEdit, onDelete]);\n\nconst CharacterList = (): JSX.Element => {\n    const {chars, currentCharID, convos, currentConvoID} = useAppState();\n    const deleteCharacter = useAction(deleteCharacterAction);\n    const setCurrentCharacterID = useAction(setCurrentCharacterIDAction);\n    const setEditedCharacterID = useAction(setEditedCharacterIDAction);\n    const setToBeReplacedCharacterID = useAction(setToBeReplacedCharacterIDAction);\n    const {charsInConvo, charsNotInConvo} = useComputed(() => {\n        const charIDsInConvo = new Set<ID>();\n\n        if (currentConvoID.value !== null) {\n            const currentConvo = convos.value[currentConvoID.value];\n            for (const message of currentConvo.messages) {\n                charIDsInConvo.add(message.authorID);\n            }\n        }\n\n        const charsInConvo = [];\n        const charsNotInConvo = [];\n        for (const char of chars.value) {\n            if (charIDsInConvo.has(char.id)) {\n                charsInConvo.push(char);\n            } else {\n                charsNotInConvo.push(char);\n            }\n        }\n\n        return {charsInConvo, charsNotInConvo};\n    }).value;\n\n    const onClickCharacter = useCallback((character: Character) => {\n        setCurrentCharacterID(character.id);\n    }, [setCurrentCharacterID]);\n\n    const onEditCharacter = useCallback((character: Character) => {\n        setEditedCharacterID(character.id);\n    }, [setEditedCharacterID]);\n\n    const onDeleteCharacter = useCallback((character: Character) => {\n        for (const convo of Object.values(convos.value)) {\n            for (const message of convo.messages) {\n                if (message.authorID === character.id) {\n                    setToBeReplacedCharacterID(character.id);\n                    return;\n                }\n            }\n        }\n\n        deleteCharacter(character.id);\n    }, [setToBeReplacedCharacterID, deleteCharacter, convos]);\n\n    return (\n        <div className={style.characterList}>\n            {charsInConvo.length > 0 &&\n                <>\n                    <div className={style.divider}>Characters in current convo:</div>\n                    <div className={style.characterSublist}>\n                        {charsInConvo.map(char =>\n                            <CharacterListing\n                                key={char.id}\n                                char={char}\n                                active={char.id === currentCharID.value}\n                                onClick={onClickCharacter}\n                                onEdit={onEditCharacter}\n                                onDelete={chars.value.length > 1 ? onDeleteCharacter : undefined}\n                            />)}\n                    </div>\n                </>\n            }\n            {charsNotInConvo.length > 0 &&\n                <>\n                    <div className={style.divider}>Other characters:</div>\n                    <div className={style.characterSublist}>\n                        {charsNotInConvo.map(char =>\n                            <CharacterListing\n                                key={char.id}\n                                char={char}\n                                active={char.id === currentCharID.value}\n                                onClick={onClickCharacter}\n                                onEdit={onEditCharacter}\n                                onDelete={chars.value.length > 1 ? onDeleteCharacter : undefined}\n                            />)}\n                    </div>\n                </>\n            }\n        </div>\n    );\n};\n\nexport default CharacterList;\n","// extracted by mini-css-extract-plugin\nexport default {\"character-settings\":\"character-settings__JgFDc\",\"characterSettings\":\"character-settings__JgFDc\",\"row\":\"row__zLuUf\",\"label\":\"label__T8d04\",\"control\":\"control__C6kFJ\"};","import type {AppState} from '../util/store';\nimport type {ID, Character} from '../util/datatypes';\n\nexport default (state: AppState, charID: ID, newCharData: Partial<Character>): void => {\n    state.chars.value = state.chars.value.map(char => char.id !== charID ?\n        char :\n        {...char, ...newCharData});\n};\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\n\nimport updateCharacterAction from '../../actions/update-character';\n\nimport colorToHex from '../../util/color-to-hex';\nimport {useAppState, useAction} from '../../util/store';\n\nconst CharacterSettingsModal = (): JSX.Element | null => {\n    const {editedCharID, chars} = useAppState();\n    const updateCharacter = useAction(updateCharacterAction);\n    const onCharacterNameChange = (event: Event): void => {\n        if (!editedCharID.value) return;\n        updateCharacter(editedCharID.value, {name: (event.target as HTMLInputElement).value});\n    };\n\n    const onCharacterColorChange = (event: Event): void => {\n        if (!editedCharID.value) return;\n        updateCharacter(editedCharID.value, {\n            color: parseInt((event.target as HTMLInputElement).value.slice(1), 16)\n        });\n    };\n\n    const character = chars.value.find(char => char.id === editedCharID.value);\n    if (!character) return null;\n    return (\n        <div className={style.characterSettings}>\n            <div className={style.row}>\n                <div className={style.label}>Character name</div>\n                <input\n                    type=\"text\"\n                    className={style.control}\n                    value={character.name}\n                    onChange={onCharacterNameChange}\n                />\n            </div>\n            <div className={style.row}>\n                <div className={style.label}>Character color</div>\n                <input\n                    type=\"color\"\n                    className={style.control}\n                    value={colorToHex(character.color)}\n                    onChange={onCharacterColorChange}\n                />\n            </div>\n        </div>\n    );\n};\n\nexport default CharacterSettingsModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"convo-list\":\"convo-list__j6Sov\",\"convoList\":\"convo-list__j6Sov\",\"convos\":\"convos__BRQXe\",\"convo\":\"convo__bZVJO\",\"active\":\"active__JExB6\",\"convo-name\":\"convo-name__c8nBG\",\"convoName\":\"convo-name__c8nBG\",\"add-convo-wrapper\":\"add-convo-wrapper__U_hhq\",\"addConvoWrapper\":\"add-convo-wrapper__U_hhq\"};","import {batch} from '@preact/signals';\n\nimport type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID): void => {\n    batch(() => {\n    // Use object spread/rest to omit the convo with a given ID from state.convos\n        const {[id]: __, ...newConvos} = state.convos.value;\n\n        const convoIndex = state.convoIDs.value.findIndex(convoID => convoID === id);\n\n        state.convos.value = newConvos;\n        state.convoIDs.value = state.convoIDs.value.filter(existingID => existingID !== id);\n        if (state.convoIDs.value.length === 0) {\n            state.currentConvoID.value = null;\n        } else if (convoIndex === state.convoIDs.value.length) {\n            // If the deleted convo is selected and the last one in the list, select the previous one\n            state.currentConvoID.value = state.convoIDs.value[convoIndex - 1];\n        } else {\n            // TODO: revisit\n            state.currentConvoID.value = state.convoIDs.value[convoIndex];\n        }\n    });\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID, name: string): void => {\n    state.convos.value = {...state.convos.value, [id]: {...state.convos.value[id], name}};\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID): void => {\n    state.currentConvoID.value = id;\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id?: ID | null): void => {\n    state.editedConvoID.value = id === undefined ? state.convos.value[state.currentConvoID.value!].id : id;\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.exportedConvoID.value = id;\n};\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useComputed} from '@preact/signals';\nimport {useMemo, useRef, useEffect} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport Icon from '../Icon/Icon';\n\nimport createConvoAction from '../../actions/create-convo';\nimport deleteConvoAction from '../../actions/delete-convo';\nimport setConvoNameAction from '../../actions/set-convo-name';\nimport setCurrentConvoIDAction from '../../actions/set-current-convo-id';\nimport setEditedConvoIDAction from '../../actions/set-edited-convo-id';\nimport setExportedConvoIDAction from '../../actions/set-exported-convo-id';\n\nimport {useAppState, useAction} from '../../util/store';\nimport type {Convo} from '../../util/datatypes';\n\nconst ConvoListing = ({convo: {id, name}}: {convo: Convo}): JSX.Element => {\n    const {currentConvoID, editedConvoID} = useAppState();\n    const setConvoName = useAction(setConvoNameAction);\n    const setCurrentConvoID = useAction(setCurrentConvoIDAction);\n    const setEditedConvoID = useAction(setEditedConvoIDAction);\n    const setExportedConvoID = useAction(setExportedConvoIDAction);\n    const deleteConvo = useAction(deleteConvoAction);\n\n    const active = currentConvoID.value === id;\n    const edited = editedConvoID.value === id;\n\n    const prevEdited = useRef(edited);\n    const editedConvoRef = useRef<HTMLInputElement>(null);\n\n    // Focus the textbox when we click the edit button\n    useEffect(() => {\n        if (!prevEdited.current && edited && editedConvoRef.current !== null) {\n            editedConvoRef.current.focus();\n        }\n        prevEdited.current = edited;\n    });\n\n    return useMemo(() => <div\n        className={classNames(style.convo, {[style.active]: active})}\n        onClick={setCurrentConvoID.bind(null, id)}\n    >\n        <div className={style.convoName}>{edited ?\n            <input\n                type=\"text\"\n                value={name}\n                onInput={(event): unknown => setConvoName(id, (event.target as HTMLInputElement).value)}\n                onKeyPress={(event): void => {\n                    if (event.code === 'Enter') setEditedConvoID(null);\n                }}\n                onBlur={(): unknown => setEditedConvoID(null)}\n                ref={editedConvoRef}\n            /> :\n            name}</div>\n        <Icon\n            type='export'\n            title='Export'\n            onClick={(event): void => {\n                event.stopPropagation();\n                setExportedConvoID(id);\n            }}\n        />\n        <Icon\n            type='edit'\n            title='Edit'\n            onClick={(event): void => {\n                event.stopPropagation();\n                setEditedConvoID(id);\n            }}\n        />\n        <Icon\n            type='delete'\n            title='Delete'\n            onClick={(event): void => {\n                event.stopPropagation();\n                deleteConvo(id);\n            }}\n        />\n    </div>, [\n        id, name, active, edited, editedConvoRef,\n        setConvoName, setCurrentConvoID, setEditedConvoID, setExportedConvoID, deleteConvo\n    ]);\n};\n\nconst ConvoList = (): JSX.Element => {\n    const {convos, convoIDs} = useAppState();\n    const createConvo = useAction(createConvoAction);\n\n    const convoListings = useComputed(() => convoIDs.value.map(convoID => {\n        const convo = convos.value[convoID];\n        return <ConvoListing key={convoID} convo={convo} />;\n    })).value;\n\n    const createConvoCallback = useMemo(() => createConvo.bind(null), [createConvo]);\n\n    return useMemo(() => (\n        <div className={style.convoList}>\n            <div className={style.convos}>\n                {convoListings}\n            </div>\n            <div className={style.addConvoWrapper}>\n                <button onClick={createConvoCallback}>Add Convo</button>\n            </div>\n        </div>\n    ), [convoListings, createConvoCallback]);\n};\n\nexport default ConvoList;\n","// extracted by mini-css-extract-plugin\nexport default {\"export-title\":\"export-title__Kqtsy\",\"exportTitle\":\"export-title__Kqtsy\",\"row\":\"row__cbCwA\"};","import type {AppState} from '../../util/store';\n\nexport default (state: AppState, enabled: boolean): void => {\n    state.exportConvoSettings.wrapTextEnabled.value = enabled;\n};\n","import type {AppState} from '../../util/store';\n\nexport default (state: AppState, length: number): void => {\n    state.exportConvoSettings.wrapTextLength.value = length;\n};\n","import type {AppState} from '../../util/store';\n\nexport default (state: AppState, enabled: boolean): void => {\n    state.exportConvoSettings.justifyEnabled.value = enabled;\n};\n","import type {AppState} from '../../util/store';\n\nexport default (state: AppState, side: 'left' | 'right'): void => {\n    state.exportConvoSettings.justifySide.value = side;\n};\n","const saveToFile = (name: string, contents: BlobPart): void => {\n    const a = document.createElement('a');\n    const url = URL.createObjectURL(new Blob([contents]));\n\n    a.href = url;\n    a.download = name;\n    a.click();\n    setTimeout(() => {\n        window.URL.revokeObjectURL(url);\n    }, 0);\n};\n\nexport default saveToFile;\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\n\nimport setWrapTextEnabledAction from '../../actions/export-convo-settings/set-wrap-text-enabled';\nimport setWrapTextLengthAction from '../../actions/export-convo-settings/set-wrap-text-length';\nimport setJustifyEnabledAction from '../../actions/export-convo-settings/set-justify-enabled';\nimport setJustifySideAction from '../../actions/export-convo-settings/set-justify-side';\n\nimport saveToFile from '../../util/save-to-file';\nimport {useAppState, useAction} from '../../util/store';\nimport type {ID} from '../../util/datatypes';\n\nconst ExportConvoModal = (): JSX.Element | null => {\n    const {\n        convos,\n        exportedConvoID,\n        chars,\n        exportConvoSettings\n    } = useAppState();\n\n    const {\n        wrapTextEnabled,\n        wrapTextLength,\n        justifyEnabled,\n        justifySide\n    } = exportConvoSettings;\n\n    const setWrapTextEnabled = useAction(setWrapTextEnabledAction);\n    const setWrapTextLength = useAction(setWrapTextLengthAction);\n    const setJustifyEnabled = useAction(setJustifyEnabledAction);\n    const setJustifySide = useAction(setJustifySideAction);\n\n    const onChangeWrapTextEnabled = (event: Event): void => {\n        setWrapTextEnabled((event.target as HTMLInputElement).checked);\n    };\n\n    const onChangeWrapTextLength = (event: Event): void => {\n        const length = parseInt((event.target as HTMLInputElement).value);\n        if (Number.isFinite(length)) setWrapTextLength(length);\n    };\n\n    const onChangeJustifyEnabled = (event: Event): void => {\n        setJustifyEnabled((event.target as HTMLInputElement).checked);\n    };\n\n    const onChangeJustifySide = (event: Event): void => {\n        setJustifySide((event.target as HTMLInputElement).value as 'left' | 'right');\n    };\n\n    const onExport = (): void => {\n        if (!exportedConvoID.value) return;\n        const convo = convos.value[exportedConvoID.value];\n\n        const charsInConvo = new Set<ID>();\n        for (const message of convo.messages) {\n            charsInConvo.add(message.authorID);\n        }\n        const longestCharNameLength = Array.from(charsInConvo)\n            .reduce((prev: number, charID: ID): number =>\n                Math.max(prev, chars.value.find(char => char.id === charID)?.name.length ?? 0), 0);\n\n        const lines = [];\n\n        for (const message of convo.messages) {\n            const charName = chars.value.find(char => char.id === message.authorID)?.name ?? 'Unknown character';\n            let start = `<${charName}> `;\n            if (justifyEnabled.value) {\n                const justification = ' '.repeat(longestCharNameLength - charName.length);\n                if (justifySide.value === 'left') {\n                    start += justification;\n                } else {\n                    start = justification + start;\n                }\n            }\n\n            let line = start;\n\n            if (wrapTextEnabled.value) {\n                const regex = /([^\\s]+)(\\s|$)/g;\n                regex.lastIndex = 0;\n                let match;\n                while ((match = regex.exec(message.contents)) !== null) {\n                    if (line.length + match[1].length <= wrapTextLength.value) {\n                        line += match[0];\n                    } else {\n                        lines.push(line.trimEnd());\n                        line = ' '.repeat(start.length) + match[0];\n                    }\n                }\n                if (line.trimEnd().length > 0) {\n                    lines.push(line.trimEnd());\n                }\n            } else {\n                lines.push(line + message.contents);\n            }\n        }\n        const convoStr = lines.join('\\n');\n\n        saveToFile(`${convo.name}.txt`, convoStr);\n    };\n\n    if (!exportedConvoID.value) return null;\n    const convo = convos.value[exportedConvoID.value];\n\n    return (\n        <div className={style.exportModal}>\n            <div className={style.exportTitle}>Export {`\"${convo.name}\"`}</div>\n            <div className={style.row}>\n                <label><input\n                    type=\"checkbox\"\n                    checked={wrapTextEnabled}\n                    onChange={onChangeWrapTextEnabled}\n                />Wrap text at </label>\n                <input\n                    type=\"number\"\n                    min={0}\n                    onChange={onChangeWrapTextLength}\n                    disabled={!wrapTextEnabled}\n                    value={wrapTextLength}\n                /> chars\n            </div>\n            <div className={style.row}>\n                <label><input\n                    type=\"checkbox\"\n                    checked={justifyEnabled}\n                    onChange={onChangeJustifyEnabled}\n                />Justify usernames </label>\n                <label>\n                    <input\n                        type=\"radio\"\n                        onClick={onChangeJustifySide}\n                        checked={justifySide.value === 'left'}\n                        disabled={!justifyEnabled}\n                        value=\"left\"\n                    /> Left\n                </label>\n                <label>\n                    <input\n                        type=\"radio\"\n                        onClick={onChangeJustifySide}\n                        checked={justifySide.value === 'right'}\n                        disabled={!justifyEnabled}\n                        value=\"right\"\n                    /> Right\n                </label>\n            </div>\n            <div className={style.row}>\n                <button onClick={onExport}>Export</button>\n            </div>\n        </div>\n    );\n};\n\nexport default ExportConvoModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"messages\":\"messages__QvVmW\",\"messages-inner\":\"messages-inner__T5ymp\",\"messagesInner\":\"messages-inner__T5ymp\",\"insert-box\":\"insert-box__BVqQD\",\"insertBox\":\"insert-box__BVqQD\",\"close-wrapper\":\"close-wrapper__Lige8\",\"closeWrapper\":\"close-wrapper__Lige8\",\"close-positioner\":\"close-positioner__F_Vfd\",\"closePositioner\":\"close-positioner__F_Vfd\",\"command-box-wrapper\":\"command-box-wrapper__dWK1s\",\"commandBoxWrapper\":\"command-box-wrapper__dWK1s\"};","// extracted by mini-css-extract-plugin\nexport default {\"message\":\"message__uH2iI\",\"buttons\":\"buttons__tpv1D\",\"contents\":\"contents__bXbLz\",\"author\":\"author__bTxVP\",\"message-edit-wrapper\":\"message-edit-wrapper__Uq_as\",\"messageEditWrapper\":\"message-edit-wrapper__Uq_as\",\"message-edit-area\":\"message-edit-area__UcstZ\",\"messageEditArea\":\"message-edit-area__UcstZ\"};","// extracted by mini-css-extract-plugin\nexport default {\"searchable-menu\":\"searchable-menu__MRzCU\",\"searchableMenu\":\"searchable-menu__MRzCU\",\"search-bar\":\"search-bar__lDaLX\",\"searchBar\":\"search-bar__lDaLX\",\"items\":\"items__BvMBg\",\"item\":\"item__YnleD\"};","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useCallback, useMemo, useEffect, useRef, useState} from 'preact/hooks';\n\ntype MenuItem = {\n    id: string,\n    value: string\n};\n\ntype Props<T extends readonly MenuItem[]> = {\n    items: T\n    x: number,\n    y: number,\n    onDismiss?: () => void,\n    onClickItem?: (result: T[number]['id']) => void\n};\n\nconst SearchableMenu = <T extends readonly MenuItem[]>({\n    items,\n    x,\n    y,\n    onDismiss,\n    onClickItem\n}: Props<T>): JSX.Element => {\n    const [query, setQuery] = useState('');\n    const searchRef = useRef<HTMLInputElement>(null);\n\n    useEffect(() => {\n        if (searchRef.current) searchRef.current.focus();\n    }, []);\n\n    const onInput = useCallback((event: Event): void => {\n        setQuery((event.target as HTMLInputElement).value);\n    }, [setQuery]);\n\n    const onFocusOut = useCallback((event: FocusEvent): void => {\n        if (!(event.currentTarget as HTMLElement).contains(event.relatedTarget as HTMLElement) &&\n            onDismiss) {\n            onDismiss();\n        }\n    }, [onDismiss]);\n\n    return useMemo(() => (\n        <div\n            className={style.searchableMenu}\n            style={{\n                top: `${y}px`,\n                left: `${x}px`,\n                maxHeight: `calc(100vh - ${y}px)`\n            }}\n            // eslint-disable-next-line react/no-unknown-property\n            onfocusout={onFocusOut}\n            tabIndex={0}\n        >\n            <div className={style.searchBar}>\n                <input type=\"text\" onInput={onInput} ref={searchRef}/>\n            </div>\n            <div className={style.items}>\n                {items.map(item => (\n                    item.value.toLowerCase().indexOf(query) === -1 ?\n                        null :\n                        <div\n                            className={style.item}\n                            key={item.id}\n                            onClick={onClickItem ?\n                                onClickItem.bind(this, item.id) :\n                                undefined}\n                        >\n                            {item.value}\n                        </div>\n                ))}\n            </div>\n        </div>\n    ), [items, x, y, query, onInput, onFocusOut]);\n};\n\nexport default SearchableMenu;\n","import type {AppState} from '../util/store';\n\nexport default (state: AppState, messageIndex: number): void => {\n    // TODO: pass in currentConvoID\n    const convo = state.convos.value[state.currentConvoID.value!];\n    const newMessages = convo.messages.slice(0);\n    newMessages.splice(messageIndex, 1);\n    state.convos.value = {...state.convos.value, [convo.id]: {...convo, messages: newMessages}};\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, convoID: ID, index: number, authorID: ID): void => {\n    const convo = state.convos.value[convoID];\n    const newMessages = convo.messages.slice(0);\n    newMessages[index] = {...newMessages[index], authorID};\n\n    state.convos.value = {...state.convos.value, [convoID]: {...convo, messages: newMessages}};\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.editedMessageID.value = id;\n};\n","import type {AppState} from '../util/store';\nimport type {ID} from '../util/datatypes';\n\nexport default (state: AppState, id: ID | null): void => {\n    state.insertAboveMessageID.value = id;\n};\n","import style from './style.scss';\n\nimport type {Ref, JSX} from 'preact';\nimport {useCallback, useEffect, useMemo, useRef, useState} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport Icon from '../Icon/Icon';\nimport SearchableMenu from '../SearchableMenu/SearchableMenu';\n\nimport deleteMessageAction from '../../actions/delete-message';\nimport editMessageAction from '../../actions/edit-message';\nimport replaceMessageAuthorAction from '../../actions/replace-message-author';\nimport setEditedMessageAction from '../../actions/set-edited-message-id';\nimport setInsertAboveMessageIDAction from '../../actions/set-insert-above-message-id';\n\nimport colorToHex from '../../util/color-to-hex';\nimport {useAppState, useAction} from '../../util/store';\nimport type {ID, Message as MessageType} from '../../util/datatypes';\n\ntype Props = {\n    message: MessageType,\n    convoID: ID,\n    index: number,\n    elemRef?: Ref<HTMLDivElement>\n};\n\nconst Message = ({\n    message,\n    convoID,\n    index,\n    elemRef\n}: Props): JSX.Element => {\n    const {chars, editedMessageID, insertAboveMessageID} = useAppState();\n\n    const deleteMessage = useAction(deleteMessageAction);\n    const editMessage = useAction(editMessageAction);\n    const replaceMessageAuthor = useAction(replaceMessageAuthorAction);\n    const setEditedMessage = useAction(setEditedMessageAction);\n    const setInsertAboveMessageID = useAction(setInsertAboveMessageIDAction);\n\n    const {id, authorID, contents} = message;\n    const editable = id === editedMessageID.value;\n    const prevEditable = useRef(editable);\n\n    const char = useMemo(\n        () => chars.value.find(char => char.id === authorID) || {color: 0xffffff, name: 'Unknown Character'},\n        [chars.value, authorID]\n    );\n\n    const contentsRef = useRef<HTMLTextAreaElement>(null);\n    const [authorMenu, setAuthorMenu] = useState<{\n        x: number,\n        y: number\n    } | null>(null);\n\n    // When we click the edit button, focus the message contents box\n    useEffect(() => {\n        if (!prevEditable.current && editable && contentsRef.current) {\n            contentsRef.current.focus();\n        }\n        prevEditable.current = editable;\n    });\n\n    const onReplaceAuthor = useCallback((newAuthorID: ID): void => {\n        replaceMessageAuthor(convoID, index, newAuthorID);\n        setAuthorMenu(null);\n    }, [replaceMessageAuthor, setAuthorMenu, convoID, index]);\n\n    const onDismissAuthorMenu = useCallback((): void => {\n        setAuthorMenu(null);\n    }, [setAuthorMenu]);\n\n    const authorMenuElement = useMemo(\n        () => authorMenu ? <SearchableMenu\n            items={chars.value.map(({id, name}) => ({id, value: name}))}\n            x={authorMenu.x}\n            y={authorMenu.y}\n            onDismiss={onDismissAuthorMenu}\n            onClickItem={onReplaceAuthor}\n        /> : null,\n        [chars.value, authorMenu]\n    );\n\n    return useMemo(() => {\n        const onKeyPress = (event: KeyboardEvent): void => {\n            if (event.code === 'Enter' && !event.shiftKey && contentsRef.current) {\n                editMessage(convoID, index, contentsRef.current.value);\n                setEditedMessage(null);\n            }\n        };\n\n        const onBlur = (): void => {\n            if (!contentsRef.current) return;\n            editMessage(convoID, index, contentsRef.current.value);\n            setEditedMessage(null);\n        };\n\n        const onClickAuthor = (event: Event): void => {\n            const {x, y, height} = (event.target as Element).getBoundingClientRect();\n            setAuthorMenu(prevValue => prevValue === null ? {x, y: y + height} : null);\n        };\n\n        return (\n            <div className={style.message} ref={elemRef}>\n                <div\n                    className={style.author}\n                    style={`color: ${colorToHex(char.color)}`}\n                    onClick={onClickAuthor}\n                >\n                    {char.name}\n                </div>\n                <div\n                    className={classNames(style.contents, {[style.editable]: editable})}\n                >\n                    {editable ?\n                        <div className={style.messageEditWrapper}>\n                            <textarea\n                                className={style.messageEditArea}\n                                onKeyPress={onKeyPress}\n                                onBlur={onBlur}\n                                tabIndex={0}\n                                ref={contentsRef}\n                                value={contents}\n                            />\n                        </div> :\n                        contents}\n                </div>\n                <div className={style.buttons}>\n                    <Icon\n                        type='insert-above'\n                        title='Insert above'\n                        onClick={(): unknown => setInsertAboveMessageID(insertAboveMessageID.value === id ? null : id)}\n                    />\n                    <Icon\n                        type='edit'\n                        title='Edit'\n                        onClick={(): unknown => setEditedMessage(editedMessageID.value === id ? null : id)}\n                    />\n                    <Icon\n                        type='delete'\n                        title='Delete'\n                        onClick={(): unknown => deleteMessage(index)}\n                    />\n                </div>\n                {authorMenuElement}\n            </div>\n        );\n    }, [char, onReplaceAuthor, onDismissAuthorMenu, authorMenuElement, editable]);\n};\n\nexport default Message;\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useEffect, useMemo, useRef} from 'preact/hooks';\n\nimport CommandBox from '../CommandBox/CommandBox';\nimport Icon from '../Icon/Icon';\nimport Message from '../Message/Message';\n\nimport setInsertAboveMessageIDAction from '../../actions/set-insert-above-message-id';\n\nimport {useAppState, useAction} from '../../util/store';\nimport {Convo} from '../../util/datatypes';\n\nconst Messages = ({convo}: {convo: Convo | undefined}): JSX.Element => {\n    const {insertAboveMessageID} = useAppState();\n    const setInsertAboveMessageID = useAction(setInsertAboveMessageIDAction);\n    const lastMessageElem = useRef<HTMLDivElement>(null);\n\n    const messages = convo?.messages;\n    const prevMessagesRef = useRef(messages);\n\n    useEffect(() => {\n        const prevMessages = prevMessagesRef.current;\n        const messageAddedAtBottom = prevMessages && messages &&\n            prevMessages.length + 1 === messages.length &&\n            prevMessages[prevMessages.length - 1] !== messages[messages.length - 1];\n\n        // Ideally, this would happen for messages added anywhere, but that would require creating a ref for every\n        // message and arrays of refs are really hard to do correctly\n        if (messageAddedAtBottom && lastMessageElem.current) {\n            lastMessageElem.current.scrollIntoView();\n        }\n\n        prevMessagesRef.current = messages;\n    });\n\n    const messageElems = useMemo(() => {\n        const messageElems = [];\n        if (messages) {\n            for (let i = 0; i < messages.length; i++) {\n                const message = messages[i];\n                if (insertAboveMessageID.value === message.id) {\n                    messageElems.push(\n                        <div className={style.insertBox}>\n                            <div className={style.closeWrapper}>\n                                <div className={style.closePositioner}>\n                                    <Icon\n                                        type='delete'\n                                        title='Delete'\n                                        onClick={(): unknown => setInsertAboveMessageID(null)}\n                                    />\n                                </div>\n                            </div>\n                            <div className={style.commandBoxWrapper}>\n                                <CommandBox beforeMessage={i}/>\n                            </div>\n                        </div>\n                    );\n                }\n                messageElems.push(<Message\n                    convoID={convo.id}\n                    message={message}\n                    key={message.id}\n                    index={i}\n                    // I could use forwardRef here but don't want to pull in preact/compat\n                    elemRef={i === messages.length - 1 ? lastMessageElem : undefined}\n                />);\n            }\n        }\n        return messageElems;\n    }, [messages, convo?.id, insertAboveMessageID.value]);\n\n\n    return (\n        <div className={style.messages}>\n            <div className={style.messagesInner}>\n                {messageElems}\n            </div>\n        </div>\n    );\n};\n\nexport default Messages;\n","// extracted by mini-css-extract-plugin\nexport default {\"modal-bg\":\"modal-bg__m0HV5\",\"modalBg\":\"modal-bg__m0HV5\",\"fade\":\"fade__cQTz1\",\"modal-positioner\":\"modal-positioner__JC0aj\",\"modalPositioner\":\"modal-positioner__JC0aj\",\"modal\":\"modal__ulBpF\",\"popup\":\"popup__O7W1y\"};","import type {JSX, ComponentChildren} from 'preact';\n\nimport style from './style.scss';\n\nconst Modal = ({onClose, children}: {\n    onClose: (event: Event) => void,\n    children: ComponentChildren\n}): JSX.Element => (\n    <>\n        <div className={style.modalBg} onClick={onClose} />\n        <div className={style.modalPositioner}>\n            <div className={style.modal}>{children}</div>\n        </div>\n    </>\n);\n\nexport default Modal;\n","// extracted by mini-css-extract-plugin\nexport default {\"project-bar\":\"project-bar__jqnP4\",\"projectBar\":\"project-bar__jqnP4\",\"project-name\":\"project-name__uuERj\",\"projectName\":\"project-name__uuERj\",\"button\":\"button__MAT5s\",\"error\":\"error__vb_Q8\"};","import type {AppState} from '../util/store';\n\nexport default (state: AppState, projectName: string): void => {\n    state.projectName.value = projectName;\n};\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useState} from 'preact/hooks';\n\nimport Icon from '../Icon/Icon';\n\nimport loadStateAction from '../../actions/load-state';\nimport setProjectNameAction from '../../actions/set-project-name';\n\nimport saveState from '../../serialization/save-state';\nimport validate from '../../serialization/validate';\n\nimport saveToFile from '../../util/save-to-file';\nimport {useAppState, useAction} from '../../util/store';\n\nconst ProjectBar = (): JSX.Element => {\n    const {version, projectName, convos, chars} = useAppState();\n\n    const loadState = useAction(loadStateAction);\n    const setProjectName = useAction(setProjectNameAction);\n\n    const [error, setError] = useState<Error | null>(null);\n\n    const onInput = (event: Event): unknown => setProjectName((event.target as HTMLInputElement).value);\n\n    const onLoad = (): void => {\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.addEventListener('change', event => {\n            const files = (event.target as HTMLInputElement).files;\n            if (files?.length) {\n                const reader = new FileReader();\n                reader.addEventListener('load', () => {\n                    try {\n                        const result = JSON.parse(reader.result as string) as unknown;\n                        const errors = validate(result);\n                        if (errors.length > 0) throw new Error('Invalid JSON');\n                        // eslint-disable-next-line max-len\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-argument\n                        loadState(result as any);\n                    } catch (error) {\n                        setError(error as Error);\n                    }\n                });\n                reader.readAsText(files[0]);\n            }\n        });\n        input.click();\n    };\n\n    const onSave = (): void =>\n        saveToFile(\n            `${projectName.value}.json`,\n            saveState({\n                version: version.value,\n                projectName: projectName.value,\n                convos: Array.from(Object.values(convos.value)),\n                chars: chars.value\n            }));\n\n    return (\n        <div className={style.projectBar}>\n            <input\n                className={style.projectName}\n                type=\"text\"\n                value={projectName}\n                onInput={onInput}\n            />\n            <Icon type='save' title='Save' onClick={onSave} />\n            <Icon type='load' title='Load' onClick={onLoad} />\n            {error ?\n                <div className={style.error}>\n                    <span className={style.errorMessage}>{error.message}</span>\n                    <Icon type='delete' title='Close' onClick={(): void => setError(null)} />\n                </div> :\n                null\n            }\n        </div>\n    );\n};\n\nexport default ProjectBar;\n","// extracted by mini-css-extract-plugin\nexport default {\"row\":\"row__etbb0\",\"label\":\"label__wCXFO\"};","import type {AppState} from '../util/store';\nimport type {ID, Convo} from '../util/datatypes';\n\nexport default (state: AppState, oldID: ID, newID: ID): void => {\n    const newConvos: Record<ID, Convo> = {};\n    for (const convo of Object.values(state.convos.value)) {\n        let changed = false;\n        let {messages} = convo;\n        for (let i = 0; i < messages.length; i++) {\n            const message = messages[i];\n            if (message.authorID !== oldID) continue;\n\n            // Don't clone convo.messages until we know we need to modify it\n            if (!changed) {\n                changed = true;\n                messages = messages.slice(0);\n            }\n\n            messages[i] = {...message, authorID: newID};\n        }\n\n        newConvos[convo.id] = changed ? {...convo, messages} : convo;\n    }\n    state.convos.value = newConvos;\n};\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useState} from 'preact/hooks';\n\nimport deleteCharacterAction from '../../actions/delete-character';\nimport replaceCharacterAction from '../../actions/replace-character';\nimport setToBeReplacedCharacterIDAction from '../../actions/set-to-be-replaced-character-id';\n\nimport {useAppState, useAction} from '../../util/store';\n\nconst ReplaceCharacterModal = (): JSX.Element => {\n    const {chars, toBeReplacedCharID} = useAppState();\n\n    const deleteCharacter = useAction(deleteCharacterAction);\n    const replaceCharacter = useAction(replaceCharacterAction);\n    const setToBeReplacedCharacterID = useAction(setToBeReplacedCharacterIDAction);\n\n    const [selectedCharacterID, setSelectedCharacterID] = useState<string | undefined>(undefined);\n\n    const replaceCharacterCallback = (): void => {\n        if (!toBeReplacedCharID.value || !selectedCharacterID) return;\n        replaceCharacter(toBeReplacedCharID.value, selectedCharacterID);\n        deleteCharacter(toBeReplacedCharID.value, selectedCharacterID);\n        setToBeReplacedCharacterID(null);\n    };\n\n    return (\n        <div className={style.replaceCharacter}>\n            <div className={style.row}>\n                <div className={style.label}>\n                    Replace character <span className={style.oldCharacterName}> with:</span>\n                </div>\n                <select\n                    onChange={(event): unknown => setSelectedCharacterID((event.target as HTMLSelectElement).value)}\n                    value={selectedCharacterID ?? undefined}>\n                    {chars.value.map(char => char.id === toBeReplacedCharID.value ?\n                        null :\n                        <option value={char.id}>{char.name}</option>)}\n                </select>\n            </div>\n            <div>\n                <button\n                    onClick={replaceCharacterCallback}\n                    disabled={typeof selectedCharacterID === 'undefined'}\n                >Replace</button>\n            </div>\n        </div>\n    );\n};\n\nexport default ReplaceCharacterModal;\n","import style from './style.scss';\n\nimport type {JSX} from 'preact';\nimport {useComputed} from '@preact/signals';\nimport {useMemo} from 'preact/hooks';\n\nimport CommandBox from '../CommandBox/CommandBox';\nimport CharacterList from '../CharacterList/CharacterList';\nimport CharacterSettingsModal from '../CharacterSettingsModal/CharacterSettingsModal';\nimport ConvoList from '../ConvoList/ConvoList';\nimport ExportConvoModal from '../ExportConvoModal/ExportConvoModal';\nimport Messages from '../Messages/Messages';\nimport Modal from '../Modal/Modal';\nimport ProjectBar from '../ProjectBar/ProjectBar';\nimport ReplaceCharacterModal from '../ReplaceCharacterModal/ReplaceCharacterModal';\n\nimport setEditedCharacterIDAction from '../../actions/set-edited-character-id';\nimport setToBeReplacedCharacterIDAction from '../../actions/set-to-be-replaced-character-id';\nimport setExportedConvoIDAction from '../../actions/set-exported-convo-id';\n\nimport {useAppState, useAction} from '../../util/store';\n\nconst App = (): JSX.Element => {\n    const {convos, currentConvoID, editedCharID, toBeReplacedCharID, exportedConvoID} = useAppState();\n    const setEditedCharacterID = useAction(setEditedCharacterIDAction);\n    const setToBeReplacedCharacterID = useAction(setToBeReplacedCharacterIDAction);\n    const setExportedConvoID = useAction(setExportedConvoIDAction);\n    const projectBarPane = useMemo(() => (\n        <div className={style.projectBarPane}>\n            <ProjectBar />\n        </div>\n    ), []);\n\n    const convosPane = useMemo(() => (\n        <div className={style.convosPane}>\n            <ConvoList />\n        </div>\n    ), []);\n\n    const commandBoxPane = useMemo(() => (\n        <div className={style.commandBoxPane}>\n            <CommandBox />\n        </div>\n    ), []);\n\n    const charactersPane = useMemo(() => (\n        <div className={style.charactersPane}>\n            <CharacterList />\n        </div>\n    ), []);\n\n    const modal = useComputed(() => (\n        <>\n            {editedCharID.value !== null ?\n                <Modal onClose={(): unknown => setEditedCharacterID(null)}>\n                    <CharacterSettingsModal />\n                </Modal> :\n                null}\n            {toBeReplacedCharID.value !== null ?\n                <Modal onClose={(): unknown => setToBeReplacedCharacterID(null)}>\n                    <ReplaceCharacterModal />\n                </Modal> :\n                null}\n            {exportedConvoID.value !== null ?\n                <Modal onClose={(): unknown => setExportedConvoID(null)}>\n                    <ExportConvoModal />\n                </Modal> :\n                null}\n        </>\n    )).value;\n\n    return (\n        <div className={style.app}>\n            {projectBarPane}\n            <div className={style.appPane}>\n                {convosPane}\n                <div className={style.messagesPane}>\n                    <Messages convo={currentConvoID.value !== null ? convos.value[currentConvoID.value] : undefined} />\n                    {commandBoxPane}\n                </div>\n                <div className={style.charactersPane}>\n                    {charactersPane}\n                </div>\n            </div>\n            {modal}\n        </div>\n    );\n};\n\nexport default App;\n","import './forms.scss';\n\nimport {render, JSX} from 'preact';\n\nimport App from './components/App/App';\n\nimport {AppContext, store} from './util/store';\n\n\nconst Main = (): JSX.Element => (\n    <AppContext.Provider value={store}>\n        <App />\n    </AppContext.Provider>\n);\n\nrender(<Main />, document.body);\n"],"names":["__webpack_require__","moduleId","cachedModule","__webpack_module_cache__","undefined","exports","module","__webpack_modules__","call","classNames","classes","i","arguments","length","arg","appendClass","parseValue","Array","isArray","apply","toString","Object","prototype","includes","key","hasOwn","value","newClass","hasOwnProperty","default","__createBinding","this","create","o","m","k","k2","defineProperty","enumerable","get","__exportStar","p","require","pattern","s","matches","match","year","parseInt","month","day","hour","minute","second","n","isLeapYear","MONTH_LENGTHS","maxDay","isRefForm","schema","isEnumForm","isElementsForm","isPropertiesForm","isValuesForm","isDiscriminatorForm","__rest","e","t","indexOf","getOwnPropertySymbols","propertyIsEnumerable","isSchema","isValidSchema","isTypeForm","isEmptyForm","rest","keys","root","definitions","subSchema","values","ref","enum","Set","size","elements","properties","optionalProperties","mapping","nullable","discriminator","VALID_FORMS","VALID_TYPES","data","obj","metadata","type","enum_","additionalProperties","formSignature","formOk","validForm","every","index","elem","validateWithState","state","instance","parentTag","schema_1","schemaTokens","config","maxDepth","MaxDepthExceededError","push","pop","pushSchemaToken","pushError","validateInt","rfc3339_1","popSchemaToken","subInstance","entries","pushInstanceToken","popInstanceToken","name","tag","min","max","Number","isInteger","token","instanceTokens","errors","instancePath","schemaPath","maxErrors","MaxErrorsReachedError","__importDefault","mod","__esModule","validate","Error","err","v","l","u","parentNode","removeChild","y","r","f","children","defaultProps","d","props","__k","__","__b","__e","__d","__c","constructor","__v","__i","__u","vnode","g","b","context","base","w","x","__r","debounceRendering","c","a","sort","shift","__P","L","__n","ownerSVGElement","M","C","h","_","P","z","S","nextSibling","String","H","N","insertBefore","I","setProperty","test","T","style","cssText","replace","toLowerCase","slice","Date","now","addEventListener","D","A","removeEventListener","removeAttribute","setAttribute","event","$","contextType","__E","render","O","sub","__h","_sb","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","forEach","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","j","diffed","some","localName","nodeType","document","createTextNode","createElementNS","createElement","is","childNodes","attributes","__html","innerHTML","current","unmount","componentWillUnmount","q","firstChild","F","Consumer","Provider","splice","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","Promise","then","bind","resolve","setTimeout","getter","definition","prop","__H","__V","B","__N","filter","clearTimeout","cancelAnimationFrame","requestAnimationFrame","U","E","useSignal","__$f","__$u","peek","useComputed","Symbol","for","brand","subscribe","valueOf","toJSON","set","displayName","defineProperties","configurable","__np","randomArr","Uint32Array","crypto","getRandomValues","characterName","batch","newCharID","id","chars","color","currentCharID","newConvo","messages","convos","convoIDs","currentConvoID","messageContents","beforeMessageIndex","createConvo","createCharacter","convo","newMessages","newMessage","authorID","contents","convoID","projectName","version","JSON","stringify","json","convosByID","map","store","loadStore","defaultStore","signal","editedMessageID","editedConvoID","editedCharID","exportedConvoID","toBeReplacedCharID","insertAboveMessageID","exportConvoSettings","wrapTextEnabled","wrapTextLength","justifyEnabled","justifySide","storedStore","localStorage","getItem","parsedStore","parse","oldConvos","removeItem","loadLegacyState","autosave","parsedAutosave","loadState","effect","savedState","saveState","setItem","AppContext","createContext","useAppState","useContext","useAction","func","useMemo","CommandBox","beforeMessage","createCharacterAction","createMessage","createMessageAction","editMessage","editMessageAction","setCurrentCharacterID","setCurrentCharacterIDAction","tabResults","useRef","setValue","useState","className","onKeyPress","code","shiftKey","preventDefault","command","colonMatch","exec","authorName","authorNameLower","char","find","character","replaceMatch","split","join","onInput","target","onKeyDown","characters","startsWith","Icon","title","onClick","disabled","replacementID","charIndex","findIndex","CharacterListing","active","onEdit","onDelete","handleClick","useCallback","handleEdit","handleDelete","colorToHex","CharacterList","deleteCharacter","deleteCharacterAction","setEditedCharacterID","setEditedCharacterIDAction","setToBeReplacedCharacterID","setToBeReplacedCharacterIDAction","charsInConvo","charsNotInConvo","charIDsInConvo","currentConvo","message","add","has","onClickCharacter","onEditCharacter","onDeleteCharacter","characterList","Fragment","divider","characterSublist","charID","newCharData","CharacterSettingsModal","updateCharacter","updateCharacterAction","onChange","newConvos","convoIndex","existingID","ConvoListing","setConvoName","setConvoNameAction","setCurrentConvoID","setCurrentConvoIDAction","setEditedConvoID","setEditedConvoIDAction","setExportedConvoID","setExportedConvoIDAction","deleteConvo","deleteConvoAction","edited","prevEdited","editedConvoRef","useEffect","focus","onBlur","stopPropagation","ConvoList","createConvoAction","convoListings","createConvoCallback","enabled","side","saveToFile","url","URL","createObjectURL","Blob","href","download","click","window","revokeObjectURL","ExportConvoModal","setWrapTextEnabled","setWrapTextEnabledAction","setWrapTextLength","setWrapTextLengthAction","setJustifyEnabled","setJustifyEnabledAction","setJustifySide","setJustifySideAction","onChangeJustifySide","exportModal","exportTitle","row","checked","isFinite","onExport","longestCharNameLength","from","reduce","prev","Math","lines","charName","start","justification","repeat","line","regex","lastIndex","trimEnd","convoStr","SearchableMenu","items","onDismiss","onClickItem","query","setQuery","searchRef","onFocusOut","currentTarget","contains","relatedTarget","top","left","maxHeight","onfocusout","tabIndex","item","messageIndex","Message","elemRef","deleteMessage","deleteMessageAction","replaceMessageAuthor","replaceMessageAuthorAction","setEditedMessage","setEditedMessageAction","setInsertAboveMessageID","setInsertAboveMessageIDAction","editable","prevEditable","contentsRef","authorMenu","setAuthorMenu","onReplaceAuthor","newAuthorID","onDismissAuthorMenu","authorMenuElement","author","height","getBoundingClientRect","prevValue","messageEditWrapper","messageEditArea","buttons","Messages","lastMessageElem","prevMessagesRef","prevMessages","scrollIntoView","messageElems","Modal","onClose","ProjectBar","loadStateAction","setProjectName","setProjectNameAction","error","setError","projectBar","onSave","onLoad","input","files","reader","FileReader","result","readAsText","errorMessage","oldID","newID","changed","ReplaceCharacterModal","replaceCharacter","replaceCharacterAction","selectedCharacterID","setSelectedCharacterID","label","oldCharacterName","replaceCharacterCallback","App","projectBarPane","convosPane","commandBoxPane","charactersPane","modal","app","appPane","messagesPane","Main","body"],"sourceRoot":""}